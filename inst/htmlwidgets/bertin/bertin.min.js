!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).bertin={})}(this,(function(t){"use strict";function e(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function n(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function i(t){let i,s,o;function a(t,e,n=0,r=t.length){if(n<r){if(0!==i(e,e))return r;do{const i=n+r>>>1;s(t[i],e)<0?n=i+1:r=i}while(n<r)}return n}return 2!==t.length?(i=e,s=(n,i)=>e(t(n),i),o=(e,n)=>t(e)-n):(i=t===e||t===n?t:r,s=t,o=t),{left:a,center:function(t,e,n=0,i=t.length){const r=a(t,e,n,i-1);return r>n&&o(t[r-1],e)>-o(t[r],e)?r-1:r},right:function(t,e,n=0,r=t.length){if(n<r){if(0!==i(e,e))return r;do{const i=n+r>>>1;s(t[i],e)<=0?n=i+1:r=i}while(n<r)}return n}}}function r(){return 0}function s(t){return null===t?NaN:+t}function*o(t,e){if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(yield e);else{let n=-1;for(let i of t)null!=(i=e(i,++n,t))&&(i=+i)>=i&&(yield i)}}const a=i(e),l=a.right,c=a.left,h=i(s).center;var u=l;const f=g(y),d=g((function(t){const e=y(t);return(t,n,i,r,s)=>{e(t,n,(i<<=2)+0,(r<<=2)+0,s<<=2),e(t,n,i+1,r+1,s),e(t,n,i+2,r+2,s),e(t,n,i+3,r+3,s)}}));function g(t){return function(e,n,i=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((i=+i)>=0))throw new RangeError("invalid ry");let{data:r,width:s,height:o}=e;if(!((s=Math.floor(s))>=0))throw new RangeError("invalid width");if(!((o=Math.floor(void 0!==o?o:r.length/s))>=0))throw new RangeError("invalid height");if(!s||!o||!n&&!i)return e;const a=n&&t(n),l=i&&t(i),c=r.slice();return a&&l?(p(a,c,r,s,o),p(a,r,c,s,o),p(a,c,r,s,o),_(l,r,c,s,o),_(l,c,r,s,o),_(l,r,c,s,o)):a?(p(a,r,c,s,o),p(a,c,r,s,o),p(a,r,c,s,o)):l&&(_(l,r,c,s,o),_(l,c,r,s,o),_(l,r,c,s,o)),e}}function p(t,e,n,i,r){for(let s=0,o=i*r;s<o;)t(e,n,s,s+=i,1)}function _(t,e,n,i,r){for(let s=0,o=i*r;s<i;++s)t(e,n,s,s+o,i)}function y(t){const e=Math.floor(t);if(e===t)return function(t){const e=2*t+1;return(n,i,r,s,o)=>{if(!((s-=o)>=r))return;let a=t*i[r];const l=o*t;for(let t=r,e=r+l;t<e;t+=o)a+=i[Math.min(s,t)];for(let t=r,c=s;t<=c;t+=o)a+=i[Math.min(s,t+l)],n[t]=a/e,a-=i[Math.max(r,t-l)]}}(t);const n=t-e,i=2*t+1;return(t,r,s,o,a)=>{if(!((o-=a)>=s))return;let l=e*r[s];const c=a*e,h=c+a;for(let t=s,e=s+c;t<e;t+=a)l+=r[Math.min(o,t)];for(let e=s,u=o;e<=u;e+=a)l+=r[Math.min(o,e+c)],t[e]=(l+n*(r[Math.max(s,e-h)]+r[Math.min(o,e+h)]))/i,l-=r[Math.max(s,e-c)]}}function m(t,e){let n=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&++n;else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&(r=+r)>=r&&++n}return n}function x(t){return 0|t.length}function b(t){return!(t>0)}function v(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function M(t,e){let n,i=0,r=0,s=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(n=e-r,r+=n/++i,s+=n*(e-r));else{let o=-1;for(let a of t)null!=(a=e(a,++o,t))&&(a=+a)>=a&&(n=a-r,r+=n/++i,s+=n*(a-r))}if(i>1)return s/(i-1)}function w(t,e){const n=M(t,e);return n?Math.sqrt(n):n}function E(t,e){let n,i;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=i=e):(n>e&&(n=e),i<e&&(i=e)));else{let r=-1;for(let s of t)null!=(s=e(s,++r,t))&&(void 0===n?s>=s&&(n=i=s):(n>s&&(n=s),i<s&&(i=s)))}return[n,i]}class N{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let i=0;i<this._n&&i<32;i++){const r=e[i],s=t+r,o=Math.abs(t)<Math.abs(r)?t-(s-r):r-(s-t);o&&(e[n++]=o),t=s}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,i,r=this._n,s=0;if(r>0){for(s=t[--r];r>0&&(e=s,n=t[--r],s=e+n,i=n-(s-e),!i););r>0&&(i<0&&t[r-1]<0||i>0&&t[r-1]>0)&&(n=2*i,e=s+n,n==e-s&&(s=e))}return s}}class I extends Map{constructor(t,e=T){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(C(this,t))}has(t){return super.has(C(this,t))}set(t,e){return super.set(O(this,t),e)}delete(t){return super.delete(k(this,t))}}class S extends Set{constructor(t,e=T){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const e of t)this.add(e)}has(t){return super.has(C(this,t))}add(t){return super.add(O(this,t))}delete(t){return super.delete(k(this,t))}}function C({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function O({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function k({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function T(t){return null!==t&&"object"==typeof t?t.valueOf():t}function A(t){return t}function R(t,...e){return q(t,A,A,e)}function L(t,...e){return q(t,Array.from,A,e)}function P(t,e){for(let n=1,i=e.length;n<i;++n)t=t.flatMap((t=>t.pop().map((([e,n])=>[...t,e,n]))));return t}function D(t,e,...n){return q(t,A,e,n)}function z(t,e,...n){return q(t,Array.from,e,n)}function F(t,...e){return q(t,A,G,e)}function G(t){if(1!==t.length)throw new Error("duplicate key");return t[0]}function q(t,e,n,i){return function t(r,s){if(s>=i.length)return n(r);const o=new I,a=i[s++];let l=-1;for(const t of r){const e=a(t,++l,r),n=o.get(e);n?n.push(t):o.set(e,[t])}for(const[e,n]of o)o.set(e,t(n,s));return e(o)}(t,0)}function j(t,e){return Array.from(e,(e=>t[e]))}function B(t,...e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&2!==n.length||e.length>1){const i=Uint32Array.from(t,((t,e)=>e));return e.length>1?(e=e.map((e=>t.map(e))),i.sort(((t,n)=>{for(const i of e){const e=Y(i[t],i[n]);if(e)return e}}))):(n=t.map(n),i.sort(((t,e)=>Y(n[t],n[e])))),j(t,i)}return t.sort(U(n))}function U(t=e){if(t===e)return Y;if("function"!=typeof t)throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||0===i?i:(0===t(n,n))-(0===t(e,e))}}function Y(t,e){return(null==t||!(t>=t))-(null==e||!(e>=e))||(t<e?-1:t>e?1:0)}var W=Array.prototype.slice;function $(t){return()=>t}var X=Math.sqrt(50),V=Math.sqrt(10),H=Math.sqrt(2);function Z(t,e,n){var i,r,s,o,a=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((i=e<t)&&(r=t,t=e,e=r),0===(o=J(t,e,n))||!isFinite(o))return[];if(o>0){let n=Math.round(t/o),i=Math.round(e/o);for(n*o<t&&++n,i*o>e&&--i,s=new Array(r=i-n+1);++a<r;)s[a]=(n+a)*o}else{o=-o;let n=Math.round(t*o),i=Math.round(e*o);for(n/o<t&&++n,i/o>e&&--i,s=new Array(r=i-n+1);++a<r;)s[a]=(n+a)/o}return i&&s.reverse(),s}function J(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),s=i/Math.pow(10,r);return r>=0?(s>=X?10:s>=V?5:s>=H?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(s>=X?10:s>=V?5:s>=H?2:1)}function Q(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),s=i/r;return s>=X?r*=10:s>=V?r*=5:s>=H&&(r*=2),e<t?-r:r}function K(t,e,n){let i;for(;;){const r=J(t,e,n);if(r===i||0===r||!isFinite(r))return[t,e];r>0?(t=Math.floor(t/r)*r,e=Math.ceil(e/r)*r):r<0&&(t=Math.ceil(t*r)/r,e=Math.floor(e*r)/r),i=r}}function tt(t){return Math.ceil(Math.log(m(t))/Math.LN2)+1}function et(){var t=A,e=E,n=tt;function i(i){Array.isArray(i)||(i=Array.from(i));var r,s,o,a=i.length,l=new Array(a);for(r=0;r<a;++r)l[r]=t(i[r],r,i);var c=e(l),h=c[0],f=c[1],d=n(l,h,f);if(!Array.isArray(d)){const t=f,n=+d;if(e===E&&([h,f]=K(h,f,n)),(d=Z(h,f,n))[0]<=h&&(o=J(h,f,n)),d[d.length-1]>=f)if(t>=f&&e===E){const t=J(h,f,n);isFinite(t)&&(t>0?f=(Math.floor(f/t)+1)*t:t<0&&(f=(Math.ceil(f*-t)+1)/-t))}else d.pop()}for(var g=d.length;d[0]<=h;)d.shift(),--g;for(;d[g-1]>f;)d.pop(),--g;var p,_=new Array(g+1);for(r=0;r<=g;++r)(p=_[r]=[]).x0=r>0?d[r-1]:h,p.x1=r<g?d[r]:f;if(isFinite(o)){if(o>0)for(r=0;r<a;++r)null!=(s=l[r])&&h<=s&&s<=f&&_[Math.min(g,Math.floor((s-h)/o))].push(i[r]);else if(o<0)for(r=0;r<a;++r)if(null!=(s=l[r])&&h<=s&&s<=f){const t=Math.floor((h-s)*o);_[Math.min(g,t+(d[t]<=s))].push(i[r])}}else for(r=0;r<a;++r)null!=(s=l[r])&&h<=s&&s<=f&&_[u(d,s,0,g)].push(i[r]);return _}return i.value=function(e){return arguments.length?(t="function"==typeof e?e:$(e),i):t},i.domain=function(t){return arguments.length?(e="function"==typeof t?t:$([t[0],t[1]]),i):e},i.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?$(W.call(t)):$(t),i):n},i}function nt(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&(n<r||void 0===n&&r>=r)&&(n=r)}return n}function it(t,e){let n,i=-1,r=-1;if(void 0===e)for(const e of t)++r,null!=e&&(n<e||void 0===n&&e>=e)&&(n=e,i=r);else for(let s of t)null!=(s=e(s,++r,t))&&(n<s||void 0===n&&s>=s)&&(n=s,i=r);return i}function rt(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&(n>r||void 0===n&&r>=r)&&(n=r)}return n}function st(t,e){let n,i=-1,r=-1;if(void 0===e)for(const e of t)++r,null!=e&&(n>e||void 0===n&&e>=e)&&(n=e,i=r);else for(let s of t)null!=(s=e(s,++r,t))&&(n>s||void 0===n&&s>=s)&&(n=s,i=r);return i}function ot(t,e,n=0,i=t.length-1,r){for(r=void 0===r?Y:U(r);i>n;){if(i-n>600){const s=i-n+1,o=e-n+1,a=Math.log(s),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1);ot(t,e,Math.max(n,Math.floor(e-o*l/s+c)),Math.min(i,Math.floor(e+(s-o)*l/s+c)),r)}const s=t[e];let o=n,a=i;for(at(t,n,e),r(t[i],s)>0&&at(t,n,i);o<a;){for(at(t,o,a),++o,--a;r(t[o],s)<0;)++o;for(;r(t[a],s)>0;)--a}0===r(t[n],s)?at(t,n,a):(++a,at(t,a,i)),a<=e&&(n=a+1),e<=a&&(i=a-1)}return t}function at(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function lt(t,n=e){let i,r=!1;if(1===n.length){let s;for(const o of t){const t=n(o);(r?e(t,s)>0:0===e(t,t))&&(i=o,s=t,r=!0)}}else for(const e of t)(r?n(e,i)>0:0===n(e,e))&&(i=e,r=!0);return i}function ct(t,e,n){if(i=(t=Float64Array.from(o(t,n))).length){if((e=+e)<=0||i<2)return rt(t);if(e>=1)return nt(t);var i,r=(i-1)*e,s=Math.floor(r),a=nt(ot(t,s).subarray(0,s+1));return a+(rt(t.subarray(s+1))-a)*(r-s)}}function ht(t,e,n=s){if(i=t.length){if((e=+e)<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,o=Math.floor(r),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(r-o)}}function ut(t,e,n){if(i=(t=Float64Array.from(o(t,n))).length){if((e=+e)<=0||i<2)return st(t);if(e>=1)return it(t);var i,r=Math.floor((i-1)*e),s=ot(Uint32Array.from(t,((t,e)=>e)),r,0,i-1,((e,n)=>Y(t[e],t[n])));return lt(s.subarray(0,r+1),(e=>t[e]))}}function ft(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function dt(t,e){return[t,e]}function gt(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),s=new Array(r);++i<r;)s[i]=t+i*n;return s}function pt(t,n=e){if(1===n.length)return st(t,n);let i,r=-1,s=-1;for(const e of t)++s,(r<0?0===n(e,e):n(e,i)<0)&&(i=e,r=s);return r}var _t=yt(Math.random);function yt(t){return function(e,n=0,i=e.length){let r=i-(n=+n);for(;r;){const i=t()*r--|0,s=e[r+n];e[r+n]=e[i+n],e[i+n]=s}return e}}function mt(t,e){let n=0;if(void 0===e)for(let e of t)(e=+e)&&(n+=e);else{let i=-1;for(let r of t)(r=+e(r,++i,t))&&(n+=r)}return n}function xt(t){if(!(r=t.length))return[];for(var e=-1,n=rt(t,bt),i=new Array(n);++e<n;)for(var r,s=-1,o=i[e]=new Array(r);++s<r;)o[s]=t[s][e];return i}function bt(t){return t.length}function vt(t){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(t).reverse()}function Mt(t){return t instanceof S?t:new S(t)}function wt(t,e){const n=t[Symbol.iterator](),i=new Set;for(const t of e){const e=Et(t);if(i.has(e))continue;let r,s;for(;({value:r,done:s}=n.next());){if(s)return!1;const t=Et(r);if(i.add(t),Object.is(e,t))break}}return!0}function Et(t){return null!==t&&"object"==typeof t?t.valueOf():t}var Nt=Object.freeze({__proto__:null,bisect:u,bisectRight:l,bisectLeft:c,bisectCenter:h,ascending:e,bisector:i,blur:function(t,e){if(!((e=+e)>=0))throw new RangeError("invalid r");let n=t.length;if(!((n=Math.floor(n))>=0))throw new RangeError("invalid length");if(!n||!e)return t;const i=y(e),r=t.slice();return i(t,r,0,n,1),i(r,t,0,n,1),i(t,r,0,n,1),t},blur2:f,blurImage:d,count:m,cross:function(...t){const e="function"==typeof t[t.length-1]&&function(t){return e=>t(...e)}(t.pop()),n=(t=t.map(v)).map(x),i=t.length-1,r=new Array(i+1).fill(0),s=[];if(i<0||n.some(b))return s;for(;;){s.push(r.map(((e,n)=>t[n][e])));let o=i;for(;++r[o]===n[o];){if(0===o)return e?s.map(e):s;r[o--]=0}}},cumsum:function(t,e){var n=0,i=0;return Float64Array.from(t,void 0===e?t=>n+=+t||0:r=>n+=+e(r,i++,t)||0)},descending:n,deviation:w,extent:E,Adder:N,fsum:function(t,e){const n=new N;if(void 0===e)for(let e of t)(e=+e)&&n.add(e);else{let i=-1;for(let r of t)(r=+e(r,++i,t))&&n.add(r)}return+n},fcumsum:function(t,e){const n=new N;let i=-1;return Float64Array.from(t,void 0===e?t=>n.add(+t||0):r=>n.add(+e(r,++i,t)||0))},group:R,flatGroup:function(t,...e){return P(L(t,...e),e)},flatRollup:function(t,e,...n){return P(z(t,e,...n),n)},groups:L,index:F,indexes:function(t,...e){return q(t,Array.from,G,e)},rollup:D,rollups:z,groupSort:function(t,n,i){return(2!==n.length?B(D(t,n,i),(([t,n],[i,r])=>e(n,r)||e(t,i))):B(R(t,i),(([t,i],[r,s])=>n(i,s)||e(t,r)))).map((([t])=>t))},bin:et,histogram:et,thresholdFreedmanDiaconis:function(t,e,n){return Math.ceil((n-e)/(2*(ct(t,.75)-ct(t,.25))*Math.pow(m(t),-1/3)))},thresholdScott:function(t,e,n){return Math.ceil((n-e)*Math.cbrt(m(t))/(3.49*w(t)))},thresholdSturges:tt,max:nt,maxIndex:it,mean:function(t,e){let n=0,i=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(++n,i+=e);else{let r=-1;for(let s of t)null!=(s=e(s,++r,t))&&(s=+s)>=s&&(++n,i+=s)}if(n)return i/n},median:function(t,e){return ct(t,.5,e)},medianIndex:function(t,e){return ut(t,.5,e)},merge:ft,min:rt,minIndex:st,mode:function(t,e){const n=new I;if(void 0===e)for(let e of t)null!=e&&e>=e&&n.set(e,(n.get(e)||0)+1);else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&r>=r&&n.set(r,(n.get(r)||0)+1)}let i,r=0;for(const[t,e]of n)e>r&&(r=e,i=t);return i},nice:K,pairs:function(t,e=dt){const n=[];let i,r=!1;for(const s of t)r&&n.push(e(i,s)),i=s,r=!0;return n},permute:j,quantile:ct,quantileIndex:ut,quantileSorted:ht,quickselect:ot,range:gt,rank:function(t,n=e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");let i=Array.from(t);const r=new Float64Array(i.length);2!==n.length&&(i=i.map(n),n=e);const s=(t,e)=>n(i[t],i[e]);let o,a;return Uint32Array.from(i,((t,e)=>e)).sort(n===e?(t,e)=>Y(i[t],i[e]):U(s)).forEach(((t,e)=>{const n=s(t,void 0===o?t:o);n>=0?((void 0===o||n>0)&&(o=t,a=e),r[t]=a):r[t]=NaN})),r},least:function(t,n=e){let i,r=!1;if(1===n.length){let s;for(const o of t){const t=n(o);(r?e(t,s)<0:0===e(t,t))&&(i=o,s=t,r=!0)}}else for(const e of t)(r?n(e,i)<0:0===n(e,e))&&(i=e,r=!0);return i},leastIndex:pt,greatest:lt,greatestIndex:function(t,n=e){if(1===n.length)return it(t,n);let i,r=-1,s=-1;for(const e of t)++s,(r<0?0===n(e,e):n(e,i)>0)&&(i=e,r=s);return r},scan:function(t,e){const n=pt(t,e);return n<0?void 0:n},shuffle:_t,shuffler:yt,sum:mt,ticks:Z,tickIncrement:J,tickStep:Q,transpose:xt,variance:M,zip:function(){return xt(arguments)},every:function(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const i of t)if(!e(i,++n,t))return!1;return!0},some:function(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const i of t)if(e(i,++n,t))return!0;return!1},filter:function(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");const n=[];let i=-1;for(const r of t)e(r,++i,t)&&n.push(r);return n},map:function(t,e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof e)throw new TypeError("mapper is not a function");return Array.from(t,((n,i)=>e(n,i,t)))},reduce:function(t,e,n){if("function"!=typeof e)throw new TypeError("reducer is not a function");const i=t[Symbol.iterator]();let r,s,o=-1;if(arguments.length<3){if(({done:r,value:n}=i.next()),r)return;++o}for(;({done:r,value:s}=i.next()),!r;)n=e(n,s,++o,t);return n},reverse:vt,sort:B,difference:function(t,...e){t=new S(t);for(const n of e)for(const e of n)t.delete(e);return t},disjoint:function(t,e){const n=e[Symbol.iterator](),i=new S;for(const e of t){if(i.has(e))return!1;let t,r;for(;({value:t,done:r}=n.next())&&!r;){if(Object.is(e,t))return!1;i.add(t)}}return!0},intersection:function(t,...e){t=new S(t),e=e.map(Mt);t:for(const n of t)for(const i of e)if(!i.has(n)){t.delete(n);continue t}return t},subset:function(t,e){return wt(e,t)},superset:wt,union:function(...t){const e=new S;for(const n of t)for(const t of n)e.add(t);return e},InternMap:I,InternSet:S}),It=1e-6,St=1e-12,Ct=Math.PI,Ot=Ct/2,kt=Ct/4,Tt=2*Ct,At=180/Ct,Rt=Ct/180,Lt=Math.abs,Pt=Math.atan,Dt=Math.atan2,zt=Math.cos,Ft=Math.ceil,Gt=Math.exp,qt=Math.hypot,jt=Math.log,Bt=Math.pow,Ut=Math.sin,Yt=Math.sign||function(t){return t>0?1:t<0?-1:0},Wt=Math.sqrt,$t=Math.tan;function Xt(t){return t>1?0:t<-1?Ct:Math.acos(t)}function Vt(t){return t>1?Ot:t<-1?-Ot:Math.asin(t)}function Ht(t){return(t=Ut(t/2))*t}function Zt(){}function Jt(t,e){t&&Kt.hasOwnProperty(t.type)&&Kt[t.type](t,e)}var Qt={Feature:function(t,e){Jt(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)Jt(n[i].geometry,e)}},Kt={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){te(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)te(n[i],e,0)},Polygon:function(t,e){ee(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)ee(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)Jt(n[i],e)}};function te(t,e,n){var i,r=-1,s=t.length-n;for(e.lineStart();++r<s;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function ee(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)te(t[n],e,1);e.polygonEnd()}function ne(t,e){t&&Qt.hasOwnProperty(t.type)?Qt[t.type](t,e):Jt(t,e)}var ie,re,se,oe,ae,le,ce,he,ue,fe,de,ge,pe,_e,ye,me,xe=new N,be=new N,ve={point:Zt,lineStart:Zt,lineEnd:Zt,polygonStart:function(){xe=new N,ve.lineStart=Me,ve.lineEnd=we},polygonEnd:function(){var t=+xe;be.add(t<0?Tt+t:t),this.lineStart=this.lineEnd=this.point=Zt},sphere:function(){be.add(Tt)}};function Me(){ve.point=Ee}function we(){Ne(ie,re)}function Ee(t,e){ve.point=Ne,ie=t,re=e,se=t*=Rt,oe=zt(e=(e*=Rt)/2+kt),ae=Ut(e)}function Ne(t,e){var n=(t*=Rt)-se,i=n>=0?1:-1,r=i*n,s=zt(e=(e*=Rt)/2+kt),o=Ut(e),a=ae*o,l=oe*s+a*zt(r),c=a*i*Ut(r);xe.add(Dt(c,l)),se=t,oe=s,ae=o}function Ie(t){return be=new N,ne(t,ve),2*be}function Se(t){return[Dt(t[1],t[0]),Vt(t[2])]}function Ce(t){var e=t[0],n=t[1],i=zt(n);return[i*zt(e),i*Ut(e),Ut(n)]}function Oe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ke(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Te(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Ae(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Re(t){var e=Wt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Le,Pe,De,ze,Fe,Ge,qe,je,Be,Ue,Ye,We,$e,Xe,Ve,He,Ze={point:Je,lineStart:Ke,lineEnd:tn,polygonStart:function(){Ze.point=en,Ze.lineStart=nn,Ze.lineEnd=rn,_e=new N,ve.polygonStart()},polygonEnd:function(){ve.polygonEnd(),Ze.point=Je,Ze.lineStart=Ke,Ze.lineEnd=tn,xe<0?(le=-(he=180),ce=-(ue=90)):_e>It?ue=90:_e<-1e-6&&(ce=-90),me[0]=le,me[1]=he},sphere:function(){le=-(he=180),ce=-(ue=90)}};function Je(t,e){ye.push(me=[le=t,he=t]),e<ce&&(ce=e),e>ue&&(ue=e)}function Qe(t,e){var n=Ce([t*Rt,e*Rt]);if(pe){var i=ke(pe,n),r=ke([i[1],-i[0],0],i);Re(r),r=Se(r);var s,o=t-fe,a=o>0?1:-1,l=r[0]*At*a,c=Lt(o)>180;c^(a*fe<l&&l<a*t)?(s=r[1]*At)>ue&&(ue=s):c^(a*fe<(l=(l+360)%360-180)&&l<a*t)?(s=-r[1]*At)<ce&&(ce=s):(e<ce&&(ce=e),e>ue&&(ue=e)),c?t<fe?sn(le,t)>sn(le,he)&&(he=t):sn(t,he)>sn(le,he)&&(le=t):he>=le?(t<le&&(le=t),t>he&&(he=t)):t>fe?sn(le,t)>sn(le,he)&&(he=t):sn(t,he)>sn(le,he)&&(le=t)}else ye.push(me=[le=t,he=t]);e<ce&&(ce=e),e>ue&&(ue=e),pe=n,fe=t}function Ke(){Ze.point=Qe}function tn(){me[0]=le,me[1]=he,Ze.point=Je,pe=null}function en(t,e){if(pe){var n=t-fe;_e.add(Lt(n)>180?n+(n>0?360:-360):n)}else de=t,ge=e;ve.point(t,e),Qe(t,e)}function nn(){ve.lineStart()}function rn(){en(de,ge),ve.lineEnd(),Lt(_e)>It&&(le=-(he=180)),me[0]=le,me[1]=he,pe=null}function sn(t,e){return(e-=t)<0?e+360:e}function on(t,e){return t[0]-e[0]}function an(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function ln(t){var e,n,i,r,s,o,a;if(ue=he=-(le=ce=1/0),ye=[],ne(t,Ze),n=ye.length){for(ye.sort(on),e=1,s=[i=ye[0]];e<n;++e)an(i,(r=ye[e])[0])||an(i,r[1])?(sn(i[0],r[1])>sn(i[0],i[1])&&(i[1]=r[1]),sn(r[0],i[1])>sn(i[0],i[1])&&(i[0]=r[0])):s.push(i=r);for(o=-1/0,e=0,i=s[n=s.length-1];e<=n;i=r,++e)r=s[e],(a=sn(i[1],r[0]))>o&&(o=a,le=r[0],he=i[1])}return ye=me=null,le===1/0||ce===1/0?[[NaN,NaN],[NaN,NaN]]:[[le,ce],[he,ue]]}var cn={sphere:Zt,point:hn,lineStart:fn,lineEnd:pn,polygonStart:function(){cn.lineStart=_n,cn.lineEnd=yn},polygonEnd:function(){cn.lineStart=fn,cn.lineEnd=pn}};function hn(t,e){t*=Rt;var n=zt(e*=Rt);un(n*zt(t),n*Ut(t),Ut(e))}function un(t,e,n){++Le,De+=(t-De)/Le,ze+=(e-ze)/Le,Fe+=(n-Fe)/Le}function fn(){cn.point=dn}function dn(t,e){t*=Rt;var n=zt(e*=Rt);Xe=n*zt(t),Ve=n*Ut(t),He=Ut(e),cn.point=gn,un(Xe,Ve,He)}function gn(t,e){t*=Rt;var n=zt(e*=Rt),i=n*zt(t),r=n*Ut(t),s=Ut(e),o=Dt(Wt((o=Ve*s-He*r)*o+(o=He*i-Xe*s)*o+(o=Xe*r-Ve*i)*o),Xe*i+Ve*r+He*s);Pe+=o,Ge+=o*(Xe+(Xe=i)),qe+=o*(Ve+(Ve=r)),je+=o*(He+(He=s)),un(Xe,Ve,He)}function pn(){cn.point=hn}function _n(){cn.point=mn}function yn(){xn(We,$e),cn.point=hn}function mn(t,e){We=t,$e=e,t*=Rt,e*=Rt,cn.point=xn;var n=zt(e);Xe=n*zt(t),Ve=n*Ut(t),He=Ut(e),un(Xe,Ve,He)}function xn(t,e){t*=Rt;var n=zt(e*=Rt),i=n*zt(t),r=n*Ut(t),s=Ut(e),o=Ve*s-He*r,a=He*i-Xe*s,l=Xe*r-Ve*i,c=qt(o,a,l),h=Vt(c),u=c&&-h/c;Be.add(u*o),Ue.add(u*a),Ye.add(u*l),Pe+=h,Ge+=h*(Xe+(Xe=i)),qe+=h*(Ve+(Ve=r)),je+=h*(He+(He=s)),un(Xe,Ve,He)}function bn(t){Le=Pe=De=ze=Fe=Ge=qe=je=0,Be=new N,Ue=new N,Ye=new N,ne(t,cn);var e=+Be,n=+Ue,i=+Ye,r=qt(e,n,i);return r<St&&(e=Ge,n=qe,i=je,Pe<It&&(e=De,n=ze,i=Fe),(r=qt(e,n,i))<St)?[NaN,NaN]:[Dt(n,e)*At,Vt(i/r)*At]}function vn(t){return function(){return t}}function Mn(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n}function wn(t,e){return[Lt(t)>Ct?t+Math.round(-t/Tt)*Tt:t,e]}function En(t,e,n){return(t%=Tt)?e||n?Mn(In(t),Sn(e,n)):In(t):e||n?Sn(e,n):wn}function Nn(t){return function(e,n){return[(e+=t)>Ct?e-Tt:e<-Ct?e+Tt:e,n]}}function In(t){var e=Nn(t);return e.invert=Nn(-t),e}function Sn(t,e){var n=zt(t),i=Ut(t),r=zt(e),s=Ut(e);function o(t,e){var o=zt(e),a=zt(t)*o,l=Ut(t)*o,c=Ut(e),h=c*n+a*i;return[Dt(l*r-h*s,a*n-c*i),Vt(h*r+l*s)]}return o.invert=function(t,e){var o=zt(e),a=zt(t)*o,l=Ut(t)*o,c=Ut(e),h=c*r-l*s;return[Dt(l*r+c*s,a*n+h*i),Vt(h*n-a*i)]},o}function Cn(t){function e(e){return(e=t(e[0]*Rt,e[1]*Rt))[0]*=At,e[1]*=At,e}return t=En(t[0]*Rt,t[1]*Rt,t.length>2?t[2]*Rt:0),e.invert=function(e){return(e=t.invert(e[0]*Rt,e[1]*Rt))[0]*=At,e[1]*=At,e},e}function On(t,e,n,i,r,s){if(n){var o=zt(e),a=Ut(e),l=i*n;null==r?(r=e+i*Tt,s=e-l/2):(r=kn(o,r),s=kn(o,s),(i>0?r<s:r>s)&&(r+=i*Tt));for(var c,h=r;i>0?h>s:h<s;h-=l)c=Se([o,-a*zt(h),-a*Ut(h)]),t.point(c[0],c[1])}}function kn(t,e){(e=Ce(e))[0]-=t,Re(e);var n=Xt(-e[1]);return((-e[2]<0?-n:n)+Tt-It)%Tt}function Tn(){var t,e,n=vn([0,0]),i=vn(90),r=vn(6),s={point:function(n,i){t.push(n=e(n,i)),n[0]*=At,n[1]*=At}};function o(){var o=n.apply(this,arguments),a=i.apply(this,arguments)*Rt,l=r.apply(this,arguments)*Rt;return t=[],e=En(-o[0]*Rt,-o[1]*Rt,0).invert,On(s,a,l,1),o={type:"Polygon",coordinates:[t]},t=e=null,o}return o.center=function(t){return arguments.length?(n="function"==typeof t?t:vn([+t[0],+t[1]]),o):n},o.radius=function(t){return arguments.length?(i="function"==typeof t?t:vn(+t),o):i},o.precision=function(t){return arguments.length?(r="function"==typeof t?t:vn(+t),o):r},o}function An(){var t,e=[];return{point:function(e,n,i){t.push([e,n,i])},lineStart:function(){e.push(t=[])},lineEnd:Zt,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Rn(t,e){return Lt(t[0]-e[0])<It&&Lt(t[1]-e[1])<It}function Ln(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Pn(t,e,n,i,r){var s,o,a=[],l=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],o=t[e];if(Rn(i,o)){if(!i[2]&&!o[2]){for(r.lineStart(),s=0;s<e;++s)r.point((i=t[s])[0],i[1]);return void r.lineEnd()}o[0]+=2e-6}a.push(n=new Ln(i,t,null,!0)),l.push(n.o=new Ln(i,null,n,!1)),a.push(n=new Ln(o,t,null,!1)),l.push(n.o=new Ln(o,null,n,!0))}})),a.length){for(l.sort(e),Dn(a),Dn(l),s=0,o=l.length;s<o;++s)l[s].e=n=!n;for(var c,h,u=a[0];;){for(var f=u,d=!0;f.v;)if((f=f.n)===u)return;c=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(s=0,o=c.length;s<o;++s)r.point((h=c[s])[0],h[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(d)for(c=f.p.z,s=c.length-1;s>=0;--s)r.point((h=c[s])[0],h[1]);else i(f.x,f.p.x,-1,r);f=f.p}c=(f=f.o).z,d=!d}while(!f.v);r.lineEnd()}}}function Dn(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function zn(t){return Lt(t[0])<=Ct?t[0]:Yt(t[0])*((Lt(t[0])+Ct)%Tt-Ct)}function Fn(t,e){var n=zn(e),i=e[1],r=Ut(i),s=[Ut(n),-zt(n),0],o=0,a=0,l=new N;1===r?i=Ot+It:-1===r&&(i=-Ot-It);for(var c=0,h=t.length;c<h;++c)if(f=(u=t[c]).length)for(var u,f,d=u[f-1],g=zn(d),p=d[1]/2+kt,_=Ut(p),y=zt(p),m=0;m<f;++m,g=b,_=M,y=w,d=x){var x=u[m],b=zn(x),v=x[1]/2+kt,M=Ut(v),w=zt(v),E=b-g,I=E>=0?1:-1,S=I*E,C=S>Ct,O=_*M;if(l.add(Dt(O*I*Ut(S),y*w+O*zt(S))),o+=C?E+I*Tt:E,C^g>=n^b>=n){var k=ke(Ce(d),Ce(x));Re(k);var T=ke(s,k);Re(T);var A=(C^E>=0?-1:1)*Vt(T[2]);(i>A||i===A&&(k[0]||k[1]))&&(a+=C^E>=0?1:-1)}}return(o<-1e-6||o<It&&l<-1e-12)^1&a}function Gn(t,e,n,i){return function(r){var s,o,a,l=e(r),c=An(),h=e(c),u=!1,f={point:d,lineStart:p,lineEnd:_,polygonStart:function(){f.point=y,f.lineStart=m,f.lineEnd=x,o=[],s=[]},polygonEnd:function(){f.point=d,f.lineStart=p,f.lineEnd=_,o=ft(o);var t=Fn(s,i);o.length?(u||(r.polygonStart(),u=!0),Pn(o,jn,t,n,r)):t&&(u||(r.polygonStart(),u=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),u&&(r.polygonEnd(),u=!1),o=s=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function d(e,n){t(e,n)&&r.point(e,n)}function g(t,e){l.point(t,e)}function p(){f.point=g,l.lineStart()}function _(){f.point=d,l.lineEnd()}function y(t,e){a.push([t,e]),h.point(t,e)}function m(){h.lineStart(),a=[]}function x(){y(a[0][0],a[0][1]),h.lineEnd();var t,e,n,i,l=h.clean(),f=c.result(),d=f.length;if(a.pop(),s.push(a),a=null,d)if(1&l){if((e=(n=f[0]).length-1)>0){for(u||(r.polygonStart(),u=!0),r.lineStart(),t=0;t<e;++t)r.point((i=n[t])[0],i[1]);r.lineEnd()}}else d>1&&2&l&&f.push(f.pop().concat(f.shift())),o.push(f.filter(qn))}return f}}function qn(t){return t.length>1}function jn(t,e){return((t=t.x)[0]<0?t[1]-Ot-It:Ot-t[1])-((e=e.x)[0]<0?e[1]-Ot-It:Ot-e[1])}wn.invert=wn;var Bn=Gn((function(){return!0}),(function(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(s,o){var a=s>0?Ct:-Ct,l=Lt(s-n);Lt(l-Ct)<It?(t.point(n,i=(i+o)/2>0?Ot:-Ot),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),t.point(s,i),e=0):r!==a&&l>=Ct&&(Lt(n-r)<It&&(n-=r*It),Lt(s-a)<It&&(s-=a*It),i=function(t,e,n,i){var r,s,o=Ut(t-n);return Lt(o)>It?Pt((Ut(e)*(s=zt(i))*Ut(n)-Ut(i)*(r=zt(e))*Ut(t))/(r*s*o)):(e+i)/2}(n,i,s,o),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),e=0),t.point(n=s,i=o),r=a},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}),(function(t,e,n,i){var r;if(null==t)r=n*Ot,i.point(-Ct,r),i.point(0,r),i.point(Ct,r),i.point(Ct,0),i.point(Ct,-r),i.point(0,-r),i.point(-Ct,-r),i.point(-Ct,0),i.point(-Ct,r);else if(Lt(t[0]-e[0])>It){var s=t[0]<e[0]?Ct:-Ct;r=n*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(e[0],e[1])}),[-Ct,-Ot]);function Un(t){var e=zt(t),n=6*Rt,i=e>0,r=Lt(e)>It;function s(t,n){return zt(t)*zt(n)>e}function o(t,n,i){var r=[1,0,0],s=ke(Ce(t),Ce(n)),o=Oe(s,s),a=s[0],l=o-a*a;if(!l)return!i&&t;var c=e*o/l,h=-e*a/l,u=ke(r,s),f=Ae(r,c);Te(f,Ae(s,h));var d=u,g=Oe(f,d),p=Oe(d,d),_=g*g-p*(Oe(f,f)-1);if(!(_<0)){var y=Wt(_),m=Ae(d,(-g-y)/p);if(Te(m,f),m=Se(m),!i)return m;var x,b=t[0],v=n[0],M=t[1],w=n[1];v<b&&(x=b,b=v,v=x);var E=v-b,N=Lt(E-Ct)<It;if(!N&&w<M&&(x=M,M=w,w=x),N||E<It?N?M+w>0^m[1]<(Lt(m[0]-b)<It?M:w):M<=m[1]&&m[1]<=w:E>Ct^(b<=m[0]&&m[0]<=v)){var I=Ae(d,(-g+y)/p);return Te(I,f),[m,Se(I)]}}}function a(e,n){var r=i?t:Ct-t,s=0;return e<-r?s|=1:e>r&&(s|=2),n<-r?s|=4:n>r&&(s|=8),s}return Gn(s,(function(t){var e,n,l,c,h;return{lineStart:function(){c=l=!1,h=1},point:function(u,f){var d,g=[u,f],p=s(u,f),_=i?p?0:a(u,f):p?a(u+(u<0?Ct:-Ct),f):0;if(!e&&(c=l=p)&&t.lineStart(),p!==l&&(!(d=o(e,g))||Rn(e,d)||Rn(g,d))&&(g[2]=1),p!==l)h=0,p?(t.lineStart(),d=o(g,e),t.point(d[0],d[1])):(d=o(e,g),t.point(d[0],d[1],2),t.lineEnd()),e=d;else if(r&&e&&i^p){var y;_&n||!(y=o(g,e,!0))||(h=0,i?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1],3)))}!p||e&&Rn(e,g)||t.point(g[0],g[1]),e=g,l=p,n=_},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return h|(c&&l)<<1}}}),(function(e,i,r,s){On(s,t,n,r,e,i)}),i?[0,-t]:[-Ct,t-Ct])}var Yn,Wn,$n,Xn,Vn=1e9,Hn=-Vn;function Zn(t,e,n,i){function r(r,s){return t<=r&&r<=n&&e<=s&&s<=i}function s(r,s,a,c){var h=0,u=0;if(null==r||(h=o(r,a))!==(u=o(s,a))||l(r,s)<0^a>0)do{c.point(0===h||3===h?t:n,h>1?i:e)}while((h=(h+a+4)%4)!==u);else c.point(s[0],s[1])}function o(i,r){return Lt(i[0]-t)<It?r>0?0:3:Lt(i[0]-n)<It?r>0?2:1:Lt(i[1]-e)<It?r>0?1:0:r>0?3:2}function a(t,e){return l(t.x,e.x)}function l(t,e){var n=o(t,1),i=o(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(o){var l,c,h,u,f,d,g,p,_,y,m,x=o,b=An(),v={point:M,lineStart:function(){v.point=w,c&&c.push(h=[]);y=!0,_=!1,g=p=NaN},lineEnd:function(){l&&(w(u,f),d&&_&&b.rejoin(),l.push(b.result()));v.point=M,_&&x.lineEnd()},polygonStart:function(){x=b,l=[],c=[],m=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=c.length;n<r;++n)for(var s,o,a=c[n],l=1,h=a.length,u=a[0],f=u[0],d=u[1];l<h;++l)s=f,o=d,f=(u=a[l])[0],d=u[1],o<=i?d>i&&(f-s)*(i-o)>(d-o)*(t-s)&&++e:d<=i&&(f-s)*(i-o)<(d-o)*(t-s)&&--e;return e}(),n=m&&e,r=(l=ft(l)).length;(n||r)&&(o.polygonStart(),n&&(o.lineStart(),s(null,null,1,o),o.lineEnd()),r&&Pn(l,a,e,s,o),o.polygonEnd());x=o,l=c=h=null}};function M(t,e){r(t,e)&&x.point(t,e)}function w(s,o){var a=r(s,o);if(c&&h.push([s,o]),y)u=s,f=o,d=a,y=!1,a&&(x.lineStart(),x.point(s,o));else if(a&&_)x.point(s,o);else{var l=[g=Math.max(Hn,Math.min(Vn,g)),p=Math.max(Hn,Math.min(Vn,p))],b=[s=Math.max(Hn,Math.min(Vn,s)),o=Math.max(Hn,Math.min(Vn,o))];!function(t,e,n,i,r,s){var o,a=t[0],l=t[1],c=0,h=1,u=e[0]-a,f=e[1]-l;if(o=n-a,u||!(o>0)){if(o/=u,u<0){if(o<c)return;o<h&&(h=o)}else if(u>0){if(o>h)return;o>c&&(c=o)}if(o=r-a,u||!(o<0)){if(o/=u,u<0){if(o>h)return;o>c&&(c=o)}else if(u>0){if(o<c)return;o<h&&(h=o)}if(o=i-l,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>c&&(c=o)}if(o=s-l,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<h&&(h=o)}return c>0&&(t[0]=a+c*u,t[1]=l+c*f),h<1&&(e[0]=a+h*u,e[1]=l+h*f),!0}}}}}(l,b,t,e,n,i)?a&&(x.lineStart(),x.point(s,o),m=!1):(_||(x.lineStart(),x.point(l[0],l[1])),x.point(b[0],b[1]),a||x.lineEnd(),m=!1)}g=s,p=o,_=a}return v}}var Jn={sphere:Zt,point:Zt,lineStart:function(){Jn.point=Kn,Jn.lineEnd=Qn},lineEnd:Zt,polygonStart:Zt,polygonEnd:Zt};function Qn(){Jn.point=Jn.lineEnd=Zt}function Kn(t,e){Wn=t*=Rt,$n=Ut(e*=Rt),Xn=zt(e),Jn.point=ti}function ti(t,e){t*=Rt;var n=Ut(e*=Rt),i=zt(e),r=Lt(t-Wn),s=zt(r),o=i*Ut(r),a=Xn*n-$n*i*s,l=$n*n+Xn*i*s;Yn.add(Dt(Wt(o*o+a*a),l)),Wn=t,$n=n,Xn=i}function ei(t){return Yn=new N,ne(t,Jn),+Yn}var ni=[null,null],ii={type:"LineString",coordinates:ni};function ri(t,e){return ni[0]=t,ni[1]=e,ei(ii)}var si={Feature:function(t,e){return ai(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)if(ai(n[i].geometry,e))return!0;return!1}},oi={Sphere:function(){return!0},Point:function(t,e){return li(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(li(n[i],e))return!0;return!1},LineString:function(t,e){return ci(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(ci(n[i],e))return!0;return!1},Polygon:function(t,e){return hi(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(hi(n[i],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)if(ai(n[i],e))return!0;return!1}};function ai(t,e){return!(!t||!oi.hasOwnProperty(t.type))&&oi[t.type](t,e)}function li(t,e){return 0===ri(t,e)}function ci(t,e){for(var n,i,r,s=0,o=t.length;s<o;s++){if(0===(i=ri(t[s],e)))return!0;if(s>0&&(r=ri(t[s],t[s-1]))>0&&n<=r&&i<=r&&(n+i-r)*(1-Math.pow((n-i)/r,2))<St*r)return!0;n=i}return!1}function hi(t,e){return!!Fn(t.map(ui),fi(e))}function ui(t){return(t=t.map(fi)).pop(),t}function fi(t){return[t[0]*Rt,t[1]*Rt]}function di(t,e,n){var i=gt(t,e-It,n).concat(e);return function(t){return i.map((function(e){return[t,e]}))}}function gi(t,e,n){var i=gt(t,e-It,n).concat(e);return function(t){return i.map((function(e){return[e,t]}))}}function pi(){var t,e,n,i,r,s,o,a,l,c,h,u,f=10,d=f,g=90,p=360,_=2.5;function y(){return{type:"MultiLineString",coordinates:m()}}function m(){return gt(Ft(i/g)*g,n,g).map(h).concat(gt(Ft(a/p)*p,o,p).map(u)).concat(gt(Ft(e/f)*f,t,f).filter((function(t){return Lt(t%g)>It})).map(l)).concat(gt(Ft(s/d)*d,r,d).filter((function(t){return Lt(t%p)>It})).map(c))}return y.lines=function(){return m().map((function(t){return{type:"LineString",coordinates:t}}))},y.outline=function(){return{type:"Polygon",coordinates:[h(i).concat(u(o).slice(1),h(n).reverse().slice(1),u(a).reverse().slice(1))]}},y.extent=function(t){return arguments.length?y.extentMajor(t).extentMinor(t):y.extentMinor()},y.extentMajor=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],a=+t[0][1],o=+t[1][1],i>n&&(t=i,i=n,n=t),a>o&&(t=a,a=o,o=t),y.precision(_)):[[i,a],[n,o]]},y.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],s=+n[0][1],r=+n[1][1],e>t&&(n=e,e=t,t=n),s>r&&(n=s,s=r,r=n),y.precision(_)):[[e,s],[t,r]]},y.step=function(t){return arguments.length?y.stepMajor(t).stepMinor(t):y.stepMinor()},y.stepMajor=function(t){return arguments.length?(g=+t[0],p=+t[1],y):[g,p]},y.stepMinor=function(t){return arguments.length?(f=+t[0],d=+t[1],y):[f,d]},y.precision=function(f){return arguments.length?(_=+f,l=di(s,r,90),c=gi(e,t,_),h=di(a,o,90),u=gi(i,n,_),y):_},y.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function _i(t,e){var n=t[0]*Rt,i=t[1]*Rt,r=e[0]*Rt,s=e[1]*Rt,o=zt(i),a=Ut(i),l=zt(s),c=Ut(s),h=o*zt(n),u=o*Ut(n),f=l*zt(r),d=l*Ut(r),g=2*Vt(Wt(Ht(s-i)+o*l*Ht(r-n))),p=Ut(g),_=g?function(t){var e=Ut(t*=g)/p,n=Ut(g-t)/p,i=n*h+e*f,r=n*u+e*d,s=n*a+e*c;return[Dt(r,i)*At,Dt(s,Wt(i*i+r*r))*At]}:function(){return[n*At,i*At]};return _.distance=g,_}var yi,mi,xi,bi,vi=t=>t,Mi=new N,wi=new N,Ei={point:Zt,lineStart:Zt,lineEnd:Zt,polygonStart:function(){Ei.lineStart=Ni,Ei.lineEnd=Ci},polygonEnd:function(){Ei.lineStart=Ei.lineEnd=Ei.point=Zt,Mi.add(Lt(wi)),wi=new N},result:function(){var t=Mi/2;return Mi=new N,t}};function Ni(){Ei.point=Ii}function Ii(t,e){Ei.point=Si,yi=xi=t,mi=bi=e}function Si(t,e){wi.add(bi*t-xi*e),xi=t,bi=e}function Ci(){Si(yi,mi)}var Oi=Ei,ki=1/0,Ti=ki,Ai=-ki,Ri=Ai,Li={point:function(t,e){t<ki&&(ki=t);t>Ai&&(Ai=t);e<Ti&&(Ti=e);e>Ri&&(Ri=e)},lineStart:Zt,lineEnd:Zt,polygonStart:Zt,polygonEnd:Zt,result:function(){var t=[[ki,Ti],[Ai,Ri]];return Ai=Ri=-(Ti=ki=1/0),t}};var Pi,Di,zi,Fi,Gi=Li,qi=0,ji=0,Bi=0,Ui=0,Yi=0,Wi=0,$i=0,Xi=0,Vi=0,Hi={point:Zi,lineStart:Ji,lineEnd:tr,polygonStart:function(){Hi.lineStart=er,Hi.lineEnd=nr},polygonEnd:function(){Hi.point=Zi,Hi.lineStart=Ji,Hi.lineEnd=tr},result:function(){var t=Vi?[$i/Vi,Xi/Vi]:Wi?[Ui/Wi,Yi/Wi]:Bi?[qi/Bi,ji/Bi]:[NaN,NaN];return qi=ji=Bi=Ui=Yi=Wi=$i=Xi=Vi=0,t}};function Zi(t,e){qi+=t,ji+=e,++Bi}function Ji(){Hi.point=Qi}function Qi(t,e){Hi.point=Ki,Zi(zi=t,Fi=e)}function Ki(t,e){var n=t-zi,i=e-Fi,r=Wt(n*n+i*i);Ui+=r*(zi+t)/2,Yi+=r*(Fi+e)/2,Wi+=r,Zi(zi=t,Fi=e)}function tr(){Hi.point=Zi}function er(){Hi.point=ir}function nr(){rr(Pi,Di)}function ir(t,e){Hi.point=rr,Zi(Pi=zi=t,Di=Fi=e)}function rr(t,e){var n=t-zi,i=e-Fi,r=Wt(n*n+i*i);Ui+=r*(zi+t)/2,Yi+=r*(Fi+e)/2,Wi+=r,$i+=(r=Fi*t-zi*e)*(zi+t),Xi+=r*(Fi+e),Vi+=3*r,Zi(zi=t,Fi=e)}var sr=Hi;function or(t){this._context=t}or.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Tt)}},result:Zt};var ar,lr,cr,hr,ur,fr=new N,dr={point:Zt,lineStart:function(){dr.point=gr},lineEnd:function(){ar&&pr(lr,cr),dr.point=Zt},polygonStart:function(){ar=!0},polygonEnd:function(){ar=null},result:function(){var t=+fr;return fr=new N,t}};function gr(t,e){dr.point=pr,lr=hr=t,cr=ur=e}function pr(t,e){hr-=t,ur-=e,fr.add(Wt(hr*hr+ur*ur)),hr=t,ur=e}var _r=dr;function yr(){this._string=[]}function mr(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function xr(t,e){var n,i,r=4.5;function s(t){return t&&("function"==typeof r&&i.pointRadius(+r.apply(this,arguments)),ne(t,n(i))),i.result()}return s.area=function(t){return ne(t,n(Oi)),Oi.result()},s.measure=function(t){return ne(t,n(_r)),_r.result()},s.bounds=function(t){return ne(t,n(Gi)),Gi.result()},s.centroid=function(t){return ne(t,n(sr)),sr.result()},s.projection=function(e){return arguments.length?(n=null==e?(t=null,vi):(t=e).stream,s):t},s.context=function(t){return arguments.length?(i=null==t?(e=null,new yr):new or(e=t),"function"!=typeof r&&i.pointRadius(r),s):e},s.pointRadius=function(t){return arguments.length?(r="function"==typeof t?t:(i.pointRadius(+t),+t),s):r},s.projection(t).context(e)}function br(t){return function(e){var n=new vr;for(var i in t)n[i]=t[i];return n.stream=e,n}}function vr(){}function Mr(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=i&&t.clipExtent(null),ne(n,t.stream(Gi)),e(Gi.result()),null!=i&&t.clipExtent(i),t}function wr(t,e,n){return Mr(t,(function(n){var i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],s=Math.min(i/(n[1][0]-n[0][0]),r/(n[1][1]-n[0][1])),o=+e[0][0]+(i-s*(n[1][0]+n[0][0]))/2,a=+e[0][1]+(r-s*(n[1][1]+n[0][1]))/2;t.scale(150*s).translate([o,a])}),n)}function Er(t,e,n){return wr(t,[[0,0],e],n)}function Nr(t,e,n){return Mr(t,(function(n){var i=+e,r=i/(n[1][0]-n[0][0]),s=(i-r*(n[1][0]+n[0][0]))/2,o=-r*n[0][1];t.scale(150*r).translate([s,o])}),n)}function Ir(t,e,n){return Mr(t,(function(n){var i=+e,r=i/(n[1][1]-n[0][1]),s=-r*n[0][0],o=(i-r*(n[1][1]+n[0][1]))/2;t.scale(150*r).translate([s,o])}),n)}yr.prototype={_radius:4.5,_circle:mr(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=mr(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},vr.prototype={constructor:vr,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Sr=zt(30*Rt);function Cr(t,e){return+e?function(t,e){function n(i,r,s,o,a,l,c,h,u,f,d,g,p,_){var y=c-i,m=h-r,x=y*y+m*m;if(x>4*e&&p--){var b=o+f,v=a+d,M=l+g,w=Wt(b*b+v*v+M*M),E=Vt(M/=w),N=Lt(Lt(M)-1)<It||Lt(s-u)<It?(s+u)/2:Dt(v,b),I=t(N,E),S=I[0],C=I[1],O=S-i,k=C-r,T=m*O-y*k;(T*T/x>e||Lt((y*O+m*k)/x-.5)>.3||o*f+a*d+l*g<Sr)&&(n(i,r,s,o,a,l,S,C,N,b/=w,v/=w,M,p,_),_.point(S,C),n(S,C,N,b,v,M,c,h,u,f,d,g,p,_))}}return function(e){var i,r,s,o,a,l,c,h,u,f,d,g,p={point:_,lineStart:y,lineEnd:x,polygonStart:function(){e.polygonStart(),p.lineStart=b},polygonEnd:function(){e.polygonEnd(),p.lineStart=y}};function _(n,i){n=t(n,i),e.point(n[0],n[1])}function y(){h=NaN,p.point=m,e.lineStart()}function m(i,r){var s=Ce([i,r]),o=t(i,r);n(h,u,c,f,d,g,h=o[0],u=o[1],c=i,f=s[0],d=s[1],g=s[2],16,e),e.point(h,u)}function x(){p.point=_,e.lineEnd()}function b(){y(),p.point=v,p.lineEnd=M}function v(t,e){m(i=t,e),r=h,s=u,o=f,a=d,l=g,p.point=m}function M(){n(h,u,c,f,d,g,r,s,i,o,a,l,16,e),p.lineEnd=x,x()}return p}}(t,e):function(t){return br({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var Or=br({point:function(t,e){this.stream.point(t*Rt,e*Rt)}});function kr(t,e,n,i,r,s){if(!s)return function(t,e,n,i,r){function s(s,o){return[e+t*(s*=i),n-t*(o*=r)]}return s.invert=function(s,o){return[(s-e)/t*i,(n-o)/t*r]},s}(t,e,n,i,r);var o=zt(s),a=Ut(s),l=o*t,c=a*t,h=o/t,u=a/t,f=(a*n-o*e)/t,d=(a*e+o*n)/t;function g(t,s){return[l*(t*=i)-c*(s*=r)+e,n-c*t-l*s]}return g.invert=function(t,e){return[i*(h*t-u*e+f),r*(d-u*t-h*e)]},g}function Tr(t){return Ar((function(){return t}))()}function Ar(t){var e,n,i,r,s,o,a,l,c,h,u=150,f=480,d=250,g=0,p=0,_=0,y=0,m=0,x=0,b=1,v=1,M=null,w=Bn,E=null,N=vi,I=.5;function S(t){return l(t[0]*Rt,t[1]*Rt)}function C(t){return(t=l.invert(t[0],t[1]))&&[t[0]*At,t[1]*At]}function O(){var t=kr(u,0,0,b,v,x).apply(null,e(g,p)),i=kr(u,f-t[0],d-t[1],b,v,x);return n=En(_,y,m),a=Mn(e,i),l=Mn(n,a),o=Cr(a,I),k()}function k(){return c=h=null,S}return S.stream=function(t){return c&&h===t?c:c=Or(function(t){return br({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}(n)(w(o(N(h=t)))))},S.preclip=function(t){return arguments.length?(w=t,M=void 0,k()):w},S.postclip=function(t){return arguments.length?(N=t,E=i=r=s=null,k()):N},S.clipAngle=function(t){return arguments.length?(w=+t?Un(M=t*Rt):(M=null,Bn),k()):M*At},S.clipExtent=function(t){return arguments.length?(N=null==t?(E=i=r=s=null,vi):Zn(E=+t[0][0],i=+t[0][1],r=+t[1][0],s=+t[1][1]),k()):null==E?null:[[E,i],[r,s]]},S.scale=function(t){return arguments.length?(u=+t,O()):u},S.translate=function(t){return arguments.length?(f=+t[0],d=+t[1],O()):[f,d]},S.center=function(t){return arguments.length?(g=t[0]%360*Rt,p=t[1]%360*Rt,O()):[g*At,p*At]},S.rotate=function(t){return arguments.length?(_=t[0]%360*Rt,y=t[1]%360*Rt,m=t.length>2?t[2]%360*Rt:0,O()):[_*At,y*At,m*At]},S.angle=function(t){return arguments.length?(x=t%360*Rt,O()):x*At},S.reflectX=function(t){return arguments.length?(b=t?-1:1,O()):b<0},S.reflectY=function(t){return arguments.length?(v=t?-1:1,O()):v<0},S.precision=function(t){return arguments.length?(o=Cr(a,I=t*t),k()):Wt(I)},S.fitExtent=function(t,e){return wr(S,t,e)},S.fitSize=function(t,e){return Er(S,t,e)},S.fitWidth=function(t,e){return Nr(S,t,e)},S.fitHeight=function(t,e){return Ir(S,t,e)},function(){return e=t.apply(this,arguments),S.invert=e.invert&&C,O()}}function Rr(t){var e=0,n=Ct/3,i=Ar(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*Rt,n=t[1]*Rt):[e*At,n*At]},r}function Lr(t,e){var n=Ut(t),i=(n+Ut(e))/2;if(Lt(i)<It)return function(t){var e=zt(t);function n(t,n){return[t*e,Ut(n)/e]}return n.invert=function(t,n){return[t/e,Vt(n*e)]},n}(t);var r=1+n*(2*i-n),s=Wt(r)/i;function o(t,e){var n=Wt(r-2*i*Ut(e))/i;return[n*Ut(t*=i),s-n*zt(t)]}return o.invert=function(t,e){var n=s-e,o=Dt(t,Lt(n))*Yt(n);return n*i<0&&(o-=Ct*Yt(t)*Yt(n)),[o/i,Vt((r-(t*t+n*n)*i*i)/(2*i))]},o}function Pr(){return Rr(Lr).scale(155.424).center([0,33.6442])}function Dr(){return Pr().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function zr(t){return function(e,n){var i=zt(e),r=zt(n),s=t(i*r);return s===1/0?[2,0]:[s*r*Ut(e),s*Ut(n)]}}function Fr(t){return function(e,n){var i=Wt(e*e+n*n),r=t(i),s=Ut(r),o=zt(r);return[Dt(e*s,i*o),Vt(i&&n*s/i)]}}var Gr=zr((function(t){return Wt(2/(1+t))}));Gr.invert=Fr((function(t){return 2*Vt(t/2)}));var qr=zr((function(t){return(t=Xt(t))&&t/Ut(t)}));function jr(){return Tr(qr).scale(79.4188).clipAngle(179.999)}function Br(t,e){return[t,jt($t((Ot+e)/2))]}function Ur(){return Yr(Br).scale(961/Tt)}function Yr(t){var e,n,i,r=Tr(t),s=r.center,o=r.scale,a=r.translate,l=r.clipExtent,c=null;function h(){var s=Ct*o(),a=r(Cn(r.rotate()).invert([0,0]));return l(null==c?[[a[0]-s,a[1]-s],[a[0]+s,a[1]+s]]:t===Br?[[Math.max(a[0]-s,c),e],[Math.min(a[0]+s,n),i]]:[[c,Math.max(a[1]-s,e)],[n,Math.min(a[1]+s,i)]])}return r.scale=function(t){return arguments.length?(o(t),h()):o()},r.translate=function(t){return arguments.length?(a(t),h()):a()},r.center=function(t){return arguments.length?(s(t),h()):s()},r.clipExtent=function(t){return arguments.length?(null==t?c=e=n=i=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],i=+t[1][1]),h()):null==c?null:[[c,e],[n,i]]},h()}function Wr(t){return $t((Ot+t)/2)}function $r(t,e){var n=zt(t),i=t===e?Ut(t):jt(n/zt(e))/jt(Wr(e)/Wr(t)),r=n*Bt(Wr(t),i)/i;if(!i)return Br;function s(t,e){r>0?e<-Ot+It&&(e=-Ot+It):e>Ot-It&&(e=Ot-It);var n=r/Bt(Wr(e),i);return[n*Ut(i*t),r-n*zt(i*t)]}return s.invert=function(t,e){var n=r-e,s=Yt(i)*Wt(t*t+n*n),o=Dt(t,Lt(n))*Yt(n);return n*i<0&&(o-=Ct*Yt(t)*Yt(n)),[o/i,2*Pt(Bt(r/s,1/i))-Ot]},s}function Xr(t,e){return[t,e]}function Vr(){return Tr(Xr).scale(152.63)}function Hr(t,e){var n=zt(t),i=t===e?Ut(t):(n-zt(e))/(e-t),r=n/i+t;if(Lt(i)<It)return Xr;function s(t,e){var n=r-e,s=i*t;return[n*Ut(s),r-n*zt(s)]}return s.invert=function(t,e){var n=r-e,s=Dt(t,Lt(n))*Yt(n);return n*i<0&&(s-=Ct*Yt(t)*Yt(n)),[s/i,r-Yt(i)*Wt(t*t+n*n)]},s}qr.invert=Fr((function(t){return t})),Br.invert=function(t,e){return[t,2*Pt(Gt(e))-Ot]},Xr.invert=Xr;var Zr=1.340264,Jr=-.081106,Qr=893e-6,Kr=.003796,ts=Wt(3)/2;function es(t,e){var n=Vt(ts*Ut(e)),i=n*n,r=i*i*i;return[t*zt(n)/(ts*(Zr+3*Jr*i+r*(7*Qr+9*Kr*i))),n*(Zr+Jr*i+r*(Qr+Kr*i))]}function ns(t,e){var n=zt(e),i=zt(t)*n;return[n*Ut(t)/i,Ut(e)/i]}function is(){return Tr(ns).scale(144.049).clipAngle(60)}function rs(){var t,e,n,i,r,s,o,a=1,l=0,c=0,h=1,u=1,f=0,d=null,g=1,p=1,_=br({point:function(t,e){var n=x([t,e]);this.stream.point(n[0],n[1])}}),y=vi;function m(){return g=a*h,p=a*u,s=o=null,x}function x(n){var i=n[0]*g,r=n[1]*p;if(f){var s=r*t-i*e;i=i*t+r*e,r=s}return[i+l,r+c]}return x.invert=function(n){var i=n[0]-l,r=n[1]-c;if(f){var s=r*t+i*e;i=i*t-r*e,r=s}return[i/g,r/p]},x.stream=function(t){return s&&o===t?s:s=_(y(o=t))},x.postclip=function(t){return arguments.length?(y=t,d=n=i=r=null,m()):y},x.clipExtent=function(t){return arguments.length?(y=null==t?(d=n=i=r=null,vi):Zn(d=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),m()):null==d?null:[[d,n],[i,r]]},x.scale=function(t){return arguments.length?(a=+t,m()):a},x.translate=function(t){return arguments.length?(l=+t[0],c=+t[1],m()):[l,c]},x.angle=function(n){return arguments.length?(e=Ut(f=n%360*Rt),t=zt(f),m()):f*At},x.reflectX=function(t){return arguments.length?(h=t?-1:1,m()):h<0},x.reflectY=function(t){return arguments.length?(u=t?-1:1,m()):u<0},x.fitExtent=function(t,e){return wr(x,t,e)},x.fitSize=function(t,e){return Er(x,t,e)},x.fitWidth=function(t,e){return Nr(x,t,e)},x.fitHeight=function(t,e){return Ir(x,t,e)},x}function ss(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791)),e*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))]}function os(t,e){return[zt(e)*Ut(t),Ut(e)]}function as(){return Tr(os).scale(249.5).clipAngle(90.000001)}function ls(t,e){var n=zt(e),i=1+zt(t)*n;return[n*Ut(t)/i,Ut(e)/i]}function cs(t,e){return[jt($t((Ot+e)/2)),-t]}es.invert=function(t,e){for(var n,i=e,r=i*i,s=r*r*r,o=0;o<12&&(s=(r=(i-=n=(i*(Zr+Jr*r+s*(Qr+Kr*r))-e)/(Zr+3*Jr*r+s*(7*Qr+9*Kr*r)))*i)*r*r,!(Lt(n)<St));++o);return[ts*t*(Zr+3*Jr*r+s*(7*Qr+9*Kr*r))/zt(i),Vt(Ut(i)/ts)]},ns.invert=Fr(Pt),ss.invert=function(t,e){var n,i=e,r=25;do{var s=i*i,o=s*s;i-=n=(i*(1.007226+s*(.015085+o*(.028874*s-.044475-.005916*o)))-e)/(1.007226+s*(.045255+o*(.259866*s-.311325-.005916*11*o)))}while(Lt(n)>It&&--r>0);return[t/(.8707+(s=i*i)*(s*(s*s*s*(.003971-.001529*s)-.013791)-.131979)),i]},os.invert=Fr(Vt),ls.invert=Fr((function(t){return 2*Pt(t)})),cs.invert=function(t,e){return[-e,2*Pt(Gt(t))-Ot]};var hs=Object.freeze({__proto__:null,geoArea:Ie,geoBounds:ln,geoCentroid:bn,geoCircle:Tn,geoClipAntimeridian:Bn,geoClipCircle:Un,geoClipExtent:function(){var t,e,n,i=0,r=0,s=960,o=500;return n={stream:function(n){return t&&e===n?t:t=Zn(i,r,s,o)(e=n)},extent:function(a){return arguments.length?(i=+a[0][0],r=+a[0][1],s=+a[1][0],o=+a[1][1],t=e=null,n):[[i,r],[s,o]]}}},geoClipRectangle:Zn,geoContains:function(t,e){return(t&&si.hasOwnProperty(t.type)?si[t.type]:ai)(t,e)},geoDistance:ri,geoGraticule:pi,geoGraticule10:function(){return pi()()},geoInterpolate:_i,geoLength:ei,geoPath:xr,geoAlbers:Dr,geoAlbersUsa:function(){var t,e,n,i,r,s,o=Dr(),a=Pr().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=Pr().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){s=[t,e]}};function h(t){var e=t[0],o=t[1];return s=null,n.point(e,o),s||(i.point(e,o),s)||(r.point(e,o),s)}function u(){return t=e=null,h}return h.invert=function(t){var e=o.scale(),n=o.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&r<.234&&i>=-.425&&i<-.214?a:r>=.166&&r<.234&&i>=-.214&&i<-.115?l:o).invert(t)},h.stream=function(n){return t&&e===n?t:(i=[o.stream(e=n),a.stream(n),l.stream(n)],r=i.length,t={point:function(t,e){for(var n=-1;++n<r;)i[n].point(t,e)},sphere:function(){for(var t=-1;++t<r;)i[t].sphere()},lineStart:function(){for(var t=-1;++t<r;)i[t].lineStart()},lineEnd:function(){for(var t=-1;++t<r;)i[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<r;)i[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<r;)i[t].polygonEnd()}});var i,r},h.precision=function(t){return arguments.length?(o.precision(t),a.precision(t),l.precision(t),u()):o.precision()},h.scale=function(t){return arguments.length?(o.scale(t),a.scale(.35*t),l.scale(t),h.translate(o.translate())):o.scale()},h.translate=function(t){if(!arguments.length)return o.translate();var e=o.scale(),s=+t[0],h=+t[1];return n=o.translate(t).clipExtent([[s-.455*e,h-.238*e],[s+.455*e,h+.238*e]]).stream(c),i=a.translate([s-.307*e,h+.201*e]).clipExtent([[s-.425*e+It,h+.12*e+It],[s-.214*e-It,h+.234*e-It]]).stream(c),r=l.translate([s-.205*e,h+.212*e]).clipExtent([[s-.214*e+It,h+.166*e+It],[s-.115*e-It,h+.234*e-It]]).stream(c),u()},h.fitExtent=function(t,e){return wr(h,t,e)},h.fitSize=function(t,e){return Er(h,t,e)},h.fitWidth=function(t,e){return Nr(h,t,e)},h.fitHeight=function(t,e){return Ir(h,t,e)},h.scale(1070)},geoAzimuthalEqualArea:function(){return Tr(Gr).scale(124.75).clipAngle(179.999)},geoAzimuthalEqualAreaRaw:Gr,geoAzimuthalEquidistant:jr,geoAzimuthalEquidistantRaw:qr,geoConicConformal:function(){return Rr($r).scale(109.5).parallels([30,30])},geoConicConformalRaw:$r,geoConicEqualArea:Pr,geoConicEqualAreaRaw:Lr,geoConicEquidistant:function(){return Rr(Hr).scale(131.154).center([0,13.9389])},geoConicEquidistantRaw:Hr,geoEqualEarth:function(){return Tr(es).scale(177.158)},geoEqualEarthRaw:es,geoEquirectangular:Vr,geoEquirectangularRaw:Xr,geoGnomonic:is,geoGnomonicRaw:ns,geoIdentity:rs,geoProjection:Tr,geoProjectionMutator:Ar,geoMercator:Ur,geoMercatorRaw:Br,geoNaturalEarth1:function(){return Tr(ss).scale(175.295)},geoNaturalEarth1Raw:ss,geoOrthographic:as,geoOrthographicRaw:os,geoStereographic:function(){return Tr(ls).scale(250).clipAngle(142)},geoStereographicRaw:ls,geoTransverseMercator:function(){var t=Yr(cs),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)},geoTransverseMercatorRaw:cs,geoRotation:Cn,geoStream:ne,geoTransform:function(t){return{stream:br(t)}}}),us="http://www.w3.org/1999/xhtml",fs={svg:"http://www.w3.org/2000/svg",xhtml:us,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ds(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),fs.hasOwnProperty(e)?{space:fs[e],local:t}:t}function gs(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===us&&e.documentElement.namespaceURI===us?e.createElement(t):e.createElementNS(n,t)}}function ps(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function _s(t){var e=ds(t);return(e.local?ps:gs)(e)}function ys(){}function ms(t){return null==t?ys:function(){return this.querySelector(t)}}function xs(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function bs(){return[]}function vs(t){return null==t?bs:function(){return this.querySelectorAll(t)}}function Ms(t){return function(){return this.matches(t)}}function ws(t){return function(e){return e.matches(t)}}var Es=Array.prototype.find;function Ns(){return this.firstElementChild}var Is=Array.prototype.filter;function Ss(){return Array.from(this.children)}function Cs(t){return new Array(t.length)}function Os(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function ks(t){return function(){return t}}function Ts(t,e,n,i,r,s){for(var o,a=0,l=e.length,c=s.length;a<c;++a)(o=e[a])?(o.__data__=s[a],i[a]=o):n[a]=new Os(t,s[a]);for(;a<l;++a)(o=e[a])&&(r[a]=o)}function As(t,e,n,i,r,s,o){var a,l,c,h=new Map,u=e.length,f=s.length,d=new Array(u);for(a=0;a<u;++a)(l=e[a])&&(d[a]=c=o.call(l,l.__data__,a,e)+"",h.has(c)?r[a]=l:h.set(c,l));for(a=0;a<f;++a)c=o.call(t,s[a],a,s)+"",(l=h.get(c))?(i[a]=l,l.__data__=s[a],h.delete(c)):n[a]=new Os(t,s[a]);for(a=0;a<u;++a)(l=e[a])&&h.get(d[a])===l&&(r[a]=l)}function Rs(t){return t.__data__}function Ls(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Ps(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ds(t){return function(){this.removeAttribute(t)}}function zs(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Fs(t,e){return function(){this.setAttribute(t,e)}}function Gs(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function qs(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function js(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Bs(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Us(t){return function(){this.style.removeProperty(t)}}function Ys(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Ws(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function $s(t,e){return t.style.getPropertyValue(e)||Bs(t).getComputedStyle(t,null).getPropertyValue(e)}function Xs(t){return function(){delete this[t]}}function Vs(t,e){return function(){this[t]=e}}function Hs(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Zs(t){return t.trim().split(/^|\s+/)}function Js(t){return t.classList||new Qs(t)}function Qs(t){this._node=t,this._names=Zs(t.getAttribute("class")||"")}function Ks(t,e){for(var n=Js(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function to(t,e){for(var n=Js(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function eo(t){return function(){Ks(this,t)}}function no(t){return function(){to(this,t)}}function io(t,e){return function(){(e.apply(this,arguments)?Ks:to)(this,t)}}function ro(){this.textContent=""}function so(t){return function(){this.textContent=t}}function oo(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function ao(){this.innerHTML=""}function lo(t){return function(){this.innerHTML=t}}function co(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function ho(){this.nextSibling&&this.parentNode.appendChild(this)}function uo(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function fo(){return null}function go(){var t=this.parentNode;t&&t.removeChild(this)}function po(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function _o(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function yo(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function mo(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,s=e.length;i<s;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?e.length=r:delete this.__on}}}function xo(t,e,n){return function(){var i,r=this.__on,s=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(r)for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),void(i.value=e);this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function bo(t,e,n){var i=Bs(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function vo(t,e){return function(){return bo(this,t,e)}}function Mo(t,e){return function(){return bo(this,t,e.apply(this,arguments))}}Os.prototype={constructor:Os,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},Qs.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var wo=[null];function Eo(t,e){this._groups=t,this._parents=e}function No(){return new Eo([[document.documentElement]],wo)}function Io(t){return"string"==typeof t?new Eo([[document.querySelector(t)]],[document.documentElement]):new Eo([[t]],wo)}function So(t){return Io(_s(t).call(document.documentElement))}Eo.prototype=No.prototype={constructor:Eo,select:function(t){"function"!=typeof t&&(t=ms(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s,o,a=e[r],l=a.length,c=i[r]=new Array(l),h=0;h<l;++h)(s=a[h])&&(o=t.call(s,s.__data__,h,a))&&("__data__"in s&&(o.__data__=s.__data__),c[h]=o);return new Eo(i,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return xs(t.apply(this,arguments))}}(t):vs(t);for(var e=this._groups,n=e.length,i=[],r=[],s=0;s<n;++s)for(var o,a=e[s],l=a.length,c=0;c<l;++c)(o=a[c])&&(i.push(t.call(o,o.__data__,c,a)),r.push(o));return new Eo(i,r)},selectChild:function(t){return this.select(null==t?Ns:function(t){return function(){return Es.call(this.children,t)}}("function"==typeof t?t:ws(t)))},selectChildren:function(t){return this.selectAll(null==t?Ss:function(t){return function(){return Is.call(this.children,t)}}("function"==typeof t?t:ws(t)))},filter:function(t){"function"!=typeof t&&(t=Ms(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s,o=e[r],a=o.length,l=i[r]=[],c=0;c<a;++c)(s=o[c])&&t.call(s,s.__data__,c,o)&&l.push(s);return new Eo(i,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,Rs);var n=e?As:Ts,i=this._parents,r=this._groups;"function"!=typeof t&&(t=ks(t));for(var s=r.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var h=i[c],u=r[c],f=u.length,d=Ls(t.call(h,h&&h.__data__,c,i)),g=d.length,p=a[c]=new Array(g),_=o[c]=new Array(g),y=l[c]=new Array(f);n(h,u,p,_,y,d,e);for(var m,x,b=0,v=0;b<g;++b)if(m=p[b]){for(b>=v&&(v=b+1);!(x=_[v])&&++v<g;);m._next=x||null}}return(o=new Eo(o,i))._enter=a,o._exit=l,o},enter:function(){return new Eo(this._enter||this._groups.map(Cs),this._parents)},exit:function(){return new Eo(this._exit||this._groups.map(Cs),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,s=this.exit();return"function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&(r=e(r))&&(r=r.selection()),null==n?s.remove():n(s),i&&r?i.merge(r).order():r},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,s=i.length,o=Math.min(r,s),a=new Array(r),l=0;l<o;++l)for(var c,h=n[l],u=i[l],f=h.length,d=a[l]=new Array(f),g=0;g<f;++g)(c=h[g]||u[g])&&(d[g]=c);for(;l<r;++l)a[l]=n[l];return new Eo(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],s=r.length-1,o=r[s];--s>=0;)(i=r[s])&&(o&&4^i.compareDocumentPosition(o)&&o.parentNode.insertBefore(i,o),o=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Ps);for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var o,a=n[s],l=a.length,c=r[s]=new Array(l),h=0;h<l;++h)(o=a[h])&&(c[h]=o);c.sort(e)}return new Eo(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,s=e[n],o=0,a=s.length;o<a;++o)(r=s[o])&&t.call(r,r.__data__,o,s);return this},attr:function(t,e){var n=ds(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?zs:Ds:"function"==typeof e?n.local?js:qs:n.local?Gs:Fs)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?Us:"function"==typeof e?Ws:Ys)(t,e,null==n?"":n)):$s(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Xs:"function"==typeof e?Hs:Vs)(t,e)):this.node()[t]},classed:function(t,e){var n=Zs(t+"");if(arguments.length<2){for(var i=Js(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?io:e?eo:no)(n,e))},text:function(t){return arguments.length?this.each(null==t?ro:("function"==typeof t?oo:so)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?ao:("function"==typeof t?co:lo)(t)):this.node().innerHTML},raise:function(){return this.each(ho)},lower:function(){return this.each(uo)},append:function(t){var e="function"==typeof t?t:_s(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:_s(t),i=null==e?fo:"function"==typeof e?e:ms(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(go)},clone:function(t){return this.select(t?_o:po)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,s=yo(t+""),o=s.length;if(!(arguments.length<2)){for(a=e?xo:mo,i=0;i<o;++i)this.each(a(s[i],e,n));return this}var a=this.node().__on;if(a)for(var l,c=0,h=a.length;c<h;++c)for(i=0,l=a[c];i<o;++i)if((r=s[i]).type===l.type&&r.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?Mo:vo)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i,r=t[e],s=0,o=r.length;s<o;++s)(i=r[s])&&(yield i)}};var Co=0;function Oo(){return new ko}function ko(){this._="@"+(++Co).toString(36)}function To(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Ao(t,e){if(t=To(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}ko.prototype=Oo.prototype={constructor:ko,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var Ro=Object.freeze({__proto__:null,create:So,creator:_s,local:Oo,matcher:Ms,namespace:ds,namespaces:fs,pointer:Ao,pointers:function(t,e){return t.target&&(t=To(t),void 0===e&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,(t=>Ao(t,e)))},select:Io,selectAll:function(t){return"string"==typeof t?new Eo([document.querySelectorAll(t)],[document.documentElement]):new Eo([xs(t)],wo)},selection:No,selector:ms,selectorAll:vs,style:$s,window:Bs});function Lo(t){return t}function Po(t,e){var n=e.id,i=e.bbox,r=null==e.properties?{}:e.properties,s=Do(t,e);return null==n&&null==i?{type:"Feature",properties:r,geometry:s}:null==i?{type:"Feature",id:n,properties:r,geometry:s}:{type:"Feature",id:n,bbox:i,properties:r,geometry:s}}function Do(t,e){var n=function(t){if(null==t)return Lo;var e,n,i=t.scale[0],r=t.scale[1],s=t.translate[0],o=t.translate[1];return function(t,a){a||(e=n=0);var l=2,c=t.length,h=new Array(c);for(h[0]=(e+=t[0])*i+s,h[1]=(n+=t[1])*r+o;l<c;)h[l]=t[l],++l;return h}}(t.transform),i=t.arcs;function r(t,e){e.length&&e.pop();for(var r=i[t<0?~t:t],s=0,o=r.length;s<o;++s)e.push(n(r[s],s));t<0&&function(t,e){for(var n,i=t.length,r=i-e;r<--i;)n=t[r],t[r++]=t[i],t[i]=n}(e,o)}function s(t){return n(t)}function o(t){for(var e=[],n=0,i=t.length;n<i;++n)r(t[n],e);return e.length<2&&e.push(e[0]),e}function a(t){for(var e=o(t);e.length<4;)e.push(e[0]);return e}function l(t){return t.map(a)}return function t(e){var n,i=e.type;switch(i){case"GeometryCollection":return{type:i,geometries:e.geometries.map(t)};case"Point":n=s(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(s);break;case"LineString":n=o(e.arcs);break;case"MultiLineString":n=e.arcs.map(o);break;case"Polygon":n=l(e.arcs);break;case"MultiPolygon":n=e.arcs.map(l);break;default:return null}return{type:i,coordinates:n}}(e)}function zo(t,e){var n={},i={},r={},s=[],o=-1;function a(t,e){for(var i in t){var r=t[i];delete e[r.start],delete r.start,delete r.end,r.forEach((function(t){n[t<0?~t:t]=1})),s.push(r)}}return e.forEach((function(n,i){var r,s=t.arcs[n<0?~n:n];s.length<3&&!s[1][0]&&!s[1][1]&&(r=e[++o],e[o]=n,e[i]=r)})),e.forEach((function(e){var n,s,o=function(e){var n,i=t.arcs[e<0?~e:e],r=i[0];t.transform?(n=[0,0],i.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=i[i.length-1];return e<0?[n,r]:[r,n]}(e),a=o[0],l=o[1];if(n=r[a])if(delete r[n.end],n.push(e),n.end=l,s=i[l]){delete i[s.start];var c=s===n?n:n.concat(s);i[c.start=n.start]=r[c.end=s.end]=c}else i[n.start]=r[n.end]=n;else if(n=i[l])if(delete i[n.start],n.unshift(e),n.start=a,s=r[a]){delete r[s.end];var h=s===n?n:s.concat(n);i[h.start=s.start]=r[h.end=n.end]=h}else i[n.start]=r[n.end]=n;else i[(n=[e]).start=a]=r[n.end=l]=n})),a(r,i),a(i,r),e.forEach((function(t){n[t<0?~t:t]||s.push([t])})),s}function Fo(t,e,n){var i,r,s;if(arguments.length>1)i=Go(t,e,n);else for(r=0,i=new Array(s=t.arcs.length);r<s;++r)i[r]=r;return{type:"MultiLineString",arcs:zo(t,i)}}function Go(t,e,n){var i,r=[],s=[];function o(t){var e=t<0?~t:t;(s[e]||(s[e]=[])).push({i:t,g:i})}function a(t){t.forEach(o)}function l(t){t.forEach(a)}return function t(e){switch(i=e,e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"LineString":a(e.arcs);break;case"MultiLineString":case"Polygon":l(e.arcs);break;case"MultiPolygon":!function(t){t.forEach(l)}(e.arcs)}}(e),s.forEach(null==n?function(t){r.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&r.push(t[0].i)}),r}function qo(t,e){for(var n=0,i=t.length;n<i;){var r=n+i>>>1;t[r]<e?n=r+1:i=r}return n}const jo=Object.assign({},{feature:function(t,e){return"string"==typeof e&&(e=t.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map((function(e){return Po(t,e)}))}:Po(t,e)}});function Bo(t){return"Topology"==t.type?jo.feature(t,Object.keys(t.objects)[0]):JSON.parse(JSON.stringify(t))}const Uo=Object.assign({},{geoPath:xr});function Yo(t){return"FeatureCollection"!=(t=JSON.parse(JSON.stringify(t))).type||Array.isArray(t)?Array.isArray(t)&&null!=t[0].type&&null!=t[0].properties&&null!=t[0].geometry?{type:"FeatureCollection",features:t}:Array.isArray(t)&&null!=t[0].type&&null!=t[0].coordinates?{type:"FeatureCollection",features:t.map((t=>({type:"Feature",properties:{},geometry:t})))}:t:t}const Wo=Object.assign({},{geoEquirectangularRaw:Xr,geoBounds:ln});function $o(t){let e;e=Array.isArray(t)?t:Wo.geoBounds(Yo(t));let n=e[0][0],i=e[0][1],r=e[1][0],s=e[1][1];const o={type:"FeatureCollection",features:[{type:"Feature",properties:{id:1},geometry:{type:"Polygon",coordinates:-90===i?[[[n,s],[r,s]]]:[[[n,i],[n,s],[r+=360*(r<n),s],[r,i],[n,i]]]}}]};return Xo(Wo.geoEquirectangularRaw,.02)(o)}const Xo=(t,e)=>{const n=Math.PI/180,i=Math.tan(n*e/2)**2,r=function(e,n,s,o,a,l,c){if(l--){var h=Ho(e,s),u=t.invert(...h),f=Jo(u),d=Qo(f,n),g=Qo(f,o);Vo(f,n,o)*(1+.25*a)*(1+.25*a)/(i*a)+(d-g)/a*2*((d-g)/a)>1&d+g>i|d+g>.25&&(r(e,n,h,f,d,l,c),c.push(u),r(h,f,s,o,g,l,c))}},s=e=>{let n=[],i=e[0],s=t.invert(...i),o=Jo(s);n.push(s);for(var a=1,l=e.length;a<l;a++){let s=e[a],l=t.invert(...s),c=Jo(l);r(i,o,s,c,Qo(o,c),16,n),n.push(l),i=s,o=c}return n};let o,a=e=>t.invert(...e),l=t=>e=>e.forEach(((n,i)=>e[i]=t(n))),c={Point:t=>t.coordinates=a(t.coordinates),MultiPoint:t=>l(a)(t.coordinates),LineString:t=>t.coordinates=s(t.coordinates),Polygon:t=>l(s)(t.coordinates),MultiLineString:t=>l(s)(t.coordinates),MultiPolygon:t=>t.coordinates.forEach(l(s)),Feature:t=>o(t.geometry),GeometryCollection:t=>t.geometries.forEach(o),FeatureCollection:t=>t.features.forEach(o)};return o=t=>(c[t.type](t),t),function(t){return t=JSON.parse(JSON.stringify(t)),o(t)}},Vo=([t,e,n],[i,r,s],[o,a,l])=>{var c=t*((r-e)*(l-n)-(a-e)*(s-n))+e*((s-n)*(o-t)-(l-n)*(i-t))+n*((i-t)*(a-e)-(o-t)*(r-e)),h=(t+o)*(t+i)+(e+a)*(e+r)+(n+l)*(n+s);return(c*c+!(h*h))/(h*h)},Ho=([t,e],[n,i])=>[.5*(t+n),.5*(e+i)],Zo=Math.PI/180,Jo=([t,e])=>[Math.cos(Zo*e)*Math.cos(Zo*t),Math.cos(Zo*e)*Math.sin(Zo*t),Math.sin(Zo*e)],Qo=([t,e,n],[i,r,s])=>{var o=t*(r-e)-(i-t)*e,a=e*(s-n)-(r-e)*n,l=n*(i-t)-(s-n)*t,c=t*(i+t)+e*(r+e)+n*(s+n);return(o*o+a*a+l*l+!(c*c))/(c*c)};var Ko=Math.abs,ta=Math.atan,ea=Math.atan2,na=Math.cos,ia=Math.exp,ra=Math.floor,sa=Math.log,oa=Math.max,aa=Math.min,la=Math.pow,ca=Math.round,ha=Math.sign||function(t){return t>0?1:t<0?-1:0},ua=Math.sin,fa=Math.tan,da=1e-6,ga=1e-12,pa=Math.PI,_a=pa/2,ya=pa/4,ma=Math.SQRT1_2,xa=Ia(2),ba=Ia(pa),va=2*pa,Ma=180/pa,wa=pa/180;function Ea(t){return t>1?_a:t<-1?-_a:Math.asin(t)}function Na(t){return t>1?0:t<-1?pa:Math.acos(t)}function Ia(t){return t>0?Math.sqrt(t):0}function Sa(t){return(ia(t)-ia(-t))/2}function Ca(t){return(ia(t)+ia(-t))/2}function Oa(t){var e=fa(t/2),n=2*sa(na(t/2))/(e*e);function i(t,e){var i=na(t),r=na(e),s=ua(e),o=r*i,a=-((1-o?sa((1+o)/2)/(1-o):-.5)+n/(1+o));return[a*r*ua(t),a*s]}return i.invert=function(e,i){var r,s=Ia(e*e+i*i),o=-t/2,a=50;if(!s)return[0,0];do{var l=o/2,c=na(l),h=ua(l),u=h/c,f=-sa(Ko(c));o-=r=(2/u*f-n*u-s)/(-f/(h*h)+1-n/(2*c*c))*(c<0?.7:1)}while(Ko(r)>da&&--a>0);var d=ua(o);return[ea(e*d,s*na(o)),Ea(i*d/s)]},i}function ka(t,e){var n=na(e),i=function(t){return t?t/Math.sin(t):1}(Na(n*na(t/=2)));return[2*n*ua(t)*i,ua(e)*i]}function Ta(t){var e=ua(t),n=na(t),i=t>=0?1:-1,r=fa(i*t),s=(1+e-n)/2;function o(t,o){var a=na(o),l=na(t/=2);return[(1+a)*ua(t),(i*o>-ea(l,r)-.001?0:10*-i)+s+ua(o)*n-(1+a)*e*l]}return o.invert=function(t,o){var a=0,l=0,c=50;do{var h=na(a),u=ua(a),f=na(l),d=ua(l),g=1+f,p=g*u-t,_=s+d*n-g*e*h-o,y=g*h/2,m=-u*d,x=e*g*u/2,b=n*f+e*h*d,v=m*x-b*y,M=(_*m-p*b)/v/2,w=(p*x-_*y)/v;Ko(w)>2&&(w/=2),a-=M,l-=w}while((Ko(M)>da||Ko(w)>da)&&--c>0);return i*l>-ea(na(a),r)-.001?[2*a,l]:null},o}function Aa(t,e){var n=fa(e/2),i=Ia(1-n*n),r=1+i*na(t/=2),s=ua(t)*i/r,o=n/r,a=s*s,l=o*o;return[4/3*s*(3+a-3*l),4/3*o*(3+3*a-l)]}ka.invert=function(t,e){if(!(t*t+4*e*e>pa*pa+da)){var n=t,i=e,r=25;do{var s,o=ua(n),a=ua(n/2),l=na(n/2),c=ua(i),h=na(i),u=ua(2*i),f=c*c,d=h*h,g=a*a,p=1-d*l*l,_=p?Na(h*l)*Ia(s=1/p):s=0,y=2*_*h*a-t,m=_*c-e,x=s*(d*g+_*h*l*f),b=s*(.5*o*u-2*_*c*a),v=.25*s*(u*a-_*c*d*o),M=s*(f*l+_*g*h),w=b*v-M*x;if(!w)break;var E=(m*b-y*M)/w,N=(y*v-m*x)/w;n-=E,i-=N}while((Ko(E)>da||Ko(N)>da)&&--r>0);return[n,i]}},Aa.invert=function(t,e){if(e*=3/8,!(t*=3/8)&&Ko(e)>1)return null;var n=1+t*t+e*e,i=Ia((n-Ia(n*n-4*e*e))/2),r=Ea(i)/3,s=i?function(t){return sa(t+Ia(t*t-1))}(Ko(e/i))/3:function(t){return sa(t+Ia(t*t+1))}(Ko(t))/3,o=na(r),a=Ca(s),l=a*a-o*o;return[2*ha(t)*ea(Sa(s)*o,.25-l),2*ha(e)*ea(a*ua(r),.25+l)]};var Ra=Ia(8),La=sa(1+xa);function Pa(t,e){var n=Ko(e);return n<ya?[t,sa(fa(ya+e/2))]:[t*na(n)*(2*xa-1/ua(n)),ha(e)*(2*xa*(n-ya)-sa(fa(n/2)))]}function Da(t){var e=2*pa/t;function n(t,n){var i=qr(t,n);if(Ko(t)>_a){var r=ea(i[1],i[0]),s=Ia(i[0]*i[0]+i[1]*i[1]),o=e*ca((r-_a)/e)+_a,a=ea(ua(r-=o),2-na(r));r=o+Ea(pa/s*ua(a))-a,i[0]=s*na(r),i[1]=s*ua(r)}return i}return n.invert=function(t,n){var i=Ia(t*t+n*n);if(i>_a){var r=ea(n,t),s=e*ca((r-_a)/e)+_a,o=r>s?-1:1,a=i*na(s-r),l=1/fa(o*Na((a-pa)/Ia(pa*(pa-2*a)+i*i)));r=s+2*ta((l+o*Ia(l*l-3))/3),t=i*na(r),n=i*ua(r)}return qr.invert(t,n)},n}function za(t,e){if(arguments.length<2&&(e=t),1===e)return Gr;if(e===1/0)return Fa;function n(n,i){var r=Gr(n/e,i);return r[0]*=t,r}return n.invert=function(n,i){var r=Gr.invert(n/t,i);return r[0]*=e,r},n}function Fa(t,e){return[t*na(e)/na(e/=2),2*ua(e)]}function Ga(t,e,n){var i,r,s,o=100;n=void 0===n?0:+n,e=+e;do{(r=t(n))===(s=t(n+da))&&(s=r+da),n-=i=-1e-6*(r-e)/(r-s)}while(o-- >0&&Ko(i)>da);return o<0?NaN:n}function qa(t,e,n){return void 0===e&&(e=40),void 0===n&&(n=ga),function(i,r,s,o){var a,l,c;s=void 0===s?0:+s,o=void 0===o?0:+o;for(var h=0;h<e;h++){var u=t(s,o),f=u[0]-i,d=u[1]-r;if(Ko(f)<n&&Ko(d)<n)break;var g=f*f+d*d;if(g>a)s-=l/=2,o-=c/=2;else{a=g;var p=(s>0?-1:1)*n,_=(o>0?-1:1)*n,y=t(s+p,o),m=t(s,o+_),x=(y[0]-u[0])/p,b=(y[1]-u[1])/p,v=(m[0]-u[0])/_,M=(m[1]-u[1])/_,w=M*x-b*v,E=(Ko(w)<.5?.5:1)/w;if(s+=l=(d*v-f*M)*E,o+=c=(f*b-d*x)*E,Ko(l)<n&&Ko(c)<n)break}}return[s,o]}}function ja(){var t=za(1.68,2);function e(e,n){if(e+n<-1.4){var i=(e-n+1.6)*(e+n+1.4)/8;e+=i,n-=.8*i*ua(n+pa/2)}var r=t(e,n),s=(1-na(e*n))/12;return r[1]<0&&(r[0]*=1+s),r[1]>0&&(r[1]*=1+s/1.5*r[0]*r[0]),r}return e.invert=qa(e),e}function Ba(t,e){var n,i=t*ua(e),r=30;do{e-=n=(e+ua(e)-i)/(1+na(e))}while(Ko(n)>da&&--r>0);return e/2}function Ua(t,e,n){function i(i,r){return[t*i*na(r=Ba(n,r)),e*ua(r)]}return i.invert=function(i,r){return r=Ea(r/e),[i/(t*na(r)),Ea((2*r+ua(2*r))/n)]},i}Pa.invert=function(t,e){if((i=Ko(e))<La)return[t,2*ta(ia(e))-_a];var n,i,r=ya,s=25;do{var o=na(r/2),a=fa(r/2);r-=n=(Ra*(r-ya)-sa(a)-i)/(Ra-o*o/(2*a))}while(Ko(n)>ga&&--s>0);return[t/(na(r)*(Ra-1/ua(r))),ha(e)*r]},Fa.invert=function(t,e){var n=2*Ea(e/2);return[t*na(n/2)/na(n),n]};var Ya=Ua(xa/_a,xa,pa);var Wa=2.00276,$a=1.11072;function Xa(t,e){var n=Ba(pa,e);return[Wa*t/(1/na(e)+$a/na(n)),(e+xa*ua(n))/Wa]}function Va(t){var e=0,n=Ar(t),i=n(e);return i.parallel=function(t){return arguments.length?n(e=t*wa):e*Ma},i}function Ha(t,e){return[t*na(e),e]}function Za(t){if(!t)return Ha;var e=1/fa(t);function n(n,i){var r=e+t-i,s=r?n*na(i)/r:r;return[r*ua(s),e-r*na(s)]}return n.invert=function(n,i){var r=Ia(n*n+(i=e-i)*i),s=e+t-r;return[r/na(s)*ea(n,i),s]},n}function Ja(t){function e(e,n){var i=_a-n,r=i?e*t*ua(i)/i:i;return[i*ua(r)/t,_a-i*na(r)]}return e.invert=function(e,n){var i=e*t,r=_a-n,s=Ia(i*i+r*r),o=ea(i,r);return[(s?s/ua(s):1)*o/t,_a-s]},e}Xa.invert=function(t,e){var n,i,r=Wa*e,s=e<0?-ya:ya,o=25;do{i=r-xa*ua(s),s-=n=(ua(2*s)+2*s-pa*ua(i))/(2*na(2*s)+2+pa*na(i)*xa*na(s))}while(Ko(n)>da&&--o>0);return i=r-xa*ua(s),[t*(1/na(i)+$a/na(s))/Wa,i]},Ha.invert=function(t,e){return[t/na(e),e]};var Qa=Ua(1,4/pa,pa);function Ka(t,e,n,i,r,s){var o,a=na(s);if(Ko(t)>1||Ko(s)>1)o=Na(n*r+e*i*a);else{var l=ua(t/2),c=ua(s/2);o=2*Ea(Ia(l*l+e*i*c*c))}return Ko(o)>da?[o,ea(i*ua(s),e*r-n*i*a)]:[0,0]}function tl(t,e,n){return Na((t*t+e*e-n*n)/(2*t*e))}function el(t){return t-2*pa*ra((t+pa)/(2*pa))}function nl(t,e,n){for(var i,r=[[t[0],t[1],ua(t[1]),na(t[1])],[e[0],e[1],ua(e[1]),na(e[1])],[n[0],n[1],ua(n[1]),na(n[1])]],s=r[2],o=0;o<3;++o,s=i)i=r[o],s.v=Ka(i[1]-s[1],s[3],s[2],i[3],i[2],i[0]-s[0]),s.point=[0,0];var a=tl(r[0].v[0],r[2].v[0],r[1].v[0]),l=tl(r[0].v[0],r[1].v[0],r[2].v[0]),c=pa-a;r[2].point[1]=0,r[0].point[0]=-(r[1].point[0]=r[0].v[0]/2);var h=[r[2].point[0]=r[0].point[0]+r[2].v[0]*na(a),2*(r[0].point[1]=r[1].point[1]=r[2].v[0]*ua(a))];return function(t,e){var n,i=ua(e),s=na(e),o=new Array(3);for(n=0;n<3;++n){var a=r[n];if(o[n]=Ka(e-a[1],a[3],a[2],s,i,t-a[0]),!o[n][0])return a.point;o[n][1]=el(o[n][1]-a.v[1])}var u=h.slice();for(n=0;n<3;++n){var f=2==n?0:n+1,d=tl(r[n].v[0],o[n][0],o[f][0]);o[n][1]<0&&(d=-d),n?1==n?(d=l-d,u[0]-=o[n][0]*na(d),u[1]-=o[n][0]*ua(d)):(d=c-d,u[0]+=o[n][0]*na(d),u[1]+=o[n][0]*ua(d)):(u[0]+=o[n][0]*na(d),u[1]-=o[n][0]*ua(d))}return u[0]/=3,u[1]/=3,u}}function il(t){return t[0]*=wa,t[1]*=wa,t}function rl(t,e,n){var i=bn({type:"MultiPoint",coordinates:[t,e,n]}),r=[-i[0],-i[1]],s=Cn(r),o=nl(il(s(t)),il(s(e)),il(s(n)));o.invert=qa(o);var a=Tr(o).rotate(r),l=a.center;return delete a.rotate,a.center=function(t){return arguments.length?l(s(t)):s.invert(l())},a.clipAngle(90)}function sl(t,e){var n=Ia(1-ua(e));return[2/ba*t*n,ba*(1-n)]}function ol(t){var e=fa(t);function n(t,n){return[t,(t?t/ua(t):1)*(ua(n)*na(t)-e*na(n))]}return n.invert=e?function(t,n){t&&(n*=ua(t)/t);var i=na(t);return[t,2*ea(Ia(i*i+e*e-n*n)-i,e-n)]}:function(t,e){return[t,Ea(t?e*fa(t)/t:e)]},n}sl.invert=function(t,e){var n=(n=e/ba-1)*n;return[n>0?t*Ia(pa/n)/2:0,Ea(1-n)]};var al=Ia(3);function ll(t,e){return[al*t*(2*na(2*e/3)-1)/ba,al*ba*ua(e/3)]}function cl(t){var e=na(t);function n(t,n){return[t*e,ua(n)/e]}return n.invert=function(t,n){return[t/e,Ea(n*e)]},n}function hl(t){var e=na(t);function n(t,n){return[t*e,(1+e)*fa(n/2)]}return n.invert=function(t,n){return[t/e,2*ta(n/(1+e))]},n}function ul(t,e){var n=Ia(8/(3*pa));return[n*t*(1-Ko(e)/pa),n*e]}function fl(t,e){var n=Ia(4-3*ua(Ko(e)));return[2/Ia(6*pa)*t*n,ha(e)*Ia(2*pa/3)*(2-n)]}function dl(t,e){var n=Ia(pa*(4+pa));return[2/n*t*(1+Ia(1-4*e*e/(pa*pa))),4/n*e]}function gl(t,e){var n=(2+_a)*ua(e);e/=2;for(var i=0,r=1/0;i<10&&Ko(r)>da;i++){var s=na(e);e-=r=(e+ua(e)*(s+2)-n)/(2*s*(1+s))}return[2/Ia(pa*(4+pa))*t*(1+na(e)),2*Ia(pa/(4+pa))*ua(e)]}function pl(t,e){return[t*(1+na(e))/Ia(2+pa),2*e/Ia(2+pa)]}function _l(t,e){for(var n=(1+_a)*ua(e),i=0,r=1/0;i<10&&Ko(r)>da;i++)e-=r=(e+ua(e)-n)/(1+na(e));return n=Ia(2+pa),[t*(1+na(e))/n,2*e/n]}ll.invert=function(t,e){var n=3*Ea(e/(al*ba));return[ba*t/(al*(2*na(2*n/3)-1)),n]},ul.invert=function(t,e){var n=Ia(8/(3*pa)),i=e/n;return[t/(n*(1-Ko(i)/pa)),i]},fl.invert=function(t,e){var n=2-Ko(e)/Ia(2*pa/3);return[t*Ia(6*pa)/(2*n),ha(e)*Ea((4-n*n)/3)]},dl.invert=function(t,e){var n=Ia(pa*(4+pa))/2;return[t*n/(1+Ia(1-e*e*(4+pa)/(4*pa))),e*n/2]},gl.invert=function(t,e){var n=e*Ia((4+pa)/pa)/2,i=Ea(n),r=na(i);return[t/(2/Ia(pa*(4+pa))*(1+r)),Ea((i+n*(r+2))/(2+_a))]},pl.invert=function(t,e){var n=Ia(2+pa),i=e*n/2;return[n*t/(1+na(i)),i]},_l.invert=function(t,e){var n=1+_a,i=Ia(n/2);return[2*t*i/(1+na(e*=i)),Ea((e+ua(e))/n)]};var yl=3+2*xa;function ml(t,e){var n=ua(t/=2),i=na(t),r=Ia(na(e)),s=na(e/=2),o=ua(e)/(s+xa*i*r),a=Ia(2/(1+o*o)),l=Ia((xa*s+(i+n)*r)/(xa*s+(i-n)*r));return[yl*(a*(l-1/l)-2*sa(l)),yl*(a*o*(l+1/l)-2*ta(o))]}ml.invert=function(t,e){if(!(n=Aa.invert(t/1.2,1.065*e)))return null;var n,i=n[0],r=n[1],s=20;t/=yl,e/=yl;do{var o=i/2,a=r/2,l=ua(o),c=na(o),h=ua(a),u=na(a),f=na(r),d=Ia(f),g=h/(u+xa*c*d),p=g*g,_=Ia(2/(1+p)),y=(xa*u+(c+l)*d)/(xa*u+(c-l)*d),m=Ia(y),x=m-1/m,b=m+1/m,v=_*x-2*sa(m)-t,M=_*g*b-2*ta(g)-e,w=h&&ma*d*l*p/h,E=(xa*c*u+d)/(2*(u+xa*c*d)*(u+xa*c*d)*d),N=-.5*g*_*_*_,I=N*w,S=N*E,C=(C=2*u+xa*d*(c-l))*C*m,O=(xa*c*u*d+f)/C,k=-xa*l*h/(d*C),T=x*I-2*O/m+_*(O+O/y),A=x*S-2*k/m+_*(k+k/y),R=g*b*I-2*w/(1+p)+_*b*w+_*g*(O-O/y),L=g*b*S-2*E/(1+p)+_*b*E+_*g*(k-k/y),P=A*R-L*T;if(!P)break;var D=(M*A-v*L)/P,z=(v*R-M*T)/P;i-=D,r=oa(-_a,aa(_a,r-z))}while((Ko(D)>da||Ko(z)>da)&&--s>0);return Ko(Ko(r)-_a)<da?[0,r]:s&&[i,r]};var xl=na(35*wa);function bl(t,e){var n=fa(e/2);return[t*xl*Ia(1-n*n),(1+xl)*n]}function vl(t,e){var n=e/2,i=na(n);return[2*t/ba*na(e)*i*i,ba*fa(n)]}function Ml(t){var e=1-t,n=r(pa,0)[0]-r(-pa,0)[0],i=Ia(2*(r(0,_a)[1]-r(0,-_a)[1])/n);function r(n,i){var r=na(i),s=ua(i);return[r/(e+t*r)*n,e*i+t*s]}function s(t,e){var n=r(t,e);return[n[0]*i,n[1]/i]}function o(t){return s(0,t)[1]}return s.invert=function(n,r){var s=Ga(o,r);return[n/i*(t+e/na(s)),s]},s}function wl(t){return[t[0]/2,Ea(fa(t[1]/2*wa))*Ma]}function El(t){return[2*t[0],2*ta(ua(t[1]*wa))*Ma]}function Nl(t,e){var n=2*pa/e,i=t*t;function r(e,r){var s=qr(e,r),o=s[0],a=s[1],l=o*o+a*a;if(l>i){var c=Ia(l),h=ea(a,o),u=n*ca(h/n),f=h-u,d=t*na(f),g=(t*ua(f)-f*ua(d))/(_a-d),p=Il(f,g),_=(pa-t)/Sl(p,d,pa);o=c;var y,m=50;do{o-=y=(t+Sl(p,d,o)*_-c)/(p(o)*_)}while(Ko(y)>da&&--m>0);a=f*ua(o),o<_a&&(a-=g*(o-_a));var x=ua(u),b=na(u);s[0]=o*b-a*x,s[1]=o*x+a*b}return s}return r.invert=function(e,r){var s=e*e+r*r;if(s>i){var o=Ia(s),a=ea(r,e),l=n*ca(a/n),c=a-l;e=o*na(c),r=o*ua(c);for(var h=e-_a,u=ua(e),f=r/u,d=e<_a?1/0:0,g=10;;){var p=t*ua(f),_=t*na(f),y=ua(_),m=_a-_,x=(p-f*y)/m,b=Il(f,x);if(Ko(d)<ga||!--g)break;f-=d=(f*u-x*h-r)/(u-2*h*(m*(_+f*p*na(_)-y)-p*(p-f*y))/(m*m))}e=(o=t+Sl(b,_,e)*(pa-t)/Sl(b,_,pa))*na(a=l+f),r=o*ua(a)}return qr.invert(e,r)},r}function Il(t,e){return function(n){var i=t*na(n);return n<_a&&(i-=e),Ia(1+i*i)}}function Sl(t,e,n){for(var i=(n-e)/50,r=t(e)+t(n),s=1,o=e;s<50;++s)r+=2*t(o+=i);return.5*r*i}function Cl(t,e,n,i,r,s,o,a){function l(l,c){if(!c)return[t*l/pa,0];var h=c*c,u=t+h*(e+h*(n+h*i)),f=c*(r-1+h*(s-a+h*o)),d=(u*u+f*f)/(2*f),g=l*Ea(u/d)/pa;return[d*ua(g),c*(1+h*a)+d*(1-na(g))]}return arguments.length<8&&(a=0),l.invert=function(l,c){var h,u,f=pa*l/t,d=c,g=50;do{var p=d*d,_=t+p*(e+p*(n+p*i)),y=d*(r-1+p*(s-a+p*o)),m=_*_+y*y,x=2*y,b=m/x,v=b*b,M=Ea(_/b)/pa,w=f*M,E=_*_,N=(2*e+p*(4*n+6*p*i))*d,I=r+p*(3*s+5*p*o),S=(2*(_*N+y*(I-1))*x-m*(2*(I-1)))/(x*x),C=na(w),O=ua(w),k=b*C,T=b*O,A=f/pa*(1/Ia(1-E/v))*(N*b-_*S)/v,R=T-l,L=d*(1+p*a)+b-k-c,P=S*O+k*A,D=k*M,z=1+S-(S*C-T*A),F=T*M,G=P*F-z*D;if(!G)break;f-=h=(L*P-R*z)/G,d-=u=(R*F-L*D)/G}while((Ko(h)>da||Ko(u)>da)&&--g>0);return[f,d]},l}bl.invert=function(t,e){var n=e/(1+xl);return[t&&t/(xl*Ia(1-n*n)),2*ta(n)]},vl.invert=function(t,e){var n=ta(e/ba),i=na(n),r=2*n;return[t*ba/2/(na(r)*i*i),r]};var Ol=Cl(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);var kl=Cl(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);var Tl=Cl(5/6*pa,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Al(t,e){var n=t*t,i=e*e;return[t*(1-.162388*i)*(.87-952426e-9*n*n),e*(1+i/12)]}Al.invert=function(t,e){var n,i=t,r=e,s=50;do{var o=r*r;r-=n=(r*(1+o/12)-e)/(1+o/4)}while(Ko(n)>da&&--s>0);s=50,t/=1-.162388*o;do{var a=(a=i*i)*a;i-=n=(i*(.87-952426e-9*a)-t)/(.87-.00476213*a)}while(Ko(n)>da&&--s>0);return[i,r]};var Rl=Cl(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Ll(t){var e=t(_a,0)[0]-t(-_a,0)[0];function n(n,i){var r=n>0?-.5:.5,s=t(n+r*pa,i);return s[0]-=r*e,s}return t.invert&&(n.invert=function(n,i){var r=n>0?-.5:.5,s=t.invert(n+r*e,i),o=s[0]-r*pa;return o<-pa?o+=2*pa:o>pa&&(o-=2*pa),s[0]=o,s}),n}function Pl(t,e){var n=ha(t),i=ha(e),r=na(e),s=na(t)*r,o=ua(t)*r,a=ua(i*e);t=Ko(ea(o,a)),e=Ea(s),Ko(t-_a)>da&&(t%=_a);var l=function(t,e){if(e===_a)return[0,0];var n,i,r=ua(e),s=r*r,o=s*s,a=1+o,l=1+3*o,c=1-o,h=Ea(1/Ia(a)),u=c+s*a*h,f=(1-r)/u,d=Ia(f),g=f*a,p=Ia(g),_=d*c;if(0===t)return[0,-(_+s*p)];var y,m=na(e),x=1/m,b=2*r*m,v=(-u*m-(-3*s+h*l)*b*(1-r))/(u*u),M=-x*b,w=-x*(s*a*v+f*l*b),E=-2*x*(c*(.5*v/d)-2*s*d*b),N=4*t/pa;if(t>.222*pa||e<pa/4&&t>.175*pa){if(n=(_+s*Ia(g*(1+o)-_*_))/(1+o),t>pa/4)return[n,n];var I=n,S=.5*n;n=.5*(S+I),i=50;do{var C=n*(E+M*Ia(g-n*n))+w*Ea(n/p)-N;if(!C)break;C<0?S=n:I=n,n=.5*(S+I)}while(Ko(I-S)>da&&--i>0)}else{n=da,i=25;do{var O=n*n,k=Ia(g-O),T=E+M*k,A=n*T+w*Ea(n/p)-N;n-=y=k?A/(T+(w-M*O)/k):0}while(Ko(y)>da&&--i>0)}return[n,-_-s*Ia(g-n*n)]}(t>pa/4?_a-t:t,e);return t>pa/4&&(a=l[0],l[0]=-l[1],l[1]=-a),l[0]*=n,l[1]*=-i,l}function Dl(t,e){var n,i,r,s,o;if(e<da)return[(s=ua(t))-(n=e*(t-s*(i=na(t)))/4)*i,i+n*s,1-e*s*s/2,t-n];if(e>=.999999)return n=(1-e)/4,i=Ca(t),s=function(t){return((t=ia(2*t))-1)/(t+1)}(t),r=1/i,[s+n*((o=i*Sa(t))-t)/(i*i),r-n*s*r*(o-t),r+n*s*r*(o+t),2*ta(ia(t))-_a+n*(o-t)/i];var a=[1,0,0,0,0,0,0,0,0],l=[Ia(e),0,0,0,0,0,0,0,0],c=0;for(i=Ia(1-e),o=1;Ko(l[c]/a[c])>da&&c<8;)n=a[c++],l[c]=(n-i)/2,a[c]=(n+i)/2,i=Ia(n*i),o*=2;r=o*a[c]*t;do{r=(Ea(s=l[c]*ua(i=r)/a[c])+r)/2}while(--c);return[ua(r),s=na(r),s/na(r-i),r]}function zl(t,e){if(!e)return t;if(1===e)return sa(fa(t/2+ya));for(var n=1,i=Ia(1-e),r=Ia(e),s=0;Ko(r)>da;s++){if(t%pa){var o=ta(i*fa(t)/n);o<0&&(o+=pa),t+=o+~~(t/pa)*pa}else t+=t;r=(n+i)/2,i=Ia(n*i),r=((n=r)-i)/2}return t/(la(2,s)*n)}function Fl(t,e){var n=(xa-1)/(xa+1),i=Ia(1-n*n),r=zl(_a,i*i),s=sa(fa(pa/4+Ko(e)/2)),o=ia(-1*s)/Ia(n),a=function(t,e){var n=t*t,i=e+1,r=1-n-e*e;return[.5*((t>=0?_a:-_a)-ea(r,2*t)),-.25*sa(r*r+4*n)+.5*sa(i*i+n)]}(o*na(-1*t),o*ua(-1*t)),l=function(t,e,n){var i=Ko(t),r=Sa(Ko(e));if(i){var s=1/ua(i),o=1/(fa(i)*fa(i)),a=-(o+n*(r*r*s*s)-1+n),l=(-a+Ia(a*a-(n-1)*o*4))/2;return[zl(ta(1/Ia(l)),n)*ha(t),zl(ta(Ia((l/o-1)/n)),1-n)*ha(e)]}return[0,zl(ta(r),1-n)*ha(e)]}(a[0],a[1],i*i);return[-l[1],(e>=0?1:-1)*(.5*r-l[0])]}function Gl(t){var e=ua(t),n=na(t),i=ql(t);function r(t,r){var s=i(t,r);t=s[0],r=s[1];var o=ua(r),a=na(r),l=na(t),c=Na(e*o+n*a*l),h=ua(c),u=Ko(h)>da?c/h:1;return[u*n*ua(t),(Ko(t)>_a?u:-u)*(e*a-n*o*l)]}return i.invert=ql(-t),r.invert=function(t,n){var r=Ia(t*t+n*n),s=-ua(r),o=na(r),a=r*o,l=-n*s,c=r*e,h=Ia(a*a+l*l-c*c),u=ea(a*c+l*h,l*c-a*h),f=(r>_a?-1:1)*ea(t*s,r*na(u)*o+n*ua(u)*s);return i.invert(f,u)},r}function ql(t){var e=ua(t),n=na(t);return function(t,i){var r=na(i),s=na(t)*r,o=ua(t)*r,a=ua(i);return[ea(o,s*n-a*e),Ea(a*n+s*e)]}}Pl.invert=function(t,e){Ko(t)>1&&(t=2*ha(t)-t),Ko(e)>1&&(e=2*ha(e)-e);var n=ha(t),i=ha(e),r=-n*t,s=-i*e,o=s/r<1,a=function(t,e){var n=0,i=1,r=.5,s=50;for(;;){var o=r*r,a=Ia(r),l=Ea(1/Ia(1+o)),c=1-o+r*(1+o)*l,h=(1-a)/c,u=Ia(h),f=h*(1+o),d=u*(1-o),g=Ia(f-t*t),p=e+d+r*g;if(Ko(i-n)<ga||0==--s||0===p)break;p>0?n=r:i=r,r=.5*(n+i)}if(!s)return null;var _=Ea(a),y=na(_),m=1/y,x=2*a*y,b=(-c*y-(-3*r+l*(1+3*o))*x*(1-a))/(c*c);return[pa/4*(t*(-2*m*(.5*b/u*(1-o)-2*r*u*x)+-m*x*g)+-m*(r*(1+o)*b+h*(1+3*o)*x)*Ea(t/Ia(f))),_]}(o?s:r,o?r:s),l=a[0],c=a[1],h=na(c);return o&&(l=-_a-l),[n*(ea(ua(l)*h,-ua(c))+pa),i*Ea(na(l)*h)]},Fl.invert=function(t,e){var n=(xa-1)/(xa+1),i=Ia(1-n*n),r=function(t,e,n){var i,r,s;return t?(i=Dl(t,n),e?(s=(r=Dl(e,1-n))[1]*r[1]+n*i[0]*i[0]*r[0]*r[0],[[i[0]*r[2]/s,i[1]*i[2]*r[0]*r[1]/s],[i[1]*r[1]/s,-i[0]*i[2]*r[0]*r[2]/s],[i[2]*r[1]*r[2]/s,-n*i[0]*i[1]*r[0]/s]]):[[i[0],0],[i[1],0],[i[2],0]]):[[0,(r=Dl(e,1-n))[0]/r[1]],[1/r[1],0],[r[2]/r[1],0]]}(.5*zl(_a,i*i)-e,-t,i*i),s=function(t,e){var n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}(r[0],r[1]);return[ea(s[1],s[0])/-1,2*ta(ia(-.5*sa(n*s[0]*s[0]+n*s[1]*s[1])))-_a]};var jl=Ea(1-1/3)*Ma,Bl=cl(0);function Ul(t){var e=jl*wa,n=sl(pa,e)[0]-sl(-pa,e)[0],i=Bl(0,e)[1],r=sl(0,e)[1],s=ba-r,o=va/t,a=4/va,l=i+s*s*4/va;function c(c,h){var u,f=Ko(h);if(f>e){var d=aa(t-1,oa(0,ra((c+pa)/o)));(u=sl(c+=pa*(t-1)/t-d*o,f))[0]=u[0]*va/n-va*(t-1)/(2*t)+d*va/t,u[1]=i+4*(u[1]-r)*s/va,h<0&&(u[1]=-u[1])}else u=Bl(c,h);return u[0]*=a,u[1]/=l,u}return c.invert=function(e,c){e/=a;var h=Ko(c*=l);if(h>i){var u=aa(t-1,oa(0,ra((e+pa)/o)));e=(e+pa*(t-1)/t-u*o)*n/va;var f=sl.invert(e,.25*(h-i)*va/s+r);return f[0]-=pa*(t-1)/t-u*o,c<0&&(f[1]=-f[1]),f}return Bl.invert(e,c)},c}function Yl(t,e){return[t,1&e?89.999999:jl]}function Wl(t,e){return[t,1&e?-89.999999:-jl]}function $l(t){return[.999999*t[0],t[1]]}function Xl(t){var e,n=1+t,i=Ea(ua(1/n)),r=2*Ia(pa/(e=pa+4*i*n)),s=.5*r*(n+Ia(t*(2+t))),o=t*t,a=n*n;function l(l,c){var h,u,f=1-ua(c);if(f&&f<2){var d,g=_a-c,p=25;do{var _=ua(g),y=na(g),m=i+ea(_,n-y),x=1+a-2*n*y;g-=d=(g-o*i-n*_+x*m-.5*f*e)/(2*n*_*m)}while(Ko(d)>ga&&--p>0);h=r*Ia(x),u=l*m/pa}else h=r*(t+f),u=l*i/pa;return[h*ua(u),s-h*na(u)]}return l.invert=function(t,l){var c=t*t+(l-=s)*l,h=(1+a-c/(r*r))/(2*n),u=Na(h),f=ua(u),d=i+ea(f,n-h);return[Ea(t/Ia(c))*pa/d,Ea(1-2*(u-o*i-n*f+(1+a-2*n*h)*d)/e)]},l}var Vl=.7109889596207567,Hl=.0528035274542;function Zl(t,e){return e>-Vl?((t=Ya(t,e))[1]+=Hl,t):Ha(t,e)}function Jl(t,e){return Ko(e)>Vl?((t=Ya(t,e))[1]-=e>0?Hl:-Hl,t):Ha(t,e)}function Ql(t,e,n,i){var r=Ia(4*pa/(2*n+(1+t-e/2)*ua(2*n)+(t+e)/2*ua(4*n)+e/2*ua(6*n))),s=Ia(i*ua(n)*Ia((1+t*na(2*n)+e*na(4*n))/(1+t+e))),o=n*l(1);function a(n){return Ia(1+t*na(2*n)+e*na(4*n))}function l(i){var r=i*n;return(2*r+(1+t-e/2)*ua(2*r)+(t+e)/2*ua(4*r)+e/2*ua(6*r))/n}function c(t){return a(t)*ua(t)}var h=function(t,e){var i=n*Ga(l,o*ua(e)/n,e/pa);isNaN(i)&&(i=n*ha(e));var c=r*a(i);return[c*s*t/pa*na(i),c/s*ua(i)]};return h.invert=function(t,e){var i=Ga(c,e*s/r);return[t*pa/(na(i)*r*s*a(i)),Ea(n*l(i/n)/o)]},0===n&&(r=Ia(i/pa),(h=function(t,e){return[t*r,ua(e)/r]}).invert=function(t,e){return[t/r,Ea(e*r)]}),h}function Kl(){var t=1,e=0,n=45*wa,i=2,r=Ar(Ql),s=r(t,e,n,i);return s.a=function(s){return arguments.length?r(t=+s,e,n,i):t},s.b=function(s){return arguments.length?r(t,e=+s,n,i):e},s.psiMax=function(s){return arguments.length?r(t,e,n=+s*wa,i):n*Ma},s.ratio=function(s){return arguments.length?r(t,e,n,i=+s):i},s.scale(180.739)}function tc(t,e,n,i,r,s,o,a,l,c,h){if(h.nanEncountered)return NaN;var u,f,d,g,p,_,y,m,x,b;if(f=t(e+.25*(u=n-e)),d=t(n-.25*u),isNaN(f))h.nanEncountered=!0;else{if(!isNaN(d))return b=((_=(g=u*(i+4*f+r)/12)+(p=u*(r+4*d+s)/12))-o)/15,c>l?(h.maxDepthCount++,_+b):Math.abs(b)<a?_+b:(m=tc(t,e,y=e+.5*u,i,f,r,g,.5*a,l,c+1,h),isNaN(m)?(h.nanEncountered=!0,NaN):(x=tc(t,y,n,r,d,s,p,.5*a,l,c+1,h),isNaN(x)?(h.nanEncountered=!0,NaN):m+x));h.nanEncountered=!0}}function ec(t,e,n,i,r){void 0===i&&(i=1e-8),void 0===r&&(r=20);var s=t(e),o=t(.5*(e+n)),a=t(n);return tc(t,e,n,s,o,a,(s+4*o+a)*(n-e)/6,i,r,1,{maxDepthCount:0,nanEncountered:!1})}function nc(t,e,n){function i(n){return t+(1-t)*la(1-la(n,e),1/e)}function r(t){return ec(i,0,t,1e-4)}for(var s=1/r(1),o=1e3,a=(1+1e-8)*s,l=[],c=0;c<=o;c++)l.push(r(c/o)*a);function h(t){var e=0,n=o,i=500;do{l[i]>t?n=i:e=i,i=e+n>>1}while(i>e);var r=l[i+1]-l[i];return r&&(r=(t-l[i+1])/r),(i+1+r)/o}var u=2*h(1)/pa*s/n,f=function(t,e){var n=h(Ko(ua(e))),r=i(n)*t;return n/=u,[r,e>=0?n:-n]};return f.invert=function(t,e){var n;return Ko(e*=u)<1&&(n=ha(e)*Ea(r(Ko(e))*s)),[t/i(Ko(e)),n]},f}function ic(t,e){return Ko(t[0]-e[0])<da&&Ko(t[1]-e[1])<da}function rc(t,e){for(var n,i,r,s=-1,o=t.length,a=t[0],l=[];++s<o;){i=((n=t[s])[0]-a[0])/e,r=(n[1]-a[1])/e;for(var c=0;c<e;++c)l.push([a[0]+c*i,a[1]+c*r]);a=n}return l.push(n),l}function sc(t){var e,n,i,r,s,o,a,l=[],c=t[0].length;for(a=0;a<c;++a)n=(e=t[0][a])[0][0],i=e[0][1],r=e[1][1],s=e[2][0],o=e[2][1],l.push(rc([[n+da,i+da],[n+da,r-da],[s-da,r-da],[s-da,o+da]],30));for(a=t[1].length-1;a>=0;--a)n=(e=t[1][a])[0][0],i=e[0][1],r=e[1][1],s=e[2][0],o=e[2][1],l.push(rc([[s-da,o-da],[s-da,r+da],[n+da,r+da],[n+da,i-da]],30));return{type:"Polygon",coordinates:[ft(l)]}}function oc(t,e,n){var i,r;function s(n,i){for(var r=i<0?-1:1,s=e[+(i<0)],o=0,a=s.length-1;o<a&&n>s[o][2][0];++o);var l=t(n-s[o][1][0],i);return l[0]+=t(s[o][1][0],r*i>r*s[o][0][1]?s[o][0][1]:i)[0],l}n?s.invert=n(s):t.invert&&(s.invert=function(n,i){for(var o=r[+(i<0)],a=e[+(i<0)],l=0,c=o.length;l<c;++l){var h=o[l];if(h[0][0]<=n&&n<h[1][0]&&h[0][1]<=i&&i<h[1][1]){var u=t.invert(n-t(a[l][1][0],0)[0],i);return u[0]+=a[l][1][0],ic(s(u[0],u[1]),[n,i])?u:null}}});var o=Tr(s),a=o.stream;return o.stream=function(t){var e=o.rotate(),n=a(t),r=(o.rotate([0,0]),a(t));return o.rotate(e),n.sphere=function(){ne(i,r)},n},o.lobes=function(n){return arguments.length?(i=sc(n),e=n.map((function(t){return t.map((function(t){return[[t[0][0]*wa,t[0][1]*wa],[t[1][0]*wa,t[1][1]*wa],[t[2][0]*wa,t[2][1]*wa]]}))})),r=e.map((function(e){return e.map((function(e){var n,i=t(e[0][0],e[0][1])[0],r=t(e[2][0],e[2][1])[0],s=t(e[1][0],e[0][1])[1],o=t(e[1][0],e[1][1])[1];return s>o&&(n=s,s=o,o=n),[[i,s],[r,o]]}))})),o):e.map((function(t){return t.map((function(t){return[[t[0][0]*Ma,t[0][1]*Ma],[t[1][0]*Ma,t[1][1]*Ma],[t[2][0]*Ma,t[2][1]*Ma]]}))}))},null!=e&&o.lobes(e),o}Zl.invert=function(t,e){return e>-Vl?Ya.invert(t,e-Hl):Ha.invert(t,e)},Jl.invert=function(t,e){return Ko(e)>Vl?Ya.invert(t,e+(e>0?Hl:-Hl)):Ha.invert(t,e)};var ac=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];var lc=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];var cc=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];var hc=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];var uc=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];var fc=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function dc(t,e){return[3/va*t*Ia(pa*pa/3-e*e),e]}function gc(t){function e(e,n){if(Ko(Ko(n)-_a)<da)return[0,n<0?-2:2];var i=ua(n),r=la((1+i)/(1-i),t/2),s=.5*(r+1/r)+na(e*=t);return[2*ua(e)/s,(r-1/r)/s]}return e.invert=function(e,n){var i=Ko(n);if(Ko(i-2)<da)return e?null:[0,ha(n)*_a];if(i>2)return null;var r=(e/=2)*e,s=(n/=2)*n,o=2*n/(1+r+s);return o=la((1+o)/(1-o),1/t),[ea(2*e,1-r-s)/t,Ea((o-1)/(o+1))]},e}dc.invert=function(t,e){return[va/3*t/Ia(pa*pa/3-e*e),e]};var pc=pa/xa;function _c(t,e){return[t*(1+Ia(na(e)))/2,e/(na(e/2)*na(t/6))]}function yc(t,e){var n=t*t,i=e*e;return[t*(.975534+i*(-.0143059*n-.119161+-.0547009*i)),e*(1.00384+n*(.0802894+-.02855*i+199025e-9*n)+i*(.0998909+-.0491032*i))]}function mc(t,e){return[ua(t)/na(e),fa(e)*na(t)]}function xc(t){var e=na(t),n=fa(ya+t/2);function i(i,r){var s=r-t,o=Ko(s)<da?i*e:Ko(o=ya+r/2)<da||Ko(Ko(o)-_a)<da?0:i*s/sa(fa(o)/n);return[o,s]}return i.invert=function(i,r){var s,o=r+t;return[Ko(r)<da?i/e:Ko(s=ya+o/2)<da||Ko(Ko(s)-_a)<da?0:i*sa(fa(s)/n)/r,o]},i}function bc(t,e){return[t,1.25*sa(fa(ya+.4*e))]}function vc(t){var e=t.length-1;function n(n,i){for(var r,s=na(i),o=2/(1+s*na(n)),a=o*s*ua(n),l=o*ua(i),c=e,h=t[c],u=h[0],f=h[1];--c>=0;)u=(h=t[c])[0]+a*(r=u)-l*f,f=h[1]+a*f+l*r;return[u=a*(r=u)-l*f,f=a*f+l*r]}return n.invert=function(n,i){var r=20,s=n,o=i;do{for(var a,l=e,c=t[l],h=c[0],u=c[1],f=0,d=0;--l>=0;)f=h+s*(a=f)-o*d,d=u+s*d+o*a,h=(c=t[l])[0]+s*(a=h)-o*u,u=c[1]+s*u+o*a;var g,p,_=(f=h+s*(a=f)-o*d)*f+(d=u+s*d+o*a)*d;s-=g=((h=s*(a=h)-o*u-n)*f+(u=s*u+o*a-i)*d)/_,o-=p=(u*f-h*d)/_}while(Ko(g)+Ko(p)>1e-12&&--r>0);if(r){var y=Ia(s*s+o*o),m=2*ta(.5*y),x=ua(m);return[ea(s*x,y*na(m)),y?Ea(o*x/y):0]}},n}_c.invert=function(t,e){var n=Ko(t),i=Ko(e),r=da,s=_a;i<pc?s*=i/pc:r+=6*Na(pc/i);for(var o=0;o<25;o++){var a=ua(s),l=Ia(na(s)),c=ua(s/2),h=na(s/2),u=ua(r/6),f=na(r/6),d=.5*r*(1+l)-n,g=s/(h*f)-i,p=l?-.25*r*a/l:0,_=.5*(1+l),y=(1+.5*s*c/h)/(h*f),m=s/h*(u/6)/(f*f),x=p*m-y*_,b=(d*m-g*_)/x,v=(g*p-d*y)/x;if(s-=b,r-=v,Ko(b)<da&&Ko(v)<da)break}return[t<0?-r:r,e<0?-s:s]},yc.invert=function(t,e){var n=ha(t)*pa,i=e/2,r=50;do{var s=n*n,o=i*i,a=n*i,l=n*(.975534+o*(-.0143059*s-.119161+-.0547009*o))-t,c=i*(1.00384+s*(.0802894+-.02855*o+199025e-9*s)+o*(.0998909+-.0491032*o))-e,h=.975534-o*(.119161+3*s*.0143059+.0547009*o),u=-a*(.238322+.2188036*o+.0286118*s),f=a*(.1605788+7961e-7*s+-.0571*o),d=1.00384+s*(.0802894+199025e-9*s)+o*(3*(.0998909-.02855*s)-.245516*o),g=u*f-d*h,p=(c*u-l*d)/g,_=(l*f-c*h)/g;n-=p,i-=_}while((Ko(p)>da||Ko(_)>da)&&--r>0);return r&&[n,i]},mc.invert=function(t,e){var n=t*t,i=e*e+1,r=n+i,s=t?ma*Ia((r-Ia(r*r-4*n))/n):1/Ia(i);return[Ea(t*s),ha(e)*Na(s)]},bc.invert=function(t,e){return[t,2.5*ta(ia(.8*e))-.625*pa]};var Mc=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],wc=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Ec=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Nc=[[.9245,0],[0,0],[.01943,0]],Ic=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Sc(t,e){var n=Tr(vc(t)).rotate(e).clipAngle(90),i=Cn(e),r=n.center;return delete n.rotate,n.center=function(t){return arguments.length?r(i(t)):i.invert(r())},n}var Cc=Ia(6),Oc=Ia(7);function kc(t,e){var n=Ea(7*ua(e)/(3*Cc));return[Cc*t*(2*na(2*n/3)-1)/Oc,9*ua(n/3)/Oc]}function Tc(t,e){for(var n,i=(1+ma)*ua(e),r=e,s=0;s<25&&(r-=n=(ua(r/2)+ua(r)-i)/(.5*na(r/2)+na(r)),!(Ko(n)<da));s++);return[t*(1+2*na(r)/na(r/2))/(3*xa),2*Ia(3)*ua(r/2)/Ia(2+xa)]}function Ac(t,e){for(var n,i=Ia(6/(4+pa)),r=(1+pa/4)*ua(e),s=e/2,o=0;o<25&&(s-=n=(s/2+ua(s)-r)/(.5+na(s)),!(Ko(n)<da));o++);return[i*(.5+na(s))*t/1.5,i*s]}function Rc(t,e){var n=e*e,i=n*n,r=n*i;return[t*(.84719-.13063*n+r*r*(.05494*n-.04515-.02326*i+.00331*r)),e*(1.01183+i*i*(.01926*n-.02625-.00396*i))]}function Lc(t,e){return[t*(1+na(e))/2,2*(e-fa(e/2))]}kc.invert=function(t,e){var n=3*Ea(e*Oc/9);return[t*Oc/(Cc*(2*na(2*n/3)-1)),Ea(3*ua(n)*Cc/7)]},Tc.invert=function(t,e){var n=e*Ia(2+xa)/(2*Ia(3)),i=2*Ea(n);return[3*xa*t/(1+2*na(i)/na(i/2)),Ea((n+ua(i))/(1+ma))]},Ac.invert=function(t,e){var n=Ia(6/(4+pa)),i=e/n;return Ko(Ko(i)-_a)<da&&(i=i<0?-_a:_a),[1.5*t/(n*(.5+na(i))),Ea((i/2+ua(i))/(1+pa/4))]},Rc.invert=function(t,e){var n,i,r,s,o=e,a=25;do{o-=n=(o*(1.01183+(r=(i=o*o)*i)*r*(.01926*i-.02625-.00396*r))-e)/(1.01183+r*r*(.21186*i-.23625+-.05148*r))}while(Ko(n)>ga&&--a>0);return[t/(.84719-.13063*(i=o*o)+(s=i*(r=i*i))*s*(.05494*i-.04515-.02326*r+.00331*s)),o]},Lc.invert=function(t,e){for(var n=e/2,i=0,r=1/0;i<10&&Ko(r)>da;++i){var s=na(e/2);e-=r=(e-fa(e/2)-n)/(1-.5/(s*s))}return[2*t/(1+na(e)),e]};var Pc=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Dc(t,e){var n=ua(e),i=na(e),r=ha(t);if(0===t||Ko(e)===_a)return[0,e];if(0===e)return[t,0];if(Ko(t)===_a)return[t*i,_a*n];var s=pa/(2*t)-2*t/pa,o=2*e/pa,a=(1-o*o)/(n-o),l=s*s,c=a*a,h=1+l/c,u=1+c/l,f=(s*n/a-s/2)/h,d=(c*n/l+a/2)/u,g=d*d-(c*n*n/l+a*n-1)/u;return[_a*(f+Ia(f*f+i*i/h)*r),_a*(d+Ia(g<0?0:g)*ha(-e*s)*r)]}Dc.invert=function(t,e){var n=(t/=_a)*t,i=n+(e/=_a)*e,r=pa*pa;return[t?(i-1+Ia((1-i)*(1-i)+4*n))/(2*t)*_a:0,Ga((function(t){return i*(pa*ua(t)-2*t)*pa+4*t*t*(e-ua(t))+2*pa*t-r*e}),0)]};var zc=1.0148,Fc=.23185,Gc=-.14499,qc=.02406,jc=1.790857183;function Bc(t,e){var n=e*e;return[t,e*(zc+n*n*(Fc+n*(Gc+qc*n)))]}function Uc(t,e){if(Ko(e)<da)return[t,0];var n=fa(e),i=t*ua(e);return[ua(i)/n,e+(1-na(i))/n]}function Yc(t,e){var n=$c(t[1],t[0]),i=$c(e[1],e[0]),r=function(t,e){return ea(t[0]*e[1]-t[1]*e[0],t[0]*e[0]+t[1]*e[1])}(n,i),s=Xc(n)/Xc(i);return Wc([1,0,t[0][0],0,1,t[0][1]],Wc([s,0,0,0,s,0],Wc([na(r),ua(r),0,-ua(r),na(r),0],[1,0,-e[0][0],0,1,-e[0][1]])))}function Wc(t,e){return[t[0]*e[0]+t[1]*e[3],t[0]*e[1]+t[1]*e[4],t[0]*e[2]+t[1]*e[5]+t[2],t[3]*e[0]+t[4]*e[3],t[3]*e[1]+t[4]*e[4],t[3]*e[2]+t[4]*e[5]+t[5]]}function $c(t,e){return[t[0]-e[0],t[1]-e[1]]}function Xc(t){return Ia(t[0]*t[0]+t[1]*t[1])}function Vc(t,e){function n(t,n){var i,r=e(t,n),s=r.project([t*Ma,n*Ma]);return(i=r.transform)?[i[0]*s[0]+i[1]*s[1]+i[2],-(i[3]*s[0]+i[4]*s[1]+i[5])]:(s[1]=-s[1],s)}function i(t,n){var r=t.project.invert,s=t.transform,o=n;if(s&&(s=function(t){var e=1/(t[0]*t[4]-t[1]*t[3]);return[e*t[4],-e*t[1],e*(t[1]*t[5]-t[2]*t[4]),-e*t[3],e*t[0],e*(t[2]*t[3]-t[0]*t[5])]}(s),o=[s[0]*o[0]+s[1]*o[1]+s[2],s[3]*o[0]+s[4]*o[1]+s[5]]),r&&t===function(t){return e(t[0]*wa,t[1]*wa)}(a=r(o)))return a;for(var a,l=t.children,c=0,h=l&&l.length;c<h;++c)if(a=i(l[c],n))return a}!function t(e,n){if(e.edges=function(t){for(var e=t.length,n=[],i=t[e-1],r=0;r<e;++r)n.push([i,i=t[r]]);return n}(e.face),n.face){var i=e.shared=function(t,e){for(var n,i,r=t.length,s=null,o=0;o<r;++o){n=t[o];for(var a=e.length;--a>=0;)if(i=e[a],n[0]===i[0]&&n[1]===i[1]){if(s)return[s,n];s=n}}}(e.face,n.face),r=Yc(i.map(n.project),i.map(e.project));e.transform=n.transform?Wc(n.transform,r):r;for(var s=n.edges,o=0,a=s.length;o<a;++o)Zc(i[0],s[o][1])&&Zc(i[1],s[o][0])&&(s[o]=e),Zc(i[0],s[o][0])&&Zc(i[1],s[o][1])&&(s[o]=e);for(s=e.edges,o=0,a=s.length;o<a;++o)Zc(i[0],s[o][0])&&Zc(i[1],s[o][1])&&(s[o]=n),Zc(i[0],s[o][1])&&Zc(i[1],s[o][0])&&(s[o]=n)}else e.transform=n.transform;e.children&&e.children.forEach((function(n){t(n,e)}));return e}(t,{transform:null}),Jc(t)&&(n.invert=function(e,n){var r=i(t,[e,-n]);return r&&(r[0]*=wa,r[1]*=wa,r)});var r=Tr(n),s=r.stream;return r.stream=function(e){var n=r.rotate(),i=s(e),o=(r.rotate([0,0]),s(e));return r.rotate(n),i.sphere=function(){o.polygonStart(),o.lineStart(),Hc(o,t),o.lineEnd(),o.polygonEnd()},i},r.angle(-30)}function Hc(t,e,n){var i,r,s=e.edges,o=s.length,a={type:"MultiPoint",coordinates:e.face},l=ln({type:"MultiPoint",coordinates:e.face.filter((function(t){return 90!==Ko(t[1])}))}),c=!1,h=-1,u=l[1][0]-l[0][0],f=180===u||360===u?[(l[0][0]+l[1][0])/2,(l[0][1]+l[1][1])/2]:bn(a);if(n)for(;++h<o&&s[h]!==n;);++h;for(var d=0;d<o;++d)r=s[(d+h)%o],Array.isArray(r)?(c||(t.point((i=_i(r[0],f)(da))[0],i[1]),c=!0),t.point((i=_i(r[1],f)(da))[0],i[1])):(c=!1,r!==n&&Hc(t,r,e))}function Zc(t,e){return t&&e&&t[0]===e[0]&&t[1]===e[1]}function Jc(t){return t.project.invert||t.children&&t.children.some(Jc)}Bc.invert=function(t,e){e>jc?e=jc:e<-1.790857183&&(e=-1.790857183);var n,i=e;do{var r=i*i;i-=n=(i*(zc+r*r*(Fc+r*(Gc+qc*r)))-e)/(1.0148+r*r*(1.1592500000000001+r*(.21654*r-1.01493)))}while(Ko(n)>da);return[t,i]},Uc.invert=function(t,e){if(Ko(e)<da)return[t,0];var n,i=t*t+e*e,r=.5*e,s=10;do{var o=fa(r),a=1/na(r),l=i-2*e*r+r*r;r-=n=(o*l+2*(r-e))/(2+l*a*a+2*(r-e)*o)}while(Ko(n)>da&&--s>0);return o=fa(r),[(Ko(e)<Ko(r+1/o)?Ea(t*o):ha(e)*ha(t)*(Na(Ko(t*o))+_a))/ua(r),r]};var Qc=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Kc=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map((function(t){return t.map((function(t){return Qc[t]}))}));var th=2/Ia(3);function eh(t,e){var n=sl(t,e);return[n[0]*th,n[1]]}function nh(t,e){for(var n=0,i=t.length,r=0;n<i;++n)r+=t[n]*e[n];return r}function ih(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function rh(t){return[ea(t[1],t[0])*Ma,Ea(oa(-1,aa(1,t[2])))*Ma]}function sh(t){var e=t[0]*wa,n=t[1]*wa,i=na(n);return[i*na(e),i*ua(e),ua(n)]}eh.invert=function(t,e){return sl.invert(t/th,e)};var oh=()=>{};function ah(t,e){var n,i=e.stream;if(!i)throw new Error("invalid projection");switch(t&&t.type){case"Feature":n=ch;break;case"FeatureCollection":n=lh;break;default:n=hh}return n(t,i)}function lh(t,e){return{type:"FeatureCollection",features:t.features.map((function(t){return ch(t,e)}))}}function ch(t,e){return{type:"Feature",id:t.id,properties:t.properties,geometry:hh(t.geometry,e)}}function hh(t,e){if(!t)return null;if("GeometryCollection"===t.type)return function(t,e){return{type:"GeometryCollection",geometries:t.geometries.map((function(t){return hh(t,e)}))}}(t,e);var n;switch(t.type){case"Point":case"MultiPoint":n=dh;break;case"LineString":case"MultiLineString":n=gh;break;case"Polygon":case"MultiPolygon":case"Sphere":n=ph;break;default:return null}return ne(t,e(n)),n.result()}var uh=[],fh=[],dh={point:function(t,e){uh.push([t,e])},result:function(){var t=uh.length?uh.length<2?{type:"Point",coordinates:uh[0]}:{type:"MultiPoint",coordinates:uh}:null;return uh=[],t}},gh={lineStart:oh,point:function(t,e){uh.push([t,e])},lineEnd:function(){uh.length&&(fh.push(uh),uh=[])},result:function(){var t=fh.length?fh.length<2?{type:"LineString",coordinates:fh[0]}:{type:"MultiLineString",coordinates:fh}:null;return fh=[],t}},ph={polygonStart:oh,lineStart:oh,point:function(t,e){uh.push([t,e])},lineEnd:function(){var t=uh.length;if(t){do{uh.push(uh[0].slice())}while(++t<4);fh.push(uh),uh=[]}},polygonEnd:oh,result:function(){if(!fh.length)return null;var t=[],e=[];return fh.forEach((function(n){!function(t){if((e=t.length)<4)return!1;for(var e,n=0,i=t[e-1][1]*t[0][0]-t[e-1][0]*t[0][1];++n<e;)i+=t[n-1][1]*t[n][0]-t[n-1][0]*t[n][1];return i<=0}(n)?e.push(n):t.push([n])})),e.forEach((function(e){var n=e[0];t.some((function(t){if(function(t,e){for(var n=e[0],i=e[1],r=!1,s=0,o=t.length,a=o-1;s<o;a=s++){var l=t[s],c=l[0],h=l[1],u=t[a],f=u[0],d=u[1];h>i^d>i&&n<(f-c)*(i-h)/(d-h)+c&&(r=!r)}return r}(t[0],n))return t.push(e),!0}))||t.push([e])})),fh=[],t.length?t.length>1?{type:"MultiPolygon",coordinates:t}:{type:"Polygon",coordinates:t[0]}:null}};function _h(t){var e=t(_a,0)[0]-t(-_a,0)[0];function n(n,i){var r=Ko(n)<_a,s=t(r?n:n>0?n-pa:n+pa,i),o=(s[0]-s[1])*ma,a=(s[0]+s[1])*ma;if(r)return[o,a];var l=e*ma,c=o>0^a>0?-1:1;return[c*o-ha(a)*l,c*a-ha(o)*l]}return t.invert&&(n.invert=function(n,i){var r=(n+i)*ma,s=(i-n)*ma,o=Ko(r)<.5*e&&Ko(s)<.5*e;if(!o){var a=e*ma,l=r>0^s>0?-1:1,c=-l*n+(s>0?1:-1)*a,h=-l*i+(r>0?1:-1)*a;r=(-c-h)*ma,s=(c-h)*ma}var u=t.invert(r,s);return o||(u[0]+=r>0?pa:-pa),u}),Tr(n).rotate([-90,-90,45]).clipAngle(179.999)}function yh(t){var e=ua(t);function n(n,i){var r=e?fa(n*e/2)/e:n/2;if(!i)return[2*r,-t];var s=2*ta(r*ua(i)),o=1/fa(i);return[ua(s)*o,i+(1-na(s))*o-t]}return n.invert=function(n,i){if(Ko(i+=t)<da)return[e?2*ta(e*n/2)/e:n,0];var r,s=n*n+i*i,o=0,a=10;do{var l=fa(o),c=1/na(o),h=s-2*i*o+o*o;o-=r=(l*h+2*(o-i))/(2+h*c*c+2*(o-i)*l)}while(Ko(r)>da&&--a>0);var u=n*(l=fa(o)),f=fa(Ko(i)<Ko(o+1/l)?.5*Ea(u):.5*Na(u)+pa/4)/ua(o);return[e?2*ta(e*f)/e:2*f,o]},n}var mh=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function xh(t,e){var n,i=aa(18,36*Ko(e)/pa),r=ra(i),s=i-r,o=(n=mh[r])[0],a=n[1],l=(n=mh[++r])[0],c=n[1],h=(n=mh[aa(19,++r)])[0],u=n[1];return[t*(l+s*(h-o)/2+s*s*(h-2*l+o)/2),ha(e)*(c+s*(u-a)/2+s*s*(u-2*c+a)/2)]}function bh(t,e){var n=function(t){function e(e,n){var i=na(n),r=(t-1)/(t-i*na(e));return[r*i*ua(e),r*ua(n)]}return e.invert=function(e,n){var i=e*e+n*n,r=Ia(i),s=(t-Ia(1-i*(t+1)/(t-1)))/((t-1)/r+r/(t-1));return[ea(e*s,r*Ia(1-s*s)),r?Ea(n*s/r):0]},e}(t);if(!e)return n;var i=na(e),r=ua(e);function s(e,s){var o=n(e,s),a=o[1],l=a*r/(t-1)+i;return[o[0]*i/l,a/l]}return s.invert=function(e,s){var o=(t-1)/(t-1-s*r);return n.invert(o*e,o*s*i)},s}mh.forEach((function(t){t[1]*=1.593415793900743})),xh.invert=function(t,e){var n=90*e,i=aa(18,Ko(n/5)),r=oa(0,ra(i));do{var s=mh[r][1],o=mh[r+1][1],a=mh[aa(19,r+2)][1],l=a-s,c=a-2*o+s,h=2*(Ko(e)-o)/l,u=c/l,f=h*(1-u*h*(1-2*u*h));if(f>=0||1===r){n=(e>=0?5:-5)*(f+i);var d,g=50;do{f=(i=aa(18,Ko(n)/5))-(r=ra(i)),s=mh[r][1],o=mh[r+1][1],a=mh[aa(19,r+2)][1],n-=(d=ha(e)*(o+f*(a-s)/2+f*f*(a-2*o+s)/2)-e)*Ma}while(Ko(d)>ga&&--g>0);break}}while(--r>=0);var p=mh[r][0],_=mh[r+1][0],y=mh[aa(19,r+2)][0];return[t/(_+f*(y-p)/2+f*f*(y-2*_+p)/2),n*wa]};var vh=-180,Mh=-179.9999,wh=179.9999,Eh=-89.9999,Nh=89.9999;function Ih(t){return t.length>0}function Sh(t){return Math.floor(1e4*t)/1e4}function Ch(t){return-90===t||90===t?[0,t]:[vh,Sh(t)]}function Oh(t){var e=t[0],n=t[1],i=!1;return e<=Mh?(e=vh,i=!0):e>=wh&&(e=180,i=!0),n<=Eh?(n=-90,i=!0):n>=Nh&&(n=90,i=!0),i?[e,n]:t}function kh(t){return t.map(Oh)}function Th(t,e,n){for(var i=0,r=t.length;i<r;++i){var s=t[i].slice();n.push({index:-1,polygon:e,ring:s});for(var o=0,a=s.length;o<a;++o){var l=s[o],c=l[0],h=l[1];if(c<=Mh||c>=wh||h<=Eh||h>=Nh){s[o]=Oh(l);for(var u=o+1;u<a;++u){var f=s[u],d=f[0],g=f[1];if(d>Mh&&d<wh&&g>Eh&&g<Nh)break}if(u===o+1)continue;if(o){var p={index:-1,polygon:e,ring:s.slice(0,o+1)};p.ring[p.ring.length-1]=Ch(h),n[n.length-1]=p}else n.pop();if(u>=a)break;n.push({index:-1,polygon:e,ring:s=s.slice(u-1)}),s[0]=Ch(s[0][1]),o=-1,a=s.length}}}}function Ah(t){var e,n,i,r,s,o,a=t.length,l={},c={};for(e=0;e<a;++e)i=(n=t[e]).ring[0],s=n.ring[n.ring.length-1],i[0]!==s[0]||i[1]!==s[1]?(n.index=e,l[i]=c[s]=n):(n.polygon.push(n.ring),t[e]=null);for(e=0;e<a;++e)if(n=t[e]){if(i=n.ring[0],s=n.ring[n.ring.length-1],r=c[i],o=l[s],delete l[i],delete c[s],i[0]===s[0]&&i[1]===s[1]){n.polygon.push(n.ring);continue}r?(delete c[i],delete l[r.ring[0]],r.ring.pop(),t[r.index]=null,n={index:-1,polygon:r.polygon,ring:r.ring.concat(n.ring)},r===o?n.polygon.push(n.ring):(n.index=a++,t.push(l[n.ring[0]]=c[n.ring[n.ring.length-1]]=n))):o?(delete l[s],delete c[o.ring[o.ring.length-1]],n.ring.pop(),n={index:a++,polygon:o.polygon,ring:n.ring.concat(o.ring)},t[o.index]=null,t.push(l[n.ring[0]]=c[n.ring[n.ring.length-1]]=n)):(n.ring.push(n.ring[0]),n.polygon.push(n.ring))}}function Rh(t){var e={type:"Feature",geometry:Lh(t.geometry)};return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),null!=t.properties&&(e.properties=t.properties),e}function Lh(t){if(null==t)return t;var e,n,i,r;switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(Lh)};break;case"Point":e={type:"Point",coordinates:Oh(t.coordinates)};break;case"MultiPoint":case"LineString":e={type:t.type,coordinates:kh(t.coordinates)};break;case"MultiLineString":e={type:"MultiLineString",coordinates:t.coordinates.map(kh)};break;case"Polygon":var s=[];Th(t.coordinates,s,n=[]),Ah(n),e={type:"Polygon",coordinates:s};break;case"MultiPolygon":n=[],i=-1,r=t.coordinates.length;for(var o=new Array(r);++i<r;)Th(t.coordinates[i],o[i]=[],n);Ah(n),e={type:"MultiPolygon",coordinates:o.filter(Ih)};break;default:return t}return null!=t.bbox&&(e.bbox=t.bbox),e}function Ph(t,e){var n=fa(e/2),i=ua(ya*n);return[t*(.74482-.34588*i*i),1.70711*n]}function Dh(t,e,n){var i=_i(e,n),r=i(.5),s=Cn([-r[0],-r[1]])(e),o=i.distance/2,a=-Ea(ua(s[1]*wa)/ua(o)),l=[-r[0],-r[1],-(s[0]>0?pa-a:a)*Ma],c=Tr(t(o)).rotate(l),h=Cn(l),u=c.center;return delete c.rotate,c.center=function(t){return arguments.length?u(h(t)):h.invert(u())},c.clipAngle(90)}function zh(t){var e=na(t);function n(t,n){var i=ns(t,n);return i[0]*=e,i}return n.invert=function(t,n){return ns.invert(t/e,n)},n}function Fh(t,e){return Dh(zh,t,e)}function Gh(t){if(!(t*=2))return qr;var e=-t/2,n=-e,i=t*t,r=fa(n),s=.5/ua(n);function o(r,s){var o=Na(na(s)*na(r-e)),a=Na(na(s)*na(r-n));return[((o*=o)-(a*=a))/(2*t),(s<0?-1:1)*Ia(4*i*a-(i-o+a)*(i-o+a))/(2*t)]}return o.invert=function(t,i){var o,a,l=i*i,c=na(Ia(l+(o=t+e)*o)),h=na(Ia(l+(o=t+n)*o));return[ea(a=c-h,o=(c+h)*r),(i<0?-1:1)*Na(Ia(o*o+a*a)*s)]},o}function qh(t,e){return Dh(Gh,t,e)}function jh(t,e){if(Ko(e)<da)return[t,0];var n=Ko(e/_a),i=Ea(n);if(Ko(t)<da||Ko(Ko(e)-_a)<da)return[0,ha(e)*pa*fa(i/2)];var r=na(i),s=Ko(pa/t-t/pa)/2,o=s*s,a=r/(n+r-1),l=a*(2/n-1),c=l*l,h=c+o,u=a-c,f=o+a;return[ha(t)*pa*(s*u+Ia(o*u*u-h*(a*a-c)))/h,ha(e)*pa*(l*f-s*Ia((o+1)*h-f*f))/h]}function Bh(t,e){if(Ko(e)<da)return[t,0];var n=Ko(e/_a),i=Ea(n);if(Ko(t)<da||Ko(Ko(e)-_a)<da)return[0,ha(e)*pa*fa(i/2)];var r=na(i),s=Ko(pa/t-t/pa)/2,o=s*s,a=r*(Ia(1+o)-s*r)/(1+o*n*n);return[ha(t)*pa*a,ha(e)*pa*Ia(1-a*(2*s+a))]}function Uh(t,e){if(Ko(e)<da)return[t,0];var n=e/_a,i=Ea(n);if(Ko(t)<da||Ko(Ko(e)-_a)<da)return[0,pa*fa(i/2)];var r=(pa/t-t/pa)/2,s=n/(1+na(i));return[pa*(ha(t)*Ia(r*r+1-s*s)-r),pa*s]}function Yh(t,e){if(!e)return[t,0];var n=Ko(e);if(!t||n===_a)return[0,e];var i=n/_a,r=i*i,s=(8*i-r*(r+2)-5)/(2*r*(i-1)),o=s*s,a=i*s,l=r+o+2*a,c=i+3*s,h=t/_a,u=h+1/h,f=ha(Ko(t)-_a)*Ia(u*u-4),d=f*f,g=(f*(l+o-1)+2*Ia(l*(r+o*d-1)+(1-r)*(r*(c*c+4*o)+12*a*o+4*o*o)))/(4*l+d);return[ha(t)*_a*g,ha(e)*_a*Ia(1+f*Ko(g)-g*g)]}function Wh(t,e,n,i){var r=pa/3;t=oa(t,da),e=oa(e,da),t=aa(t,_a),e=aa(e,pa-da),n=oa(n,0),n=aa(n,99.999999);var s=(i=oa(i,da))/100,o=Na((n/100+1)*na(r))/r,a=ua(t)/ua(o*_a),l=e/pa,c=Ia(s*ua(t/2)/ua(e/2));return function(t,e,n,i,r){function s(s,o){var a=n*ua(i*o),l=Ia(1-a*a),c=Ia(2/(1+l*na(s*=r)));return[t*l*c*ua(s),e*a*c]}return s.invert=function(s,o){var a=s/t,l=o/e,c=Ia(a*a+l*l),h=2*Ea(c/2);return[ea(s*fa(h),t*c)/r,c&&Ea(o*ua(h)/(e*n*c))/i]},s}(c/Ia(l*a*o),1/(c*Ia(l*a*o)),a,o,l)}function $h(){var t=65*wa,e=60*wa,n=20,i=200,r=Ar(Wh),s=r(t,e,n,i);return s.poleline=function(s){return arguments.length?r(t=+s*wa,e,n,i):t*Ma},s.parallels=function(s){return arguments.length?r(t,e=+s*wa,n,i):e*Ma},s.inflation=function(s){return arguments.length?r(t,e,n=+s,i):n},s.ratio=function(s){return arguments.length?r(t,e,n,i=+s):i},s.scale(163.775)}Ph.invert=function(t,e){var n=e/1.70711,i=ua(ya*n);return[t/(.74482-.34588*i*i),2*ta(n)]},jh.invert=function(t,e){if(Ko(e)<da)return[t,0];if(Ko(t)<da)return[0,_a*ua(2*ta(e/pa))];var n=(t/=pa)*t,i=(e/=pa)*e,r=n+i,s=r*r,o=-Ko(e)*(1+r),a=o-2*i+n,l=-2*o+1+2*i+s,c=i/l+(2*a*a*a/(l*l*l)-9*o*a/(l*l))/27,h=(o-a*a/(3*l))/l,u=2*Ia(-h/3),f=Na(3*c/(h*u))/3;return[pa*(r-1+Ia(1+2*(n-i)+s))/(2*t),ha(e)*pa*(-u*na(f+pa/3)-a/(3*l))]},Bh.invert=function(t,e){if(!t)return[0,_a*ua(2*ta(e/pa))];var n=Ko(t/pa),i=(1-n*n-(e/=pa)*e)/(2*n),r=Ia(i*i+1);return[ha(t)*pa*(r-i),ha(e)*_a*ua(2*ea(Ia((1-2*i*n)*(i+r)-n),Ia(r+i+n)))]},Uh.invert=function(t,e){if(!e)return[t,0];var n=e/pa,i=(pa*pa*(1-n*n)-t*t)/(2*pa*t);return[t?pa*(ha(t)*Ia(i*i+1)-i):0,_a*ua(2*ta(n))]},Yh.invert=function(t,e){var n;if(!t||!e)return[t,e];var i=ha(e);e=Ko(e)/pa;var r=ha(t)*t/_a,s=(r*r-1+4*e*e)/Ko(r),o=s*s,a=e*(2-(e>.5?aa(e,Ko(t)):0)),l=t*t+e*e,c=50;do{var h=a*a,u=(8*a-h*(h+2)-5)/(2*h*(a-1)),f=(3*a-h*a-10)/(2*h*a),d=u*u,g=a*u,p=a+u,_=p*p,y=a+3*u,m=-2*p*(4*g*d+(1-4*h+3*h*h)*(1+f)+d*(14*h-6-o+(8*h-8-2*o)*f)+g*(12*h-8+(10*h-10-o)*f)),x=Ia(_*(h+d*o-1)+(1-h)*(h*(y*y+4*d)+d*(12*g+4*d)));a-=n=(s*(_+d-1)+2*x-r*(4*_+o))/(s*(2*u*f+2*p*(1+f))+m/x-8*p*(s*(-1+d+_)+2*x)*(1+f)/(o+4*_))}while(n*l*l>da&&--c>0);return[ha(t)*(Ia(s*s+4)+s)*pa/4,i*_a*a]};var Xh=4*pa+3*Ia(3),Vh=2*Ia(2*pa*Ia(3)/Xh),Hh=Ua(Vh*Ia(3)/pa,Vh,Xh/6);function Zh(t,e){return[t*Ia(1-3*e*e/(pa*pa)),e]}function Jh(t,e){var n=na(e),i=na(t)*n,r=1-i,s=na(t=ea(ua(t)*n,-ua(e))),o=ua(t);return[o*(n=Ia(1-i*i))-s*r,-s*n-o*r]}function Qh(t,e){var n=ka(t,e);return[(n[0]+t/_a)/2,(n[1]+e)/2]}Zh.invert=function(t,e){return[t/Ia(1-3*e*e/(pa*pa)),e]},Jh.invert=function(t,e){var n=(t*t+e*e)/-2,i=Ia(-n*(2+n)),r=e*n+t*i,s=t*n-e*i,o=Ia(s*s+r*r);return[ea(i*r,o*(1+n)),o?-Ea(i*s/o):0]},Qh.invert=function(t,e){var n=t,i=e,r=25;do{var s,o=na(i),a=ua(i),l=ua(2*i),c=a*a,h=o*o,u=ua(n),f=na(n/2),d=ua(n/2),g=d*d,p=1-h*f*f,_=p?Na(o*f)*Ia(s=1/p):s=0,y=.5*(2*_*o*d+n/_a)-t,m=.5*(_*a+i)-e,x=.5*s*(h*g+_*o*f*c)+.5/_a,b=s*(u*l/4-_*a*d),v=.125*s*(l*d-_*a*h*u),M=.5*s*(c*f+_*g*o)+.5,w=b*v-M*x,E=(m*b-y*M)/w,N=(y*v-m*x)/w;n-=E,i-=N}while((Ko(E)>da||Ko(N)>da)&&--r>0);return[n,i]};var Kh=Object.freeze({__proto__:null,geoAiry:function(){var t=_a,e=Ar(Oa),n=e(t);return n.radius=function(n){return arguments.length?e(t=n*wa):t*Ma},n.scale(179.976).clipAngle(147)},geoAiryRaw:Oa,geoAitoff:function(){return Tr(ka).scale(152.63)},geoAitoffRaw:ka,geoArmadillo:function(){var t=20*wa,e=t>=0?1:-1,n=fa(e*t),i=Ar(Ta),r=i(t),s=r.stream;return r.parallel=function(r){return arguments.length?(n=fa((e=(t=r*wa)>=0?1:-1)*t),i(t)):t*Ma},r.stream=function(i){var o=r.rotate(),a=s(i),l=(r.rotate([0,0]),s(i)),c=r.precision();return r.rotate(o),a.sphere=function(){l.polygonStart(),l.lineStart();for(var i=-180*e;e*i<180;i+=90*e)l.point(i,90*e);if(t)for(;e*(i-=3*e*c)>=-180;)l.point(i,e*-ea(na(i*wa/2),n)*Ma);l.lineEnd(),l.polygonEnd()},a},r.scale(218.695).center([0,28.0974])},geoArmadilloRaw:Ta,geoAugust:function(){return Tr(Aa).scale(66.1603)},geoAugustRaw:Aa,geoBaker:function(){return Tr(Pa).scale(112.314)},geoBakerRaw:Pa,geoBerghaus:function(){var t=5,e=Ar(Da),n=e(t),i=n.stream,r=.01,s=-na(r*wa),o=ua(r*wa);return n.lobes=function(n){return arguments.length?e(t=+n):t},n.stream=function(e){var a=n.rotate(),l=i(e),c=(n.rotate([0,0]),i(e));return n.rotate(a),l.sphere=function(){c.polygonStart(),c.lineStart();for(var e=0,n=360/t,i=2*pa/t,a=90-180/t,l=_a;e<t;++e,a-=n,l-=i)c.point(ea(o*na(l),s)*Ma,Ea(o*ua(l))*Ma),a<-90?(c.point(-90,-180-a-r),c.point(-90,-180-a+r)):(c.point(90,a+r),c.point(90,a-r));c.lineEnd(),c.polygonEnd()},l},n.scale(87.8076).center([0,17.1875]).clipAngle(179.999)},geoBerghausRaw:Da,geoBertin1953:function(){return Tr(ja()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])},geoBertin1953Raw:ja,geoBoggs:function(){return Tr(Xa).scale(160.857)},geoBoggsRaw:Xa,geoBonne:function(){return Va(Za).scale(123.082).center([0,26.1441]).parallel(45)},geoBonneRaw:Za,geoBottomley:function(){var t=.5,e=Ar(Ja),n=e(t);return n.fraction=function(n){return arguments.length?e(t=+n):t},n.scale(158.837)},geoBottomleyRaw:Ja,geoBromley:function(){return Tr(Qa).scale(152.63)},geoBromleyRaw:Qa,geoChamberlin:rl,geoChamberlinRaw:nl,geoChamberlinAfrica:function(){return rl([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])},geoCollignon:function(){return Tr(sl).scale(95.6464).center([0,30])},geoCollignonRaw:sl,geoCraig:function(){return Va(ol).scale(249.828).clipAngle(90)},geoCraigRaw:ol,geoCraster:function(){return Tr(ll).scale(156.19)},geoCrasterRaw:ll,geoCylindricalEqualArea:function(){return Va(cl).parallel(38.58).scale(195.044)},geoCylindricalEqualAreaRaw:cl,geoCylindricalStereographic:function(){return Va(hl).scale(124.75)},geoCylindricalStereographicRaw:hl,geoEckert1:function(){return Tr(ul).scale(165.664)},geoEckert1Raw:ul,geoEckert2:function(){return Tr(fl).scale(165.664)},geoEckert2Raw:fl,geoEckert3:function(){return Tr(dl).scale(180.739)},geoEckert3Raw:dl,geoEckert4:function(){return Tr(gl).scale(180.739)},geoEckert4Raw:gl,geoEckert5:function(){return Tr(pl).scale(173.044)},geoEckert5Raw:pl,geoEckert6:function(){return Tr(_l).scale(173.044)},geoEckert6Raw:_l,geoEisenlohr:function(){return Tr(ml).scale(62.5271)},geoEisenlohrRaw:ml,geoFahey:function(){return Tr(bl).scale(137.152)},geoFaheyRaw:bl,geoFoucaut:function(){return Tr(vl).scale(135.264)},geoFoucautRaw:vl,geoFoucautSinusoidal:function(){var t=.5,e=Ar(Ml),n=e(t);return n.alpha=function(n){return arguments.length?e(t=+n):t},n.scale(168.725)},geoFoucautSinusoidalRaw:Ml,geoGilbert:function(t){null==t&&(t=as);var e=t(),n=Vr().scale(Ma).precision(0).clipAngle(null).translate([0,0]);function i(t){return e(wl(t))}function r(t){i[t]=function(){return arguments.length?(e[t].apply(e,arguments),i):e[t]()}}return e.invert&&(i.invert=function(t){return El(e.invert(t))}),i.stream=function(t){var i=e.stream(t),r=n.stream({point:function(t,e){i.point(t/2,Ea(fa(-e/2*wa))*Ma)},lineStart:function(){i.lineStart()},lineEnd:function(){i.lineEnd()},polygonStart:function(){i.polygonStart()},polygonEnd:function(){i.polygonEnd()}});return r.sphere=i.sphere,r},i.rotate=function(t){return arguments.length?(n.rotate(t),i):n.rotate()},i.center=function(t){return arguments.length?(e.center(wl(t)),i):El(e.center())},r("angle"),r("clipAngle"),r("clipExtent"),r("fitExtent"),r("fitHeight"),r("fitSize"),r("fitWidth"),r("scale"),r("translate"),r("precision"),i.scale(249.5)},geoGingery:function(){var t=6,e=30*wa,n=na(e),i=ua(e),r=Ar(Nl),s=r(e,t),o=s.stream,a=-na(.01*wa),l=ua(.01*wa);return s.radius=function(s){return arguments.length?(n=na(e=s*wa),i=ua(e),r(e,t)):e*Ma},s.lobes=function(n){return arguments.length?r(e,t=+n):t},s.stream=function(e){var r=s.rotate(),c=o(e),h=(s.rotate([0,0]),o(e));return s.rotate(r),c.sphere=function(){h.polygonStart(),h.lineStart();for(var e=0,r=2*pa/t,s=0;e<t;++e,s-=r)h.point(ea(l*na(s),a)*Ma,Ea(l*ua(s))*Ma),h.point(ea(i*na(s-r/2),n)*Ma,Ea(i*ua(s-r/2))*Ma);h.lineEnd(),h.polygonEnd()},c},s.rotate([90,-40]).scale(91.7095).clipAngle(179.999)},geoGingeryRaw:Nl,geoGinzburg4:function(){return Tr(Ol).scale(149.995)},geoGinzburg4Raw:Ol,geoGinzburg5:function(){return Tr(kl).scale(153.93)},geoGinzburg5Raw:kl,geoGinzburg6:function(){return Tr(Tl).scale(130.945)},geoGinzburg6Raw:Tl,geoGinzburg8:function(){return Tr(Al).scale(131.747)},geoGinzburg8Raw:Al,geoGinzburg9:function(){return Tr(Rl).scale(131.087)},geoGinzburg9Raw:Rl,geoGringorten:function(){return Tr(Ll(Pl)).scale(239.75)},geoGringortenRaw:Pl,geoGuyou:function(){return Tr(Ll(Fl)).scale(151.496)},geoGuyouRaw:Fl,geoHammer:function(){var t=2,e=Ar(za),n=e(t);return n.coefficient=function(n){return arguments.length?e(t=+n):t},n.scale(169.529)},geoHammerRaw:za,geoHammerRetroazimuthal:function(){var t=0,e=Ar(Gl),n=e(t),i=n.rotate,r=n.stream,s=Tn();return n.parallel=function(i){if(!arguments.length)return t*Ma;var r=n.rotate();return e(t=i*wa).rotate(r)},n.rotate=function(e){return arguments.length?(i.call(n,[e[0],e[1]-t*Ma]),s.center([-e[0],-e[1]]),n):((e=i.call(n))[1]+=t*Ma,e)},n.stream=function(t){return(t=r(t)).sphere=function(){t.polygonStart();var e,n=s.radius(89.99)().coordinates[0],i=n.length-1,r=-1;for(t.lineStart();++r<i;)t.point((e=n[r])[0],e[1]);for(t.lineEnd(),i=(n=s.radius(90.01)().coordinates[0]).length-1,t.lineStart();--r>=0;)t.point((e=n[r])[0],e[1]);t.lineEnd(),t.polygonEnd()},t},n.scale(79.4187).parallel(45).clipAngle(179.999)},geoHammerRetroazimuthalRaw:Gl,geoHealpix:function(){var t=4,e=Ar(Ul),n=e(t),i=n.stream;return n.lobes=function(n){return arguments.length?e(t=+n):t},n.stream=function(e){var r=n.rotate(),s=i(e),o=(n.rotate([0,0]),i(e));return n.rotate(r),s.sphere=function(){ne(function(t){var e=[].concat(gt(-180,180+t/2,t).map(Yl),gt(180,-180-t/2,-t).map(Wl));return{type:"Polygon",coordinates:[180===t?e.map($l):e]}}(180/t),o)},s},n.scale(239.75)},geoHealpixRaw:Ul,geoHill:function(){var t=1,e=Ar(Xl),n=e(t);return n.ratio=function(n){return arguments.length?e(t=+n):t},n.scale(167.774).center([0,18.67])},geoHillRaw:Xl,geoHomolosine:function(){return Tr(Jl).scale(152.63)},geoHomolosineRaw:Jl,geoHufnagel:Kl,geoHufnagelRaw:Ql,geoHyperelliptical:function(){var t=0,e=2.5,n=1.183136,i=Ar(nc),r=i(t,e,n);return r.alpha=function(r){return arguments.length?i(t=+r,e,n):t},r.k=function(r){return arguments.length?i(t,e=+r,n):e},r.gamma=function(r){return arguments.length?i(t,e,n=+r):n},r.scale(152.63)},geoHyperellipticalRaw:nc,geoInterrupt:oc,geoInterruptedBoggs:function(){return oc(Xa,ac).scale(160.857)},geoInterruptedHomolosine:function(){return oc(Jl,lc).scale(152.63)},geoInterruptedMollweide:function(){return oc(Ya,cc).scale(169.529)},geoInterruptedMollweideHemispheres:function(){return oc(Ya,hc).scale(169.529).rotate([20,0])},geoInterruptedSinuMollweide:function(){return oc(Zl,uc,qa).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},geoInterruptedSinusoidal:function(){return oc(Ha,fc).scale(152.63).rotate([-20,0])},geoKavrayskiy7:function(){return Tr(dc).scale(158.837)},geoKavrayskiy7Raw:dc,geoLagrange:function(){var t=.5,e=Ar(gc),n=e(t);return n.spacing=function(n){return arguments.length?e(t=+n):t},n.scale(124.75)},geoLagrangeRaw:gc,geoLarrivee:function(){return Tr(_c).scale(97.2672)},geoLarriveeRaw:_c,geoLaskowski:function(){return Tr(yc).scale(139.98)},geoLaskowskiRaw:yc,geoLittrow:function(){return Tr(mc).scale(144.049).clipAngle(89.999)},geoLittrowRaw:mc,geoLoximuthal:function(){return Va(xc).parallel(40).scale(158.837)},geoLoximuthalRaw:xc,geoMiller:function(){return Tr(bc).scale(108.318)},geoMillerRaw:bc,geoModifiedStereographic:Sc,geoModifiedStereographicRaw:vc,geoModifiedStereographicAlaska:function(){return Sc(Mc,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)},geoModifiedStereographicGs48:function(){return Sc(wc,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])},geoModifiedStereographicGs50:function(){return Sc(Ec,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])},geoModifiedStereographicMiller:function(){return Sc(Nc,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)},geoModifiedStereographicLee:function(){return Sc(Ic,[165,10]).scale(250).clipAngle(130).center([-165,-10])},geoMollweide:function(){return Tr(Ya).scale(169.529)},geoMollweideRaw:Ya,geoMtFlatPolarParabolic:function(){return Tr(kc).scale(164.859)},geoMtFlatPolarParabolicRaw:kc,geoMtFlatPolarQuartic:function(){return Tr(Tc).scale(188.209)},geoMtFlatPolarQuarticRaw:Tc,geoMtFlatPolarSinusoidal:function(){return Tr(Ac).scale(166.518)},geoMtFlatPolarSinusoidalRaw:Ac,geoNaturalEarth2:function(){return Tr(Rc).scale(175.295)},geoNaturalEarth2Raw:Rc,geoNellHammer:function(){return Tr(Lc).scale(152.63)},geoNellHammerRaw:Lc,geoInterruptedQuarticAuthalic:function(){return oc(za(1/0),Pc).rotate([20,0]).scale(152.63)},geoNicolosi:function(){return Tr(Dc).scale(127.267)},geoNicolosiRaw:Dc,geoPatterson:function(){return Tr(Bc).scale(139.319)},geoPattersonRaw:Bc,geoPolyconic:function(){return Tr(Uc).scale(103.74)},geoPolyconicRaw:Uc,geoPolyhedral:Vc,geoPolyhedralButterfly:function(t){t=t||function(t){var e=bn({type:"MultiPoint",coordinates:t});return is().scale(1).translate([0,0]).rotate([-e[0],-e[1]])};var e=Kc.map((function(e){return{face:e,project:t(e)}}));return[-1,0,0,1,0,1,4,5].forEach((function(t,n){var i=e[t];i&&(i.children||(i.children=[])).push(e[n])})),Vc(e[0],(function(t,n){return e[t<-pa/2?n<0?6:4:t<0?n<0?2:0:t<pa/2?n<0?3:1:n<0?7:5]})).angle(-30).scale(101.858).center([0,45])},geoPolyhedralCollignon:function(t){t=t||function(t){var e=bn({type:"MultiPoint",coordinates:t});return Tr(eh).translate([0,0]).scale(1).rotate(e[1]>0?[-e[0],0]:[180-e[0],180])};var e=Kc.map((function(e){return{face:e,project:t(e)}}));return[-1,0,0,1,0,1,4,5].forEach((function(t,n){var i=e[t];i&&(i.children||(i.children=[])).push(e[n])})),Vc(e[0],(function(t,n){return e[t<-pa/2?n<0?6:4:t<0?n<0?2:0:t<pa/2?n<0?3:1:n<0?7:5]})).angle(-30).scale(121.906).center([0,48.5904])},geoPolyhedralWaterman:function(t){t=t||function(t){var e=6===t.length?bn({type:"MultiPoint",coordinates:t}):t[0];return is().scale(1).translate([0,0]).rotate([-e[0],-e[1]])};var e=Kc.map((function(t){for(var e,n=t.map(sh),i=n.length,r=n[i-1],s=[],o=0;o<i;++o)e=n[o],s.push(rh([.9486832980505138*r[0]+.31622776601683794*e[0],.9486832980505138*r[1]+.31622776601683794*e[1],.9486832980505138*r[2]+.31622776601683794*e[2]]),rh([.9486832980505138*e[0]+.31622776601683794*r[0],.9486832980505138*e[1]+.31622776601683794*r[1],.9486832980505138*e[2]+.31622776601683794*r[2]])),r=e;return s})),n=[],i=[-1,0,0,1,0,1,4,5];e.forEach((function(t,r){for(var s=Kc[r],o=s.length,a=n[r]=[],l=0;l<o;++l)e.push([s[l],t[(2*l+2)%(2*o)],t[(2*l+1)%(2*o)]]),i.push(r),a.push(ih(sh(t[(2*l+2)%(2*o)]),sh(t[(2*l+1)%(2*o)])))}));var r=e.map((function(e){return{project:t(e),face:e}}));return i.forEach((function(t,e){var n=r[t];n&&(n.children||(n.children=[])).push(r[e])})),Vc(r[0],(function(t,e){var i=na(e),s=[i*na(t),i*ua(t),ua(e)],o=t<-pa/2?e<0?6:4:t<0?e<0?2:0:t<pa/2?e<0?3:1:e<0?7:5,a=n[o];return r[nh(a[0],s)<0?8+3*o:nh(a[1],s)<0?8+3*o+1:nh(a[2],s)<0?8+3*o+2:o]})).angle(-30).scale(110.625).center([0,45])},geoProject:ah,geoGringortenQuincuncial:function(){return _h(Pl).scale(176.423)},geoPeirceQuincuncial:function(){return _h(Fl).scale(111.48)},geoQuantize:function(t,e){if(!(0<=(e=+e)&&e<=20))throw new Error("invalid digits");function n(t){var n=t.length,i=2,r=new Array(n);for(r[0]=+t[0].toFixed(e),r[1]=+t[1].toFixed(e);i<n;)r[i]=t[i],++i;return r}function i(t){return t.map(n)}function r(t){for(var e=n(t[0]),i=[e],r=1;r<t.length;r++){var s=n(t[r]);(s.length>2||s[0]!=e[0]||s[1]!=e[1])&&(i.push(s),e=s)}return 1===i.length&&t.length>1&&i.push(n(t[t.length-1])),i}function s(t){return t.map(r)}function o(t){if(null==t)return t;var e;switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(o)};break;case"Point":e={type:"Point",coordinates:n(t.coordinates)};break;case"MultiPoint":e={type:t.type,coordinates:i(t.coordinates)};break;case"LineString":e={type:t.type,coordinates:r(t.coordinates)};break;case"MultiLineString":case"Polygon":e={type:t.type,coordinates:s(t.coordinates)};break;case"MultiPolygon":e={type:"MultiPolygon",coordinates:t.coordinates.map(s)};break;default:return t}return null!=t.bbox&&(e.bbox=t.bbox),e}function a(t){var e={type:"Feature",properties:t.properties,geometry:o(t.geometry)};return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),e}if(null!=t)switch(t.type){case"Feature":return a(t);case"FeatureCollection":var l={type:"FeatureCollection",features:t.features.map(a)};return null!=t.bbox&&(l.bbox=t.bbox),l;default:return o(t)}return t},geoQuincuncial:_h,geoRectangularPolyconic:function(){return Va(yh).scale(131.215)},geoRectangularPolyconicRaw:yh,geoRobinson:function(){return Tr(xh).scale(152.63)},geoRobinsonRaw:xh,geoSatellite:function(){var t=2,e=0,n=Ar(bh),i=n(t,e);return i.distance=function(i){return arguments.length?n(t=+i,e):t},i.tilt=function(i){return arguments.length?n(t,e=i*wa):e*Ma},i.scale(432.147).clipAngle(Na(1/t)*Ma-1e-6)},geoSatelliteRaw:bh,geoSinuMollweide:function(){return Tr(Zl).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},geoSinuMollweideRaw:Zl,geoSinusoidal:function(){return Tr(Ha).scale(152.63)},geoSinusoidalRaw:Ha,geoStitch:function(t){if(null==t)return t;switch(t.type){case"Feature":return Rh(t);case"FeatureCollection":var e={type:"FeatureCollection",features:t.features.map(Rh)};return null!=t.bbox&&(e.bbox=t.bbox),e;default:return Lh(t)}},geoTimes:function(){return Tr(Ph).scale(146.153)},geoTimesRaw:Ph,geoTwoPointAzimuthal:Fh,geoTwoPointAzimuthalRaw:zh,geoTwoPointAzimuthalUsa:function(){return Fh([-158,21.5],[-77,39]).clipAngle(60).scale(400)},geoTwoPointEquidistant:qh,geoTwoPointEquidistantRaw:Gh,geoTwoPointEquidistantUsa:function(){return qh([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)},geoVanDerGrinten:function(){return Tr(jh).scale(79.4183)},geoVanDerGrintenRaw:jh,geoVanDerGrinten2:function(){return Tr(Bh).scale(79.4183)},geoVanDerGrinten2Raw:Bh,geoVanDerGrinten3:function(){return Tr(Uh).scale(79.4183)},geoVanDerGrinten3Raw:Uh,geoVanDerGrinten4:function(){return Tr(Yh).scale(127.16)},geoVanDerGrinten4Raw:Yh,geoWagner:$h,geoWagner7:function(){return $h().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)},geoWagnerRaw:Wh,geoWagner4:function(){return Tr(Hh).scale(176.84)},geoWagner4Raw:Hh,geoWagner6:function(){return Tr(Zh).scale(152.63)},geoWagner6Raw:Zh,geoWiechel:function(){return Tr(Jh).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)},geoWiechelRaw:Jh,geoWinkel3:function(){return Tr(Qh).scale(158.837)},geoWinkel3Raw:Qh});const tu=Object.assign({},hs,Kh);const eu=Object.assign({},{geoAzimuthalEquidistant:jr});const nu=Object.assign({},{geoHufnagel:Kl});const iu=Object.assign({},{geoProjection:Tr});function ru(t,e){const{abs:n,atan:i,ln:r,PI:s,sin:o,sqrt:a}=Math,l=1e-5,c=o(t);let h=a(1-e),u=c*c;if(u>=1||n(t)===s/2){if(h<=l)return c<0?-1/0:1/0;for(u=e=1,e+=h;n(u-h)>.001*e;)h=a(u*h),u=e/=2,e+=h;return c<0?-s/e:s/e}{if(h<=l)return r((1+c)/(1-c))/2;let t,o,f,d,g;for(o=0,t=e=1,f=e*h,e+=h,g=a((1-u)/u),n(g-=f/g)<=0&&(g=1e-9*a(f));n(t-h)>.001*t;)h=2*a(f),o+=o,g<0&&(o+=1),f=e*h,t=e,e+=h,n(g-=f/g)<=0&&(g=1e-9*a(f));return g<0&&(o+=1),d=(i(e/g)+s*o)/e,c<0?-d:d}}const{abs:su,max:ou,min:au,sin:lu,cos:cu,asin:hu,acos:uu,tan:fu}=Math;function du(t,e){let n,i,r,s;const o=fu(.5*e);return n=cu(hu(o))*lu(.5*t),r=o+n<0,s=o-n<0,i=uu(o),n=uu(n),function(t,e,n,i){let r=Math.asin(Math.sqrt(1+Math.min(0,Math.cos(t+e))));n&&(r=-r);let s=Math.asin(Math.sqrt(Math.abs(1-Math.max(0,Math.cos(t-e)))));return i&&(s=-s),[ru(r,.5),ru(s,.5)]}(n,i,r,s)}var gu=6378137,pu=.0066943799901413165,_u=484813681109536e-20,yu=Math.PI/2,mu=1e-10,xu=.017453292519943295,bu=57.29577951308232,vu=Math.PI/4,Mu=2*Math.PI,wu=3.14159265359,Eu={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},Nu={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},Iu=/[\s_\-\/\(\)]/g;function Su(t,e){if(t[e])return t[e];for(var n,i=Object.keys(t),r=e.toLowerCase().replace(Iu,""),s=-1;++s<i.length;)if((n=i[s]).toLowerCase().replace(Iu,"")===r)return t[n]}function Cu(t){var e,n,i,r={},s=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t}),{}),o={proj:"projName",datum:"datumCode",rf:function(t){r.rf=parseFloat(t)},lat_0:function(t){r.lat0=t*xu},lat_1:function(t){r.lat1=t*xu},lat_2:function(t){r.lat2=t*xu},lat_ts:function(t){r.lat_ts=t*xu},lon_0:function(t){r.long0=t*xu},lon_1:function(t){r.long1=t*xu},lon_2:function(t){r.long2=t*xu},alpha:function(t){r.alpha=parseFloat(t)*xu},gamma:function(t){r.rectified_grid_angle=parseFloat(t)},lonc:function(t){r.longc=t*xu},x_0:function(t){r.x0=parseFloat(t)},y_0:function(t){r.y0=parseFloat(t)},k_0:function(t){r.k0=parseFloat(t)},k:function(t){r.k0=parseFloat(t)},a:function(t){r.a=parseFloat(t)},b:function(t){r.b=parseFloat(t)},r_a:function(){r.R_A=!0},zone:function(t){r.zone=parseInt(t,10)},south:function(){r.utmSouth=!0},towgs84:function(t){r.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){r.to_meter=parseFloat(t)},units:function(t){r.units=t;var e=Su(Nu,t);e&&(r.to_meter=e.to_meter)},from_greenwich:function(t){r.from_greenwich=t*xu},pm:function(t){var e=Su(Eu,t);r.from_greenwich=(e||parseFloat(t))*xu},nadgrids:function(t){"@null"===t?r.datumCode="none":r.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(r.axis=t)},approx:function(){r.approx=!0}};for(e in s)n=s[e],e in o?"function"==typeof(i=o[e])?i(n):r[i]=n:r[e]=n;return"string"==typeof r.datumCode&&"WGS84"!==r.datumCode&&(r.datumCode=r.datumCode.toLowerCase()),r}var Ou=/\s/,ku=/[A-Za-z]/,Tu=/[A-Za-z84_]/,Au=/[,\]]/,Ru=/[\d\.E\-\+]/;function Lu(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function Pu(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var i=e?{}:t,r=n.reduce((function(t,e){return Du(e,t),t}),i);e&&(t[e]=r)}function Du(t,e){if(Array.isArray(t)){var n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void Du(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n){if("AXIS"===n)return n in e||(e[n]=[]),void e[n].push(t);var i;switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&Du(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&Du(t[3],e[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void Pu(e,n,t);default:for(i=-1;++i<t.length;)if(!Array.isArray(t[i]))return Du(t,e[n]);return Pu(e,n,t)}}else e[n]=t;else e[n]=!0}else e[t]=!0}Lu.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;Ou.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},Lu.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(Au.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},Lu.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},Lu.prototype.number=function(t){if(!Ru.test(t)){if(Au.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},Lu.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},Lu.prototype.keyword=function(t){if(Tu.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=1)}if(!Au.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},Lu.prototype.neutral=function(t){if(ku.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(Ru.test(t))return this.word=t,void(this.state=3);if(!Au.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},Lu.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function zu(t){return.017453292519943295*t}function Fu(t){var e=new Lu(t).output(),n=e.shift(),i=e.shift();e.unshift(["name",i]),e.unshift(["type",n]);var r={};return Du(e,r),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",n=0,i=t.AXIS.length;n<i;++n){var r=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];-1!==r[0].indexOf("north")||("y"===r[0]||"lat"===r[0])&&"north"===r[1]?e+="n":-1!==r[0].indexOf("south")||("y"===r[0]||"lat"===r[0])&&"south"===r[1]?e+="s":-1!==r[0].indexOf("east")||("x"===r[0]||"lon"===r[0])&&"east"===r[1]?e+="e":-1===r[0].indexOf("west")&&("x"!==r[0]&&"lon"!==r[0]||"west"!==r[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var s=t.GEOGCS;function o(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(s=t),s&&(s.DATUM?t.datumCode=s.DATUM.name.toLowerCase():t.datumCode=s.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(t.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=s.DATUM.SPHEROID.a,t.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(t.datum_params=s.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",zu],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",zu],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",zu],["lat0","latitude_of_origin",zu],["lat0","standard_parallel_1",zu],["lat1","standard_parallel_1",zu],["lat2","standard_parallel_2",zu],["azimuth","Azimuth"],["alpha","azimuth",zu],["srsCode","name"]].forEach((function(e){return function(t,e){var n=e[0],i=e[1];!(n in t)&&i in t&&(t[n]=t[i],3===e.length&&(t[n]=e[2](t[n])))}(t,e)})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=zu(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(r),r}function Gu(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?Gu[t]=Cu(arguments[1]):Gu[t]=Fu(arguments[1]):Gu[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?Gu.apply(e,t):Gu(t)}));if("string"==typeof t){if(t in Gu)return Gu[t]}else"EPSG"in t?Gu["EPSG:"+t.EPSG]=t:"ESRI"in t?Gu["ESRI:"+t.ESRI]=t:"IAU2000"in t?Gu["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(Gu);var qu=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var ju=["3857","900913","3785","102113"];function Bu(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in Gu}(t))return Gu[t];if(function(t){return qu.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=Fu(t);if(function(t){var e=Su(t,"authority");if(e){var n=Su(e,"epsg");return n&&ju.indexOf(n)>-1}}(e))return Gu["EPSG:3857"];var n=function(t){var e=Su(t,"extension");if(e)return Su(e,"proj4")}(e);return n?Cu(n):e}return function(t){return"+"===t[0]}(t)?Cu(t):void 0}function Uu(t,e){var n,i;if(t=t||{},!e)return t;for(i in e)void 0!==(n=e[i])&&(t[i]=n);return t}function Yu(t,e,n){var i=t*e;return n/Math.sqrt(1-i*i)}function Wu(t){return t<0?-1:1}function $u(t){return Math.abs(t)<=wu?t:t-Wu(t)*Mu}function Xu(t,e,n){var i=t*n,r=.5*t;return i=Math.pow((1-i)/(1+i),r),Math.tan(.5*(yu-e))/i}function Vu(t,e){for(var n,i,r=.5*t,s=yu-2*Math.atan(e),o=0;o<=15;o++)if(n=t*Math.sin(s),s+=i=yu-2*Math.atan(e*Math.pow((1-n)/(1+n),r))-s,Math.abs(i)<=1e-10)return s;return-9999}var Hu={init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Yu(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,n,i=t.x,r=t.y;if(r*bu>90&&r*bu<-90&&i*bu>180&&i*bu<-180)return null;if(Math.abs(Math.abs(r)-yu)<=mu)return null;if(this.sphere)e=this.x0+this.a*this.k0*$u(i-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(vu+.5*r));else{var s=Math.sin(r),o=Xu(this.e,r,s);e=this.x0+this.a*this.k0*$u(i-this.long0),n=this.y0-this.a*this.k0*Math.log(o)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,i=t.x-this.x0,r=t.y-this.y0;if(this.sphere)n=yu-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var s=Math.exp(-r/(this.a*this.k0));if(-9999===(n=Vu(this.e,s)))return null}return e=$u(this.long0+i/(this.a*this.k0)),t.x=e,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]};function Zu(t){return t}var Ju=[Hu,{init:function(){},forward:Zu,inverse:Zu,names:["longlat","identity"]}],Qu={},Ku=[];function tf(t,e){var n=Ku.length;return t.names?(Ku[n]=t,t.names.forEach((function(t){Qu[t.toLowerCase()]=n})),this):(console.log(e),!0)}var ef={start:function(){Ju.forEach(tf)},add:tf,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==Qu[e]&&Ku[Qu[e]]?Ku[Qu[e]]:void 0}},nf={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},rf=nf.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};nf.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var sf={};sf.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},sf.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},sf.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},sf.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},sf.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},sf.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},sf.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},sf.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},sf.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},sf.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},sf.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},sf.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},sf.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},sf.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},sf.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},sf.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},sf.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var of={};function af(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:of[t]||null,isNull:!1}}function lf(t){return t/3600*Math.PI/180}function cf(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function hf(t){return t.map((function(t){return[lf(t.longitudeShift),lf(t.latitudeShift)]}))}function uf(t,e,n){return{name:cf(t,e+8,e+16).trim(),parent:cf(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function ff(t,e,n,i){for(var r=e+176,s=[],o=0;o<n.gridNodeCount;o++){var a={latitudeShift:t.getFloat32(r+16*o,i),longitudeShift:t.getFloat32(r+16*o+4,i),latitudeAccuracy:t.getFloat32(r+16*o+8,i),longitudeAccuracy:t.getFloat32(r+16*o+12,i)};s.push(a)}return s}function df(t,e){if(!(this instanceof df))return new df(t);e=e||function(t){if(t)throw t};var n=Bu(t);if("object"==typeof n){var i=df.projections.get(n.projName);if(i){if(n.datumCode&&"none"!==n.datumCode){var r=Su(sf,n.datumCode);r&&(n.datum_params=n.datum_params||(r.towgs84?r.towgs84.split(","):null),n.ellps=r.ellipse,n.datumName=r.datumName?r.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var s=function(t,e,n,i,r){if(!t){var s=Su(nf,i);s||(s=rf),t=s.a,e=s.b,n=s.rf}return n&&!e&&(e=(1-1/n)*t),(0===n||Math.abs(t-e)<mu)&&(r=!0,e=t),{a:t,b:e,rf:n,sphere:r}}(n.a,n.b,n.rf,n.ellps,n.sphere),o=function(t,e,n,i){var r=t*t,s=e*e,o=(r-s)/r,a=0;return i?(r=(t*=1-o*(.16666666666666666+o*(.04722222222222222+.022156084656084655*o)))*t,o=0):a=Math.sqrt(o),{es:o,e:a,ep2:(r-s)/s}}(s.a,s.b,s.rf,n.R_A),a=function(t){return void 0===t?null:t.split(",").map(af)}(n.nadgrids),l=n.datum||function(t,e,n,i,r,s,o){var a={};return a.datum_type=void 0===t||"none"===t?5:4,e&&(a.datum_params=e.map(parseFloat),0===a.datum_params[0]&&0===a.datum_params[1]&&0===a.datum_params[2]||(a.datum_type=1),a.datum_params.length>3&&(0===a.datum_params[3]&&0===a.datum_params[4]&&0===a.datum_params[5]&&0===a.datum_params[6]||(a.datum_type=2,a.datum_params[3]*=_u,a.datum_params[4]*=_u,a.datum_params[5]*=_u,a.datum_params[6]=a.datum_params[6]/1e6+1))),o&&(a.datum_type=3,a.grids=o),a.a=n,a.b=i,a.es=r,a.ep2=s,a}(n.datumCode,n.datum_params,s.a,s.b,o.es,o.ep2,a);Uu(this,n),Uu(this,i),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=l,this.init(),e(null,this)}else e(t)}else e(t)}function gf(t,e,n){var i,r,s,o,a=t.x,l=t.y,c=t.z?t.z:0;if(l<-yu&&l>-1.001*yu)l=-yu;else if(l>yu&&l<1.001*yu)l=yu;else{if(l<-yu)return{x:-1/0,y:-1/0,z:t.z};if(l>yu)return{x:1/0,y:1/0,z:t.z}}return a>Math.PI&&(a-=2*Math.PI),r=Math.sin(l),o=Math.cos(l),s=r*r,{x:((i=n/Math.sqrt(1-e*s))+c)*o*Math.cos(a),y:(i+c)*o*Math.sin(a),z:(i*(1-e)+c)*r}}function pf(t,e,n,i){var r,s,o,a,l,c,h,u,f,d,g,p,_,y,m,x=1e-12,b=t.x,v=t.y,M=t.z?t.z:0;if(r=Math.sqrt(b*b+v*v),s=Math.sqrt(b*b+v*v+M*M),r/n<x){if(y=0,s/n<x)return yu,m=-i,{x:t.x,y:t.y,z:t.z}}else y=Math.atan2(v,b);o=M/s,u=(a=r/s)*(1-e)*(l=1/Math.sqrt(1-e*(2-e)*a*a)),f=o*l,_=0;do{_++,c=e*(h=n/Math.sqrt(1-e*f*f))/(h+(m=r*u+M*f-h*(1-e*f*f))),p=(g=o*(l=1/Math.sqrt(1-c*(2-c)*a*a)))*u-(d=a*(1-c)*l)*f,u=d,f=g}while(p*p>1e-24&&_<30);return{x:y,y:Math.atan(g/Math.abs(d)),z:m}}function _f(t){return 1===t||2===t}function yf(t,e,n){if(function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(1===t.datum_type?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:2!==t.datum_type||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e))return n;if(5===t.datum_type||5===e.datum_type)return n;var i=t.a,r=t.es;if(3===t.datum_type){if(0!==mf(t,!1,n))return;i=gu,r=pu}var s=e.a,o=e.b,a=e.es;if(3===e.datum_type&&(s=gu,o=6356752.314,a=pu),r===a&&i===s&&!_f(t.datum_type)&&!_f(e.datum_type))return n;if((n=gf(n,r,i),_f(t.datum_type)&&(n=function(t,e,n){if(1===e)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(2===e){var i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],l=n[5],c=n[6];return{x:c*(t.x-l*t.y+a*t.z)+i,y:c*(l*t.x+t.y-o*t.z)+r,z:c*(-a*t.x+o*t.y+t.z)+s}}}(n,t.datum_type,t.datum_params)),_f(e.datum_type)&&(n=function(t,e,n){if(1===e)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(2===e){var i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],l=n[5],c=n[6],h=(t.x-i)/c,u=(t.y-r)/c,f=(t.z-s)/c;return{x:h+l*u-a*f,y:-l*h+u+o*f,z:a*h-o*u+f}}}(n,e.datum_type,e.datum_params)),n=pf(n,a,s,o),3===e.datum_type)&&0!==mf(e,!0,n))return;return n}function mf(t,e,n){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;for(var i={x:-n.x,y:n.y},r={x:Number.NaN,y:Number.NaN},s=[],o=0;o<t.grids.length;o++){var a=t.grids[o];if(s.push(a.name),a.isNull){r=i;break}if(a.mandatory,null!==a.grid){var l=a.grid.subgrids[0],c=(Math.abs(l.del[1])+Math.abs(l.del[0]))/1e4,h=l.ll[0]-c,u=l.ll[1]-c,f=l.ll[0]+(l.lim[0]-1)*l.del[0]+c,d=l.ll[1]+(l.lim[1]-1)*l.del[1]+c;if(!(u>i.y||h>i.x||d<i.y||f<i.x||(r=xf(i,e,l),isNaN(r.x))))break}else if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1}return isNaN(r.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*bu+" "+i.y*bu+" tried: '"+s+"'"),-1):(n.x=-r.x,n.y=r.y,0)}function xf(t,e,n){var i={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return i;var r={x:t.x,y:t.y};r.x-=n.ll[0],r.y-=n.ll[1],r.x=$u(r.x-Math.PI)+Math.PI;var s=bf(r,n);if(e){if(isNaN(s.x))return i;s.x=r.x-s.x,s.y=r.y-s.y;var o,a,l=9;do{if(a=bf(s,n),isNaN(a.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}o={x:r.x-(a.x+s.x),y:r.y-(a.y+s.y)},s.x+=o.x,s.y+=o.y}while(l--&&Math.abs(o.x)>1e-12&&Math.abs(o.y)>1e-12);if(l<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=$u(s.x+n.ll[0]),i.y=s.y+n.ll[1]}else isNaN(s.x)||(i.x=t.x+s.x,i.y=t.y+s.y);return i}function bf(t,e){var n,i={x:t.x/e.del[0],y:t.y/e.del[1]},r=Math.floor(i.x),s=Math.floor(i.y),o=i.x-1*r,a=i.y-1*s,l={x:Number.NaN,y:Number.NaN};if(r<0||r>=e.lim[0])return l;if(s<0||s>=e.lim[1])return l;n=s*e.lim[0]+r;var c=e.cvs[n][0],h=e.cvs[n][1];n++;var u=e.cvs[n][0],f=e.cvs[n][1];n+=e.lim[0];var d=e.cvs[n][0],g=e.cvs[n][1];n--;var p=e.cvs[n][0],_=e.cvs[n][1],y=o*a,m=o*(1-a),x=(1-o)*(1-a),b=(1-o)*a;return l.x=x*c+m*u+b*p+y*d,l.y=x*h+m*f+b*_+y*g,l}function vf(t,e,n){var i,r,s,o=n.x,a=n.y,l=n.z||0,c={};for(s=0;s<3;s++)if(!e||2!==s||void 0!==n.z)switch(0===s?(i=o,r=-1!=="ew".indexOf(t.axis[s])?"x":"y"):1===s?(i=a,r=-1!=="ns".indexOf(t.axis[s])?"y":"x"):(i=l,r="z"),t.axis[s]){case"e":case"n":c[r]=i;break;case"w":case"s":c[r]=-i;break;case"u":void 0!==n[r]&&(c.z=i);break;case"d":void 0!==n[r]&&(c.z=-i);break;default:return null}return c}function Mf(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function wf(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function Ef(t,e,n,i){var r;if(Array.isArray(n)&&(n=Mf(n)),function(t){wf(t.x),wf(t.y)}(n),t.datum&&e.datum&&function(t,e){return(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==e.datumCode||(1===e.datum.datum_type||2===e.datum.datum_type)&&"WGS84"!==t.datumCode}(t,e)&&(n=Ef(t,r=new df("WGS84"),n,i),t=r),i&&"enu"!==t.axis&&(n=vf(t,!1,n)),"longlat"===t.projName)n={x:n.x*xu,y:n.y*xu,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),!(n=t.inverse(n)))return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=yf(t.datum,e.datum,n))return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),"longlat"===e.projName?n={x:n.x*bu,y:n.y*bu,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),i&&"enu"!==e.axis?vf(e,!0,n):n}df.projections=ef,df.projections.start();var Nf=df("WGS84");function If(t,e,n,i){var r,s,o;return Array.isArray(n)?(r=Ef(t,e,n,i)||{x:NaN,y:NaN},n.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof r.z?[r.x,r.y,r.z].concat(n.splice(3)):[r.x,r.y,n[2]].concat(n.splice(3)):[r.x,r.y].concat(n.splice(2)):[r.x,r.y]):(s=Ef(t,e,n,i),2===(o=Object.keys(n)).length||o.forEach((function(i){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===i||"y"===i||"z"===i)return}else if("x"===i||"y"===i)return;s[i]=n[i]})),s)}function Sf(t){return t instanceof df?t:t.oProj?t.oProj:df(t)}function Cf(t,e,n){t=Sf(t);var i,r=!1;return void 0===e?(e=t,t=Nf,r=!0):(void 0!==e.x||Array.isArray(e))&&(n=e,e=t,t=Nf,r=!0),e=Sf(e),n?If(t,e,n):(i={forward:function(n,i){return If(t,e,n,i)},inverse:function(n,i){return If(e,t,n,i)}},r&&(i.oProj=e),i)}var Of="AJSAJS",kf="AFAFAF",Tf=65,Af=73,Rf=79,Lf=86,Pf=90,Df={forward:zf,inverse:function(t){var e=jf(Yf(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:Ff};function zf(t,e){return e=e||5,function(t,e){var n="00000"+t.easting,i="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(r=t.easting,s=t.northing,o=t.zoneNumber,a=Uf(o),l=Math.floor(r/1e5),c=Math.floor(s/1e5)%20,function(t,e,n){var i=n-1,r=Of.charCodeAt(i),s=kf.charCodeAt(i),o=r+t-1,a=s+e,l=!1;return o>Pf&&(o=o-Pf+Tf-1,l=!0),(o===Af||r<Af&&o>Af||(o>Af||r<Af)&&l)&&o++,(o===Rf||r<Rf&&o>Rf||(o>Rf||r<Rf)&&l)&&++o===Af&&o++,o>Pf&&(o=o-Pf+Tf-1),a>Lf?(a=a-Lf+Tf-1,l=!0):l=!1,(a===Af||s<Af&&a>Af||(a>Af||s<Af)&&l)&&a++,(a===Rf||s<Rf&&a>Rf||(a>Rf||s<Rf)&&l)&&++a===Af&&a++,a>Lf&&(a=a-Lf+Tf-1),String.fromCharCode(o)+String.fromCharCode(a)}(l,c,a))+n.substr(n.length-5,e)+i.substr(i.length-5,e);var r,s,o,a,l,c}(function(t){var e,n,i,r,s,o,a,l,c=t.lat,h=t.lon,u=6378137,f=.00669438,d=.9996,g=Gf(c),p=Gf(h);l=Math.floor((h+180)/6)+1,180===h&&(l=60);c>=56&&c<64&&h>=3&&h<12&&(l=32);c>=72&&c<84&&(h>=0&&h<9?l=31:h>=9&&h<21?l=33:h>=21&&h<33?l=35:h>=33&&h<42&&(l=37));a=Gf(6*(l-1)-180+3),e=f/(1-f),n=u/Math.sqrt(1-f*Math.sin(g)*Math.sin(g)),i=Math.tan(g)*Math.tan(g),r=e*Math.cos(g)*Math.cos(g),s=Math.cos(g)*(p-a),o=u*((1-f/4-3*f*f/64-5*f*f*f/256)*g-(3*f/8+3*f*f/32+45*f*f*f/1024)*Math.sin(2*g)+(15*f*f/256+45*f*f*f/1024)*Math.sin(4*g)-35*f*f*f/3072*Math.sin(6*g));var _=d*n*(s+(1-i+r)*s*s*s/6+(5-18*i+i*i+72*r-58*e)*s*s*s*s*s/120)+5e5,y=d*(o+n*Math.tan(g)*(s*s/2+(5-i+9*r+4*r*r)*s*s*s*s/24+(61-58*i+i*i+600*r-330*e)*s*s*s*s*s*s/720));c<0&&(y+=1e7);return{northing:Math.round(y),easting:Math.round(_),zoneNumber:l,zoneLetter:Bf(c)}}({lat:t[1],lon:t[0]}),e)}function Ff(t){var e=jf(Yf(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Gf(t){return t*(Math.PI/180)}function qf(t){return t/Math.PI*180}function jf(t){var e=t.northing,n=t.easting,i=t.zoneLetter,r=t.zoneNumber;if(r<0||r>60)return null;var s,o,a,l,c,h,u,f,d,g=.9996,p=6378137,_=.00669438,y=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),m=n-5e5,x=e;i<"N"&&(x-=1e7),u=6*(r-1)-180+3,s=.006739496752268451,d=(f=x/g/6367449.145945056)+(3*y/2-27*y*y*y/32)*Math.sin(2*f)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*f)+151*y*y*y/96*Math.sin(6*f),o=p/Math.sqrt(1-_*Math.sin(d)*Math.sin(d)),a=Math.tan(d)*Math.tan(d),l=s*Math.cos(d)*Math.cos(d),c=.99330562*p/Math.pow(1-_*Math.sin(d)*Math.sin(d),1.5),h=m/(o*g);var b=d-o*Math.tan(d)/c*(h*h/2-(5+3*a+10*l-4*l*l-9*s)*h*h*h*h/24+(61+90*a+298*l+45*a*a-1.6983531815716497-3*l*l)*h*h*h*h*h*h/720);b=qf(b);var v,M=(h-(1+2*a+l)*h*h*h/6+(5-2*l+28*a-3*l*l+8*s+24*a*a)*h*h*h*h*h/120)/Math.cos(d);if(M=u+qf(M),t.accuracy){var w=jf({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});v={top:w.lat,right:w.lon,bottom:b,left:M}}else v={lat:b,lon:M};return v}function Bf(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function Uf(t){var e=t%6;return 0===e&&(e=6),e}function Yf(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,i=null,r="",s=0;!/[A-Z]/.test(e=t.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+t;r+=e,s++}var o=parseInt(r,10);if(0===s||s+3>n)throw"MGRSPoint bad conversion from: "+t;var a=t.charAt(s++);if(a<="A"||"B"===a||"Y"===a||a>="Z"||"I"===a||"O"===a)throw"MGRSPoint zone letter "+a+" not handled: "+t;i=t.substring(s,s+=2);for(var l=Uf(o),c=function(t,e){var n=Of.charCodeAt(e-1),i=1e5,r=!1;for(;n!==t.charCodeAt(0);){if(++n===Af&&n++,n===Rf&&n++,n>Pf){if(r)throw"Bad character: "+t;n=Tf,r=!0}i+=1e5}return i}(i.charAt(0),l),h=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var n=kf.charCodeAt(e-1),i=0,r=!1;for(;n!==t.charCodeAt(0);){if(++n===Af&&n++,n===Rf&&n++,n>Lf){if(r)throw"Bad character: "+t;n=Tf,r=!0}i+=1e5}return i}(i.charAt(1),l);h<Wf(a);)h+=2e6;var u=n-s;if(u%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var f,d,g,p=u/2,_=0,y=0;return p>0&&(f=1e5/Math.pow(10,p),d=t.substring(s,s+p),_=parseFloat(d)*f,g=t.substring(s+p),y=parseFloat(g)*f),{easting:_+c,northing:y+h,zoneLetter:a,zoneNumber:o,accuracy:f}}function Wf(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function $f(t,e,n){if(!(this instanceof $f))return new $f(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var i=t.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}$f.fromMGRS=function(t){return new $f(Ff(t))},$f.prototype.toMGRS=function(t){return zf([this.x,this.y],t)};var Xf=.046875,Vf=.01953125,Hf=.01068115234375;function Zf(t){var e=[];e[0]=1-t*(.25+t*(Xf+t*(Vf+t*Hf))),e[1]=t*(.75-t*(Xf+t*(Vf+t*Hf)));var n=t*t;return e[2]=n*(.46875-t*(.013020833333333334+.007120768229166667*t)),n*=t,e[3]=n*(.3645833333333333-.005696614583333333*t),e[4]=n*t*.3076171875,e}function Jf(t,e,n,i){return n*=e,e*=e,i[0]*t-n*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))}function Qf(t,e,n){for(var i=1/(1-e),r=t,s=20;s;--s){var o=Math.sin(r),a=1-e*o*o;if(r-=a=(Jf(r,o,Math.cos(r),n)-t)*(a*Math.sqrt(a))*i,Math.abs(a)<mu)return r}return r}var Kf={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Zf(this.es),this.ml0=Jf(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,n,i,r=t.x,s=t.y,o=$u(r-this.long0),a=Math.sin(s),l=Math.cos(s);if(this.es){var c=l*o,h=Math.pow(c,2),u=this.ep2*Math.pow(l,2),f=Math.pow(u,2),d=Math.abs(l)>mu?Math.tan(s):0,g=Math.pow(d,2),p=Math.pow(g,2);e=1-this.es*Math.pow(a,2),c/=Math.sqrt(e);var _=Jf(s,a,l,this.en);n=this.a*(this.k0*c*(1+h/6*(1-g+u+h/20*(5-18*g+p+14*u-58*g*u+h/42*(61+179*p-p*g-479*g)))))+this.x0,i=this.a*(this.k0*(_-this.ml0+a*o*c/2*(1+h/12*(5-g+9*u+4*f+h/30*(61+p-58*g+270*u-330*g*u+h/56*(1385+543*p-p*g-3111*g))))))+this.y0}else{var y=l*Math.sin(o);if(Math.abs(Math.abs(y)-1)<mu)return 93;if(n=.5*this.a*this.k0*Math.log((1+y)/(1-y))+this.x0,i=l*Math.cos(o)/Math.sqrt(1-Math.pow(y,2)),(y=Math.abs(i))>=1){if(y-1>mu)return 93;i=0}else i=Math.acos(i);s<0&&(i=-i),i=this.a*this.k0*(i-this.lat0)+this.y0}return t.x=n,t.y=i,t},inverse:function(t){var e,n,i,r,s=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(this.es)if(n=Qf(e=this.ml0+o/this.k0,this.es,this.en),Math.abs(n)<yu){var a=Math.sin(n),l=Math.cos(n),c=Math.abs(l)>mu?Math.tan(n):0,h=this.ep2*Math.pow(l,2),u=Math.pow(h,2),f=Math.pow(c,2),d=Math.pow(f,2);e=1-this.es*Math.pow(a,2);var g=s*Math.sqrt(e)/this.k0,p=Math.pow(g,2);i=n-(e*=c)*p/(1-this.es)*.5*(1-p/12*(5+3*f-9*h*f+h-4*u-p/30*(61+90*f-252*h*f+45*d+46*h-p/56*(1385+3633*f+4095*d+1574*d*f)))),r=$u(this.long0+g*(1-p/6*(1+2*f+h-p/20*(5+28*f+24*d+8*h*f+6*h-p/42*(61+662*f+1320*d+720*d*f))))/l)}else i=yu*Wu(o),r=0;else{var _=Math.exp(s/this.k0),y=.5*(_-1/_),m=this.lat0+o/this.k0,x=Math.cos(m);e=Math.sqrt((1-Math.pow(x,2))/(1+Math.pow(y,2))),i=Math.asin(e),o<0&&(i=-i),r=0===y&&0===x?0:$u(Math.atan2(y,x)+this.long0)}return t.x=r,t.y=i,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function td(t){var e=Math.exp(t);return e=(e-1/e)/2}function ed(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),i=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(i,2))}function nd(t){var e=Math.abs(t);return e=function(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n}(e*(1+e/(ed(1,e)+1))),t<0?-e:e}function id(t,e){for(var n,i=2*Math.cos(2*e),r=t.length-1,s=t[r],o=0;--r>=0;)n=i*s-o+t[r],o=s,s=n;return e+n*Math.sin(2*e)}function rd(t,e,n){for(var i,r,s=Math.sin(e),o=Math.cos(e),a=td(n),l=function(t){var e=Math.exp(t);return(e+1/e)/2}(n),c=2*o*l,h=-2*s*a,u=t.length-1,f=t[u],d=0,g=0,p=0;--u>=0;)i=g,r=d,f=c*(g=f)-i-h*(d=p)+t[u],p=h*g-r+c*d;return[(c=s*l)*f-(h=o*a)*p,c*p+h*f]}var sd={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Kf.init.apply(this),this.forward=Kf.forward,this.inverse=Kf.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=.6650675310896665*n;var i=id(this.cbg,this.lat0);this.Zb=-this.Qn*(i+function(t,e){for(var n,i=2*Math.cos(e),r=t.length-1,s=t[r],o=0;--r>=0;)n=i*s-o+t[r],o=s,s=n;return Math.sin(e)*n}(this.gtu,2*i))},forward:function(t){var e=$u(t.x-this.long0),n=t.y;n=id(this.cbg,n);var i=Math.sin(n),r=Math.cos(n),s=Math.sin(e),o=Math.cos(e);n=Math.atan2(i,o*r),e=Math.atan2(s*r,ed(i,r*o)),e=nd(Math.tan(e));var a,l,c=rd(this.gtu,2*n,2*e);return n+=c[0],e+=c[1],Math.abs(e)<=2.623395162778?(a=this.a*(this.Qn*e)+this.x0,l=this.a*(this.Qn*n+this.Zb)+this.y0):(a=1/0,l=1/0),t.x=a,t.y=l,t},inverse:function(t){var e,n,i=(t.x-this.x0)*(1/this.a),r=(t.y-this.y0)*(1/this.a);if(r=(r-this.Zb)/this.Qn,i/=this.Qn,Math.abs(i)<=2.623395162778){var s=rd(this.utg,2*r,2*i);r+=s[0],i+=s[1],i=Math.atan(td(i));var o=Math.sin(r),a=Math.cos(r),l=Math.sin(i),c=Math.cos(i);r=Math.atan2(o*c,ed(l,c*a)),e=$u((i=Math.atan2(l,c*a))+this.long0),n=id(this.cgb,r)}else e=1/0,n=1/0;return t.x=e,t.y=n,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]};var od={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*($u(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*xu,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,sd.init.apply(this),this.forward=sd.forward,this.inverse=sd.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function ad(t,e){return Math.pow((1-t)/(1+t),e)}var ld={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+vu)/(Math.pow(Math.tan(.5*this.lat0+vu),this.C)*ad(this.e*t,this.ratexp))},forward:function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+vu),this.C)*ad(this.e*Math.sin(n),this.ratexp))-yu,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,n=t.y,i=Math.pow(Math.tan(.5*n+vu)/this.K,1/this.C),r=20;r>0&&(n=2*Math.atan(i*ad(this.e*Math.sin(t.y),-.5*this.e))-yu,!(Math.abs(n-t.y)<1e-14));--r)t.y=n;return r?(t.x=e,t.y=n,t):null},names:["gauss"]};var cd={init:function(){ld.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,n,i,r;return t.x=$u(t.x-this.long0),ld.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),i=Math.cos(t.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*i),t.x=r*n*Math.sin(t.x),t.y=r*(this.cosc0*e-this.sinc0*n*i),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,n,i,r,s;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,s=Math.sqrt(t.x*t.x+t.y*t.y)){var o=2*Math.atan2(s,this.R2);e=Math.sin(o),n=Math.cos(o),r=Math.asin(n*this.sinc0+t.y*e*this.cosc0/s),i=Math.atan2(t.x*e,s*this.cosc0*n-t.y*this.sinc0*e)}else r=this.phic0,i=0;return t.x=i,t.y=r,ld.inverse.apply(this,[t]),t.x=$u(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var hd={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=mu&&(this.k0=.5*(1+Wu(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=mu&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=mu&&(this.k0=.5*this.cons*Yu(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Xu(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Yu(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-yu,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,n,i,r,s,o,a=t.x,l=t.y,c=Math.sin(l),h=Math.cos(l),u=$u(a-this.long0);return Math.abs(Math.abs(a-this.long0)-Math.PI)<=mu&&Math.abs(l+this.lat0)<=mu?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*c+this.coslat0*h*Math.cos(u)),t.x=this.a*e*h*Math.sin(u)+this.x0,t.y=this.a*e*(this.coslat0*c-this.sinlat0*h*Math.cos(u))+this.y0,t):(n=2*Math.atan(this.ssfn_(l,c,this.e))-yu,r=Math.cos(n),i=Math.sin(n),Math.abs(this.coslat0)<=mu?(s=Xu(this.e,l*this.con,this.con*c),o=2*this.a*this.k0*s/this.cons,t.x=this.x0+o*Math.sin(a-this.long0),t.y=this.y0-this.con*o*Math.cos(a-this.long0),t):(Math.abs(this.sinlat0)<mu?(e=2*this.a*this.k0/(1+r*Math.cos(u)),t.y=e*i):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*i+this.cosX0*r*Math.cos(u))),t.y=e*(this.cosX0*i-this.sinX0*r*Math.cos(u))+this.y0),t.x=e*r*Math.sin(u)+this.x0,t))},inverse:function(t){var e,n,i,r,s;t.x-=this.x0,t.y-=this.y0;var o=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,n=this.lat0,o<=mu?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(a)*this.sinlat0+t.y*Math.sin(a)*this.coslat0/o),e=Math.abs(this.coslat0)<mu?this.lat0>0?$u(this.long0+Math.atan2(t.x,-1*t.y)):$u(this.long0+Math.atan2(t.x,t.y)):$u(this.long0+Math.atan2(t.x*Math.sin(a),o*this.coslat0*Math.cos(a)-t.y*this.sinlat0*Math.sin(a))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=mu){if(o<=mu)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,i=o*this.cons/(2*this.a*this.k0),n=this.con*Vu(this.e,i),e=this.con*$u(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else r=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=mu?s=this.X0:(s=Math.asin(Math.cos(r)*this.sinX0+t.y*Math.sin(r)*this.cosX0/o),e=$u(this.long0+Math.atan2(t.x*Math.sin(r),o*this.cosX0*Math.cos(r)-t.y*this.sinX0*Math.sin(r)))),n=-1*Vu(this.e,Math.tan(.5*(yu+s)));return t.x=e,t.y=n,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,n){return e*=n,Math.tan(.5*(yu+t))*Math.pow((1-e)/(1+e),.5*n)}};var ud={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,i=1/this.rf,r=2*i-Math.pow(i,2),s=this.e=Math.sqrt(r);this.R=this.k0*n*Math.sqrt(1-r)/(1-r*Math.pow(e,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),a=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+s*e)/(1-s*e));this.K=o-this.alpha*a+this.alpha*s/2*l},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),i=-this.alpha*(e+n)+this.K,r=2*(Math.atan(Math.exp(i))-Math.PI/4),s=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(s))),a=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(s));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*o+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,n=t.y-this.y0,i=e/this.R,r=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(i)),o=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(r))),a=this.lambda0+o/this.alpha,l=0,c=s,h=-1e3,u=0;Math.abs(c-h)>1e-7;){if(++u>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),h=c,c=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=a,t.y=c,t},names:["somerc"]},fd=1e-7;var dd={init:function(){var t,e,n,i,r,s,o,a,l,c,h,u,f,d=0,g=0,p=0,_=0,y=0,m=0,x=0;this.no_off=(f="object"==typeof(u=this).PROJECTION?Object.keys(u.PROJECTION)[0]:u.PROJECTION,"no_uoff"in u||"no_off"in u||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(f)),this.no_rot="no_rot"in this;var b=!1;"alpha"in this&&(b=!0);var v=!1;if("rectified_grid_angle"in this&&(v=!0),b&&(x=this.alpha),v&&(d=this.rectified_grid_angle*xu),b||v)g=this.longc;else if(p=this.long1,y=this.lat1,_=this.long2,m=this.lat2,Math.abs(y-m)<=fd||(t=Math.abs(y))<=fd||Math.abs(t-yu)<=fd||Math.abs(Math.abs(this.lat0)-yu)<=fd||Math.abs(Math.abs(m)-yu)<=fd)throw new Error;var M=1-this.es;e=Math.sqrt(M),Math.abs(this.lat0)>mu?(a=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*a*a,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/M),this.A=this.B*this.k0*e/t,(r=(i=this.B*e/(n*Math.sqrt(t)))*i-1)<=0?r=0:(r=Math.sqrt(r),this.lat0<0&&(r=-r)),this.E=r+=i,this.E*=Math.pow(Xu(this.e,this.lat0,a),this.B)):(this.B=1/e,this.A=this.k0,this.E=i=r=1),b||v?(b?(h=Math.asin(Math.sin(x)/i),v||(d=x)):(h=d,x=Math.asin(i*Math.sin(h))),this.lam0=g-Math.asin(.5*(r-1/r)*Math.tan(h))/this.B):(s=Math.pow(Xu(this.e,y,Math.sin(y)),this.B),o=Math.pow(Xu(this.e,m,Math.sin(m)),this.B),r=this.E/s,l=(o-s)/(o+s),c=((c=this.E*this.E)-o*s)/(c+o*s),(t=p-_)<-Math.pi?_-=Mu:t>Math.pi&&(_+=Mu),this.lam0=$u(.5*(p+_)-Math.atan(c*Math.tan(.5*this.B*(p-_))/l)/this.B),h=Math.atan(2*Math.sin(this.B*$u(p-this.lam0))/(r-1/r)),d=x=Math.asin(i*Math.sin(h))),this.singam=Math.sin(h),this.cosgam=Math.cos(h),this.sinrot=Math.sin(d),this.cosrot=Math.cos(d),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(i*i-1)/Math.cos(x))),this.lat0<0&&(this.u_0=-this.u_0)),r=.5*h,this.v_pole_n=this.ArB*Math.log(Math.tan(vu-r)),this.v_pole_s=this.ArB*Math.log(Math.tan(vu+r))},forward:function(t){var e,n,i,r,s,o,a,l,c={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-yu)>mu){if(e=.5*((s=this.E/Math.pow(Xu(this.e,t.y,Math.sin(t.y)),this.B))-(o=1/s)),n=.5*(s+o),r=Math.sin(this.B*t.x),i=(e*this.singam-r*this.cosgam)/n,Math.abs(Math.abs(i)-1)<mu)throw new Error;l=.5*this.ArB*Math.log((1-i)/(1+i)),o=Math.cos(this.B*t.x),a=Math.abs(o)<fd?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+r*this.singam,o)}else l=t.y>0?this.v_pole_n:this.v_pole_s,a=this.ArB*t.y;return this.no_rot?(c.x=a,c.y=l):(a-=this.u_0,c.x=l*this.cosrot+a*this.sinrot,c.y=a*this.cosrot-l*this.sinrot),c.x=this.a*c.x+this.x0,c.y=this.a*c.y+this.y0,c},inverse:function(t){var e,n,i,r,s,o,a,l={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),r=.5*((i=Math.exp(-this.BrA*n))-1/i),s=.5*(i+1/i),a=((o=Math.sin(this.BrA*e))*this.cosgam+r*this.singam)/s,Math.abs(Math.abs(a)-1)<mu)l.x=0,l.y=a<0?-yu:yu;else{if(l.y=this.E/Math.sqrt((1+a)/(1-a)),l.y=Vu(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(r*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]};var gd={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<mu)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),i=Yu(this.e,e,n),r=Xu(this.e,this.lat1,e),s=Math.sin(this.lat2),o=Math.cos(this.lat2),a=Yu(this.e,s,o),l=Xu(this.e,this.lat2,s),c=Xu(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>mu?this.ns=Math.log(i/a)/Math.log(r/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=i/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=mu&&(n=Wu(n)*(yu-2e-10));var i,r,s=Math.abs(Math.abs(n)-yu);if(s>mu)i=Xu(this.e,n,Math.sin(n)),r=this.a*this.f0*Math.pow(i,this.ns);else{if((s=n*this.ns)<=0)return null;r=0}var o=this.ns*$u(e-this.long0);return t.x=this.k0*(r*Math.sin(o))+this.x0,t.y=this.k0*(this.rh-r*Math.cos(o))+this.y0,t},inverse:function(t){var e,n,i,r,s,o=(t.x-this.x0)/this.k0,a=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+a*a),n=1):(e=-Math.sqrt(o*o+a*a),n=-1);var l=0;if(0!==e&&(l=Math.atan2(n*o,n*a)),0!==e||this.ns>0){if(n=1/this.ns,i=Math.pow(e/(this.a*this.f0),n),-9999===(r=Vu(this.e,i)))return null}else r=-yu;return s=$u(l/this.ns+this.long0),t.x=s,t.y=r,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]};var pd={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,n,i,r,s,o,a,l=t.x,c=t.y,h=$u(l-this.long0);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),i=-h*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),s=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(r)),o=this.n*s,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),t.y=a*Math.cos(o)/1,t.x=a*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,n,i,r,s,o,a,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),s=Math.sqrt(t.x*t.x+t.y*t.y),r=Math.atan2(t.y,t.x)/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/s,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),n=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(e)),t.x=this.long0-n/this.alfa,o=e,a=0;var c=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-t.y)<1e-10&&(a=1),o=t.y,c+=1}while(0===a&&c<15);return c>=15?null:t},names:["Krovak","krovak"]};function _d(t,e,n,i,r){return t*r-e*Math.sin(2*r)+n*Math.sin(4*r)-i*Math.sin(6*r)}function yd(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function md(t){return.375*t*(1+.25*t*(1+.46875*t))}function xd(t){return.05859375*t*t*(1+.75*t)}function bd(t){return t*t*t*(35/3072)}function vd(t,e,n){var i=e*n;return t/Math.sqrt(1-i*i)}function Md(t){return Math.abs(t)<yu?t:t-Wu(t)*Math.PI}function wd(t,e,n,i,r){var s,o;s=t/e;for(var a=0;a<15;a++)if(s+=o=(t-(e*s-n*Math.sin(2*s)+i*Math.sin(4*s)-r*Math.sin(6*s)))/(e-2*n*Math.cos(2*s)+4*i*Math.cos(4*s)-6*r*Math.cos(6*s)),Math.abs(o)<=1e-10)return s;return NaN}var Ed={init:function(){this.sphere||(this.e0=yd(this.es),this.e1=md(this.es),this.e2=xd(this.es),this.e3=bd(this.es),this.ml0=this.a*_d(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,n,i=t.x,r=t.y;if(i=$u(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(i)),n=this.a*(Math.atan2(Math.tan(r),Math.cos(i))-this.lat0);else{var s=Math.sin(r),o=Math.cos(r),a=vd(this.a,this.e,s),l=Math.tan(r)*Math.tan(r),c=i*Math.cos(r),h=c*c,u=this.es*o*o/(1-this.es);e=a*c*(1-h*l*(1/6-(8-l+8*u)*h/120)),n=this.a*_d(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+a*s/o*h*(.5+(5-l+6*u)*h/24)}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,i=t.x/this.a,r=t.y/this.a;if(this.sphere){var s=r+this.lat0;e=Math.asin(Math.sin(s)*Math.cos(i)),n=Math.atan2(Math.tan(i),Math.cos(s))}else{var o=wd(this.ml0/this.a+r,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-yu)<=mu)return t.x=this.long0,t.y=yu,r<0&&(t.y*=-1),t;var a=vd(this.a,this.e,Math.sin(o)),l=a*a*a/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(o),2),h=i*this.a/a,u=h*h;e=o-a*Math.tan(o)/l*h*h*(.5-(1+3*c)*h*h/24),n=h*(1-u*(c/3+(1+3*c)*c*u/15))/Math.cos(o)}return t.x=$u(n+this.long0),t.y=Md(e),t},names:["Cassini","Cassini_Soldner","cass"]};function Nd(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e}var Id=.3333333333333333,Sd=.17222222222222222,Cd=.10257936507936508,Od=.06388888888888888,kd=.0664021164021164,Td=.016415012942191543;var Ad={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-yu)<mu?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<mu?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=Nd(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,n=[];return n[0]=t*Id,e=t*t,n[0]+=e*Sd,n[1]=e*Od,e*=t,n[0]+=e*Cd,n[1]+=e*kd,n[2]=e*Td,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Nd(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,n,i,r,s,o,a,l,c,h,u=t.x,f=t.y;if(u=$u(u-this.long0),this.sphere){if(s=Math.sin(f),h=Math.cos(f),i=Math.cos(u),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+h*i:1+this.sinph0*s+this.cosph0*h*i)<=mu)return null;e=(n=Math.sqrt(2/n))*h*Math.sin(u),n*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*h*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(f+this.lat0)<mu)return null;n=vu-.5*f,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(u),n*=i}}else{switch(a=0,l=0,c=0,i=Math.cos(u),r=Math.sin(u),s=Math.sin(f),o=Nd(this.e,s),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(a=o/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:c=1+this.sinb1*a+this.cosb1*l*i;break;case this.EQUIT:c=1+l*i;break;case this.N_POLE:c=yu+f,o=this.qp-o;break;case this.S_POLE:c=f-yu,o=this.qp+o}if(Math.abs(c)<mu)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),n=this.mode===this.OBLIQ?this.ymf*c*(this.cosb1*a-this.sinb1*l*i):(c=Math.sqrt(2/(1+l*i)))*a*this.ymf,e=this.xmf*c*l*r;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(c=Math.sqrt(o))*r,n=i*(this.mode===this.S_POLE?c:-c)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,i,r,s,o,a,l,c,h,u=t.x/this.a,f=t.y/this.a;if(this.sphere){var d,g=0,p=0;if((n=.5*(d=Math.sqrt(u*u+f*f)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(p=Math.sin(n),g=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(d)<=mu?0:Math.asin(f*p/d),u*=p,f=g*d;break;case this.OBLIQ:n=Math.abs(d)<=mu?this.lat0:Math.asin(g*this.sinph0+f*p*this.cosph0/d),u*=p*this.cosph0,f=(g-Math.sin(n)*this.sinph0)*d;break;case this.N_POLE:f=-f,n=yu-n;break;case this.S_POLE:n-=yu}e=0!==f||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(u,f):0}else{if(a=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(u/=this.dd,f*=this.dd,(o=Math.sqrt(u*u+f*f))<mu)return t.x=this.long0,t.y=this.lat0,t;r=2*Math.asin(.5*o/this.rq),i=Math.cos(r),u*=r=Math.sin(r),this.mode===this.OBLIQ?(a=i*this.sinb1+f*r*this.cosb1/o,s=this.qp*a,f=o*this.cosb1*i-f*this.sinb1*r):(a=f*r/o,s=this.qp*a,f=o*i)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(f=-f),!(s=u*u+f*f))return t.x=this.long0,t.y=this.lat0,t;a=1-s/this.qp,this.mode===this.S_POLE&&(a=-a)}e=Math.atan2(u,f),l=Math.asin(a),c=this.apa,h=l+l,n=l+c[0]*Math.sin(h)+c[1]*Math.sin(h+h)+c[2]*Math.sin(h+h+h)}return t.x=$u(this.long0+e),t.y=n,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function Rd(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}var Ld={init:function(){Math.abs(this.lat1+this.lat2)<mu||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Yu(this.e3,this.sin_po,this.cos_po),this.qs1=Nd(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Yu(this.e3,this.sin_po,this.cos_po),this.qs2=Nd(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Nd(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>mu?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var i=Nd(this.e3,this.sin_phi,this.cos_phi),r=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,s=this.ns0*$u(e-this.long0),o=r*Math.sin(s)+this.x0,a=this.rh-r*Math.cos(s)+this.y0;return t.x=o,t.y=a,t},inverse:function(t){var e,n,i,r,s,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1),r=0,0!==e&&(r=Math.atan2(i*t.x,i*t.y)),i=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-i*i)/(2*this.ns0)):(n=(this.c-i*i)/this.ns0,o=this.phi1z(this.e3,n)),s=$u(r/this.ns0+this.long0),t.x=s,t.y=o,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var n,i,r,s,o=Rd(.5*e);if(t<mu)return o;for(var a=t*t,l=1;l<=25;l++)if(o+=s=.5*(r=1-(i=t*(n=Math.sin(o)))*i)*r/Math.cos(o)*(e/(1-a)-n/r+.5/t*Math.log((1-i)/(1+i))),Math.abs(s)<=1e-7)return o;return null}};var Pd={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,n,i,r,s,o,a,l=t.x,c=t.y;return i=$u(l-this.long0),e=Math.sin(c),n=Math.cos(c),r=Math.cos(i),1,(s=this.sin_p14*e+this.cos_p14*n*r)>0||Math.abs(s)<=mu?(o=this.x0+1*this.a*n*Math.sin(i)/s,a=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*r)/s):(o=this.x0+this.infinity_dist*n*Math.sin(i),a=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*r)),t.x=o,t.y=a,t},inverse:function(t){var e,n,i,r,s,o;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(r=Math.atan2(e,this.rc),n=Math.sin(r),o=Rd((i=Math.cos(r))*this.sin_p14+t.y*n*this.cos_p14/e),s=Math.atan2(t.x*n,e*this.cos_p14*i-t.y*this.sin_p14*n),s=$u(this.long0+s)):(o=this.phic0,s=0),t.x=s,t.y=o,t},names:["gnom"]};var Dd={init:function(){this.sphere||(this.k0=Yu(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,n,i=t.x,r=t.y,s=$u(i-this.long0);if(this.sphere)e=this.x0+this.a*s*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var o=Nd(this.e,Math.sin(r));e=this.x0+this.a*this.k0*s,n=this.y0+this.a*o*.5/this.k0}return t.x=e,t.y=n,t},inverse:function(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=$u(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*yu:yu;for(var i,r,s,o,a=Math.asin(.5*e),l=0;l<30;l++)if(r=Math.sin(a),s=Math.cos(a),o=t*r,a+=i=Math.pow(1-o*o,2)/(2*s)*(e/(1-t*t)-r/(1-o*o)+.5/t*Math.log((1-o)/(1+o))),Math.abs(i)<=1e-10)return a;return NaN}(this.e,2*t.y*this.k0/this.a),e=$u(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},names:["cea"]};var zd={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,n=t.y,i=$u(e-this.long0),r=Md(n-this.lat0);return t.x=this.x0+this.a*i*this.rc,t.y=this.y0+this.a*r,t},inverse:function(t){var e=t.x,n=t.y;return t.x=$u(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=Md(this.lat0+(n-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]};var Fd={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=yd(this.es),this.e1=md(this.es),this.e2=xd(this.es),this.e3=bd(this.es),this.ml0=this.a*_d(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,n,i,r=t.x,s=t.y,o=$u(r-this.long0);if(i=o*Math.sin(s),this.sphere)Math.abs(s)<=mu?(e=this.a*o,n=-1*this.a*this.lat0):(e=this.a*Math.sin(i)/Math.tan(s),n=this.a*(Md(s-this.lat0)+(1-Math.cos(i))/Math.tan(s)));else if(Math.abs(s)<=mu)e=this.a*o,n=-1*this.ml0;else{var a=vd(this.a,this.e,Math.sin(s))/Math.tan(s);e=a*Math.sin(i),n=this.a*_d(this.e0,this.e1,this.e2,this.e3,s)-this.ml0+a*(1-Math.cos(i))}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){var e,n,i,r,s,o,a,l,c;if(i=t.x-this.x0,r=t.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=mu)e=$u(i/this.a+this.long0),n=0;else{var h;for(o=this.lat0+r/this.a,a=i*i/this.a/this.a+o*o,l=o,s=20;s;--s)if(l+=c=-1*(o*(l*(h=Math.tan(l))+1)-l-.5*(l*l+a)*h)/((l-o)/h-1),Math.abs(c)<=mu){n=l;break}e=$u(this.long0+Math.asin(i*Math.tan(l)/this.a)/Math.sin(n))}else if(Math.abs(r+this.ml0)<=mu)n=0,e=$u(this.long0+i/this.a);else{var u,f,d,g,p;for(o=(this.ml0+r)/this.a,a=i*i/this.a/this.a+o*o,l=o,s=20;s;--s)if(p=this.e*Math.sin(l),u=Math.sqrt(1-p*p)*Math.tan(l),f=this.a*_d(this.e0,this.e1,this.e2,this.e3,l),d=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=c=(o*(u*(g=f/this.a)+1)-g-.5*u*(g*g+a))/(this.es*Math.sin(2*l)*(g*g+a-2*o*g)/(4*u)+(o-g)*(u*d-2/Math.sin(2*l))-d),Math.abs(c)<=mu){n=l;break}u=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=$u(this.long0+Math.asin(i*u/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},names:["Polyconic","poly"]};var Gd={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,n=t.x,i=t.y-this.lat0,r=n-this.long0,s=i/_u*1e-5,o=r,a=1,l=0;for(e=1;e<=10;e++)a*=s,l+=this.A[e]*a;var c,h=l,u=o,f=1,d=0,g=0,p=0;for(e=1;e<=6;e++)c=d*h+f*u,f=f*h-d*u,d=c,g=g+this.B_re[e]*f-this.B_im[e]*d,p=p+this.B_im[e]*f+this.B_re[e]*d;return t.x=p*this.a+this.x0,t.y=g*this.a+this.y0,t},inverse:function(t){var e,n,i=t.x,r=t.y,s=i-this.x0,o=(r-this.y0)/this.a,a=s/this.a,l=1,c=0,h=0,u=0;for(e=1;e<=6;e++)n=c*o+l*a,l=l*o-c*a,c=n,h=h+this.C_re[e]*l-this.C_im[e]*c,u=u+this.C_im[e]*l+this.C_re[e]*c;for(var f=0;f<this.iterations;f++){var d,g=h,p=u,_=o,y=a;for(e=2;e<=6;e++)d=p*h+g*u,g=g*h-p*u,p=d,_+=(e-1)*(this.B_re[e]*g-this.B_im[e]*p),y+=(e-1)*(this.B_im[e]*g+this.B_re[e]*p);g=1,p=0;var m=this.B_re[1],x=this.B_im[1];for(e=2;e<=6;e++)d=p*h+g*u,g=g*h-p*u,p=d,m+=e*(this.B_re[e]*g-this.B_im[e]*p),x+=e*(this.B_im[e]*g+this.B_re[e]*p);var b=m*m+x*x;h=(_*m+y*x)/b,u=(y*m-_*x)/b}var v=h,M=u,w=1,E=0;for(e=1;e<=9;e++)w*=v,E+=this.D[e]*w;var N=this.lat0+E*_u*1e5,I=this.long0+M;return t.x=I,t.y=N,t},names:["New_Zealand_Map_Grid","nzmg"]};var qd={init:function(){},forward:function(t){var e=t.x,n=t.y,i=$u(e-this.long0),r=this.x0+this.a*i,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=r,t.y=s,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=$u(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},names:["Miller_Cylindrical","mill"]};var jd={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Zf(this.es)},forward:function(t){var e,n,i=t.x,r=t.y;if(i=$u(i-this.long0),this.sphere){if(this.m)for(var s=this.n*Math.sin(r),o=20;o;--o){var a=(this.m*r+Math.sin(r)-s)/(this.m+Math.cos(r));if(r-=a,Math.abs(a)<mu)break}else r=1!==this.n?Math.asin(this.n*Math.sin(r)):r;e=this.a*this.C_x*i*(this.m+Math.cos(r)),n=this.a*this.C_y*r}else{var l=Math.sin(r),c=Math.cos(r);n=this.a*Jf(r,l,c,this.en),e=this.a*i*c/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,i;return t.x-=this.x0,n=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,n/=this.C_x*(this.m+Math.cos(e)),this.m?e=Rd((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=Rd(Math.sin(e)/this.n)),n=$u(n+this.long0),e=Md(e)):(e=Qf(t.y/this.a,this.es,this.en),(i=Math.abs(e))<yu?(i=Math.sin(e),n=$u(this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)))):i-mu<yu&&(n=this.long0)),t.x=n,t.y=e,t},names:["Sinusoidal","sinu"]};var Bd={init:function(){},forward:function(t){for(var e=t.x,n=t.y,i=$u(e-this.long0),r=n,s=Math.PI*Math.sin(n);;){var o=-(r+Math.sin(r)-s)/(1+Math.cos(r));if(r+=o,Math.abs(o)<mu)break}r/=2,Math.PI/2-Math.abs(n)<mu&&(i=0);var a=.900316316158*this.a*i*Math.cos(r)+this.x0,l=1.4142135623731*this.a*Math.sin(r)+this.y0;return t.x=a,t.y=l,t},inverse:function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var i=$u(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var r=Math.asin(n);return t.x=i,t.y=r,t},names:["Mollweide","moll"]};var Ud={init:function(){Math.abs(this.lat1+this.lat2)<mu||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=yd(this.es),this.e1=md(this.es),this.e2=xd(this.es),this.e3=bd(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Yu(this.e,this.sinphi,this.cosphi),this.ml1=_d(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<mu?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Yu(this.e,this.sinphi,this.cosphi),this.ml2=_d(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=_d(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,n=t.x,i=t.y;if(this.sphere)e=this.a*(this.g-i);else{var r=_d(this.e0,this.e1,this.e2,this.e3,i);e=this.a*(this.g-r)}var s=this.ns*$u(n-this.long0),o=this.x0+e*Math.sin(s),a=this.y0+this.rh-e*Math.cos(s);return t.x=o,t.y=a,t},inverse:function(t){var e,n,i,r;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var s=0;return 0!==n&&(s=Math.atan2(e*t.x,e*t.y)),this.sphere?(r=$u(this.long0+s/this.ns),i=Md(this.g-n/this.a),t.x=r,t.y=i,t):(i=wd(this.g-n/this.a,this.e0,this.e1,this.e2,this.e3),r=$u(this.long0+s/this.ns),t.x=r,t.y=i,t)},names:["Equidistant_Conic","eqdc"]};var Yd={init:function(){this.R=this.a},forward:function(t){var e,n,i=t.x,r=t.y,s=$u(i-this.long0);Math.abs(r)<=mu&&(e=this.x0+this.R*s,n=this.y0);var o=Rd(2*Math.abs(r/Math.PI));(Math.abs(s)<=mu||Math.abs(Math.abs(r)-yu)<=mu)&&(e=this.x0,n=r>=0?this.y0+Math.PI*this.R*Math.tan(.5*o):this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/s-s/Math.PI),l=a*a,c=Math.sin(o),h=Math.cos(o),u=h/(c+h-1),f=u*u,d=u*(2/c-1),g=d*d,p=Math.PI*this.R*(a*(u-g)+Math.sqrt(l*(u-g)*(u-g)-(g+l)*(f-g)))/(g+l);s<0&&(p=-p),e=this.x0+p;var _=l+u;return p=Math.PI*this.R*(d*_-a*Math.sqrt((g+l)*(l+1)-_*_))/(g+l),n=r>=0?this.y0+p:this.y0-p,t.x=e,t.y=n,t},inverse:function(t){var e,n,i,r,s,o,a,l,c,h,u,f;return t.x-=this.x0,t.y-=this.y0,u=Math.PI*this.R,s=(i=t.x/u)*i+(r=t.y/u)*r,u=3*(r*r/(l=-2*(o=-Math.abs(r)*(1+s))+1+2*r*r+s*s)+(2*(a=o-2*r*r+i*i)*a*a/l/l/l-9*o*a/l/l)/27)/(c=(o-a*a/3/l)/l)/(h=2*Math.sqrt(-c/3)),Math.abs(u)>1&&(u=u>=0?1:-1),f=Math.acos(u)/3,n=t.y>=0?(-h*Math.cos(f+Math.PI/3)-a/3/l)*Math.PI:-(-h*Math.cos(f+Math.PI/3)-a/3/l)*Math.PI,e=Math.abs(i)<mu?this.long0:$u(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(i*i-r*r)+s*s))/2/i),t.x=e,t.y=n,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var Wd={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,n,i,r,s,o,a,l,c,h,u,f,d,g,p,_,y,m,x,b,v,M,w=t.x,E=t.y,N=Math.sin(t.y),I=Math.cos(t.y),S=$u(w-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=mu?(t.x=this.x0+this.a*(yu-E)*Math.sin(S),t.y=this.y0-this.a*(yu-E)*Math.cos(S),t):Math.abs(this.sin_p12+1)<=mu?(t.x=this.x0+this.a*(yu+E)*Math.sin(S),t.y=this.y0+this.a*(yu+E)*Math.cos(S),t):(m=this.sin_p12*N+this.cos_p12*I*Math.cos(S),y=(_=Math.acos(m))?_/Math.sin(_):1,t.x=this.x0+this.a*y*I*Math.sin(S),t.y=this.y0+this.a*y*(this.cos_p12*N-this.sin_p12*I*Math.cos(S)),t):(e=yd(this.es),n=md(this.es),i=xd(this.es),r=bd(this.es),Math.abs(this.sin_p12-1)<=mu?(s=this.a*_d(e,n,i,r,yu),o=this.a*_d(e,n,i,r,E),t.x=this.x0+(s-o)*Math.sin(S),t.y=this.y0-(s-o)*Math.cos(S),t):Math.abs(this.sin_p12+1)<=mu?(s=this.a*_d(e,n,i,r,yu),o=this.a*_d(e,n,i,r,E),t.x=this.x0+(s+o)*Math.sin(S),t.y=this.y0+(s+o)*Math.cos(S),t):(a=N/I,l=vd(this.a,this.e,this.sin_p12),c=vd(this.a,this.e,N),h=Math.atan((1-this.es)*a+this.es*l*this.sin_p12/(c*I)),x=0===(u=Math.atan2(Math.sin(S),this.cos_p12*Math.tan(h)-this.sin_p12*Math.cos(S)))?Math.asin(this.cos_p12*Math.sin(h)-this.sin_p12*Math.cos(h)):Math.abs(Math.abs(u)-Math.PI)<=mu?-Math.asin(this.cos_p12*Math.sin(h)-this.sin_p12*Math.cos(h)):Math.asin(Math.sin(S)*Math.cos(h)/Math.sin(u)),f=this.e*this.sin_p12/Math.sqrt(1-this.es),_=l*x*(1-(b=x*x)*(p=(d=this.e*this.cos_p12*Math.cos(u)/Math.sqrt(1-this.es))*d)*(1-p)/6+(v=b*x)/8*(g=f*d)*(1-2*p)+(M=v*x)/120*(p*(4-7*p)-3*f*f*(1-7*p))-M*x/48*g),t.x=this.x0+_*Math.sin(u),t.y=this.y0+_*Math.cos(u),t))},inverse:function(t){var e,n,i,r,s,o,a,l,c,h,u,f,d,g,p,_,y,m,x,b,v,M,w;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*yu*this.a)return;return n=e/this.a,i=Math.sin(n),r=Math.cos(n),s=this.long0,Math.abs(e)<=mu?o=this.lat0:(o=Rd(r*this.sin_p12+t.y*i*this.cos_p12/e),a=Math.abs(this.lat0)-yu,s=Math.abs(a)<=mu?this.lat0>=0?$u(this.long0+Math.atan2(t.x,-t.y)):$u(this.long0-Math.atan2(-t.x,t.y)):$u(this.long0+Math.atan2(t.x*i,e*this.cos_p12*r-t.y*this.sin_p12*i))),t.x=s,t.y=o,t}return l=yd(this.es),c=md(this.es),h=xd(this.es),u=bd(this.es),Math.abs(this.sin_p12-1)<=mu?(o=wd(((f=this.a*_d(l,c,h,u,yu))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,l,c,h,u),s=$u(this.long0+Math.atan2(t.x,-1*t.y)),t.x=s,t.y=o,t):Math.abs(this.sin_p12+1)<=mu?(f=this.a*_d(l,c,h,u,yu),o=wd(((e=Math.sqrt(t.x*t.x+t.y*t.y))-f)/this.a,l,c,h,u),s=$u(this.long0+Math.atan2(t.x,t.y)),t.x=s,t.y=o,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),p=Math.atan2(t.x,t.y),d=vd(this.a,this.e,this.sin_p12),_=Math.cos(p),m=-(y=this.e*this.cos_p12*_)*y/(1-this.es),x=3*this.es*(1-m)*this.sin_p12*this.cos_p12*_/(1-this.es),M=1-m*(v=(b=e/d)-m*(1+m)*Math.pow(b,3)/6-x*(1+3*m)*Math.pow(b,4)/24)*v/2-b*v*v*v/6,g=Math.asin(this.sin_p12*Math.cos(v)+this.cos_p12*Math.sin(v)*_),s=$u(this.long0+Math.asin(Math.sin(p)*Math.sin(v)/Math.cos(g))),w=Math.sin(g),o=Math.atan2((w-this.es*M*this.sin_p12)*Math.tan(g),w*(1-this.es)),t.x=s,t.y=o,t)},names:["Azimuthal_Equidistant","aeqd"]};var $d={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,n,i,r,s,o,a,l=t.x,c=t.y;return i=$u(l-this.long0),e=Math.sin(c),n=Math.cos(c),r=Math.cos(i),1,((s=this.sin_p14*e+this.cos_p14*n*r)>0||Math.abs(s)<=mu)&&(o=1*this.a*n*Math.sin(i),a=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*r)),t.x=o,t.y=a,t},inverse:function(t){var e,n,i,r,s,o,a;return t.x-=this.x0,t.y-=this.y0,n=Rd((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),i=Math.sin(n),r=Math.cos(n),o=this.long0,Math.abs(e)<=mu?(a=this.lat0,t.x=o,t.y=a,t):(a=Rd(r*this.sin_p14+t.y*i*this.cos_p14/e),s=Math.abs(this.lat0)-yu,Math.abs(s)<=mu?(o=this.lat0>=0?$u(this.long0+Math.atan2(t.x,-t.y)):$u(this.long0-Math.atan2(-t.x,t.y)),t.x=o,t.y=a,t):(o=$u(this.long0+Math.atan2(t.x*i,e*this.cos_p14*r-t.y*this.sin_p14*i)),t.x=o,t.y=a,t))},names:["ortho"]},Xd=1,Vd=2,Hd=3,Zd=4,Jd=5,Qd=6,Kd=1,tg=2,eg=3,ng=4;function ig(t,e,n,i){var r;return t<mu?(i.value=Kd,r=0):(r=Math.atan2(e,n),Math.abs(r)<=vu?i.value=Kd:r>vu&&r<=yu+vu?(i.value=tg,r-=yu):r>yu+vu||r<=-(yu+vu)?(i.value=eg,r=r>=0?r-wu:r+wu):(i.value=ng,r+=yu)),r}function rg(t,e){var n=t+e;return n<-wu?n+=Mu:n>+wu&&(n-=Mu),n}var sg={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=yu-vu/2?this.face=Jd:this.lat0<=-(yu-vu/2)?this.face=Qd:Math.abs(this.long0)<=vu?this.face=Xd:Math.abs(this.long0)<=yu+vu?this.face=this.long0>0?Vd:Zd:this.face=Hd,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,n,i,r,s,o,a={x:0,y:0},l={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,this.face===Jd)r=yu-e,n>=vu&&n<=yu+vu?(l.value=Kd,i=n-yu):n>yu+vu||n<=-(yu+vu)?(l.value=tg,i=n>0?n-wu:n+wu):n>-(yu+vu)&&n<=-vu?(l.value=eg,i=n+yu):(l.value=ng,i=n);else if(this.face===Qd)r=yu+e,n>=vu&&n<=yu+vu?(l.value=Kd,i=-n+yu):n<vu&&n>=-vu?(l.value=tg,i=-n):n<-vu&&n>=-(yu+vu)?(l.value=eg,i=-n-yu):(l.value=ng,i=n>0?-n+wu:-n-wu);else{var c,h,u,f,d,g;this.face===Vd?n=rg(n,+yu):this.face===Hd?n=rg(n,+wu):this.face===Zd&&(n=rg(n,-yu)),f=Math.sin(e),d=Math.cos(e),g=Math.sin(n),c=d*Math.cos(n),h=d*g,u=f,this.face===Xd?i=ig(r=Math.acos(c),u,h,l):this.face===Vd?i=ig(r=Math.acos(h),u,-c,l):this.face===Hd?i=ig(r=Math.acos(-c),u,-h,l):this.face===Zd?i=ig(r=Math.acos(-h),u,c,l):(r=i=0,l.value=Kd)}return o=Math.atan(12/wu*(i+Math.acos(Math.sin(i)*Math.cos(vu))-yu)),s=Math.sqrt((1-Math.cos(r))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(i))))),l.value===tg?o+=yu:l.value===eg?o+=wu:l.value===ng&&(o+=1.5*wu),a.x=s*Math.cos(o),a.y=s*Math.sin(o),a.x=a.x*this.a+this.x0,a.y=a.y*this.a+this.y0,t.x=a.x,t.y=a.y,t},inverse:function(t){var e,n,i,r,s,o,a,l,c,h,u,f,d={lam:0,phi:0},g={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?g.value=Kd:t.y>=0&&t.y>=Math.abs(t.x)?(g.value=tg,e-=yu):t.x<0&&-t.x>=Math.abs(t.y)?(g.value=eg,e=e<0?e+wu:e-wu):(g.value=ng,e+=yu),c=wu/12*Math.tan(e),s=Math.sin(c)/(Math.cos(c)-1/Math.sqrt(2)),o=Math.atan(s),(a=1-(i=Math.cos(e))*i*(r=Math.tan(n))*r*(1-Math.cos(Math.atan(1/Math.cos(o)))))<-1?a=-1:a>1&&(a=1),this.face===Jd)l=Math.acos(a),d.phi=yu-l,g.value===Kd?d.lam=o+yu:g.value===tg?d.lam=o<0?o+wu:o-wu:g.value===eg?d.lam=o-yu:d.lam=o;else if(this.face===Qd)l=Math.acos(a),d.phi=l-yu,g.value===Kd?d.lam=-o+yu:g.value===tg?d.lam=-o:g.value===eg?d.lam=-o-yu:d.lam=o<0?-o-wu:-o+wu;else{var p,_,y;c=(p=a)*p,_=(c+=(y=c>=1?0:Math.sqrt(1-c)*Math.sin(o))*y)>=1?0:Math.sqrt(1-c),g.value===tg?(c=_,_=-y,y=c):g.value===eg?(_=-_,y=-y):g.value===ng&&(c=_,_=y,y=-c),this.face===Vd?(c=p,p=-_,_=c):this.face===Hd?(p=-p,_=-_):this.face===Zd&&(c=p,p=_,_=-c),d.phi=Math.acos(-y)-yu,d.lam=Math.atan2(_,p),this.face===Vd?d.lam=rg(d.lam,-yu):this.face===Hd?d.lam=rg(d.lam,-wu):this.face===Zd&&(d.lam=rg(d.lam,+yu))}return 0!==this.es&&(h=d.phi<0?1:0,u=Math.tan(d.phi),f=this.b/Math.sqrt(u*u+this.one_minus_f_squared),d.phi=Math.atan(Math.sqrt(this.a*this.a-f*f)/(this.one_minus_f*f)),h&&(d.phi=-d.phi)),d.lam+=this.long0,t.x=d.lam,t.y=d.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},og=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],ag=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],lg=.8487,cg=1.3523,hg=bu/5,ug=18,fg=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};var dg={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=$u(t.x-this.long0),n=Math.abs(t.y),i=Math.floor(n*hg);i<0?i=0:i>=ug&&(i=17);var r={x:fg(og[i],n=bu*(n-.08726646259971647*i))*e,y:fg(ag[i],n)};return t.y<0&&(r.y=-r.y),r.x=r.x*this.a*lg+this.x0,r.y=r.y*this.a*cg+this.y0,r},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*lg),y:Math.abs(t.y-this.y0)/(this.a*cg)};if(e.y>=1)e.x/=og[18][0],e.y=t.y<0?-yu:yu;else{var n=Math.floor(e.y*ug);for(n<0?n=0:n>=ug&&(n=17);;)if(ag[n][0]>e.y)--n;else{if(!(ag[n+1][0]<=e.y))break;++n}var i=ag[n],r=5*(e.y-i[0])/(ag[n+1][0]-i[0]);r=function(t,e,n,i){for(var r=e;i;--i){var s=t(r);if(r-=s,Math.abs(s)<n)break}return r}((function(t){return(fg(i,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(i,t)}),r,mu,100),e.x/=fg(og[n],r),e.y=(5*n+r)*xu,t.y<0&&(e.y=-e.y)}return e.x=$u(e.x+this.long0),e},names:["Robinson","robin"]};var gg={init:function(){this.name="geocent"},forward:function(t){return gf(t,this.es,this.a)},inverse:function(t){return pf(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},pg=0,_g=1,yg=2,mg=3,xg={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};var bg={init:function(){if(Object.keys(xg).forEach(function(t){if(void 0===this[t])this[t]=xg[t].def;else{if(xg[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);xg[t].num&&(this[t]=parseFloat(this[t]))}xg[t].degrees&&(this[t]=this[t]*xu)}.bind(this)),Math.abs(Math.abs(this.lat0)-yu)<mu?this.mode=this.lat0<0?_g:pg:Math.abs(this.lat0)<mu?this.mode=yg:(this.mode=mg,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,n,i,r,s=Math.sin(t.y),o=Math.cos(t.y),a=Math.cos(t.x);switch(this.mode){case mg:n=this.sinph0*s+this.cosph0*o*a;break;case yg:n=o*a;break;case _g:n=-s;break;case pg:n=s}switch(e=(n=this.pn1/(this.p-n))*o*Math.sin(t.x),this.mode){case mg:n*=this.cosph0*s-this.sinph0*o*a;break;case yg:n*=s;break;case pg:n*=-o*a;break;case _g:n*=o*a}return r=1/((i=n*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-n*this.sg)*this.cw*r,n=i*r,t.x=e*this.a,t.y=n*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,n,i,r={x:t.x,y:t.y};i=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*i,n=this.pn1*t.y*this.cw*i,t.x=e*this.cg+n*this.sg,t.y=n*this.cg-e*this.sg;var s=ed(t.x,t.y);if(Math.abs(s)<mu)r.x=0,r.y=t.y;else{var o,a;switch(a=1-s*s*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/s+s/this.pn1),o=Math.sqrt(1-a*a),this.mode){case mg:r.y=Math.asin(o*this.sinph0+t.y*a*this.cosph0/s),t.y=(o-this.sinph0*Math.sin(r.y))*s,t.x*=a*this.cosph0;break;case yg:r.y=Math.asin(t.y*a/s),t.y=o*s,t.x*=a;break;case pg:r.y=Math.asin(o),t.y=-t.y;break;case _g:r.y=-Math.asin(o)}r.x=Math.atan2(t.x,t.y)}return t.x=r.x+this.long0,t.y=r.y,t},names:["Tilted_Perspective","tpers"]};var vg={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,n,i,r,s=t.x,o=t.y;if(s-=this.long0,"ellipse"===this.shape){o=Math.atan(this.radius_p2*Math.tan(o));var a=this.radius_p/ed(this.radius_p*Math.cos(o),Math.sin(o));if(n=a*Math.cos(s)*Math.cos(o),i=a*Math.sin(s)*Math.cos(o),r=a*Math.sin(o),(this.radius_g-n)*n-i*i-r*r*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(i/ed(r,e)),t.y=this.radius_g_1*Math.atan(r/e)):(t.x=this.radius_g_1*Math.atan(i/e),t.y=this.radius_g_1*Math.atan(r/ed(i,e)))}else"sphere"===this.shape&&(e=Math.cos(o),n=Math.cos(s)*e,i=Math.sin(s)*e,r=Math.sin(o),e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(i/ed(r,e)),t.y=this.radius_g_1*Math.atan(r/e)):(t.x=this.radius_g_1*Math.atan(i/e),t.y=this.radius_g_1*Math.atan(r/ed(i,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,n,i,r,s=-1,o=0,a=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),o=Math.tan(t.x/this.radius_g_1)*ed(1,a)):(o=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*ed(1,o));var l=a/this.radius_p;if(e=o*o+l*l+s*s,(i=(n=2*this.radius_g*s)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;r=(-n-Math.sqrt(i))/(2*e),s=this.radius_g+r*s,o*=r,a*=r,t.x=Math.atan2(o,s),t.y=Math.atan(a*Math.cos(t.x)/s),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),o=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+a*a)):(o=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+o*o)),e=o*o+a*a+s*s,(i=(n=2*this.radius_g*s)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;r=(-n-Math.sqrt(i))/(2*e),s=this.radius_g+r*s,o*=r,a*=r,t.x=Math.atan2(o,s),t.y=Math.atan(a*Math.cos(t.x)/s)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};Cf.defaultDatum="WGS84",Cf.Proj=df,Cf.WGS84=new Cf.Proj("WGS84"),Cf.Point=$f,Cf.toPoint=Mf,Cf.defs=Gu,Cf.nadgrid=function(t,e){var n=new DataView(e),i=function(t){var e=t.getInt32(8,!1);if(11===e)return!1;11!==(e=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian");return!0}(n),r=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:cf(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(n,i);r.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var s=function(t,e,n){for(var i=176,r=[],s=0;s<e.nSubgrids;s++){var o=uf(t,i,n),a=ff(t,i,o,n),l=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),c=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);r.push({ll:[lf(o.lowerLongitude),lf(o.lowerLatitude)],del:[lf(o.longitudeInterval),lf(o.latitudeInterval)],lim:[l,c],count:o.gridNodeCount,cvs:hf(a)})}return r}(n,r,i),o={header:r,subgrids:s};return of[t]=o,o},Cf.transform=Ef,Cf.mgrs=Df,Cf.version="__VERSION__",function(t){t.Proj.projections.add(Kf),t.Proj.projections.add(sd),t.Proj.projections.add(od),t.Proj.projections.add(cd),t.Proj.projections.add(hd),t.Proj.projections.add(ud),t.Proj.projections.add(dd),t.Proj.projections.add(gd),t.Proj.projections.add(pd),t.Proj.projections.add(Ed),t.Proj.projections.add(Ad),t.Proj.projections.add(Ld),t.Proj.projections.add(Pd),t.Proj.projections.add(Dd),t.Proj.projections.add(zd),t.Proj.projections.add(Fd),t.Proj.projections.add(Gd),t.Proj.projections.add(qd),t.Proj.projections.add(jd),t.Proj.projections.add(Bd),t.Proj.projections.add(Ud),t.Proj.projections.add(Yd),t.Proj.projections.add(Wd),t.Proj.projections.add($d),t.Proj.projections.add(sg),t.Proj.projections.add(dg),t.Proj.projections.add(gg),t.Proj.projections.add(bg),t.Proj.projections.add(vg)}(Cf);const Mg=Object.assign({},{geoProjection:Tr});Cf.defs([["epsg:2154","+title=France Lambert93 +proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"]]),Cf.defs([["epsg:3035","+title=Europa (ETRS89/LAEA) +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs"]]),Cf.defs([["epsg:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs"]]),Cf.defs([["epsg:27700","+title=British National Grid -- United Kingdom +proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +towgs84=446.448,-125.157,542.06,0.15,0.247,0.842,-20.489 +units=m +no_defs"]]),Cf.defs([["epsg:42304","+title=NAD83 / NRCan LCC Canada +proj=lcc +lat_1=49 +lat_2=77 +lat_0=49 +lon_0=-95 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs "]]);const wg=Object.assign({},{geoEquirectangular:Vr,geoIdentity:rs});function Eg(t){if(null==t||""===t)return wg.geoEquirectangular();if("function"==typeof t)return t;if("string"==typeof t){if("Polar"==(t=t.replace(/\s/g,"")))return eu.geoAzimuthalEquidistant().scale(190).rotate([0,-90]).clipAngle(150);if("HoaXiaoguang"==t)return nu.geoHufnagel().a(.8).b(.35).psiMax(50).ratio(1.6).angle(90).rotate([110,-200,90]);if("Spilhaus"==t)return iu.geoProjection(du).rotate([-66.94970198,49.56371678,40.17823482]);if("user"===t)return wg.geoIdentity().reflectY(!0);if("+proj"===t.substring(0,5)||"epsg:"===t.substring(0,5))return function(t){let e;+t==t&&(e=Cf("epsg:"+t)),e||(e=Cf(t));const n=180/Math.PI,i=1/n,r=function(t,i){return e.forward([t*n,i*n])};r.invert=function(t,n){return e.inverse([t,n]).map((function(t){return t*i}))};const s=Mg.geoProjection(r).scale(1);return s.raw=e,s}(t);if("user"!==t&&"+proj"!==t.substring(0,5)&&"epsg:"!==t.substring(0,5))return function(t){let e=t;return e=e.replace(/\s/g,""),"d3.geo"!==e.substring(0,6)&&(-1===e.indexOf(".")?e+="()":e=e.replace(".","()."),e="d3.geo"+e),new Function("d3",`return (${e})`)(tu)}(t)}}const Ng=Object.assign({},{geoPath:xr,geoGraticule:pi});function Ig(t,e,n,i={},r){if(0!=i.display&&!n){let n=i.stroke?i.stroke:"white",s=null!=i.strokeWidth?i.strokeWidth:.8,o=null!=i.strokeOpacity?i.strokeOpacity:.5,a=null!=i.strokeDasharray?i.strokeDasharray:2,l=i.strokeLinecap?i.strokeLinecap:"round",c=i.strokeLinejoin?i.strokeLinejoin:"round",h=i.step?i.step:[10,10];h=Array.isArray(h)?h:[h,h],t.append("g").attr("clip-path",null==r?"none":`url(#clip_${r})`).append("path").datum(Ng.geoGraticule().step(h)).attr("d",Ng.geoPath(e)).style("fill","none").style("stroke",n).style("stroke-width",s).style("stroke-opacity",o).style("stroke-linecap",l).style("stroke-linejoin",c).style("stroke-dasharray",a)}}function Sg(t){let e=[],n=-180;for(;n<=180;)e.push([n,t]),n+=2.5;return{type:"MultiLineString",coordinates:[e]}}const Cg=Object.assign({},{geoPath:xr});function Og(t,e,n,i={},r){if(0!=i.display&&!n){let n=null!=i.stroke?i.stroke:"#020e21";Array.isArray(n)||(n=Array(3).fill(n));let s=null!=i.strokeWidth?i.strokeWidth:[1.5,1.2,.7];Array.isArray(s)||(s=Array(3).fill(s));let o=null!=i.strokeOpacity?i.strokeOpacity:1;Array.isArray(o)||(o=Array(3).fill(o));let a=null!=i.strokeDasharray?i.strokeDasharray:["none",5,3];Array.isArray(a)||(a=Array(3).fill(a));let l=null!=i.strokeLinecap?i.strokeLinecap:"butt";Array.isArray(l)||(l=Array(3).fill(l));let c=function(){let t=[];return[["Equator",0],["Tropic of Cancer",23.43656],["Tropic of Capricorn",-23.43636],["Arctic Circle",66.56345],["Antarctic Circle",-66.56364]].forEach((e=>{t.push({type:"Feature",properties:{name:e[0],latitude:e[1]},geometry:Sg(e[1])})})),{type:"FeatureCollection",features:t}}().features,h=c.filter((t=>"Equator"==t.properties.name)),u=c.filter((t=>t.properties.name.includes("Tropic"))),f=c.filter((t=>t.properties.name.includes("Circle")));t.append("g").attr("clip-path",null==r?"none":`url(#clip_${r})`).selectAll("path").data(h).join("path").attr("d",Cg.geoPath(e)).attr("fill","none").attr("stroke",n[0]).attr("stroke-width",s[0]).attr("stroke-opacity",o[0]).attr("stroke-dasharray",a[0]).attr("stroke-linecap",l[0]),t.append("g").attr("clip-path",null==r?"none":`url(#clip_${r})`).selectAll("path").data(u).join("path").attr("d",Cg.geoPath(e)).attr("fill","none").attr("stroke",n[1]).attr("stroke-width",s[1]).attr("stroke-opacity",o[1]).attr("stroke-dasharray",a[1]).attr("stroke-linecap",l[1]),t.append("g").attr("clip-path",null==r?"none":`url(#clip_${r})`).selectAll("path").data(f).join("path").attr("d",Cg.geoPath(e)).attr("fill","none").attr("stroke",n[2]).attr("stroke-width",s[2]).attr("stroke-opacity",o[2]).attr("stroke-dasharray",a[2]).attr("stroke-linecap",l[2])}}const kg=Object.assign({},{geoPath:xr});function Tg(t,e,n,i={}){if(0!=i.display&&!n){let n=i.fill?i.fill:"#add8f7",r=null!=i.fillOpacity?i.fillOpacity:1,s=i.stroke?i.stroke:"none",o=null!=i.strokeWidth?i.strokeWidth:1;t.append("g").append("path").attr("d",kg.geoPath(e)({type:"Sphere"})).attr("fill",n).attr("fill-opacity",r).attr("stroke",s).attr("stroke-width",o)}}const Ag=Math.PI,Rg=2*Ag,Lg=1e-6,Pg=Rg-Lg;function Dg(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function zg(){return new Dg}function Fg(t){return function(){return t}}Dg.prototype=zg.prototype={constructor:Dg,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,s){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+s)},arcTo:function(t,e,n,i,r){t=+t,e=+e,n=+n,i=+i,r=+r;var s=this._x1,o=this._y1,a=n-t,l=i-e,c=s-t,h=o-e,u=c*c+h*h;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(u>Lg)if(Math.abs(h*a-l*c)>Lg&&r){var f=n-s,d=i-o,g=a*a+l*l,p=f*f+d*d,_=Math.sqrt(g),y=Math.sqrt(u),m=r*Math.tan((Ag-Math.acos((g+u-p)/(2*_*y)))/2),x=m/y,b=m/_;Math.abs(x-1)>Lg&&(this._+="L"+(t+x*c)+","+(e+x*h)),this._+="A"+r+","+r+",0,0,"+ +(h*f>c*d)+","+(this._x1=t+b*a)+","+(this._y1=e+b*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,i,r,s){t=+t,e=+e,s=!!s;var o=(n=+n)*Math.cos(i),a=n*Math.sin(i),l=t+o,c=e+a,h=1^s,u=s?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>Lg||Math.abs(this._y1-c)>Lg)&&(this._+="L"+l+","+c),n&&(u<0&&(u=u%Rg+Rg),u>Pg?this._+="A"+n+","+n+",0,1,"+h+","+(t-o)+","+(e-a)+"A"+n+","+n+",0,1,"+h+","+(this._x1=l)+","+(this._y1=c):u>Lg&&(this._+="A"+n+","+n+",0,"+ +(u>=Ag)+","+h+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};const Gg=Math.abs,qg=Math.atan2,jg=Math.cos,Bg=Math.max,Ug=Math.min,Yg=Math.sin,Wg=Math.sqrt,$g=1e-12,Xg=Math.PI,Vg=Xg/2,Hg=2*Xg;function Zg(t){return t>1?0:t<-1?Xg:Math.acos(t)}function Jg(t){return t>=1?Vg:t<=-1?-Vg:Math.asin(t)}function Qg(t){return t.innerRadius}function Kg(t){return t.outerRadius}function tp(t){return t.startAngle}function ep(t){return t.endAngle}function np(t){return t&&t.padAngle}function ip(t,e,n,i,r,s,o,a){var l=n-t,c=i-e,h=o-r,u=a-s,f=u*l-h*c;if(!(f*f<$g))return[t+(f=(h*(e-s)-u*(t-r))/f)*l,e+f*c]}function rp(t,e,n,i,r,s,o){var a=t-n,l=e-i,c=(o?s:-s)/Wg(a*a+l*l),h=c*l,u=-c*a,f=t+h,d=e+u,g=n+h,p=i+u,_=(f+g)/2,y=(d+p)/2,m=g-f,x=p-d,b=m*m+x*x,v=r-s,M=f*p-g*d,w=(x<0?-1:1)*Wg(Bg(0,v*v*b-M*M)),E=(M*x-m*w)/b,N=(-M*m-x*w)/b,I=(M*x+m*w)/b,S=(-M*m+x*w)/b,C=E-_,O=N-y,k=I-_,T=S-y;return C*C+O*O>k*k+T*T&&(E=I,N=S),{cx:E,cy:N,x01:-h,y01:-u,x11:E*(r/v-1),y11:N*(r/v-1)}}var sp=Array.prototype.slice;function op(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function ap(t){this._context=t}function lp(t){return new ap(t)}function cp(t){return t[0]}function hp(t){return t[1]}function up(t,e){var n=Fg(!0),i=null,r=lp,s=null;function o(o){var a,l,c,h=(o=op(o)).length,u=!1;for(null==i&&(s=r(c=zg())),a=0;a<=h;++a)!(a<h&&n(l=o[a],a,o))===u&&((u=!u)?s.lineStart():s.lineEnd()),u&&s.point(+t(l,a,o),+e(l,a,o));if(c)return s=null,c+""||null}return t="function"==typeof t?t:void 0===t?cp:Fg(t),e="function"==typeof e?e:void 0===e?hp:Fg(e),o.x=function(e){return arguments.length?(t="function"==typeof e?e:Fg(+e),o):t},o.y=function(t){return arguments.length?(e="function"==typeof t?t:Fg(+t),o):e},o.defined=function(t){return arguments.length?(n="function"==typeof t?t:Fg(!!t),o):n},o.curve=function(t){return arguments.length?(r=t,null!=i&&(s=r(i)),o):r},o.context=function(t){return arguments.length?(null==t?i=s=null:s=r(i=t),o):i},o}function fp(t,e,n){var i=null,r=Fg(!0),s=null,o=lp,a=null;function l(l){var c,h,u,f,d,g=(l=op(l)).length,p=!1,_=new Array(g),y=new Array(g);for(null==s&&(a=o(d=zg())),c=0;c<=g;++c){if(!(c<g&&r(f=l[c],c,l))===p)if(p=!p)h=c,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),u=c-1;u>=h;--u)a.point(_[u],y[u]);a.lineEnd(),a.areaEnd()}p&&(_[c]=+t(f,c,l),y[c]=+e(f,c,l),a.point(i?+i(f,c,l):_[c],n?+n(f,c,l):y[c]))}if(d)return a=null,d+""||null}function c(){return up().defined(r).curve(o).context(s)}return t="function"==typeof t?t:void 0===t?cp:Fg(+t),e="function"==typeof e?e:Fg(void 0===e?0:+e),n="function"==typeof n?n:void 0===n?hp:Fg(+n),l.x=function(e){return arguments.length?(t="function"==typeof e?e:Fg(+e),i=null,l):t},l.x0=function(e){return arguments.length?(t="function"==typeof e?e:Fg(+e),l):t},l.x1=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:Fg(+t),l):i},l.y=function(t){return arguments.length?(e="function"==typeof t?t:Fg(+t),n=null,l):e},l.y0=function(t){return arguments.length?(e="function"==typeof t?t:Fg(+t),l):e},l.y1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:Fg(+t),l):n},l.lineX0=l.lineY0=function(){return c().x(t).y(e)},l.lineY1=function(){return c().x(t).y(n)},l.lineX1=function(){return c().x(i).y(e)},l.defined=function(t){return arguments.length?(r="function"==typeof t?t:Fg(!!t),l):r},l.curve=function(t){return arguments.length?(o=t,null!=s&&(a=o(s)),l):o},l.context=function(t){return arguments.length?(null==t?s=a=null:a=o(s=t),l):s},l}function dp(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function gp(t){return t}ap.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var pp=yp(lp);function _p(t){this._curve=t}function yp(t){function e(e){return new _p(t(e))}return e._curve=t,e}function mp(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(yp(t)):e()._curve},t}function xp(){return mp(up().curve(pp))}function bp(){var t=fp().curve(pp),e=t.curve,n=t.lineX0,i=t.lineX1,r=t.lineY0,s=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return mp(n())},delete t.lineX0,t.lineEndAngle=function(){return mp(i())},delete t.lineX1,t.lineInnerRadius=function(){return mp(r())},delete t.lineY0,t.lineOuterRadius=function(){return mp(s())},delete t.lineY1,t.curve=function(t){return arguments.length?e(yp(t)):e()._curve},t}function vp(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}_p.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};class Mp{constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e)}this._x0=t,this._y0=e}}class wp{constructor(t){this._context=t}lineStart(){this._point=0}lineEnd(){}point(t,e){if(t=+t,e=+e,0==this._point++)this._x0=t,this._y0=e;else{const n=vp(this._x0,this._y0),i=vp(this._x0,this._y0=(this._y0+e)/2),r=vp(t,this._y0),s=vp(t,e);this._context.moveTo(...n),this._context.bezierCurveTo(...i,...r,...s)}}}function Ep(t){return new Mp(t,!0)}function Np(t){return new Mp(t,!1)}function Ip(t){return new wp(t)}function Sp(t){return t.source}function Cp(t){return t.target}function Op(t){let e=Sp,n=Cp,i=cp,r=hp,s=null,o=null;function a(){let a;const l=sp.call(arguments),c=e.apply(this,l),h=n.apply(this,l);if(null==s&&(o=t(a=zg())),o.lineStart(),l[0]=c,o.point(+i.apply(this,l),+r.apply(this,l)),l[0]=h,o.point(+i.apply(this,l),+r.apply(this,l)),o.lineEnd(),a)return o=null,a+""||null}return a.source=function(t){return arguments.length?(e=t,a):e},a.target=function(t){return arguments.length?(n=t,a):n},a.x=function(t){return arguments.length?(i="function"==typeof t?t:Fg(+t),a):i},a.y=function(t){return arguments.length?(r="function"==typeof t?t:Fg(+t),a):r},a.context=function(e){return arguments.length?(null==e?s=o=null:o=t(s=e),a):s},a}const kp=Wg(3);var Tp={draw(t,e){const n=.59436*Wg(e+Ug(e/28,.75)),i=n/2,r=i*kp;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-r,-i),t.lineTo(r,i),t.moveTo(-r,i),t.lineTo(r,-i)}},Ap={draw(t,e){const n=Wg(e/Xg);t.moveTo(n,0),t.arc(0,0,n,0,Hg)}},Rp={draw(t,e){const n=Wg(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}};const Lp=Wg(1/3),Pp=2*Lp;var Dp={draw(t,e){const n=Wg(e/Pp),i=n*Lp;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},zp={draw(t,e){const n=.62625*Wg(e);t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},Fp={draw(t,e){const n=.87559*Wg(e-Ug(e/7,2));t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},Gp={draw(t,e){const n=Wg(e),i=-n/2;t.rect(i,i,n,n)}},qp={draw(t,e){const n=.4431*Wg(e);t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}};const jp=Yg(Xg/10)/Yg(7*Xg/10),Bp=Yg(Hg/10)*jp,Up=-jg(Hg/10)*jp;var Yp={draw(t,e){const n=Wg(.8908130915292852*e),i=Bp*n,r=Up*n;t.moveTo(0,-n),t.lineTo(i,r);for(let e=1;e<5;++e){const s=Hg*e/5,o=jg(s),a=Yg(s);t.lineTo(a*n,-o*n),t.lineTo(o*i-a*r,a*i+o*r)}t.closePath()}};const Wp=Wg(3);var $p={draw(t,e){const n=-Wg(e/(3*Wp));t.moveTo(0,2*n),t.lineTo(-Wp*n,-n),t.lineTo(Wp*n,-n),t.closePath()}};const Xp=Wg(3);var Vp={draw(t,e){const n=.6824*Wg(e),i=n/2,r=n*Xp/2;t.moveTo(0,-n),t.lineTo(r,i),t.lineTo(-r,i),t.closePath()}};const Hp=-.5,Zp=Wg(3)/2,Jp=1/Wg(12),Qp=3*(Jp/2+1);var Kp={draw(t,e){const n=Wg(e/Qp),i=n/2,r=n*Jp,s=i,o=n*Jp+n,a=-s,l=o;t.moveTo(i,r),t.lineTo(s,o),t.lineTo(a,l),t.lineTo(Hp*i-Zp*r,Zp*i+Hp*r),t.lineTo(Hp*s-Zp*o,Zp*s+Hp*o),t.lineTo(Hp*a-Zp*l,Zp*a+Hp*l),t.lineTo(Hp*i+Zp*r,Hp*r-Zp*i),t.lineTo(Hp*s+Zp*o,Hp*o-Zp*s),t.lineTo(Hp*a+Zp*l,Hp*l-Zp*a),t.closePath()}},t_={draw(t,e){const n=.6189*Wg(e-Ug(e/6,1.7));t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}};const e_=[Ap,Rp,Dp,Gp,Yp,$p,Kp],n_=[Ap,Fp,t_,Vp,Tp,qp,zp];function i_(t,e){let n=null;function i(){let i;if(n||(n=i=zg()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return t="function"==typeof t?t:Fg(t||Ap),e="function"==typeof e?e:Fg(void 0===e?64:+e),i.type=function(e){return arguments.length?(t="function"==typeof e?e:Fg(e),i):t},i.size=function(t){return arguments.length?(e="function"==typeof t?t:Fg(+t),i):e},i.context=function(t){return arguments.length?(n=null==t?null:t,i):n},i}function r_(){}function s_(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function o_(t){this._context=t}function a_(t){this._context=t}function l_(t){this._context=t}function c_(t,e){this._basis=new o_(t),this._beta=e}o_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:s_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:s_(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},a_.prototype={areaStart:r_,areaEnd:r_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:s_(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},l_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:s_(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},c_.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i,r=t[0],s=e[0],o=t[n]-r,a=e[n]-s,l=-1;++l<=n;)i=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(r+i*o),this._beta*e[l]+(1-this._beta)*(s+i*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var h_=function t(e){function n(t){return 1===e?new o_(t):new c_(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function u_(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function f_(t,e){this._context=t,this._k=(1-e)/6}f_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:u_(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:u_(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var d_=function t(e){function n(t){return new f_(t,e)}return n.tension=function(e){return t(+e)},n}(0);function g_(t,e){this._context=t,this._k=(1-e)/6}g_.prototype={areaStart:r_,areaEnd:r_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:u_(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var p_=function t(e){function n(t){return new g_(t,e)}return n.tension=function(e){return t(+e)},n}(0);function __(t,e){this._context=t,this._k=(1-e)/6}__.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:u_(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var y_=function t(e){function n(t){return new __(t,e)}return n.tension=function(e){return t(+e)},n}(0);function m_(t,e,n){var i=t._x1,r=t._y1,s=t._x2,o=t._y2;if(t._l01_a>$g){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,r=(r*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>$g){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,h=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-e*t._l12_2a)/h,o=(o*c+t._y1*t._l23_2a-n*t._l12_2a)/h}t._context.bezierCurveTo(i,r,s,o,t._x2,t._y2)}function x_(t,e){this._context=t,this._alpha=e}x_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:m_(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var b_=function t(e){function n(t){return e?new x_(t,e):new f_(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function v_(t,e){this._context=t,this._alpha=e}v_.prototype={areaStart:r_,areaEnd:r_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:m_(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var M_=function t(e){function n(t){return e?new v_(t,e):new g_(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function w_(t,e){this._context=t,this._alpha=e}w_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:m_(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var E_=function t(e){function n(t){return e?new w_(t,e):new __(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function N_(t){this._context=t}function I_(t){return t<0?-1:1}function S_(t,e,n){var i=t._x1-t._x0,r=e-t._x1,s=(t._y1-t._y0)/(i||r<0&&-0),o=(n-t._y1)/(r||i<0&&-0),a=(s*r+o*i)/(i+r);return(I_(s)+I_(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function C_(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function O_(t,e,n){var i=t._x0,r=t._y0,s=t._x1,o=t._y1,a=(s-i)/3;t._context.bezierCurveTo(i+a,r+a*e,s-a,o-a*n,s,o)}function k_(t){this._context=t}function T_(t){this._context=new A_(t)}function A_(t){this._context=t}function R_(t){this._context=t}function L_(t){var e,n,i=t.length-1,r=new Array(i),s=new Array(i),o=new Array(i);for(r[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<i-1;++e)r[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(r[i-1]=2,s[i-1]=7,o[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)n=r[e]/s[e-1],s[e]-=n,o[e]-=n*o[e-1];for(r[i-1]=o[i-1]/s[i-1],e=i-2;e>=0;--e)r[e]=(o[e]-r[e+1])/s[e];for(s[i-1]=(t[i]+r[i-1])/2,e=0;e<i-1;++e)s[e]=2*t[e+1]-r[e+1];return[r,s]}function P_(t,e){this._context=t,this._t=e}function D_(t,e){if((r=t.length)>1)for(var n,i,r,s=1,o=t[e[0]],a=o.length;s<r;++s)for(i=o,o=t[e[s]],n=0;n<a;++n)o[n][1]+=o[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function z_(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function F_(t,e){return t[e]}function G_(t){const e=[];return e.key=t,e}function q_(t){var e=t.map(j_);return z_(t).sort((function(t,n){return e[t]-e[n]}))}function j_(t){for(var e,n=-1,i=0,r=t.length,s=-1/0;++n<r;)(e=+t[n][1])>s&&(s=e,i=n);return i}function B_(t){var e=t.map(U_);return z_(t).sort((function(t,n){return e[t]-e[n]}))}function U_(t){for(var e,n=0,i=-1,r=t.length;++i<r;)(e=+t[i][1])&&(n+=e);return n}N_.prototype={areaStart:r_,areaEnd:r_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},k_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:O_(this,this._t0,C_(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,O_(this,C_(this,n=S_(this,t,e)),n);break;default:O_(this,this._t0,n=S_(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(T_.prototype=Object.create(k_.prototype)).point=function(t,e){k_.prototype.point.call(this,e,t)},A_.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,s){this._context.bezierCurveTo(e,t,i,n,s,r)}},R_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var i=L_(t),r=L_(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(i[0][s],r[0][s],i[1][s],r[1][s],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},P_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var Y_=Object.freeze({__proto__:null,arc:function(){var t=Qg,e=Kg,n=Fg(0),i=null,r=tp,s=ep,o=np,a=null;function l(){var l,c,h=+t.apply(this,arguments),u=+e.apply(this,arguments),f=r.apply(this,arguments)-Vg,d=s.apply(this,arguments)-Vg,g=Gg(d-f),p=d>f;if(a||(a=l=zg()),u<h&&(c=u,u=h,h=c),u>$g)if(g>Hg-$g)a.moveTo(u*jg(f),u*Yg(f)),a.arc(0,0,u,f,d,!p),h>$g&&(a.moveTo(h*jg(d),h*Yg(d)),a.arc(0,0,h,d,f,p));else{var _,y,m=f,x=d,b=f,v=d,M=g,w=g,E=o.apply(this,arguments)/2,N=E>$g&&(i?+i.apply(this,arguments):Wg(h*h+u*u)),I=Ug(Gg(u-h)/2,+n.apply(this,arguments)),S=I,C=I;if(N>$g){var O=Jg(N/h*Yg(E)),k=Jg(N/u*Yg(E));(M-=2*O)>$g?(b+=O*=p?1:-1,v-=O):(M=0,b=v=(f+d)/2),(w-=2*k)>$g?(m+=k*=p?1:-1,x-=k):(w=0,m=x=(f+d)/2)}var T=u*jg(m),A=u*Yg(m),R=h*jg(v),L=h*Yg(v);if(I>$g){var P,D=u*jg(x),z=u*Yg(x),F=h*jg(b),G=h*Yg(b);if(g<Xg&&(P=ip(T,A,F,G,D,z,R,L))){var q=T-P[0],j=A-P[1],B=D-P[0],U=z-P[1],Y=1/Yg(Zg((q*B+j*U)/(Wg(q*q+j*j)*Wg(B*B+U*U)))/2),W=Wg(P[0]*P[0]+P[1]*P[1]);S=Ug(I,(h-W)/(Y-1)),C=Ug(I,(u-W)/(Y+1))}}w>$g?C>$g?(_=rp(F,G,T,A,u,C,p),y=rp(D,z,R,L,u,C,p),a.moveTo(_.cx+_.x01,_.cy+_.y01),C<I?a.arc(_.cx,_.cy,C,qg(_.y01,_.x01),qg(y.y01,y.x01),!p):(a.arc(_.cx,_.cy,C,qg(_.y01,_.x01),qg(_.y11,_.x11),!p),a.arc(0,0,u,qg(_.cy+_.y11,_.cx+_.x11),qg(y.cy+y.y11,y.cx+y.x11),!p),a.arc(y.cx,y.cy,C,qg(y.y11,y.x11),qg(y.y01,y.x01),!p))):(a.moveTo(T,A),a.arc(0,0,u,m,x,!p)):a.moveTo(T,A),h>$g&&M>$g?S>$g?(_=rp(R,L,D,z,h,-S,p),y=rp(T,A,F,G,h,-S,p),a.lineTo(_.cx+_.x01,_.cy+_.y01),S<I?a.arc(_.cx,_.cy,S,qg(_.y01,_.x01),qg(y.y01,y.x01),!p):(a.arc(_.cx,_.cy,S,qg(_.y01,_.x01),qg(_.y11,_.x11),!p),a.arc(0,0,h,qg(_.cy+_.y11,_.cx+_.x11),qg(y.cy+y.y11,y.cx+y.x11),p),a.arc(y.cx,y.cy,S,qg(y.y11,y.x11),qg(y.y01,y.x01),!p))):a.arc(0,0,h,v,b,p):a.lineTo(R,L)}else a.moveTo(0,0);if(a.closePath(),l)return a=null,l+""||null}return l.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+r.apply(this,arguments)+ +s.apply(this,arguments))/2-Xg/2;return[jg(i)*n,Yg(i)*n]},l.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:Fg(+e),l):t},l.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:Fg(+t),l):e},l.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:Fg(+t),l):n},l.padRadius=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:Fg(+t),l):i},l.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:Fg(+t),l):r},l.endAngle=function(t){return arguments.length?(s="function"==typeof t?t:Fg(+t),l):s},l.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:Fg(+t),l):o},l.context=function(t){return arguments.length?(a=null==t?null:t,l):a},l},area:fp,line:up,pie:function(){var t=gp,e=dp,n=null,i=Fg(0),r=Fg(Hg),s=Fg(0);function o(o){var a,l,c,h,u,f=(o=op(o)).length,d=0,g=new Array(f),p=new Array(f),_=+i.apply(this,arguments),y=Math.min(Hg,Math.max(-Hg,r.apply(this,arguments)-_)),m=Math.min(Math.abs(y)/f,s.apply(this,arguments)),x=m*(y<0?-1:1);for(a=0;a<f;++a)(u=p[g[a]=a]=+t(o[a],a,o))>0&&(d+=u);for(null!=e?g.sort((function(t,n){return e(p[t],p[n])})):null!=n&&g.sort((function(t,e){return n(o[t],o[e])})),a=0,c=d?(y-f*x)/d:0;a<f;++a,_=h)l=g[a],h=_+((u=p[l])>0?u*c:0)+x,p[l]={data:o[l],index:a,value:u,startAngle:_,endAngle:h,padAngle:m};return p}return o.value=function(e){return arguments.length?(t="function"==typeof e?e:Fg(+e),o):t},o.sortValues=function(t){return arguments.length?(e=t,n=null,o):e},o.sort=function(t){return arguments.length?(n=t,e=null,o):n},o.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:Fg(+t),o):i},o.endAngle=function(t){return arguments.length?(r="function"==typeof t?t:Fg(+t),o):r},o.padAngle=function(t){return arguments.length?(s="function"==typeof t?t:Fg(+t),o):s},o},areaRadial:bp,radialArea:bp,lineRadial:xp,radialLine:xp,pointRadial:vp,link:Op,linkHorizontal:function(){return Op(Ep)},linkVertical:function(){return Op(Np)},linkRadial:function(){const t=Op(Ip);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},symbol:i_,symbolsStroke:n_,symbolsFill:e_,symbols:e_,symbolAsterisk:Tp,symbolCircle:Ap,symbolCross:Rp,symbolDiamond:Dp,symbolDiamond2:zp,symbolPlus:Fp,symbolSquare:Gp,symbolSquare2:qp,symbolStar:Yp,symbolTriangle:$p,symbolTriangle2:Vp,symbolWye:Kp,symbolX:t_,curveBasisClosed:function(t){return new a_(t)},curveBasisOpen:function(t){return new l_(t)},curveBasis:function(t){return new o_(t)},curveBumpX:Ep,curveBumpY:Np,curveBundle:h_,curveCardinalClosed:p_,curveCardinalOpen:y_,curveCardinal:d_,curveCatmullRomClosed:M_,curveCatmullRomOpen:E_,curveCatmullRom:b_,curveLinearClosed:function(t){return new N_(t)},curveLinear:lp,curveMonotoneX:function(t){return new k_(t)},curveMonotoneY:function(t){return new T_(t)},curveNatural:function(t){return new R_(t)},curveStep:function(t){return new P_(t,.5)},curveStepAfter:function(t){return new P_(t,1)},curveStepBefore:function(t){return new P_(t,0)},stack:function(){var t=Fg([]),e=z_,n=D_,i=F_;function r(r){var s,o,a=Array.from(t.apply(this,arguments),G_),l=a.length,c=-1;for(const t of r)for(s=0,++c;s<l;++s)(a[s][c]=[0,+i(t,a[s].key,c,r)]).data=t;for(s=0,o=op(e(a));s<l;++s)a[o[s]].index=s;return n(a,o),a}return r.keys=function(e){return arguments.length?(t="function"==typeof e?e:Fg(Array.from(e)),r):t},r.value=function(t){return arguments.length?(i="function"==typeof t?t:Fg(+t),r):i},r.order=function(t){return arguments.length?(e=null==t?z_:"function"==typeof t?t:Fg(Array.from(t)),r):e},r.offset=function(t){return arguments.length?(n=null==t?D_:t,r):n},r},stackOffsetExpand:function(t,e){if((i=t.length)>0){for(var n,i,r,s=0,o=t[0].length;s<o;++s){for(r=n=0;n<i;++n)r+=t[n][s][1]||0;if(r)for(n=0;n<i;++n)t[n][s][1]/=r}D_(t,e)}},stackOffsetDiverging:function(t,e){if((a=t.length)>0)for(var n,i,r,s,o,a,l=0,c=t[e[0]].length;l<c;++l)for(s=o=0,n=0;n<a;++n)(r=(i=t[e[n]][l])[1]-i[0])>0?(i[0]=s,i[1]=s+=r):r<0?(i[1]=o,i[0]=o+=r):(i[0]=0,i[1]=r)},stackOffsetNone:D_,stackOffsetSilhouette:function(t,e){if((n=t.length)>0){for(var n,i=0,r=t[e[0]],s=r.length;i<s;++i){for(var o=0,a=0;o<n;++o)a+=t[o][i][1]||0;r[i][1]+=r[i][0]=-a/2}D_(t,e)}},stackOffsetWiggle:function(t,e){if((r=t.length)>0&&(i=(n=t[e[0]]).length)>0){for(var n,i,r,s=0,o=1;o<i;++o){for(var a=0,l=0,c=0;a<r;++a){for(var h=t[e[a]],u=h[o][1]||0,f=(u-(h[o-1][1]||0))/2,d=0;d<a;++d){var g=t[e[d]];f+=(g[o][1]||0)-(g[o-1][1]||0)}l+=u,c+=f*u}n[o-1][1]+=n[o-1][0]=s,l&&(s-=c/l)}n[o-1][1]+=n[o-1][0]=s,D_(t,e)}},stackOrderAppearance:q_,stackOrderAscending:B_,stackOrderDescending:function(t){return B_(t).reverse()},stackOrderInsideOut:function(t){var e,n,i=t.length,r=t.map(U_),s=q_(t),o=0,a=0,l=[],c=[];for(e=0;e<i;++e)n=s[e],o<a?(o+=r[n],l.push(n)):(a+=r[n],c.push(n));return c.reverse().concat(l)},stackOrderNone:z_,stackOrderReverse:function(t){return z_(t).reverse()}});function W_(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,s,o,a,l,c,h,u,f,d=t._root,g={data:i},p=t._x0,_=t._y0,y=t._x1,m=t._y1;if(!d)return t._root=g,t;for(;d.length;)if((c=e>=(s=(p+y)/2))?p=s:y=s,(h=n>=(o=(_+m)/2))?_=o:m=o,r=d,!(d=d[u=h<<1|c]))return r[u]=g,t;if(a=+t._x.call(null,d.data),l=+t._y.call(null,d.data),e===a&&n===l)return g.next=d,r?r[u]=g:t._root=g,t;do{r=r?r[u]=new Array(4):t._root=new Array(4),(c=e>=(s=(p+y)/2))?p=s:y=s,(h=n>=(o=(_+m)/2))?_=o:m=o}while((u=h<<1|c)==(f=(l>=o)<<1|a>=s));return r[f]=d,r[u]=g,t}function $_(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r}function X_(t){return t[0]}function V_(t){return t[1]}function H_(t,e,n){var i=new Z_(null==e?X_:e,null==n?V_:n,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function Z_(t,e,n,i,r,s){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=s,this._root=void 0}function J_(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Q_=H_.prototype=Z_.prototype;function K_(t){return function(){return t}}function ty(t){return 1e-6*(t()-.5)}function ey(t){return t.x+t.vx}function ny(t){return t.y+t.vy}function iy(t){var e,n,i,r=1,s=1;function o(){for(var t,o,l,c,h,u,f,d=e.length,g=0;g<s;++g)for(o=H_(e,ey,ny).visitAfter(a),t=0;t<d;++t)l=e[t],u=n[l.index],f=u*u,c=l.x+l.vx,h=l.y+l.vy,o.visit(p);function p(t,e,n,s,o){var a=t.data,d=t.r,g=u+d;if(!a)return e>c+g||s<c-g||n>h+g||o<h-g;if(a.index>l.index){var p=c-a.x-a.vx,_=h-a.y-a.vy,y=p*p+_*_;y<g*g&&(0===p&&(y+=(p=ty(i))*p),0===_&&(y+=(_=ty(i))*_),y=(g-(y=Math.sqrt(y)))/y*r,l.vx+=(p*=y)*(g=(d*=d)/(f+d)),l.vy+=(_*=y)*g,a.vx-=p*(g=1-g),a.vy-=_*g)}}}function a(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function l(){if(e){var i,r,s=e.length;for(n=new Array(s),i=0;i<s;++i)r=e[i],n[r.index]=+t(r,i,e)}}return"function"!=typeof t&&(t=K_(null==t?1:+t)),o.initialize=function(t,n){e=t,i=n,l()},o.iterations=function(t){return arguments.length?(s=+t,o):s},o.strength=function(t){return arguments.length?(r=+t,o):r},o.radius=function(e){return arguments.length?(t="function"==typeof e?e:K_(+e),l(),o):t},o}Q_.copy=function(){var t,e,n=new Z_(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=J_(i),n;for(t=[{source:i,target:n._root=new Array(4)}];i=t.pop();)for(var r=0;r<4;++r)(e=i.source[r])&&(e.length?t.push({source:e,target:i.target[r]=new Array(4)}):i.target[r]=J_(e));return n},Q_.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return W_(this.cover(e,n),e,n,t)},Q_.addAll=function(t){var e,n,i,r,s=t.length,o=new Array(s),a=new Array(s),l=1/0,c=1/0,h=-1/0,u=-1/0;for(n=0;n<s;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(r=+this._y.call(null,e))||(o[n]=i,a[n]=r,i<l&&(l=i),i>h&&(h=i),r<c&&(c=r),r>u&&(u=r));if(l>h||c>u)return this;for(this.cover(l,c).cover(h,u),n=0;n<s;++n)W_(this,o[n],a[n],t[n]);return this},Q_.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,s=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,s=(i=Math.floor(e))+1;else{for(var o,a,l=r-n||1,c=this._root;n>t||t>=r||i>e||e>=s;)switch(a=(e<i)<<1|t<n,(o=new Array(4))[a]=c,c=o,l*=2,a){case 0:r=n+l,s=i+l;break;case 1:n=r-l,s=i+l;break;case 2:r=n+l,i=s-l;break;case 3:n=r-l,i=s-l}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=i,this._x1=r,this._y1=s,this},Q_.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Q_.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Q_.find=function(t,e,n){var i,r,s,o,a,l,c,h=this._x0,u=this._y0,f=this._x1,d=this._y1,g=[],p=this._root;for(p&&g.push(new $_(p,h,u,f,d)),null==n?n=1/0:(h=t-n,u=e-n,f=t+n,d=e+n,n*=n);l=g.pop();)if(!(!(p=l.node)||(r=l.x0)>f||(s=l.y0)>d||(o=l.x1)<h||(a=l.y1)<u))if(p.length){var _=(r+o)/2,y=(s+a)/2;g.push(new $_(p[3],_,y,o,a),new $_(p[2],r,y,_,a),new $_(p[1],_,s,o,y),new $_(p[0],r,s,_,y)),(c=(e>=y)<<1|t>=_)&&(l=g[g.length-1],g[g.length-1]=g[g.length-1-c],g[g.length-1-c]=l)}else{var m=t-+this._x.call(null,p.data),x=e-+this._y.call(null,p.data),b=m*m+x*x;if(b<n){var v=Math.sqrt(n=b);h=t-v,u=e-v,f=t+v,d=e+v,i=p.data}}return i},Q_.remove=function(t){if(isNaN(s=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,i,r,s,o,a,l,c,h,u,f,d=this._root,g=this._x0,p=this._y0,_=this._x1,y=this._y1;if(!d)return this;if(d.length)for(;;){if((c=s>=(a=(g+_)/2))?g=a:_=a,(h=o>=(l=(p+y)/2))?p=l:y=l,e=d,!(d=d[u=h<<1|c]))return this;if(!d.length)break;(e[u+1&3]||e[u+2&3]||e[u+3&3])&&(n=e,f=u)}for(;d.data!==t;)if(i=d,!(d=d.next))return this;return(r=d.next)&&delete d.next,i?(r?i.next=r:delete i.next,this):e?(r?e[u]=r:delete e[u],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[f]=d:this._root=d),this):(this._root=r,this)},Q_.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Q_.root=function(){return this._root},Q_.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Q_.visit=function(t){var e,n,i,r,s,o,a=[],l=this._root;for(l&&a.push(new $_(l,this._x0,this._y0,this._x1,this._y1));e=a.pop();)if(!t(l=e.node,i=e.x0,r=e.y0,s=e.x1,o=e.y1)&&l.length){var c=(i+s)/2,h=(r+o)/2;(n=l[3])&&a.push(new $_(n,c,h,s,o)),(n=l[2])&&a.push(new $_(n,i,h,c,o)),(n=l[1])&&a.push(new $_(n,c,r,s,h)),(n=l[0])&&a.push(new $_(n,i,r,c,h))}return this},Q_.visitAfter=function(t){var e,n=[],i=[];for(this._root&&n.push(new $_(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var r=e.node;if(r.length){var s,o=e.x0,a=e.y0,l=e.x1,c=e.y1,h=(o+l)/2,u=(a+c)/2;(s=r[0])&&n.push(new $_(s,o,a,h,u)),(s=r[1])&&n.push(new $_(s,h,a,l,u)),(s=r[2])&&n.push(new $_(s,o,u,h,c)),(s=r[3])&&n.push(new $_(s,h,u,l,c))}i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Q_.x=function(t){return arguments.length?(this._x=t,this):this._x},Q_.y=function(t){return arguments.length?(this._y=t,this):this._y};var ry={value:()=>{}};function sy(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new oy(i)}function oy(t){this._=t}function ay(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function ly(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function cy(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=ry,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}oy.prototype=sy.prototype={constructor:oy,on:function(t,e){var n,i=this._,r=ay(t+"",i),s=-1,o=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<o;)if(n=(t=r[s]).type)i[n]=cy(i[n],t.name,e);else if(null==e)for(n in i)i[n]=cy(i[n],t.name,null);return this}for(;++s<o;)if((n=(t=r[s]).type)&&(n=ly(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new oy(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),s=0;s<n;++s)r[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,n=(i=this._[t]).length;s<n;++s)i[s].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,s=i.length;r<s;++r)i[r].value.apply(e,n)}};var hy,uy,fy=0,dy=0,gy=0,py=0,_y=0,yy=0,my="object"==typeof performance&&performance.now?performance:Date,xy="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function by(){return _y||(xy(vy),_y=my.now()+yy)}function vy(){_y=0}function My(){this._call=this._time=this._next=null}function wy(t,e,n){var i=new My;return i.restart(t,e,n),i}function Ey(){_y=(py=my.now())+yy,fy=dy=0;try{!function(){by(),++fy;for(var t,e=hy;e;)(t=_y-e._time)>=0&&e._call.call(void 0,t),e=e._next;--fy}()}finally{fy=0,function(){var t,e,n=hy,i=1/0;for(;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:hy=e);uy=t,Iy(i)}(),_y=0}}function Ny(){var t=my.now(),e=t-py;e>1e3&&(yy-=e,py=t)}function Iy(t){fy||(dy&&(dy=clearTimeout(dy)),t-_y>24?(t<1/0&&(dy=setTimeout(Ey,t-my.now()-yy)),gy&&(gy=clearInterval(gy))):(gy||(py=my.now(),gy=setInterval(Ny,1e3)),fy=1,xy(Ey)))}My.prototype=wy.prototype={constructor:My,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?by():+n)+(null==e?0:+e),this._next||uy===this||(uy?uy._next=this:hy=this,uy=this),this._call=t,this._time=n,Iy()},stop:function(){this._call&&(this._call=null,this._time=1/0,Iy())}};const Sy=4294967296;var Cy=Math.PI*(3-Math.sqrt(5));function Oy(t){var e,n=1,i=.001,r=1-Math.pow(i,1/300),s=0,o=.6,a=new Map,l=wy(u),c=sy("tick","end"),h=function(){let t=1;return()=>(t=(1664525*t+1013904223)%Sy)/Sy}();function u(){f(),c.call("tick",e),n<i&&(l.stop(),c.call("end",e))}function f(i){var l,c,h=t.length;void 0===i&&(i=1);for(var u=0;u<i;++u)for(n+=(s-n)*r,a.forEach((function(t){t(n)})),l=0;l<h;++l)null==(c=t[l]).fx?c.x+=c.vx*=o:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=o:(c.y=c.fy,c.vy=0);return e}function d(){for(var e,n=0,i=t.length;n<i;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var r=10*Math.sqrt(.5+n),s=n*Cy;e.x=r*Math.cos(s),e.y=r*Math.sin(s)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function g(e){return e.initialize&&e.initialize(t,h),e}return null==t&&(t=[]),d(),e={tick:f,restart:function(){return l.restart(u),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,d(),a.forEach(g),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(i=+t,e):i},alphaDecay:function(t){return arguments.length?(r=+t,e):+r},alphaTarget:function(t){return arguments.length?(s=+t,e):s},velocityDecay:function(t){return arguments.length?(o=1-t,e):1-o},randomSource:function(t){return arguments.length?(h=t,a.forEach(g),e):h},force:function(t,n){return arguments.length>1?(null==n?a.delete(t):a.set(t,g(n)),e):a.get(t)},find:function(e,n,i){var r,s,o,a,l,c=0,h=t.length;for(null==i?i=1/0:i*=i,c=0;c<h;++c)(o=(r=e-(a=t[c]).x)*r+(s=n-a.y)*s)<i&&(l=a,i=o);return l},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}}function ky(t){var e,n,i,r=K_(.1);function s(t){for(var r,s=0,o=e.length;s<o;++s)(r=e[s]).vx+=(i[s]-r.x)*n[s]*t}function o(){if(e){var s,o=e.length;for(n=new Array(o),i=new Array(o),s=0;s<o;++s)n[s]=isNaN(i[s]=+t(e[s],s,e))?0:+r(e[s],s,e)}}return"function"!=typeof t&&(t=K_(null==t?0:+t)),s.initialize=function(t){e=t,o()},s.strength=function(t){return arguments.length?(r="function"==typeof t?t:K_(+t),o(),s):r},s.x=function(e){return arguments.length?(t="function"==typeof e?e:K_(+e),o(),s):t},s}function Ty(t){var e,n,i,r=K_(.1);function s(t){for(var r,s=0,o=e.length;s<o;++s)(r=e[s]).vy+=(i[s]-r.y)*n[s]*t}function o(){if(e){var s,o=e.length;for(n=new Array(o),i=new Array(o),s=0;s<o;++s)n[s]=isNaN(i[s]=+t(e[s],s,e))?0:+r(e[s],s,e)}}return"function"!=typeof t&&(t=K_(null==t?0:+t)),s.initialize=function(t){e=t,o()},s.strength=function(t){return arguments.length?(r="function"==typeof t?t:K_(+t),o(),s):r},s.y=function(e){return arguments.length?(t="function"==typeof e?e:K_(+e),o(),s):t},s}const Ay=Object.assign({},{symbol:i_,symbolCircle:Ap,symbolDiamond:Dp,symbolCross:Rp,symbolSquare:Gp,symbolStar:Yp,symbolTriangle:$p,symbolWye:Kp});function Ry(t,e={}){let n=e.type?e.type:"box",i=e.x?e.x:null,r=e.y?e.y:null,s=null!=e.w?e.w:30,o=null!=e.h?e.h:20,a=e.title?e.title:null,l=e.text?e.text:"leg_text",c=null!=e.fontSize?e.fontSize:14,h=null!=e.fontSize2?e.fontSize2:10,u=e.stroke?e.stroke:"black",f=e.fill?e.fill:"#CCCCCC",d=null!=e.fillOpacity?e.fillOpacity:1,g=null!=e.strokeWidth?e.strokeWidth:.5,p=e.txtcol?e.txtcol:"#363636";if(null!=i&&null!=r){let _=t.append("g").attr("class","bertinlegend"),y=0;null!=a&&(y=(a.split("\n").length+1)*c,_.append("g").selectAll("text").data(a.split("\n")).join("text").attr("x",i).attr("y",r).attr("font-size",`${c}px`).attr("dy",((t,e)=>e*c)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",p).text((t=>t))),"box"==n&&(_.append("rect").attr("x",i).attr("y",r+y).attr("height",o).attr("width",s).attr("fill",f).attr("stroke",u).attr("stroke-width",g).attr("fill-opacity",d),_.append("g").selectAll("text").data(l.split("\n")).join("text").attr("x",i+s+h/2).attr("y",r+o/2-h*l.split("\n").length/2+y).attr("font-size",`${h}px`).attr("dy",((t,e)=>e*h)).attr("fill",p).attr("text-anchor","start").attr("dominant-baseline","hanging").text((t=>t)));const m=new Map([["circle",Ay.symbolCircle],["cross",Ay.symbolCross],["diamond",Ay.symbolDiamond],["square",Ay.symbolSquare],["star",Ay.symbolStar],["triangle",Ay.symbolTriangle],["wye",Ay.symbolWye]]);if(m.has(n)){const t=e.symbol_size;_.append("path").attr("x",i).attr("y",r+y).attr("d",Ay.symbol().size(t).type(m.get(n))).attr("transform",`translate(${i+Math.sqrt(t)},${r+y})`).attr("fill",f).attr("stroke",u).attr("stroke-width",g).attr("fill-opacity",d),_.append("g").selectAll("text").data(l.split("\n")).join("text").attr("x",i+2*Math.sqrt(t)+h/2).attr("y",r+y).attr("font-size",`${h}px`).attr("dy",((t,e)=>e*h)).attr("fill",p).attr("text-anchor","start").attr("dominant-baseline","middle").text((t=>t))}}}const Ly=Object.assign({},{reverse:vt});function Py(t,e={}){let n=e.x?e.x:null,i=e.y?e.y:null,r=e.w?e.w:30,s=e.h?e.h:20,o=e.title?e.title:null,a=e.fontSize?e.fontSize:14,l=e.fontSize2?e.fontSize2:10,c=e.stroke?e.stroke:"black",h=e.fillOpacity?e.fillOpacity:1,u=e.strokeWidth?e.strokeWidth:.5,f=e.txtcol?e.txtcol:"#363636",d=e.breaks,g=e.colors,p=e.missing;const _=null!=p?g.length:-1,y=null==p?Ly.reverse(d):[Ly.reverse(d),p[0]].flat(),m=null==p?Ly.reverse(g):[Ly.reverse(g),p[1]].flat();if(null!=n&&null!=i){let e=t.append("g").attr("class","bertinlegend"),d=0;null!=o&&(d=(o.split("\n").length+1)*a,e.append("g").selectAll("text").data(o.split("\n")).join("text").attr("x",n).attr("y",i).attr("font-size",`${a}px`).attr("dy",((t,e)=>e*a)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",f).text((t=>t))),e.selectAll("rect").data(m).join("rect").attr("x",n).attr("y",((t,e)=>i+d+(s+0)*e+(e===_?s/2:0))).attr("height",s).attr("width",r).attr("fill",(t=>t)).attr("stroke",c).attr("stroke-width",u).attr("fill-opacity",h),e.append("g").selectAll("text").data(y).join("text").attr("x",n+r+l/2).attr("y",i+d).attr("font-size",`${l}px`).attr("fill",f).attr("dy",((t,e)=>(s+0)*e)).attr("text-anchor","start").attr("dominant-baseline","central").text((t=>t))}}function Dy(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function zy(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}const Fy=Symbol("implicit");function Gy(){var t=new I,e=[],n=[],i=Fy;function r(r){let s=t.get(r);if(void 0===s){if(i!==Fy)return i;t.set(r,s=e.push(r)-1)}return n[s%n.length]}return r.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new I;for(const i of n)t.has(i)||t.set(i,e.push(i)-1);return r},r.range=function(t){return arguments.length?(n=Array.from(t),r):n.slice()},r.unknown=function(t){return arguments.length?(i=t,r):i},r.copy=function(){return Gy(e,n).unknown(i)},Dy.apply(r,arguments),r}function qy(){var t,e,n=Gy().unknown(void 0),i=n.domain,r=n.range,s=0,o=1,a=!1,l=0,c=0,h=.5;function u(){var n=i().length,u=o<s,f=u?o:s,d=u?s:o;t=(d-f)/Math.max(1,n-l+2*c),a&&(t=Math.floor(t)),f+=(d-f-t*(n-l))*h,e=t*(1-l),a&&(f=Math.round(f),e=Math.round(e));var g=gt(n).map((function(e){return f+t*e}));return r(u?g.reverse():g)}return delete n.unknown,n.domain=function(t){return arguments.length?(i(t),u()):i()},n.range=function(t){return arguments.length?([s,o]=t,s=+s,o=+o,u()):[s,o]},n.rangeRound=function(t){return[s,o]=t,s=+s,o=+o,a=!0,u()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(a=!!t,u()):a},n.padding=function(t){return arguments.length?(l=Math.min(1,c=+t),u()):l},n.paddingInner=function(t){return arguments.length?(l=Math.min(1,t),u()):l},n.paddingOuter=function(t){return arguments.length?(c=+t,u()):c},n.align=function(t){return arguments.length?(h=Math.max(0,Math.min(1,t)),u()):h},n.copy=function(){return qy(i(),[s,o]).round(a).paddingInner(l).paddingOuter(c).align(h)},Dy.apply(u(),arguments)}function jy(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return jy(e())},t}function By(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Uy(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Yy(){}var Wy=.7,$y=1/Wy,Xy="\\s*([+-]?\\d+)\\s*",Vy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Hy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Zy=/^#([0-9a-f]{3,8})$/,Jy=new RegExp(`^rgb\\(${Xy},${Xy},${Xy}\\)$`),Qy=new RegExp(`^rgb\\(${Hy},${Hy},${Hy}\\)$`),Ky=new RegExp(`^rgba\\(${Xy},${Xy},${Xy},${Vy}\\)$`),tm=new RegExp(`^rgba\\(${Hy},${Hy},${Hy},${Vy}\\)$`),em=new RegExp(`^hsl\\(${Vy},${Hy},${Hy}\\)$`),nm=new RegExp(`^hsla\\(${Vy},${Hy},${Hy},${Vy}\\)$`),im={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function rm(){return this.rgb().formatHex()}function sm(){return this.rgb().formatRgb()}function om(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Zy.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?am(e):3===n?new um(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?lm(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?lm(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Jy.exec(t))?new um(e[1],e[2],e[3],1):(e=Qy.exec(t))?new um(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Ky.exec(t))?lm(e[1],e[2],e[3],e[4]):(e=tm.exec(t))?lm(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=em.exec(t))?ym(e[1],e[2]/100,e[3]/100,1):(e=nm.exec(t))?ym(e[1],e[2]/100,e[3]/100,e[4]):im.hasOwnProperty(t)?am(im[t]):"transparent"===t?new um(NaN,NaN,NaN,0):null}function am(t){return new um(t>>16&255,t>>8&255,255&t,1)}function lm(t,e,n,i){return i<=0&&(t=e=n=NaN),new um(t,e,n,i)}function cm(t){return t instanceof Yy||(t=om(t)),t?new um((t=t.rgb()).r,t.g,t.b,t.opacity):new um}function hm(t,e,n,i){return 1===arguments.length?cm(t):new um(t,e,n,null==i?1:i)}function um(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function fm(){return`#${_m(this.r)}${_m(this.g)}${_m(this.b)}`}function dm(){const t=gm(this.opacity);return`${1===t?"rgb(":"rgba("}${pm(this.r)}, ${pm(this.g)}, ${pm(this.b)}${1===t?")":`, ${t})`}`}function gm(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function pm(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function _m(t){return((t=pm(t))<16?"0":"")+t.toString(16)}function ym(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new xm(t,e,n,i)}function mm(t){if(t instanceof xm)return new xm(t.h,t.s,t.l,t.opacity);if(t instanceof Yy||(t=om(t)),!t)return new xm;if(t instanceof xm)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),o=NaN,a=s-r,l=(s+r)/2;return a?(o=e===s?(n-i)/a+6*(n<i):n===s?(i-e)/a+2:(e-n)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new xm(o,a,l,t.opacity)}function xm(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function bm(t){return(t=(t||0)%360)<0?t+360:t}function vm(t){return Math.max(0,Math.min(1,t||0))}function Mm(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}By(Yy,om,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:rm,formatHex:rm,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return mm(this).formatHsl()},formatRgb:sm,toString:sm}),By(um,hm,Uy(Yy,{brighter(t){return t=null==t?$y:Math.pow($y,t),new um(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Wy:Math.pow(Wy,t),new um(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new um(pm(this.r),pm(this.g),pm(this.b),gm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fm,formatHex:fm,formatHex8:function(){return`#${_m(this.r)}${_m(this.g)}${_m(this.b)}${_m(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:dm,toString:dm})),By(xm,(function(t,e,n,i){return 1===arguments.length?mm(t):new xm(t,e,n,null==i?1:i)}),Uy(Yy,{brighter(t){return t=null==t?$y:Math.pow($y,t),new xm(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Wy:Math.pow(Wy,t),new xm(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new um(Mm(t>=240?t-240:t+120,r,i),Mm(t,r,i),Mm(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new xm(bm(this.h),vm(this.s),vm(this.l),gm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=gm(this.opacity);return`${1===t?"hsl(":"hsla("}${bm(this.h)}, ${100*vm(this.s)}%, ${100*vm(this.l)}%${1===t?")":`, ${t})`}`}}));const wm=Math.PI/180,Em=180/Math.PI;var Nm=-.14861,Im=1.78277,Sm=-.29227,Cm=-.90649,Om=1.97294,km=Om*Cm,Tm=Om*Im,Am=Im*Sm-Cm*Nm;function Rm(t){if(t instanceof Pm)return new Pm(t.h,t.s,t.l,t.opacity);t instanceof um||(t=cm(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(Am*i+km*e-Tm*n)/(Am+km-Tm),s=i-r,o=(Om*(n-r)-Sm*s)/Cm,a=Math.sqrt(o*o+s*s)/(Om*r*(1-r)),l=a?Math.atan2(o,s)*Em-120:NaN;return new Pm(l<0?l+360:l,a,r,t.opacity)}function Lm(t,e,n,i){return 1===arguments.length?Rm(t):new Pm(t,e,n,null==i?1:i)}function Pm(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}By(Pm,Lm,Uy(Yy,{brighter(t){return t=null==t?$y:Math.pow($y,t),new Pm(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Wy:Math.pow(Wy,t),new Pm(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*wm,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new um(255*(e+n*(Nm*i+Im*r)),255*(e+n*(Sm*i+Cm*r)),255*(e+n*(Om*i)),this.opacity)}}));var Dm=t=>()=>t;function zm(t,e){return function(n){return t+n*e}}function Fm(t){return 1==(t=+t)?Gm:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):Dm(isNaN(e)?n:e)}}function Gm(t,e){var n=e-t;return n?zm(t,n):Dm(isNaN(t)?e:t)}var qm=function t(e){var n=Fm(e);function i(t,e){var i=n((t=hm(t)).r,(e=hm(e)).r),r=n(t.g,e.g),s=n(t.b,e.b),o=Gm(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=s(e),t.opacity=o(e),t+""}}return i.gamma=t,i}(1);var jm,Bm=(jm=function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],s=t[i+1],o=i>0?t[i-1]:2*r-s,a=i<e-1?t[i+2]:2*s-r;return function(t,e,n,i,r){var s=t*t,o=s*t;return((1-3*t+3*s-o)*e+(4-6*s+3*o)*n+(1+3*t+3*s-3*o)*i+o*r)/6}((n-i/e)*e,o,r,s,a)}},function(t){var e,n,i=t.length,r=new Array(i),s=new Array(i),o=new Array(i);for(e=0;e<i;++e)n=hm(t[e]),r[e]=n.r||0,s[e]=n.g||0,o[e]=n.b||0;return r=jm(r),s=jm(s),o=jm(o),n.opacity=1,function(t){return n.r=r(t),n.g=s(t),n.b=o(t),n+""}});function Um(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}}function Ym(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,s=new Array(r),o=new Array(i);for(n=0;n<r;++n)s[n]=Jm(t[n],e[n]);for(;n<i;++n)o[n]=e[n];return function(t){for(n=0;n<r;++n)o[n]=s[n](t);return o}}function Wm(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function $m(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Xm(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=Jm(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}var Vm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hm=new RegExp(Vm.source,"g");function Zm(t,e){var n,i,r,s=Vm.lastIndex=Hm.lastIndex=0,o=-1,a=[],l=[];for(t+="",e+="";(n=Vm.exec(t))&&(i=Hm.exec(e));)(r=i.index)>s&&(r=e.slice(s,r),a[o]?a[o]+=r:a[++o]=r),(n=n[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:$m(n,i)})),s=Hm.lastIndex;return s<e.length&&(r=e.slice(s),a[o]?a[o]+=r:a[++o]=r),a.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,i=0;i<e;++i)a[(n=l[i]).i]=n.x(t);return a.join("")})}function Jm(t,e){var n,i=typeof e;return null==e||"boolean"===i?Dm(e):("number"===i?$m:"string"===i?(n=om(e))?(e=n,qm):Zm:e instanceof om?qm:e instanceof Date?Wm:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?Um:Array.isArray(e)?Ym:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Xm:$m)(t,e)}function Qm(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Km(t){return function e(n){function i(e,i){var r=t((e=Lm(e)).h,(i=Lm(i)).h),s=Gm(e.s,i.s),o=Gm(e.l,i.l),a=Gm(e.opacity,i.opacity);return function(t){return e.h=r(t),e.s=s(t),e.l=o(Math.pow(t,n)),e.opacity=a(t),e+""}}return n=+n,i.gamma=e,i}(1)}Km((function(t,e){var n=e-t;return n?zm(t,n>180||n<-180?n-360*Math.round(n/360):n):Dm(isNaN(t)?e:t)}));var tx=Km(Gm);function ex(t,e){void 0===e&&(e=t,t=Jm);for(var n=0,i=e.length-1,r=e[0],s=new Array(i<0?0:i);n<i;)s[n]=t(r,r=e[++n]);return function(t){var e=Math.max(0,Math.min(i-1,Math.floor(t*=i)));return s[e](t-e)}}function nx(t){return+t}var ix=[0,1];function rx(t){return t}function sx(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function ox(t,e,n){var i=t[0],r=t[1],s=e[0],o=e[1];return r<i?(i=sx(r,i),s=n(o,s)):(i=sx(i,r),s=n(s,o)),function(t){return s(i(t))}}function ax(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),s=new Array(i),o=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<i;)r[o]=sx(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(e){var n=u(t,e,1,i)-1;return s[n](r[n](e))}}function lx(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function cx(){var t,e,n,i,r,s,o=ix,a=ix,l=Jm,c=rx;function h(){var t=Math.min(o.length,a.length);return c!==rx&&(c=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(o[0],o[t-1])),i=t>2?ax:ox,r=s=null,u}function u(e){return null==e||isNaN(e=+e)?n:(r||(r=i(o.map(t),a,l)))(t(c(e)))}return u.invert=function(n){return c(e((s||(s=i(a,o.map(t),$m)))(n)))},u.domain=function(t){return arguments.length?(o=Array.from(t,nx),h()):o.slice()},u.range=function(t){return arguments.length?(a=Array.from(t),h()):a.slice()},u.rangeRound=function(t){return a=Array.from(t),l=Qm,h()},u.clamp=function(t){return arguments.length?(c=!!t||rx,h()):c!==rx},u.interpolate=function(t){return arguments.length?(l=t,h()):l},u.unknown=function(t){return arguments.length?(n=t,u):n},function(n,i){return t=n,e=i,h()}}function hx(){return cx()(rx,rx)}function ux(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function fx(t){return(t=ux(Math.abs(t)))?t[1]:NaN}var dx,gx=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function px(t){if(!(e=gx.exec(t)))throw new Error("invalid format: "+t);var e;return new _x({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function _x(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function yx(t,e){var n=ux(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}px.prototype=_x.prototype,_x.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var mx={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>yx(100*t,e),r:yx,s:function(t,e){var n=ux(t,e);if(!n)return t+"";var i=n[0],r=n[1],s=r-(dx=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,o=i.length;return s===o?i:s>o?i+new Array(s-o+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+ux(t,Math.max(0,e+s-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function xx(t){return t}var bx,vx,Mx,wx=Array.prototype.map,Ex=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Nx(t){var e,n,i=void 0===t.grouping||void 0===t.thousands?xx:(e=wx.call(t.grouping,Number),n=t.thousands+"",function(t,i){for(var r=t.length,s=[],o=0,a=e[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),s.push(t.substring(r-=a,r+a)),!((l+=a+1)>i));)a=e[o=(o+1)%e.length];return s.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",s=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?xx:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(wx.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"":t.minus+"",h=void 0===t.nan?"NaN":t.nan+"";function u(t){var e=(t=px(t)).fill,n=t.align,u=t.sign,f=t.symbol,d=t.zero,g=t.width,p=t.comma,_=t.precision,y=t.trim,m=t.type;"n"===m?(p=!0,m="g"):mx[m]||(void 0===_&&(_=12),y=!0,m="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var x="$"===f?r:"#"===f&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",b="$"===f?s:/[%p]/.test(m)?l:"",v=mx[m],M=/[defgprs%]/.test(m);function w(t){var r,s,l,f=x,w=b;if("c"===m)w=v(t)+w,t="";else{var E=(t=+t)<0||1/t<0;if(t=isNaN(t)?h:v(Math.abs(t),_),y&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(!+t[i])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),E&&0==+t&&"+"!==u&&(E=!1),f=(E?"("===u?u:c:"-"===u||"("===u?"":u)+f,w=("s"===m?Ex[8+dx/3]:"")+w+(E&&"("===u?")":""),M)for(r=-1,s=t.length;++r<s;)if(48>(l=t.charCodeAt(r))||l>57){w=(46===l?o+t.slice(r+1):t.slice(r))+w,t=t.slice(0,r);break}}p&&!d&&(t=i(t,1/0));var N=f.length+t.length+w.length,I=N<g?new Array(g-N+1).join(e):"";switch(p&&d&&(t=i(I+t,I.length?g-w.length:1/0),I=""),n){case"<":t=f+t+w+I;break;case"=":t=f+I+t+w;break;case"^":t=I.slice(0,N=I.length>>1)+f+t+w+I.slice(N);break;default:t=I+f+t+w}return a(t)}return _=void 0===_?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_)),w.toString=function(){return t+""},w}return{format:u,formatPrefix:function(t,e){var n=u(((t=px(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(fx(e)/3))),r=Math.pow(10,-i),s=Ex[8+i/3];return function(t){return n(r*t)+s}}}}function Ix(t,e,n,i){var r,s=Q(t,e,n);switch((i=px(null==i?",f":i)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(fx(e)/3)))-fx(Math.abs(t)))}(s,o))||(i.precision=r),Mx(i,o);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,fx(e)-fx(t))+1}(s,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=function(t){return Math.max(0,-fx(Math.abs(t)))}(s))||(i.precision=r-2*("%"===i.type))}return vx(i)}function Sx(t){var e=t.domain;return t.ticks=function(t){var n=e();return Z(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return Ix(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,r,s=e(),o=0,a=s.length-1,l=s[o],c=s[a],h=10;for(c<l&&(r=l,l=c,c=r,r=o,o=a,a=r);h-- >0;){if((r=J(l,c,n))===i)return s[o]=l,s[a]=c,e(s);if(r>0)l=Math.floor(l/r)*r,c=Math.ceil(c/r)*r;else{if(!(r<0))break;l=Math.ceil(l*r)/r,c=Math.floor(c*r)/r}i=r}return t},t}function Cx(){var t=hx();return t.copy=function(){return lx(t,Cx())},Dy.apply(t,arguments),Sx(t)}function Ox(t,e){var n,i=0,r=(t=t.slice()).length-1,s=t[i],o=t[r];return o<s&&(n=i,i=r,r=n,n=s,s=o,o=n),t[i]=e.floor(s),t[r]=e.ceil(o),t}function kx(t){return Math.log(t)}function Tx(t){return Math.exp(t)}function Ax(t){return-Math.log(-t)}function Rx(t){return-Math.exp(-t)}function Lx(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Px(t){return(e,n)=>-t(-e,n)}function Dx(t){const e=t(kx,Tx),n=e.domain;let i,r,s=10;function o(){return i=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}(s),r=function(t){return 10===t?Lx:t===Math.E?Math.exp:e=>Math.pow(t,e)}(s),n()[0]<0?(i=Px(i),r=Px(r),t(Ax,Rx)):t(kx,Tx),e}return e.base=function(t){return arguments.length?(s=+t,o()):s},e.domain=function(t){return arguments.length?(n(t),o()):n()},e.ticks=t=>{const e=n();let o=e[0],a=e[e.length-1];const l=a<o;l&&([o,a]=[a,o]);let c,h,u=i(o),f=i(a);const d=null==t?10:+t;let g=[];if(!(s%1)&&f-u<d){if(u=Math.floor(u),f=Math.ceil(f),o>0){for(;u<=f;++u)for(c=1;c<s;++c)if(h=u<0?c/r(-u):c*r(u),!(h<o)){if(h>a)break;g.push(h)}}else for(;u<=f;++u)for(c=s-1;c>=1;--c)if(h=u>0?c/r(-u):c*r(u),!(h<o)){if(h>a)break;g.push(h)}2*g.length<d&&(g=Z(o,a,d))}else g=Z(u,f,Math.min(f-u,d)).map(r);return l?g.reverse():g},e.tickFormat=(t,n)=>{if(null==t&&(t=10),null==n&&(n=10===s?"s":","),"function"!=typeof n&&(s%1||null!=(n=px(n)).precision||(n.trim=!0),n=vx(n)),t===1/0)return n;const o=Math.max(1,s*t/e.ticks().length);return t=>{let e=t/r(Math.round(i(t)));return e*s<s-.5&&(e*=s),e<=o?n(t):""}},e.nice=()=>n(Ox(n(),{floor:t=>r(Math.floor(i(t))),ceil:t=>r(Math.ceil(i(t)))})),e}function zx(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Fx(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Gx(t){var e=1,n=t(zx(e),Fx(e));return n.constant=function(n){return arguments.length?t(zx(e=+n),Fx(e)):e},Sx(n)}function qx(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function jx(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Bx(t){return t<0?-t*t:t*t}function Ux(t){var e=t(rx,rx),n=1;function i(){return 1===n?t(rx,rx):.5===n?t(jx,Bx):t(qx(n),qx(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,i()):n},Sx(e)}function Yx(){var t=Ux(cx());return t.copy=function(){return lx(t,Yx()).exponent(t.exponent())},Dy.apply(t,arguments),t}function Wx(){return Yx.apply(null,arguments).exponent(.5)}function $x(t){return Math.sign(t)*t*t}function Xx(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Vx(){var t,e=[.5],n=[0,1],i=1;function r(r){return null!=r&&r<=r?n[u(e,r,0,i)]:t}return r.domain=function(t){return arguments.length?(e=Array.from(t),i=Math.min(e.length,n.length-1),r):e.slice()},r.range=function(t){return arguments.length?(n=Array.from(t),i=Math.min(e.length,n.length-1),r):n.slice()},r.invertExtent=function(t){var i=n.indexOf(t);return[e[i-1],e[i]]},r.unknown=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return Vx().domain(e).range(n).unknown(t)},Dy.apply(r,arguments)}bx=Nx({thousands:",",grouping:[3],currency:["$",""]}),vx=bx.format,Mx=bx.formatPrefix;var Hx=new Date,Zx=new Date;function Jx(t,e,n,i){function r(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return r.floor=function(e){return t(e=new Date(+e)),e},r.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},r.round=function(t){var e=r(t),n=r.ceil(t);return t-e<n-t?e:n},r.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},r.range=function(n,i,s){var o,a=[];if(n=r.ceil(n),s=null==s?1:Math.floor(s),!(n<i&&s>0))return a;do{a.push(o=new Date(+n)),e(n,s),t(n)}while(o<n&&n<i);return a},r.filter=function(n){return Jx((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,i){if(t>=t)if(i<0)for(;++i<=0;)for(;e(t,-1),!n(t););else for(;--i>=0;)for(;e(t,1),!n(t););}))},n&&(r.count=function(e,i){return Hx.setTime(+e),Zx.setTime(+i),t(Hx),t(Zx),Math.floor(n(Hx,Zx))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(i?function(e){return i(e)%t==0}:function(e){return r.count(0,e)%t==0}):r:null}),r}var Qx=Jx((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));Qx.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Jx((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):Qx:null};var Kx=Qx;Qx.range;const tb=1e3,eb=6e4,nb=36e5,ib=864e5,rb=6048e5,sb=2592e6,ob=31536e6;var ab=Jx((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*tb)}),(function(t,e){return(e-t)/tb}),(function(t){return t.getUTCSeconds()})),lb=ab;ab.range;var cb=Jx((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*tb)}),(function(t,e){t.setTime(+t+e*eb)}),(function(t,e){return(e-t)/eb}),(function(t){return t.getMinutes()})),hb=cb;cb.range;var ub=Jx((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*tb-t.getMinutes()*eb)}),(function(t,e){t.setTime(+t+e*nb)}),(function(t,e){return(e-t)/nb}),(function(t){return t.getHours()})),fb=ub;ub.range;var db=Jx((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*eb)/ib),(t=>t.getDate()-1)),gb=db;function pb(t){return Jx((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*eb)/rb}))}db.range;var _b=pb(0),yb=pb(1),mb=pb(2),xb=pb(3),bb=pb(4),vb=pb(5),Mb=pb(6);_b.range,yb.range,mb.range,xb.range,bb.range,vb.range,Mb.range;var wb=Jx((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),Eb=wb;wb.range;var Nb=Jx((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Nb.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Jx((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var Ib=Nb;Nb.range;var Sb=Jx((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*eb)}),(function(t,e){return(e-t)/eb}),(function(t){return t.getUTCMinutes()})),Cb=Sb;Sb.range;var Ob=Jx((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*nb)}),(function(t,e){return(e-t)/nb}),(function(t){return t.getUTCHours()})),kb=Ob;Ob.range;var Tb=Jx((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/ib}),(function(t){return t.getUTCDate()-1})),Ab=Tb;function Rb(t){return Jx((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/rb}))}Tb.range;var Lb=Rb(0),Pb=Rb(1),Db=Rb(2),zb=Rb(3),Fb=Rb(4),Gb=Rb(5),qb=Rb(6);Lb.range,Pb.range,Db.range,zb.range,Fb.range,Gb.range,qb.range;var jb=Jx((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),Bb=jb;jb.range;var Ub=Jx((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));Ub.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Jx((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var Yb=Ub;function Wb(t,e,n,r,s,o){const a=[[lb,1,tb],[lb,5,5e3],[lb,15,15e3],[lb,30,3e4],[o,1,eb],[o,5,3e5],[o,15,9e5],[o,30,18e5],[s,1,nb],[s,3,108e5],[s,6,216e5],[s,12,432e5],[r,1,ib],[r,2,1728e5],[n,1,rb],[e,1,sb],[e,3,7776e6],[t,1,ob]];function l(e,n,r){const s=Math.abs(n-e)/r,o=i((([,,t])=>t)).right(a,s);if(o===a.length)return t.every(Q(e/ob,n/ob,r));if(0===o)return Kx.every(Math.max(Q(e,n,r),1));const[l,c]=a[s/a[o-1][2]<a[o][2]/s?o-1:o];return l.every(c)}return[function(t,e,n){const i=e<t;i&&([t,e]=[e,t]);const r=n&&"function"==typeof n.range?n:l(t,e,n),s=r?r.range(t,+e+1):[];return i?s.reverse():s},l]}Ub.range;const[$b,Xb]=Wb(Yb,Bb,Lb,Ab,kb,Cb),[Vb,Hb]=Wb(Ib,Eb,_b,gb,fb,hb);function Zb(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Jb(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Qb(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var Kb,tv,ev,nv={"-":"",_:" ",0:"0"},iv=/^\s*\d+/,rv=/^%/,sv=/[\\^$*+?|[\]().{}]/g;function ov(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(e)+r:r)}function av(t){return t.replace(sv,"\\$&")}function lv(t){return new RegExp("^(?:"+t.map(av).join("|")+")","i")}function cv(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function hv(t,e,n){var i=iv.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function uv(t,e,n){var i=iv.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function fv(t,e,n){var i=iv.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function dv(t,e,n){var i=iv.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function gv(t,e,n){var i=iv.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function pv(t,e,n){var i=iv.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function _v(t,e,n){var i=iv.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function yv(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function mv(t,e,n){var i=iv.exec(e.slice(n,n+1));return i?(t.q=3*i[0]-3,n+i[0].length):-1}function xv(t,e,n){var i=iv.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function bv(t,e,n){var i=iv.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function vv(t,e,n){var i=iv.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function Mv(t,e,n){var i=iv.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function wv(t,e,n){var i=iv.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function Ev(t,e,n){var i=iv.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function Nv(t,e,n){var i=iv.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function Iv(t,e,n){var i=iv.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function Sv(t,e,n){var i=rv.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function Cv(t,e,n){var i=iv.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function Ov(t,e,n){var i=iv.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function kv(t,e){return ov(t.getDate(),e,2)}function Tv(t,e){return ov(t.getHours(),e,2)}function Av(t,e){return ov(t.getHours()%12||12,e,2)}function Rv(t,e){return ov(1+gb.count(Ib(t),t),e,3)}function Lv(t,e){return ov(t.getMilliseconds(),e,3)}function Pv(t,e){return Lv(t,e)+"000"}function Dv(t,e){return ov(t.getMonth()+1,e,2)}function zv(t,e){return ov(t.getMinutes(),e,2)}function Fv(t,e){return ov(t.getSeconds(),e,2)}function Gv(t){var e=t.getDay();return 0===e?7:e}function qv(t,e){return ov(_b.count(Ib(t)-1,t),e,2)}function jv(t){var e=t.getDay();return e>=4||0===e?bb(t):bb.ceil(t)}function Bv(t,e){return t=jv(t),ov(bb.count(Ib(t),t)+(4===Ib(t).getDay()),e,2)}function Uv(t){return t.getDay()}function Yv(t,e){return ov(yb.count(Ib(t)-1,t),e,2)}function Wv(t,e){return ov(t.getFullYear()%100,e,2)}function $v(t,e){return ov((t=jv(t)).getFullYear()%100,e,2)}function Xv(t,e){return ov(t.getFullYear()%1e4,e,4)}function Vv(t,e){var n=t.getDay();return ov((t=n>=4||0===n?bb(t):bb.ceil(t)).getFullYear()%1e4,e,4)}function Hv(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ov(e/60|0,"0",2)+ov(e%60,"0",2)}function Zv(t,e){return ov(t.getUTCDate(),e,2)}function Jv(t,e){return ov(t.getUTCHours(),e,2)}function Qv(t,e){return ov(t.getUTCHours()%12||12,e,2)}function Kv(t,e){return ov(1+Ab.count(Yb(t),t),e,3)}function tM(t,e){return ov(t.getUTCMilliseconds(),e,3)}function eM(t,e){return tM(t,e)+"000"}function nM(t,e){return ov(t.getUTCMonth()+1,e,2)}function iM(t,e){return ov(t.getUTCMinutes(),e,2)}function rM(t,e){return ov(t.getUTCSeconds(),e,2)}function sM(t){var e=t.getUTCDay();return 0===e?7:e}function oM(t,e){return ov(Lb.count(Yb(t)-1,t),e,2)}function aM(t){var e=t.getUTCDay();return e>=4||0===e?Fb(t):Fb.ceil(t)}function lM(t,e){return t=aM(t),ov(Fb.count(Yb(t),t)+(4===Yb(t).getUTCDay()),e,2)}function cM(t){return t.getUTCDay()}function hM(t,e){return ov(Pb.count(Yb(t)-1,t),e,2)}function uM(t,e){return ov(t.getUTCFullYear()%100,e,2)}function fM(t,e){return ov((t=aM(t)).getUTCFullYear()%100,e,2)}function dM(t,e){return ov(t.getUTCFullYear()%1e4,e,4)}function gM(t,e){var n=t.getUTCDay();return ov((t=n>=4||0===n?Fb(t):Fb.ceil(t)).getUTCFullYear()%1e4,e,4)}function pM(){return"+0000"}function _M(){return"%"}function yM(t){return+t}function mM(t){return Math.floor(+t/1e3)}function xM(t){return new Date(t)}function bM(t){return t instanceof Date?+t:+new Date(+t)}function vM(t,e,n,i,r,s,o,a,l,c){var h=hx(),u=h.invert,f=h.domain,d=c(".%L"),g=c(":%S"),p=c("%I:%M"),_=c("%I %p"),y=c("%a %d"),m=c("%b %d"),x=c("%B"),b=c("%Y");function v(t){return(l(t)<t?d:a(t)<t?g:o(t)<t?p:s(t)<t?_:i(t)<t?r(t)<t?y:m:n(t)<t?x:b)(t)}return h.invert=function(t){return new Date(u(t))},h.domain=function(t){return arguments.length?f(Array.from(t,bM)):f().map(xM)},h.ticks=function(e){var n=f();return t(n[0],n[n.length-1],null==e?10:e)},h.tickFormat=function(t,e){return null==e?v:c(e)},h.nice=function(t){var n=f();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?f(Ox(n,t)):h},h.copy=function(){return lx(h,vM(t,e,n,i,r,s,o,a,l,c))},h}function MM(){var t,e,n,i,r,s=0,o=1,a=rx,l=!1;function c(e){return null==e||isNaN(e=+e)?r:a(0===n?.5:(e=(i(e)-t)*n,l?Math.max(0,Math.min(1,e)):e))}function h(t){return function(e){var n,i;return arguments.length?([n,i]=e,a=t(n,i),c):[a(0),a(1)]}}return c.domain=function(r){return arguments.length?([s,o]=r,t=i(s=+s),e=i(o=+o),n=t===e?0:1/(e-t),c):[s,o]},c.clamp=function(t){return arguments.length?(l=!!t,c):l},c.interpolator=function(t){return arguments.length?(a=t,c):a},c.range=h(Jm),c.rangeRound=h(Qm),c.unknown=function(t){return arguments.length?(r=t,c):r},function(r){return i=r,t=r(s),e=r(o),n=t===e?0:1/(e-t),c}}function wM(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function EM(){var t=Ux(MM());return t.copy=function(){return wM(t,EM()).exponent(t.exponent())},zy.apply(t,arguments)}function NM(){var t,e,n,i,r,s,o,a=0,l=.5,c=1,h=1,u=rx,f=!1;function d(t){return isNaN(t=+t)?o:(t=.5+((t=+s(t))-e)*(h*t<h*e?i:r),u(f?Math.max(0,Math.min(1,t)):t))}function g(t){return function(e){var n,i,r;return arguments.length?([n,i,r]=e,u=ex(t,[n,i,r]),d):[u(0),u(.5),u(1)]}}return d.domain=function(o){return arguments.length?([a,l,c]=o,t=s(a=+a),e=s(l=+l),n=s(c=+c),i=t===e?0:.5/(e-t),r=e===n?0:.5/(n-e),h=e<t?-1:1,d):[a,l,c]},d.clamp=function(t){return arguments.length?(f=!!t,d):f},d.interpolator=function(t){return arguments.length?(u=t,d):u},d.range=g(Jm),d.rangeRound=g(Qm),d.unknown=function(t){return arguments.length?(o=t,d):o},function(o){return s=o,t=o(a),e=o(l),n=o(c),i=t===e?0:.5/(e-t),r=e===n?0:.5/(n-e),h=e<t?-1:1,d}}function IM(){var t=Ux(NM());return t.copy=function(){return wM(t,IM()).exponent(t.exponent())},zy.apply(t,arguments)}!function(t){Kb=function(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,c=lv(r),h=cv(r),u=lv(s),f=cv(s),d=lv(o),g=cv(o),p=lv(a),_=cv(a),y=lv(l),m=cv(l),x={a:function(t){return o[t.getDay()]},A:function(t){return s[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:kv,e:kv,f:Pv,g:$v,G:Vv,H:Tv,I:Av,j:Rv,L:Lv,m:Dv,M:zv,p:function(t){return r[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:yM,s:mM,S:Fv,u:Gv,U:qv,V:Bv,w:Uv,W:Yv,x:null,X:null,y:Wv,Y:Xv,Z:Hv,"%":_M},b={a:function(t){return o[t.getUTCDay()]},A:function(t){return s[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:Zv,e:Zv,f:eM,g:fM,G:gM,H:Jv,I:Qv,j:Kv,L:tM,m:nM,M:iM,p:function(t){return r[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:yM,s:mM,S:rM,u:sM,U:oM,V:lM,w:cM,W:hM,x:null,X:null,y:uM,Y:dM,Z:pM,"%":_M},v={a:function(t,e,n){var i=d.exec(e.slice(n));return i?(t.w=g.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(t,e,n){var i=u.exec(e.slice(n));return i?(t.w=f.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(t,e,n){var i=y.exec(e.slice(n));return i?(t.m=m.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(t,e,n){var i=p.exec(e.slice(n));return i?(t.m=_.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(t,n,i){return E(t,e,n,i)},d:bv,e:bv,f:Iv,g:_v,G:pv,H:Mv,I:Mv,j:vv,L:Nv,m:xv,M:wv,p:function(t,e,n){var i=c.exec(e.slice(n));return i?(t.p=h.get(i[0].toLowerCase()),n+i[0].length):-1},q:mv,Q:Cv,s:Ov,S:Ev,u:uv,U:fv,V:dv,w:hv,W:gv,x:function(t,e,i){return E(t,n,e,i)},X:function(t,e,n){return E(t,i,e,n)},y:_v,Y:pv,Z:yv,"%":Sv};function M(t,e){return function(n){var i,r,s,o=[],a=-1,l=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++a<c;)37===t.charCodeAt(a)&&(o.push(t.slice(l,a)),null!=(r=nv[i=t.charAt(++a)])?i=t.charAt(++a):r="e"===i?" ":"0",(s=e[i])&&(i=s(n,r)),o.push(i),l=a+1);return o.push(t.slice(l,a)),o.join("")}}function w(t,e){return function(n){var i,r,s=Qb(1900,void 0,1);if(E(s,t,n+="",0)!=n.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(e&&!("Z"in s)&&(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(r=(i=Jb(Qb(s.y,0,1))).getUTCDay(),i=r>4||0===r?Pb.ceil(i):Pb(i),i=Ab.offset(i,7*(s.V-1)),s.y=i.getUTCFullYear(),s.m=i.getUTCMonth(),s.d=i.getUTCDate()+(s.w+6)%7):(r=(i=Zb(Qb(s.y,0,1))).getDay(),i=r>4||0===r?yb.ceil(i):yb(i),i=gb.offset(i,7*(s.V-1)),s.y=i.getFullYear(),s.m=i.getMonth(),s.d=i.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),r="Z"in s?Jb(Qb(s.y,0,1)).getUTCDay():Zb(Qb(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(r+5)%7:s.w+7*s.U-(r+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,Jb(s)):Zb(s)}}function E(t,e,n,i){for(var r,s,o=0,a=e.length,l=n.length;o<a;){if(i>=l)return-1;if(37===(r=e.charCodeAt(o++))){if(r=e.charAt(o++),!(s=v[r in nv?e.charAt(o++):r])||(i=s(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return x.x=M(n,x),x.X=M(i,x),x.c=M(e,x),b.x=M(n,b),b.X=M(i,b),b.c=M(e,b),{format:function(t){var e=M(t+="",x);return e.toString=function(){return t},e},parse:function(t){var e=w(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=M(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=w(t+="",!0);return e.toString=function(){return t},e}}}(t),tv=Kb.format,Kb.parse,ev=Kb.utcFormat,Kb.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var SM=Object.freeze({__proto__:null,scaleBand:qy,scalePoint:function(){return jy(qy.apply(null,arguments).paddingInner(1))},scaleIdentity:function t(e){var n;function i(t){return null==t||isNaN(t=+t)?n:t}return i.invert=i,i.domain=i.range=function(t){return arguments.length?(e=Array.from(t,nx),i):e.slice()},i.unknown=function(t){return arguments.length?(n=t,i):n},i.copy=function(){return t(e).unknown(n)},e=arguments.length?Array.from(e,nx):[0,1],Sx(i)},scaleLinear:Cx,scaleLog:function t(){const e=Dx(cx()).domain([1,10]);return e.copy=()=>lx(e,t()).base(e.base()),Dy.apply(e,arguments),e},scaleSymlog:function t(){var e=Gx(cx());return e.copy=function(){return lx(e,t()).constant(e.constant())},Dy.apply(e,arguments)},scaleOrdinal:Gy,scaleImplicit:Fy,scalePow:Yx,scaleSqrt:Wx,scaleRadial:function t(){var e,n=hx(),i=[0,1],r=!1;function s(t){var i=Xx(n(t));return isNaN(i)?e:r?Math.round(i):i}return s.invert=function(t){return n.invert($x(t))},s.domain=function(t){return arguments.length?(n.domain(t),s):n.domain()},s.range=function(t){return arguments.length?(n.range((i=Array.from(t,nx)).map($x)),s):i.slice()},s.rangeRound=function(t){return s.range(t).round(!0)},s.round=function(t){return arguments.length?(r=!!t,s):r},s.clamp=function(t){return arguments.length?(n.clamp(t),s):n.clamp()},s.unknown=function(t){return arguments.length?(e=t,s):e},s.copy=function(){return t(n.domain(),i).round(r).clamp(n.clamp()).unknown(e)},Dy.apply(s,arguments),Sx(s)},scaleQuantile:function t(){var n,i=[],r=[],s=[];function o(){var t=0,e=Math.max(1,r.length);for(s=new Array(e-1);++t<e;)s[t-1]=ht(i,t/e);return a}function a(t){return null==t||isNaN(t=+t)?n:r[u(s,t)]}return a.invertExtent=function(t){var e=r.indexOf(t);return e<0?[NaN,NaN]:[e>0?s[e-1]:i[0],e<s.length?s[e]:i[i.length-1]]},a.domain=function(t){if(!arguments.length)return i.slice();i=[];for(let e of t)null==e||isNaN(e=+e)||i.push(e);return i.sort(e),o()},a.range=function(t){return arguments.length?(r=Array.from(t),o()):r.slice()},a.unknown=function(t){return arguments.length?(n=t,a):n},a.quantiles=function(){return s.slice()},a.copy=function(){return t().domain(i).range(r).unknown(n)},Dy.apply(a,arguments)},scaleQuantize:function t(){var e,n=0,i=1,r=1,s=[.5],o=[0,1];function a(t){return null!=t&&t<=t?o[u(s,t,0,r)]:e}function l(){var t=-1;for(s=new Array(r);++t<r;)s[t]=((t+1)*i-(t-r)*n)/(r+1);return a}return a.domain=function(t){return arguments.length?([n,i]=t,n=+n,i=+i,l()):[n,i]},a.range=function(t){return arguments.length?(r=(o=Array.from(t)).length-1,l()):o.slice()},a.invertExtent=function(t){var e=o.indexOf(t);return e<0?[NaN,NaN]:e<1?[n,s[0]]:e>=r?[s[r-1],i]:[s[e-1],s[e]]},a.unknown=function(t){return arguments.length?(e=t,a):a},a.thresholds=function(){return s.slice()},a.copy=function(){return t().domain([n,i]).range(o).unknown(e)},Dy.apply(Sx(a),arguments)},scaleThreshold:Vx,scaleTime:function(){return Dy.apply(vM(Vb,Hb,Ib,Eb,_b,gb,fb,hb,lb,tv).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},scaleUtc:function(){return Dy.apply(vM($b,Xb,Yb,Bb,Lb,Ab,kb,Cb,lb,ev).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},scaleSequential:function t(){var e=Sx(MM()(rx));return e.copy=function(){return wM(e,t())},zy.apply(e,arguments)},scaleSequentialLog:function t(){var e=Dx(MM()).domain([1,10]);return e.copy=function(){return wM(e,t()).base(e.base())},zy.apply(e,arguments)},scaleSequentialPow:EM,scaleSequentialSqrt:function(){return EM.apply(null,arguments).exponent(.5)},scaleSequentialSymlog:function t(){var e=Gx(MM());return e.copy=function(){return wM(e,t()).constant(e.constant())},zy.apply(e,arguments)},scaleSequentialQuantile:function t(){var n=[],i=rx;function r(t){if(null!=t&&!isNaN(t=+t))return i((u(n,t,1)-1)/(n.length-1))}return r.domain=function(t){if(!arguments.length)return n.slice();n=[];for(let e of t)null==e||isNaN(e=+e)||n.push(e);return n.sort(e),r},r.interpolator=function(t){return arguments.length?(i=t,r):i},r.range=function(){return n.map(((t,e)=>i(e/(n.length-1))))},r.quantiles=function(t){return Array.from({length:t+1},((e,i)=>ct(n,i/t)))},r.copy=function(){return t(i).domain(n)},zy.apply(r,arguments)},scaleDiverging:function t(){var e=Sx(NM()(rx));return e.copy=function(){return wM(e,t())},zy.apply(e,arguments)},scaleDivergingLog:function t(){var e=Dx(NM()).domain([.1,1,10]);return e.copy=function(){return wM(e,t()).base(e.base())},zy.apply(e,arguments)},scaleDivergingPow:IM,scaleDivergingSqrt:function(){return IM.apply(null,arguments).exponent(.5)},scaleDivergingSymlog:function t(){var e=Gx(NM());return e.copy=function(){return wM(e,t()).constant(e.constant())},zy.apply(e,arguments)},tickFormat:Ix});const CM=Object.assign({},{scaleOrdinal:Gy});function OM(t,e={}){let n=e.x?e.x:null,i=e.y?e.y:null,r=e.w?e.w:30,s=e.h?e.h:20,o=e.title?e.title:null,a=e.fontSize?e.fontSize:14,l=e.fontSize2?e.fontSize2:10,c=e.stroke?e.stroke:"black",h=e.fillOpacity?e.fillOpacity:1,u=e.strokeWidth?e.strokeWidth:.5,f=e.txtcol?e.txtcol:"#363636",d=e.types,g=e.colors,p=CM.scaleOrdinal().domain(d).range(g);if(null!=n&&null!=i){let e=t.append("g").attr("class","bertinlegend"),g=0;null!=o&&(g=(o.split("\n").length+1)*a,e.append("g").selectAll("text").data(o.split("\n")).join("text").attr("x",n).attr("y",i).attr("font-size",`${a}px`).attr("dy",((t,e)=>e*a)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",f).text((t=>t))),e.selectAll("rect").data(d).join("rect").attr("x",n).attr("y",((t,e)=>i+g+(s+3)*e)).attr("height",s).attr("width",r).attr("fill",(t=>p(t))).attr("stroke",c).attr("stroke-width",u).attr("fill-opacity",h),e.append("g").selectAll("text").data(d).join("text").attr("x",n+r+l/2).attr("y",i+g+s/2).attr("font-size",`${l}px`).attr("fill",f).attr("dy",((t,e)=>(s+3)*e)).attr("text-anchor","start").attr("dominant-baseline","central").text((t=>t))}}function kM(t,e){let n;return e>=0&&(n=+t.toFixed(e)),e<0&&(n=Math.round(t/+(1+"0".repeat(Math.abs(e))))*+(1+"0".repeat(Math.abs(e)))),null==e&&(n=t),n}const TM=Object.assign({},{reverse:vt});const AM=Object.assign({},{reverse:vt});function RM(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(6*i,6*++i);return n}var LM=RM("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),PM=RM("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),DM=RM("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),zM=RM("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),FM=RM("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),GM=RM("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),qM=RM("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),jM=RM("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),BM=RM("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),UM=RM("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),YM=t=>Bm(t[t.length-1]),WM=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(RM),$M=YM(WM),XM=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(RM),VM=YM(XM),HM=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(RM),ZM=YM(HM),JM=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(RM),QM=YM(JM),KM=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(RM),tw=YM(KM),ew=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(RM),nw=YM(ew),iw=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(RM),rw=YM(iw),sw=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(RM),ow=YM(sw),aw=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(RM),lw=YM(aw),cw=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(RM),hw=YM(cw),uw=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(RM),fw=YM(uw),dw=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(RM),gw=YM(dw),pw=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(RM),_w=YM(pw),yw=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(RM),mw=YM(yw),xw=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(RM),bw=YM(xw),vw=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(RM),Mw=YM(vw),ww=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(RM),Ew=YM(ww),Nw=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(RM),Iw=YM(Nw),Sw=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(RM),Cw=YM(Sw),Ow=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(RM),kw=YM(Ow),Tw=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(RM),Aw=YM(Tw),Rw=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(RM),Lw=YM(Rw),Pw=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(RM),Dw=YM(Pw),zw=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(RM),Fw=YM(zw),Gw=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(RM),qw=YM(Gw),jw=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(RM),Bw=YM(jw),Uw=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(RM),Yw=YM(Uw);var Ww=tx(Lm(300,.5,0),Lm(-240,.5,1)),$w=tx(Lm(-100,.75,.35),Lm(80,1.5,.8)),Xw=tx(Lm(260,.75,.35),Lm(80,1.5,.8)),Vw=Lm();var Hw=hm(),Zw=Math.PI/3,Jw=2*Math.PI/3;function Qw(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var Kw=Qw(RM("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),tE=Qw(RM("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),eE=Qw(RM("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),nE=Qw(RM("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),iE=Object.freeze({__proto__:null,schemeCategory10:LM,schemeAccent:PM,schemeDark2:DM,schemePaired:zM,schemePastel1:FM,schemePastel2:GM,schemeSet1:qM,schemeSet2:jM,schemeSet3:BM,schemeTableau10:UM,interpolateBrBG:$M,schemeBrBG:WM,interpolatePRGn:VM,schemePRGn:XM,interpolatePiYG:ZM,schemePiYG:HM,interpolatePuOr:QM,schemePuOr:JM,interpolateRdBu:tw,schemeRdBu:KM,interpolateRdGy:nw,schemeRdGy:ew,interpolateRdYlBu:rw,schemeRdYlBu:iw,interpolateRdYlGn:ow,schemeRdYlGn:sw,interpolateSpectral:lw,schemeSpectral:aw,interpolateBuGn:hw,schemeBuGn:cw,interpolateBuPu:fw,schemeBuPu:uw,interpolateGnBu:gw,schemeGnBu:dw,interpolateOrRd:_w,schemeOrRd:pw,interpolatePuBuGn:mw,schemePuBuGn:yw,interpolatePuBu:bw,schemePuBu:xw,interpolatePuRd:Mw,schemePuRd:vw,interpolateRdPu:Ew,schemeRdPu:ww,interpolateYlGnBu:Iw,schemeYlGnBu:Nw,interpolateYlGn:Cw,schemeYlGn:Sw,interpolateYlOrBr:kw,schemeYlOrBr:Ow,interpolateYlOrRd:Aw,schemeYlOrRd:Tw,interpolateBlues:Lw,schemeBlues:Rw,interpolateGreens:Dw,schemeGreens:Pw,interpolateGreys:Fw,schemeGreys:zw,interpolatePurples:qw,schemePurples:Gw,interpolateReds:Bw,schemeReds:jw,interpolateOranges:Yw,schemeOranges:Uw,interpolateCividis:function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},interpolateCubehelixDefault:Ww,interpolateRainbow:function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Vw.h=360*t-100,Vw.s=1.5-1.5*e,Vw.l=.8-.9*e,Vw+""},interpolateWarm:$w,interpolateCool:Xw,interpolateSinebow:function(t){var e;return t=(.5-t)*Math.PI,Hw.r=255*(e=Math.sin(t))*e,Hw.g=255*(e=Math.sin(t+Zw))*e,Hw.b=255*(e=Math.sin(t+Jw))*e,Hw+""},interpolateTurbo:function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"},interpolateViridis:Kw,interpolateMagma:tE,interpolateInferno:eE,interpolatePlasma:nE});function rE(t){return null!==t&&""!==t&&isFinite(t)}const sE=Object.assign({},Nt);const oE=Object.assign({},Nt);const aE=Object.assign({},Nt);const lE=Object.assign({},Nt);function cE({values:t,method:e,nb:n,precision:i,k:r,middle:s}){let o;switch(e){case"q6":a=(a=t).filter((t=>rE(t))).map((t=>+t)),o=6>a.length?null:[sE.quantile(a,0),sE.quantile(a,.05),sE.quantile(a,.25),sE.quantile(a,.5),sE.quantile(a,.75),sE.quantile(a,.95),sE.quantile(a,1)];break;case"quantile":o=function(t,e){if(t=t.filter((t=>rE(t))).map((t=>+t)),e>t.length)return null;const n=[],i=1/e;for(let r=0;r<=e;r++)n.push(oE.quantile(t,i*r));return n}(t,n);break;case"equal":o=function(t,e){if(t=t.filter((t=>rE(t))).map((t=>+t)),e>t.length)return null;const n=[aE.min(t),aE.max(t)],i=(n[1]-n[0])/e;let r=n[0];for(let t=0;t<e-1;t++)n.push(r+i),r+=i;return n.sort(aE.ascending)}(t,n);break;case"jenks":o=function(t,e){if(t=t.filter((t=>rE(t))).map((t=>+t)).sort((function(t,e){return t-e})),e>t.length)return null;if(e>[...new Set(t)].length)return null;let n=function(t,e){const n=[],i=[],r=t.length;let s,o,a,l,c,h,u,f,d,g,p,_;for(s=0;s<r;s++){const t=[],r=[],a=0===s?1:0;for(o=0;o<e;o++)t.push(a),r.push(1/0);n.push(t),i.push(r)}for(c=0,l=0;l<r;l++){for(u=f=d=0,a=0;a<=l;a++)if(_=l-a,h=t[_],d++,u+=h,f+=h*h,c=f-u*u/d,p=_-1,p>-1)for(o=1;o<e;o++)g=c+i[p][o-1],i[l][o]>=g&&(n[l][o]=_+1,i[l][o]=g);n[l][0]=1,i[l][0]=c}return{lower_class_limits:n,variance_combinations:i}}(t,e);return function(t,e,n){const i=[];let r,s,o=t.length;for(i[n]=t[t.length-1],i[0]=t[0],r=1;r<n;r++)s=n-r+1,i[s-1]=t[e[o-1][s-1]-2],o=e[o-1][s-1]-1;return i}(t,n.lower_class_limits,e)}(t,n);break;case"msd":o=function(t,e=1,n=!1){t=t.filter((t=>rE(t))).map((t=>+t));const i=lE.min(t),r=lE.max(t),s=lE.mean(t),o=lE.deviation(t),a=[i,r];if(1==n){let t=s+e/2*o;for(;t<r;)a.push(t),t+=o*e;for(t=s-e/2*o;t>i;)a.push(t),t-=o*e}else{a.push(s);let t=s+o*e;for(;t<r;)a.push(t),t+=o*e;for(t=s-o*e;t>i;)a.push(t),t-=o*e}return a.sort(lE.ascending)}(t,r,s)}var a;return Number.isInteger(+i)?o.map((t=>function(t,e){let n;return e>=0&&(n=+t.toFixed(e)),e<0&&(n=Math.round(t/+(1+"0".repeat(Math.abs(e))))*+(1+"0".repeat(Math.abs(e)))),n}(t,i))):o}Object.assign({},Nt,Ro,SM,Y_),Object.assign({},Nt,Ro,SM,Y_);const hE=Object.assign({},iE,{sort:B,scaleThreshold:Vx,scaleOrdinal:Gy});function uE(t,e){if("string"==typeof e)return{getcol:t=>e};if(t=null==t[0].properties?t:t.map((t=>t.properties)),"object"==typeof e&&"choro"==e.type){let n=e.values,i=e.colors?e.colors:"Blues",r=null!=e.nbreaks?e.nbreaks:5,s=e.breaks?e.breaks:null,o=null!=e.k?e.k:1,a=1==e.middle,l=e.method?e.method:"quantile",c=e.col_missing?e.col_missing:"#f5f5f5",h=e.txt_missing?e.txt_missing:"No data",u=void 0!==e.leg_round?e.leg_round:void 0;"q6"==l&&(r=6);const f=t.map((t=>t[n])),d=f.filter((t=>void 0!==+t)).filter((t=>null!==+t)).filter((t=>!isNaN(+t))).filter((t=>""!==t)),g=f.length===d.length?null:[h,c];s=null==s?cE({values:d,method:l,nb:r,k:o,middle:a,precision:u}):hE.sort(s),Array.isArray(i)||(i=hE[`scheme${i}`][s.length-1]);let p=[...s];function _(t){return""===t||isNaN(+t)?c:hE.scaleThreshold(p,i).unknown(c)(t)}return p.pop(),p.shift(),{getcol:_,breaks:s,colors:i,missing:g}}if("object"==typeof e&&"typo"==e.type){let y=e.values,m=e.colors?e.colors:"Tableau10",x=e.col_missing?e.col_missing:"#f5f5f5",b=e.txt_missing?e.txt_missing:"No data";const v=null!=e.order?e.order:Array.from(new Set(t.map((t=>t[y]))));let M=null!=e.types?e.types:v.filter((t=>""!==t&&null!=t&&null!=t));return Array.isArray(m)?m.slice(0,M.length):m=hE[`scheme${m}`].slice(0,M.length),{getcol:hE.scaleOrdinal().domain(M).range(m).unknown(x),types:M.length==v.length?M:[M,b].flat(),colors:M.length==v.length?m:[m,x].flat()}}if("object"==typeof e&&"split"==e.type){let w=e.values,E=null!=e.split?e.split:0,N=e.colors?e.colors:["#F25842","#4a7cd9"],I=e.col_missing?e.col_missing:"#f5f5f5",S=e.txt_missing?e.txt_missing:"No data";const C=t.map((t=>t[w])),O=C.filter((t=>""!==t&&null!=t&&null!=t));return{getcol:t=>t>=E?N[0]:t<E?N[1]:null==t||""===t?I:void 0,types:C.length==O.length?[`>= ${E}`,`< ${E}`]:[[`>= ${E}`,`< ${E}`],S].flat(),colors:C.length==O.length?N:[N,I].flat()}}}const fE=Object.assign({},{min:rt,max:nt,scaleLinear:Cx,scaleOrdinal:Gy,scaleThreshold:Vx,quantize:function(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n},interpolate:Jm});function dE(t,e){const n=e.type?e.type:"linear";if("number"==typeof e||"string"==typeof e)return{getthickness:()=>+e};if(0==t.length)return{getthickness:()=>0,valmax:0,sizemax:0};if("number"!=typeof e&&"string"!=typeof e&&"linear"==n){let i=null!=e.k?e.k:10,r=e.values,s=null!=e.fixmax?e.fixmax:void 0,o=null!=e.fixmin?e.fixmin:0;if("geometry"in t[0]&&"properties"in t[0]&&(t=t.map((t=>t.properties))),"string"==typeof e||"number"==typeof e)return{getcol:t=>e};1==o&&(o=fE.min(t.map((t=>Math.abs(+t[r])))));const a=null==s?fE.max(t.map((t=>Math.abs(+t[r])))):s,l=fE.max(t.map((t=>Math.abs(+t[r]))));return{type:n,getthickness:fE.scaleLinear().domain([o,a]).range([0,i]),valmax:l,valmin:o,sizemax:fE.scaleLinear().domain([o,a]).range([0,i])(l)}}if("number"!=typeof e&&"string"!=typeof e&&"quali"==n){const t=e.categories,i=null!=e.k?e.k:10,r=e.sizes?e.sizes:fE.quantize(fE.interpolate(1,i),t.length);return{type:n,categories:t,sizes:r,getthickness:fE.scaleOrdinal().domain(t).range(r).unknown(0)}}if("number"!=typeof e&&"string"!=typeof e&&"discr"==n){const i=e.values;let r=e.sizes,s=null!=e.nbreaks?e.nbreaks:5,o=e.breaks?e.breaks:null,a=null!=e.k?e.k:10,l=null!=e.nbsd?e.nbsd:1,c=1==e.middle,h=e.method?e.method:"quantile";"q6"==h&&(s=6);const u=t.map((t=>+t.properties[i])).filter((t=>null!=t&&null!=t&&""!=t));o=null==o?cE({values:u,method:h,nb:s,k:l,middle:c}):fE.sort(o),null==r&&(r=fE.quantize(fE.interpolate(1,a),o.length-1));let f=[...o];return f.pop(),f.shift(),{type:n,breaks:o,sizes:r,getthickness:fE.scaleThreshold(f,r).unknown(0)}}}function gE(t,e,n,i,r){"object"==typeof n&&"choro"==n.type&&Py(e,{x:n.leg_x,y:n.leg_y,w:n.leg_w,h:n.leg_h,stroke:n.leg_stroke,fillOpacity:n.leg_fillOpacity,strokeWidth:n.leg_strokeWidth,txtcol:n.leg_txtcol,title:n.leg_title?n.leg_title:n.values,fontSize:n.leg_fontSize,fontSize2:n.leg_fontSize2,breaks:uE(t.features,n).breaks,colors:uE(t.features,n).colors,missing:uE(t.features,n).missing}),"object"==typeof i&&"choro"==i.type&&Py(e,{x:i.leg_x,y:i.leg_y,w:i.leg_w,h:i.leg_h,stroke:i.leg_stroke,fillOpacity:i.leg_fillOpacity,strokeWidth:i.leg_strokeWidth,txtcol:i.leg_txtcol,title:i.leg_title?i.leg_title:i.values,fontSize:i.leg_fontSize,fontSize2:i.leg_fontSize2,breaks:uE(t.features,i).breaks,colors:uE(t.features,i).colors,missing:uE(t.features,i).missing}),"object"!=typeof n||"typo"!=n.type&&"split"!=n.type||OM(e,{x:n.leg_x,y:n.leg_y,w:n.leg_w,h:n.leg_h,stroke:n.leg_stroke,fillOpacity:n.leg_fillOpacity,strokeWidth:n.leg_strokeWidth,txtcol:n.leg_txtcol,title:n.leg_title?n.leg_title:n.values,fontSize:n.leg_fontSize,fontSize2:n.leg_fontSize2,types:uE(t.features,n).types,colors:uE(t.features,n).colors}),"object"!=typeof i||"typo"!=i.type&&"split"!=i.type||OM(e,{x:i.leg_x,y:i.leg_y,w:i.leg_w,h:i.leg_h,stroke:i.leg_stroke,fillOpacity:i.leg_fillOpacity,strokeWidth:i.leg_strokeWidth,txtcol:i.leg_txtcol,title:i.leg_title?i.leg_title:i.values,fontSize:i.leg_fontSize,fontSize2:i.leg_fontSize2,types:uE(t.features,i).types,colors:uE(t.features,i).colors}),"object"!=typeof r||null==r.values||"linear"!=r.type&&null!=r.type||function(t,e={}){let n=null!=e.x?e.x:null,i=null!=e.y?e.y:null,r=e.valmax,s=e.valmin,o=e.sizemax,a=e.title?e.title:null,l=null!=e.fontSize?e.fontSize:14,c=null!=e.fontSize2?e.fontSize2:10,h=e.fill?e.fill:"none",u=e.stroke?e.stroke:"black",f=null!=e.strokeWidth?e.strokeWidth:.4,d=null!=e.fillOpacity?e.fillOpacity:1,g=e.txtcol?e.txtcol:"#363636",p=null!=e.w?e.w:75,_=null!=e.round?e.round:void 0;if(null!=n&&null!=i){let e=t.append("g").attr("class","bertinlegend"),y=0;null!=a&&(y=(a.split("\n").length+1)*l,e.append("g").selectAll("text").data(a.split("\n")).join("text").attr("x",n).attr("y",i).attr("font-size",`${l}px`).attr("dy",((t,e)=>e*l)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",g).text((t=>t))),e.append("path").attr("d",`M ${n},${i+y+o/2} ${n+p},${i+y} ${n+p},${i+y+o} Z `).attr("stroke",u).attr("fill",h).attr("stroke-width",f).attr("fill-opacity",d),e.append("text").attr("font-size",`${c}px`).attr("fill",g).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("x",n).attr("y",i+y+o/2+c/2).text(kM(s,_)),e.append("text").attr("font-size",`${c}px`).attr("fill",g).attr("text-anchor","end").attr("dominant-baseline","hanging").attr("x",n+p).attr("y",i+y+o+c/2).text(kM(r,_))}}(e,{x:r.leg_x,y:r.leg_y,valmax:dE(t.features,r).valmax,valmin:dE(t.features,r).valmin,sizemax:dE(t.features,r).sizemax,title:r.leg_title?r.leg_title:r.values,fontSize:r.leg_fontSize,fontSize2:r.leg_fontSize2,fill:r.stroke,fillOpacity:r.fillOpacity,txtcol:r.leg_txtcol,w:r.leg_w,round:r.leg_round}),"object"==typeof r&&null!=r.values&&"discr"==r.type&&function(t,e={}){let n=e.x?e.x:null,i=e.y?e.y:null,r=e.w?e.w:30,s=e.title?e.title:null,o=null!=e.fontSize?e.fontSize:14,a=null!=e.fontSize2?e.fontSize2:10,l=e.stroke?e.stroke:"black",c=null!=e.strokeOpacity?e.strokeOpacity:1,h=e.txtcol?e.txtcol:"#363636",u=e.breaks,f=e.sizes,d=void 0!==e.round?e.round:void 0;if(f=TM.reverse(f),u=TM.reverse(u),null!=n&&null!=i){let e=t.append("g").attr("class","bertinlegend"),g=0;null!=s&&(g=(s.split("\n").length+1)*o,e.append("g").selectAll("text").data(s.split("\n")).join("text").attr("x",n).attr("y",i).attr("font-size",`${o}px`).attr("dy",((t,e)=>e*o)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",h).text((t=>t)));const p=10;let _=[],y=0;for(let t=0;t<f.length;t++)_.push(i+g+y+f[t]/2+t*p),y+=f[t];let m=[];y=0;for(let t=0;t<u.length;t++)m.push(i+g+y-p/2),y+=f[t]+p;e.selectAll("line").data(f).join("line").attr("x1",n).attr("y1",((t,e)=>_[e])).attr("x2",n+r).attr("y2",((t,e)=>_[e])).attr("stroke",l).attr("stroke-opacity",c).attr("stroke-width",(t=>t)),e.append("g").selectAll("text").data(u).join("text").attr("x",n+r+a/2).attr("y",((t,e)=>m[e])).attr("font-size",`${a}px`).attr("fill",h).attr("text-anchor","start").attr("dominant-baseline","central").text((t=>kM(t,d)))}}(e,{x:r.leg_x,y:r.leg_y,breaks:dE(t.features,r).breaks,sizes:dE(t.features,r).sizes,w:r.leg_w,title:r.leg_title?r.leg_title:r.values,fontSize:r.leg_fontSize,fontSize2:r.leg_fontSize2,stroke:r.stroke,strokeOpacity:r.strokeOpacity,txtcol:r.leg_txtcol,round:r.leg_round}),"object"==typeof r&&null!=r.values&&"quali"==r.type&&function(t,e={}){let n=e.x?e.x:null,i=e.y?e.y:null,r=e.w?e.w:30,s=e.title?e.title:null,o=e.fontSize?e.fontSize:14,a=e.fontSize2?e.fontSize2:10,l=e.stroke?e.stroke:"black",c=e.strokeOpacity?e.strokeOpacity:1,h=e.txtcol?e.txtcol:"#363636",u=e.categories,f=e.sizes;if(f=AM.reverse(f),u=AM.reverse(u),null!=n&&null!=i){let e=t.append("g").attr("class","bertinlegend"),d=0;null!=s&&(d=(s.split("\n").length+1)*o,e.append("g").selectAll("text").data(s.split("\n")).join("text").attr("x",n).attr("y",i).attr("font-size",`${o}px`).attr("dy",((t,e)=>e*o)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",h).text((t=>t)));const g=10;let p=[],_=0;for(let t=0;t<f.length;t++)p.push(i+d+_+f[t]/2+t*g),_+=f[t];e.selectAll("line").data(f).join("line").attr("x1",n).attr("y1",((t,e)=>p[e])).attr("x2",n+r).attr("y2",((t,e)=>p[e])).attr("stroke",l).attr("stroke-opacity",c).attr("stroke-width",(t=>t)),e.append("g").selectAll("text").data(u).join("text").attr("x",n+r+a/2).attr("y",((t,e)=>p[e])).attr("font-size",`${a}px`).attr("fill",h).attr("text-anchor","start").attr("dominant-baseline","central").text((t=>t))}}(e,{x:r.leg_x,y:r.leg_y,categories:dE(t.features,r).categories,sizes:dE(t.features,r).sizes,w:r.leg_w,title:r.leg_title?r.leg_title:"Catgories",fontSize:r.leg_fontSize,fontSize2:r.leg_fontSize2,stroke:r.stroke,strokeOpacity:r.strokeOpacity,txtcol:r.leg_txtcol})}function pE(t,e,n){const i=.33*e,r=.25*n;return t[0]<i&&t[1]<r?"bottomright":t[0]>e-i&&t[1]<r?"bottomleft":t[0]<i&&t[1]>n-r?"topright":t[0]>e-i&&t[1]>n-r?"topleft":t[1]>n-r?"top":t[0]<i?"right":t[0]>e-i?"left":"bottom"}function _E(t,e){if(!e)return t.style("display","none");const n=1==Array.isArray(e.fields)?e.fields:[e.fields],i=e.fill?e.fill:"#fcf7e6",r=null!=e.strokeWidth?e.strokeWidth:1,s=null!=e.fillOpacity?e.fillOpacity:1,o=null!=e.strokeOpacity?e.strokeOpacity:1,a=e.stroke?e.stroke:"#4a4d4b",l=e.type?e.type:"bottom",c=n.length;let h=e.col?e.col:"#4d4545";Array.isArray(h)||(h=Array(c).fill(h));let u=e.fontWeight;null==u&&1==c&&(u=["bold"]),null==u&&c>1&&(u=["bold"].concat(Array(c-1).fill("normal"))),"string"==typeof u&&(u=Array(c).fill(u));let f=e.fontSize;null==f&&1==c&&(f=[18]),null==f&&c>1&&(f=[18].concat(Array(c-1).fill(12))),"number"==typeof f&&(f=Array(c).fill(f));let d=e.fontStyle;null==d&&(d=Array(c).fill("normal")),"string"==typeof d&&(d=Array(c).fill(d)),t.style("display",null).style("pointer-events","none").style("font","8px sans-serif");const g=t.selectAll("path").data([null]).join("path").attr("fill",i).attr("stroke",a).attr("stroke-width",r).attr("fill-opacity",s).attr("stroke-opacity",o),p=t.selectAll("text").data([null]).join("text").call((t=>t.selectAll("tspan").data(n).join("tspan").attr("x",0).attr("y",((t,e)=>`${f.slice(0,e+1).reduce(((t,e)=>t+e),0)+3*e}px`)).style("font-weight",((t,e)=>u[e])).style("font-size",((t,e)=>`${f[e]}px`)).style("font-style",((t,e)=>d[e])).style("fill",((t,e)=>h[e])).text((t=>t)))),{x:_,y:y,width:m,height:x}=p.node().getBBox();switch(l){case"bottom":p.attr("transform",`translate(${-m/2},${15-y})`),g.attr("d",`M${-m/2-10},5H-5l5,-5l5,5H${m/2+10}v${x+20}h-${m+20}z`);break;case"top":p.attr("transform",`translate(${-m/2},${-15-y-x})`),g.attr("d",`M${-m/2-10},-5H-5l5,5l5,-5H${m/2+10}v${-x-20}h-${m+20}z`);break;case"left":p.attr("transform",`translate(${-m-15},${-y-x/2})`),g.attr("d",`M0,0l-5,5v${x/2+5}h${-m-20}v${-x-20}h${m+20}v${x/2+5}z`);break;case"right":p.attr("transform",`translate(15,${-y-x/2})`),g.attr("d",`M0,0l5,5v${x/2+5}h${m+20}v${-x-20}h${-m-20}v${x/2+5}z`);break;case"topleft":p.attr("transform",`translate(${-m-10},${-15-y-x})`),g.attr("d",`M0,0v${-x-5-20}h${-m-20}v${x+20}h${m+15}z`);break;case"topright":p.attr("transform",`translate(10,${-15-y-x})`),g.attr("d",`M0,0v${-x-5-20}h${m+20}v${x+20}h${-m-15}z`);break;case"bottomleft":p.attr("transform",`translate(${-m-10},${15-y})`),g.attr("d",`M0,0v${+x+5+20}h${-m-20}v${-x-20}h${+m+15}z`);break;case"bottomright":p.attr("transform",`translate(10,${15-y})`),g.attr("d",`M0,0v${+x+5+20}h${m+20}v${-x-20}h${-m-15}z`)}}function yE(t){let e=["z","l","p"],n=t.features.map((t=>t.geometry.type));n=Array.from(new Set(n));let i=(-1!==n.indexOf("Polygon")||-1!==n.indexOf("MultiPolygon")?e[0]:"")+(-1!==n.indexOf("LineString")||-1!==n.indexOf("MultiLineString")?e[1]:"")+(-1!==n.indexOf("Point")||-1!==n.indexOf("MultiPoint")?e[2]:"");return 1==i.length?i:"composite"}const mE=Object.assign({},{select:Io,pointer:Ao,forceX:ky,forceY:Ty,forceCollide:iy,forceSimulation:Oy,geoPath:xr,symbol:i_,symbolCircle:Ap,symbolDiamond:Dp,symbolCross:Rp,symbolSquare:Gp,symbolStar:Yp,symbolTriangle:$p,symbolWye:Kp});function xE(t,e,n={},i,r,s){if(0!=n.display){let o=["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],a=Bo(n.geojson),l=n.fill?n.fill:o[Math.floor(Math.random()*o.length)],c=n.strokeLinecap?n.strokeLinecap:"round",h=n.strokeLinejoin?n.strokeLinejoin:"round",u=null!=n.strokeDasharray?n.strokeDasharray:"none",f=n.stroke?n.stroke:"white",d=null!=n.strokeWidth?n.strokeWidth:.5,g=null!=n.fillOpacity?n.fillOpacity:1,p=null!=n.strokeOpacity?n.strokeOpacity:1,_=!!n.tooltip&&n.tooltip;Array.isArray(_)&&(_={fields:_}),"string"==typeof _&&(_={fields:[_]});let y=n.symbol?n.symbol:"circle",m=null!=n.symbol_size?n.symbol_size:40,x=null!=n.symbol_iteration?n.symbol_iteration:200,b=null!=n.symbol_shift?n.symbol_shift:0;if("l"==yE(a)&&(f=n.stroke?n.stroke:o[Math.floor(Math.random()*o.length)],l=n.fill?n.fill:"none",d=n.strokeWidth?n.strokeWidth:1),"l"!=yE(a)&&"z"!=yE(a)||t.append("g").attr("clip-path",null==i?"none":`url(#clip_${i})`).selectAll("path").data(a.features).join("path").attr("d",mE.geoPath(e)).attr("fill",(t=>uE(a.features,l).getcol(t.properties[l.values]))).attr("stroke",(t=>uE(a.features,f).getcol(t.properties[f.values]))).attr("stroke-width",(t=>dE(a.features,d).getthickness(t.properties[d.values]||void 0))).attr("fill-opacity",g).attr("stroke-opacity",p).attr("stroke-linecap",c).attr("stroke-linejoin",h).attr("stroke-dasharray",u).on("touchmove mousemove",(function(e,n){_&&t.select("#info").call(_E,{fields:function(){const t=Array.isArray(_.fields)?_.fields:[_.fields];let e=[];return t.forEach((t=>{e.push("$"==t[0]?`${n.properties[t.substr(1,t.length)]}`:t)})),e}(),fontWeight:_.fontWeight,fontSize:_.fontSize,fontStyle:_.fontStyle,fill:_.fill,stroke:_.stroke,strokeWidth:_.strokeWidth,fillOpacity:_.fillOpacity,strokeOpacity:_.strokeOpacity,col:_.col,type:pE(mE.pointer(e,this),r,s)}),_&&(t.select("#info").attr("transform",`translate(${mE.pointer(e,this)})`),mE.select(this).attr("stroke-opacity",p-.3).attr("fill-opacity",g-.3).raise())})).on("touchend mouseleave",(function(){t.select("#info").call(_E,null),mE.select(this).attr("stroke-opacity",p).attr("fill-opacity",g).lower()})),"p"==yE(a)){if(n.leg_type=n.symbol?n.symbol:"circle",b>0){const t=mE.forceSimulation(a.features).force("x",mE.forceX((t=>e(t.geometry.coordinates)[0]))).force("y",mE.forceY((t=>e(t.geometry.coordinates)[1]))).force("collide",mE.forceCollide(Math.sqrt(m)/2+b/2));for(let e=0;e<x;e++)t.tick()}const i=new Map([["circle",mE.symbolCircle],["cross",mE.symbolCross],["diamond",mE.symbolDiamond],["square",mE.symbolSquare],["star",mE.symbolStar],["triangle",mE.symbolTriangle],["wye",mE.symbolWye]]);t.append("g").selectAll("path").data(a.features).join("path").attr("d",mE.symbol().size(m).type(i.get(y))).attr("transform",(t=>`translate(\n       ${b?t.x:e(t.geometry.coordinates)[0]},\n       ${b?t.y:e(t.geometry.coordinates)[1]})`)).attr("fill",(t=>uE(a.features,l).getcol(t.properties[l.values]||void 0))).attr("stroke",(t=>uE(a.features,f).getcol(t.properties[f.values]))).attr("stroke-width",(t=>dE(a.features,d).getthickness(t.properties[d.values]))).attr("fill-opacity",g).attr("stroke-opacity",p).attr("stroke-linecap",c).attr("stroke-linejoin",h).attr("stroke-dasharray",u).on("touchmove mousemove",(function(n,i){_&&t.select("#info").call(_E,{fields:function(){const t=Array.isArray(_.fields)?_.fields:[_.fields];let e=[];return t.forEach((t=>{e.push("$"==t[0]?`${i.properties[t.substr(1,t.length)]}`:t)})),e}(),fontWeight:_.fontWeight,fontSize:_.fontSize,fontStyle:_.fontStyle,fill:_.fill,stroke:_.stroke,strokeWidth:_.strokeWidth,fillOpacity:_.fillOpacity,strokeOpacity:_.strokeOpacity,col:_.col,type:pE(b?[i.x,i.y]:e(i.geometry.coordinates),r,s)}),_&&(t.select("#info").attr("transform",`translate(\n         ${b?i.x:e(i.geometry.coordinates)[0]},\n         ${b?i.y:e(i.geometry.coordinates)[1]})`),mE.select(this).attr("stroke-opacity",p-.3).attr("fill-opacity",g-.3))})).on("touchend mouseleave",(function(){t.select("#info").call(_E,null),mE.select(this).attr("stroke-opacity",p).attr("fill-opacity",g)}))}gE(a,t,l,f,d),Ry(t,{x:n.leg_x,y:n.leg_y,w:n.leg_w,h:n.leg_h,symbol_size:m,type:n.leg_type,title:n.leg_title,text:n.leg_text,fontSize:n.leg_fontSize,fontSize2:n.leg_fontSize2,stroke:n.leg_stroke,fillOpacity:n.leg_fillOpacity?n.leg_fillOpacity:g,fill:n.leg_fill?n.leg_fill:l,strokeWidth:n.leg_strokeWidth,txtcol:n.leg_txtcol})}}const bE=Object.assign({},{scaleSqrt:Wx,max:nt,descending:n});const vE=Object.assign({},{geoArea:Ie,geoCentroid:bn,geoIdentity:rs,geoPath:xr});function ME(t,e={}){if("p"===yE(t))return t;{let n=!1!==e.largest,i=!0===e.planar,r=vE.geoPath(vE.geoIdentity());t=Yo(t);const s=function(t){var e={},n=0;return t.geometry.coordinates.forEach((function(t){var s={type:"Polygon",coordinates:t},o=i?r.area(s):vE.geoArea(s);o>n&&(n=o,e=s)})),e};let o=t.features.map((t=>(t.geometry.coordinates=i?r.centroid(1==n?"Polygon"==t.geometry.type?t:s(t):t):vE.geoCentroid(1==n?"Polygon"==t.geometry.type?t:s(t):t),t.geometry.type="Point",t)));return t.features=o,t}}const wE=Object.assign({},{min:rt,max:nt,descending:n,scaleSqrt:Wx,select:Io,pointer:Ao,forceX:ky,forceY:Ty,forceCollide:iy,forceSimulation:Oy});function EE(t,e,n,i={},r,s,o){if(0!=i.display){let r,a=["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],l=Bo(i.geojson),c=i.values,h=null!=i.fixmax?i.fixmax:void 0,u=i.k?i.k:50,f=i.fill?i.fill:a[Math.floor(Math.random()*a.length)],d=i.stroke?i.stroke:"white",g=null!=i.strokeWidth?i.strokeWidth:.5,p=i.strokeDasharray?i.strokeDasharray:"none",_=null!=i.strokeOpacity?i.strokeOpacity:1,y=null!=i.fillOpacity?i.fillOpacity:1,m=!!i.dorling&&i.dorling,x=null!=i.iteration?i.iteration:200,b=!!i.tooltip&&i.tooltip;Array.isArray(b)&&(b={fields:b}),"string"==typeof b&&(b={fields:[b]}),r="p"==yE(l)?l.features:ME(l,{planar:n}).features;const v=null!=h?h:wE.max(r,(t=>Math.abs(+t.properties[c])));let M=wE.scaleSqrt([0,v],[0,u]);if(1==m){const t=wE.forceSimulation(r).force("x",wE.forceX((t=>e(t.geometry.coordinates)[0]))).force("y",wE.forceY((t=>e(t.geometry.coordinates)[1]))).force("collide",wE.forceCollide((t=>M(Math.abs(t.properties[c]))+dE(r,g).getthickness(t.properties[g.values]||0)/2)));for(let e=0;e<x;e++)t.tick()}t.append("g").selectAll("circle").data(r.filter((t=>null!=t.geometry.coordinates)).filter((t=>null!=t.properties[c])).sort(((t,e)=>wE.descending(Math.abs(+t.properties[c]),Math.abs(+e.properties[c]))))).join("circle").attr("fill",(t=>uE(r,f).getcol(t.properties[f.values]))).attr("stroke",(t=>uE(r,d).getcol(t.properties[d.values]))).attr("stroke-width",(t=>dE(r,g).getthickness(t.properties[g.values]||void 0))).attr("fill-opacity",y).attr("stroke-dasharray",p).attr("stroke-opacity",_).attr("cx",(t=>m?t.x:e(t.geometry.coordinates)[0])).attr("cy",(t=>m?t.y:e(t.geometry.coordinates)[1])).attr("r",(t=>M(Math.abs(t.properties[c])))).on("touchmove mousemove",(function(e,n){b&&t.select("#info").call(_E,{fields:function(){const t=Array.isArray(b.fields)?b.fields:[b.fields];let e=[];return t.forEach((t=>{e.push("$"==t[0]?`${n.properties[t.substr(1,t.length)]}`:t)})),e}(),fontWeight:b.fontWeight,fontSize:b.fontSize,fontStyle:b.fontStyle,fill:b.fill,stroke:b.stroke,strokeWidth:b.strokeWidth,fillOpacity:b.fillOpacity,strokeOpacity:b.strokeOpacity,col:b.col,type:pE(wE.pointer(e,this),s,o)}),b&&(t.select("#info").attr("transform",`translate(${wE.pointer(e,this)})`),wE.select(this).attr("stroke-opacity",_-.3).attr("fill-opacity",y-.3))})).on("touchend mouseleave",(function(){t.select("#info").call(_E,null),wE.select(this).attr("stroke-opacity",_).attr("fill-opacity",y)})),gE(l,t,f,d,g);let w=r.map((t=>Math.abs(+t.properties[c]))),E=[wE.min(w),M.invert(M(wE.max(w))/3),M.invert(M(wE.max(w))/1.5),wE.max(w)];!function(t,e={}){let n=e.values,i=e.k?e.k:50,r=e.stroke?e.stroke:"black",s=e.fill?e.fill:"none",o=e.strokeWidth?e.strokeWidth:.8,a=e.txtcol?e.txtcol:"#363636",l=e.x?e.x:null,c=e.y?e.y:null,h=e.title?e.title:"Title, year\n(units)",u=e.fontSize?e.fontSize:14,f=e.fontSize2?e.fontSize2:10,d=null!=e.round?e.round:void 0,g=e.fixmax;const p=null!=g?g:bE.max(n);let _=bE.scaleSqrt([0,p],[0,i]),y=_(bE.max(n));if(null!=l&&null!=c){let e=t.append("g").attr("class","bertinlegend");e.selectAll("circle").data(n.sort(bE.descending)).join("circle").attr("r",(t=>_(t))).attr("fill",s).attr("stroke",r).attr("stroke-width",o).attr("transform",(t=>`translate(${l+y},${c-_(t)+2*y+(h.split("\n").length+1)*u})`)),e.selectAll("line").data(n).join("line").attr("x1",l+y).attr("y1",(t=>c+2*y-2*_(t)+(h.split("\n").length+1)*u)).attr("x2",l+2*y+u).attr("y2",(t=>c+2*y-2*_(t)+(h.split("\n").length+1)*u)).attr("stroke",r).attr("stroke-width",o).attr("stroke-dasharray",2),e.append("g").selectAll("text").data(h.split("\n")).join("text").attr("x",l).attr("y",c).attr("font-size",`${u}px`).attr("dy",((t,e)=>e*u)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",a).text((t=>t)),e.append("g").selectAll("text").data(n).join("text").attr("x",l+2*y+u+f/2).attr("y",(t=>c+2*y-2*_(t)+(h.split("\n").length+1)*u)).attr("font-size",f).attr("dominant-baseline","central").attr("fill",a).text((t=>kM(t,d)))}}(t,{x:i.leg_x,y:i.leg_y,round:void 0!==i.leg_round?i.leg_round:void 0,k:u,fixmax:h,stroke:i.leg_stroke,fill:i.leg_fill,strokeWidth:i.leg_strokeWidth,txtcol:i.leg_txtcol,title:i.leg_title,fontSize:i.leg_fontSize,fontSize2:i.leg_fontSize2,title:i.leg_title?i.leg_title:c,values:E})}}const NE=Object.assign({},{scaleSqrt:Wx,max:nt,descending:n});const IE=Object.assign({},{min:rt,max:nt,descending:n,scaleSqrt:Wx,select:Io,pointer:Ao,forceX:ky,forceY:Ty,forceCollide:iy,forceSimulation:Oy,quadtree:H_});function SE(t,e,n,i={},r,s,o){if(0!=i.display){let a,l=["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],c=Bo(i.geojson),h=i.values,u=null!=i.fixmax?i.fixmax:void 0,f=i.k?i.k:50,d=i.fill?i.fill:l[Math.floor(Math.random()*l.length)],g=i.stroke?i.stroke:"white",p=null!=i.strokeWidth?i.strokeWidth:.5,_=i.strokeDasharray?i.strokeDasharray:"none",y=null!=i.strokeOpacity?i.strokeOpacity:1,m=null!=i.fillOpacity?i.fillOpacity:1,x=!!i.dorling&&i.dorling,b=!!i.demers&&i.demers,v=null!=i.iteration?i.iteration:200,M=!!i.tooltip&&i.tooltip;Array.isArray(M)&&(M={fields:M}),"string"==typeof M&&(M={fields:[M]}),a="p"==yE(c)?c.features:ME(c,{planar:n}).features;const w=null!=u?u:IE.max(a,(t=>Math.abs(+t.properties[h])));let E=IE.scaleSqrt([0,w],[0,1.77*f]),N=[...a].map((t=>Object.assign(t.properties,{_x:e(t.geometry.coordinates)[0],_y:e(t.geometry.coordinates)[1],_size:E(Math.abs(t.properties[h])),_padding:dE(a,p).getthickness(t.properties[p.values]||0)/2+0}))).filter((t=>!isNaN(t._x))).filter((t=>!isNaN(t._y))).filter((t=>null!=t[h]));if(1==x||1==b){function C(){let t;function e(e){const n=IE.quadtree(t,(t=>t._x),(t=>t._y));for(const e of t)n.visit(((t,n,i,r,s)=>{let o=!1;if(t.data&&t.data!==e){let n,i,r,s=e._x-t.data._x,a=e._y-t.data._y,l=e._padding+(t.data._size+e._size)/2,c=e._padding+(t.data._size+e._size)/2,h=Math.abs(s),u=Math.abs(a);h<l&&u<c&&(n=Math.sqrt(s*s+a*a),i=(h-l)/n,r=(u-c)/n,Math.abs(i)>Math.abs(r)?i=0:r=0,e._x-=s*=i,e._y-=a*=r,t.data.x+=s,t.data.y+=a,o=!0)}return o}))}return e.initialize=e=>t=e,e}const O=IE.forceSimulation(N).force("_x",IE.forceX((t=>t._x))).force("_y",IE.forceY((t=>t._y))).force("collide",C());for(let k=0;k<v;k++)O.tick()}t.append("g").selectAll("squares").data(N.sort(((t,e)=>IE.descending(Math.abs(+t[h]),Math.abs(+e[h]))))).join("rect").attr("fill",(t=>uE(N,d).getcol(t[d.values]))).attr("stroke",(t=>uE(N,g).getcol(t[g.values]))).attr("stroke-width",(t=>dE(N,p).getthickness(t[p.values]||void 0))).attr("fill-opacity",m).attr("stroke-dasharray",_).attr("stroke-opacity",y).attr("x",(t=>t._x-t._size/2)).attr("y",(t=>t._y-t._size/2)).attr("width",(t=>t._size)).attr("height",(t=>t._size)).on("touchmove mousemove",(function(e,n){M&&t.select("#info").call(_E,{fields:function(){const t=Array.isArray(M.fields)?M.fields:[M.fields];let e=[];return t.forEach((t=>{e.push("$"==t[0]?`${n[t.substr(1,t.length)]}`:t)})),e}(),fontWeight:M.fontWeight,fontSize:M.fontSize,fontStyle:M.fontStyle,fill:M.fill,stroke:M.stroke,strokeWidth:M.strokeWidth,fillOpacity:M.fillOpacity,strokeOpacity:M.strokeOpacity,col:M.col,type:pE(IE.pointer(e,this),s,o)}),M&&(t.select("#info").attr("transform",`translate(${IE.pointer(e,this)})`),IE.select(this).attr("stroke-opacity",y-.3).attr("fill-opacity",m-.3))})).on("touchend mouseleave",(function(){t.select("#info").call(_E,null),IE.select(this).attr("stroke-opacity",y).attr("fill-opacity",m)})),gE(c,t,d,g,p);let I=N.map((t=>Math.abs(+t[h]))),S=[IE.min(I),E.invert(E(IE.max(I))/3),E.invert(E(IE.max(I))/1.5),IE.max(I)];!function(t,e={}){let n=e.values,i=e.k?e.k:50,r=e.stroke?e.stroke:"black",s=e.fill?e.fill:"none",o=e.strokeWidth?e.strokeWidth:.8,a=e.txtcol?e.txtcol:"#363636",l=e.x?e.x:null,c=e.y?e.y:null,h=e.title?e.title:"Title, year\n  (units)",u=e.fontSize?e.fontSize:14,f=e.fontSize2?e.fontSize2:10,d=null!=e.round?e.round:void 0,g=e.fixmax;const p=null!=g?g:NE.max(n);let _=NE.scaleSqrt([0,p],[0,1.77*i]),y=_(NE.max(n));if(null!=l&&null!=c){let e=t.append("g").attr("class","bertinlegend");e.selectAll("rect").data(n.sort(NE.descending)).join("rect").attr("width",(t=>_(t))).attr("height",(t=>_(t))).attr("fill",s).attr("stroke",r).attr("stroke-width",o).attr("transform",(t=>`translate(${l+y-_(t)},${c-_(t)+y+(h.split("\n").length+1)*u})`)),e.selectAll("line").data(n).join("line").attr("x1",l+y).attr("y1",(t=>c+y-_(t)+(h.split("\n").length+1)*u)).attr("x2",l+y+u).attr("y2",(t=>c+y-_(t)+(h.split("\n").length+1)*u)).attr("stroke",r).attr("stroke-width",o).attr("stroke-dasharray",2),e.append("g").selectAll("text").data(h.split("\n")).join("text").attr("x",l).attr("y",c).attr("font-size",`${u}px`).attr("dy",((t,e)=>e*u)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",a).text((t=>t)),e.append("g").selectAll("text").data(n).join("text").attr("x",l+y+u+f/2).attr("y",(t=>c+y-_(t)+(h.split("\n").length+1)*u)).attr("font-size",f).attr("dominant-baseline","central").attr("fill",a).text((t=>kM(t,d)))}}(t,{x:i.leg_x,y:i.leg_y,round:void 0!==i.leg_round?i.leg_round:void 0,k:f,fixmax:u,stroke:i.leg_stroke,fill:i.leg_fill,strokeWidth:i.leg_strokeWidth,txtcol:i.leg_txtcol,title:i.leg_title,fontSize:i.leg_fontSize,fontSize2:i.leg_fontSize2,title:i.leg_title?i.leg_title:h,values:S})}}function CE(t,e){return t.interfaces_&&t.interfaces_.indexOf(e)>-1}class OE{constructor(t,e){this.low=e||0,this.high=t||0}static toBinaryString(t){let e,n="";for(e=2147483648;e>0;e>>>=1)n+=(t.high&e)===e?"1":"0";for(e=2147483648;e>0;e>>>=1)n+=(t.low&e)===e?"1":"0";return n}}function kE(){}function TE(){}kE.NaN=NaN,kE.isNaN=t=>Number.isNaN(t),kE.isInfinite=t=>!Number.isFinite(t),kE.MAX_VALUE=Number.MAX_VALUE,kE.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,kE.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,"function"==typeof Float64Array&&"function"==typeof Int32Array?function(){const t=2146435072,e=new Float64Array(1),n=new Int32Array(e.buffer);kE.doubleToLongBits=function(i){e[0]=i;let r=0|n[0],s=0|n[1];return(s&t)===t&&0!=(1048575&s)&&0!==r&&(r=0,s=2146959360),new OE(s,r)},kE.longBitsToDouble=function(t){return n[0]=t.low,n[1]=t.high,e[0]}}():function(){const t=1023,e=Math.log2,n=Math.floor,i=Math.pow,r=function(){for(let t=53;t>0;t--){const r=i(2,t)-1;if(n(e(r))+1===t)return r}return 0}();kE.doubleToLongBits=function(s){let o,a,l,c,h,u,f,d,g;if(s<0||1/s===Number.NEGATIVE_INFINITY?(u=1<<31,s=-s):u=0,0===s)return g=0,d=u,new OE(d,g);if(s===1/0)return g=0,d=2146435072|u,new OE(d,g);if(s!=s)return g=0,d=2146959360,new OE(d,g);if(c=0,g=0,o=n(s),o>1)if(o<=r)c=n(e(o)),c<=20?(g=0,d=o<<20-c&1048575):(l=c-20,a=i(2,l),g=o%a<<32-l,d=o/a&1048575);else for(l=o,g=0;a=l/2,l=n(a),0!==l;)c++,g>>>=1,g|=(1&d)<<31,d>>>=1,a!==l&&(d|=524288);if(f=c+t,h=0===o,o=s-o,c<52&&0!==o)for(l=0;;){if(a=2*o,a>=1?(o=a-1,h?(f--,h=!1):(l<<=1,l|=1,c++)):(o=a,h?0==--f&&(c++,h=!1):(l<<=1,c++)),20===c)d|=l,l=0;else if(52===c){g|=l;break}if(1===a){c<20?d|=l<<20-c:c<52&&(g|=l<<52-c);break}}return d|=f<<20,d|=u,new OE(d,g)},kE.longBitsToDouble=function(e){let n,r,s,o;const a=e.high,l=e.low,c=a&1<<31?-1:1;for(s=((2146435072&a)>>20)-t,o=0,r=1<<19,n=1;n<=20;n++)a&r&&(o+=i(2,-n)),r>>>=1;for(r=1<<31,n=21;n<=52;n++)l&r&&(o+=i(2,-n)),r>>>=1;if(-1023===s){if(0===o)return 0*c;s=-1022}else{if(1024===s)return 0===o?c/0:NaN;o+=1}return c*o*i(2,s)}}();class AE{getM(t){if(this.hasM()){const e=this.getDimension()-this.getMeasures();return this.getOrdinate(t,e)}return kE.NaN}setOrdinate(t,e,n){}getZ(t){return this.hasZ()?this.getOrdinate(t,2):kE.NaN}size(){}getOrdinate(t,e){}getCoordinate(){}getCoordinateCopy(t){}createCoordinate(){}getDimension(){}hasM(){return this.getMeasures()>0}getX(t){}hasZ(){return this.getDimension()-this.getMeasures()>2}getMeasures(){return 0}expandEnvelope(t){}copy(){}getY(t){}toCoordinateArray(){}get interfaces_(){return[TE]}}AE.X=0,AE.Y=1,AE.Z=2,AE.M=3;class RE{create(){if(1===arguments.length)arguments[0]instanceof Array||CE(arguments[0],AE);else if(2===arguments.length);else if(3===arguments.length){const t=arguments[0],e=arguments[1];return this.create(t,e)}}}class LE extends Error{constructor(t){super(t),this.name=Object.keys({Exception:LE})[0]}toString(){return this.message}}class PE extends LE{constructor(t){super(t),this.name=Object.keys({IllegalArgumentException:PE})[0]}}class DE{filter(t){}}function zE(){}function FE(){}class GE{static equalsWithTolerance(t,e,n){return Math.abs(t-e)<=n}}function qE(){}class jE extends LE{constructor(t){super(t),this.name=Object.keys({RuntimeException:jE})[0]}}class BE extends jE{constructor(){super(),BE.constructor_.apply(this,arguments)}static constructor_(){if(0===arguments.length)jE.constructor_.call(this);else if(1===arguments.length){const t=arguments[0];jE.constructor_.call(this,t)}}}class UE{static shouldNeverReachHere(){if(0===arguments.length)UE.shouldNeverReachHere(null);else if(1===arguments.length){const t=arguments[0];throw new BE("Should never reach here"+(null!==t?": "+t:""))}}static isTrue(){if(1===arguments.length){const t=arguments[0];UE.isTrue(t,null)}else if(2===arguments.length){const t=arguments[1];if(!arguments[0])throw null===t?new BE:new BE(t)}}static equals(){if(2===arguments.length){const t=arguments[0],e=arguments[1];UE.equals(t,e,null)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];if(!e.equals(t))throw new BE("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))}}}const YE=new ArrayBuffer(8),WE=new Float64Array(YE),$E=new Int32Array(YE);class XE{constructor(){XE.constructor_.apply(this,arguments)}static constructor_(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)XE.constructor_.call(this,0,0);else if(1===arguments.length){const t=arguments[0];XE.constructor_.call(this,t.x,t.y,t.getZ())}else if(2===arguments.length){const t=arguments[0],e=arguments[1];XE.constructor_.call(this,t,e,XE.NULL_ORDINATE)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];this.x=t,this.y=e,this.z=n}}static hashCode(t){return WE[0]=t,$E[0]^$E[1]}getM(){return kE.NaN}setOrdinate(t,e){switch(t){case XE.X:this.x=e;break;case XE.Y:this.y=e;break;case XE.Z:this.setZ(e);break;default:throw new PE("Invalid ordinate index: "+t)}}equals2D(){if(1===arguments.length){const t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){const t=arguments[0],e=arguments[1];return!!GE.equalsWithTolerance(this.x,t.x,e)&&!!GE.equalsWithTolerance(this.y,t.y,e)}}setM(t){throw new PE("Invalid ordinate index: "+XE.M)}getZ(){return this.z}getOrdinate(t){switch(t){case XE.X:return this.x;case XE.Y:return this.y;case XE.Z:return this.getZ()}throw new PE("Invalid ordinate index: "+t)}equals3D(t){return this.x===t.x&&this.y===t.y&&(this.getZ()===t.getZ()||kE.isNaN(this.getZ())&&kE.isNaN(t.getZ()))}equals(t){return t instanceof XE&&this.equals2D(t)}equalInZ(t,e){return GE.equalsWithTolerance(this.getZ(),t.getZ(),e)}setX(t){this.x=t}compareTo(t){const e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0}getX(){return this.x}setZ(t){this.z=t}clone(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return UE.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}}copy(){return new XE(this)}toString(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}distance3D(t){const e=this.x-t.x,n=this.y-t.y,i=this.getZ()-t.getZ();return Math.sqrt(e*e+n*n+i*i)}getY(){return this.y}setY(t){this.y=t}distance(t){const e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)}hashCode(){let t=17;return t=37*t+XE.hashCode(this.x),t=37*t+XE.hashCode(this.y),t}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}get interfaces_(){return[zE,TE,FE]}}class VE{constructor(){VE.constructor_.apply(this,arguments)}static constructor_(){if(this._dimensionsToTest=2,0===arguments.length)VE.constructor_.call(this,2);else if(1===arguments.length){const t=arguments[0];if(2!==t&&3!==t)throw new PE("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}}static compare(t,e){return t<e?-1:t>e?1:kE.isNaN(t)?kE.isNaN(e)?0:-1:kE.isNaN(e)?1:0}compare(t,e){const n=VE.compare(t.x,e.x);if(0!==n)return n;const i=VE.compare(t.y,e.y);if(0!==i)return i;if(this._dimensionsToTest<=2)return 0;return VE.compare(t.getZ(),e.getZ())}get interfaces_(){return[qE]}}XE.DimensionalComparator=VE,XE.NULL_ORDINATE=kE.NaN,XE.X=0,XE.Y=1,XE.Z=2,XE.M=3;class HE{constructor(){HE.constructor_.apply(this,arguments)}static constructor_(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof XE){const t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof HE){const t=arguments[0];this.init(t)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.init(t.x,e.x,t.y,e.y)}else if(4===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.init(t,e,n,i)}}static intersects(){if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];let r=Math.min(n.x,i.x),s=Math.max(n.x,i.x),o=Math.min(t.x,e.x),a=Math.max(t.x,e.x);return!(o>s)&&(!(a<r)&&(r=Math.min(n.y,i.y),s=Math.max(n.y,i.y),o=Math.min(t.y,e.y),a=Math.max(t.y,e.y),!(o>s)&&!(a<r)))}}getArea(){return this.getWidth()*this.getHeight()}equals(t){if(!(t instanceof HE))return!1;const e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()}intersection(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new HE;const e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,i=this._maxx<t._maxx?this._maxx:t._maxx,r=this._maxy<t._maxy?this._maxy:t._maxy;return new HE(e,i,n,r)}isNull(){return this._maxx<this._minx}getMaxX(){return this._maxx}covers(){if(1===arguments.length){if(arguments[0]instanceof XE){const t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof HE){const t=arguments[0];return!this.isNull()&&!t.isNull()&&(t.getMinX()>=this._minx&&t.getMaxX()<=this._maxx&&t.getMinY()>=this._miny&&t.getMaxY()<=this._maxy)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];return!this.isNull()&&(t>=this._minx&&t<=this._maxx&&e>=this._miny&&e<=this._maxy)}}intersects(){if(1===arguments.length){if(arguments[0]instanceof HE){const t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof XE){const t=arguments[0];return this.intersects(t.x,t.y)}}else if(2===arguments.length){if(arguments[0]instanceof XE&&arguments[1]instanceof XE){const t=arguments[0],e=arguments[1];if(this.isNull())return!1;if((t.x<e.x?t.x:e.x)>this._maxx)return!1;if((t.x>e.x?t.x:e.x)<this._minx)return!1;if((t.y<e.y?t.y:e.y)>this._maxy)return!1;return!((t.y>e.y?t.y:e.y)<this._miny)}if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1];return!this.isNull()&&!(t>this._maxx||t<this._minx||e>this._maxy||e<this._miny)}}}getMinY(){return this._miny}getDiameter(){if(this.isNull())return 0;const t=this.getWidth(),e=this.getHeight();return Math.sqrt(t*t+e*e)}getMinX(){return this._minx}expandToInclude(){if(1===arguments.length){if(arguments[0]instanceof XE){const t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof HE){const t=arguments[0];if(t.isNull())return null;this.isNull()?(this._minx=t.getMinX(),this._maxx=t.getMaxX(),this._miny=t.getMinY(),this._maxy=t.getMaxY()):(t._minx<this._minx&&(this._minx=t._minx),t._maxx>this._maxx&&(this._maxx=t._maxx),t._miny<this._miny&&(this._miny=t._miny),t._maxy>this._maxy&&(this._maxy=t._maxy))}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.isNull()?(this._minx=t,this._maxx=t,this._miny=e,this._maxy=e):(t<this._minx&&(this._minx=t),t>this._maxx&&(this._maxx=t),e<this._miny&&(this._miny=e),e>this._maxy&&(this._maxy=e))}}minExtent(){if(this.isNull())return 0;const t=this.getWidth(),e=this.getHeight();return t<e?t:e}getWidth(){return this.isNull()?0:this._maxx-this._minx}compareTo(t){const e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0}translate(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)}copy(){return new HE(this)}toString(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}setToNull(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}disjoint(t){return!(!this.isNull()&&!t.isNull())||(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}getHeight(){return this.isNull()?0:this._maxy-this._miny}maxExtent(){if(this.isNull())return 0;const t=this.getWidth(),e=this.getHeight();return t>e?t:e}expandBy(){if(1===arguments.length){const t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];if(this.isNull())return null;this._minx-=t,this._maxx+=t,this._miny-=e,this._maxy+=e,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}contains(){if(1===arguments.length){if(arguments[0]instanceof HE){const t=arguments[0];return this.covers(t)}if(arguments[0]instanceof XE){const t=arguments[0];return this.covers(t)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];return this.covers(t,e)}}centre(){return this.isNull()?null:new XE((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}init(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof XE){const t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof HE){const t=arguments[0];this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.init(t.x,e.x,t.y,e.y)}else if(4===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];t<e?(this._minx=t,this._maxx=e):(this._minx=e,this._maxx=t),n<i?(this._miny=n,this._maxy=i):(this._miny=i,this._maxy=n)}}getMaxY(){return this._maxy}distance(t){if(this.intersects(t))return 0;let e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);let n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)}hashCode(){let t=17;return t=37*t+XE.hashCode(this._minx),t=37*t+XE.hashCode(this._maxx),t=37*t+XE.hashCode(this._miny),t=37*t+XE.hashCode(this._maxy),t}get interfaces_(){return[zE,FE]}}class ZE{constructor(){ZE.constructor_.apply(this,arguments)}isGeometryCollection(){return this.getTypeCode()===ZE.TYPECODE_GEOMETRYCOLLECTION}getFactory(){return this._factory}getGeometryN(t){return this}getArea(){return 0}isRectangle(){return!1}equalsExact(t){return this===t||this.equalsExact(t,0)}geometryChanged(){this.apply(ZE.geometryChangedFilter)}geometryChangedAction(){this._envelope=null}equalsNorm(t){return null!==t&&this.norm().equalsExact(t.norm())}getLength(){return 0}getNumGeometries(){return 1}compareTo(){let t;if(1===arguments.length){const e=arguments[0];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(2===arguments.length){const e=arguments[0],n=arguments[1];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e,n)}}getUserData(){return this._userData}getSRID(){return this._SRID}getEnvelope(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}checkNotGeometryCollection(t){if(t.getTypeCode()===ZE.TYPECODE_GEOMETRYCOLLECTION)throw new PE("This method does not support GeometryCollection arguments")}equal(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n}norm(){const t=this.copy();return t.normalize(),t}reverse(){const t=this.reverseInternal();return null!=this.envelope&&(t.envelope=this.envelope.copy()),t.setSRID(this.getSRID()),t}copy(){const t=this.copyInternal();return t.envelope=null==this._envelope?null:this._envelope.copy(),t._SRID=this._SRID,t._userData=this._userData,t}getPrecisionModel(){return this._factory.getPrecisionModel()}getEnvelopeInternal(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new HE(this._envelope)}setSRID(t){this._SRID=t}setUserData(t){this._userData=t}compare(t,e){const n=t.iterator(),i=e.iterator();for(;n.hasNext()&&i.hasNext();){const t=n.next(),e=i.next(),r=t.compareTo(e);if(0!==r)return r}return n.hasNext()?1:i.hasNext()?-1:0}hashCode(){return this.getEnvelopeInternal().hashCode()}isEquivalentClass(t){return this.getClass()===t.getClass()}isGeometryCollectionOrDerived(){return this.getTypeCode()===ZE.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===ZE.TYPECODE_MULTIPOINT||this.getTypeCode()===ZE.TYPECODE_MULTILINESTRING||this.getTypeCode()===ZE.TYPECODE_MULTIPOLYGON}get interfaces_(){return[TE,zE,FE]}getClass(){return ZE}static hasNonEmptyElements(t){for(let e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1}static hasNullElements(t){for(let e=0;e<t.length;e++)if(null===t[e])return!0;return!1}}ZE.constructor_=function(t){t&&(this._envelope=null,this._userData=null,this._factory=t,this._SRID=t.getSRID())},ZE.TYPECODE_POINT=0,ZE.TYPECODE_MULTIPOINT=1,ZE.TYPECODE_LINESTRING=2,ZE.TYPECODE_LINEARRING=3,ZE.TYPECODE_MULTILINESTRING=4,ZE.TYPECODE_POLYGON=5,ZE.TYPECODE_MULTIPOLYGON=6,ZE.TYPECODE_GEOMETRYCOLLECTION=7,ZE.TYPENAME_POINT="Point",ZE.TYPENAME_MULTIPOINT="MultiPoint",ZE.TYPENAME_LINESTRING="LineString",ZE.TYPENAME_LINEARRING="LinearRing",ZE.TYPENAME_MULTILINESTRING="MultiLineString",ZE.TYPENAME_POLYGON="Polygon",ZE.TYPENAME_MULTIPOLYGON="MultiPolygon",ZE.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",ZE.geometryChangedFilter={get interfaces_(){return[DE]},filter(t){t.geometryChangedAction()}};class JE{filter(t){}}class QE{static ofLine(t){const e=t.size();if(e<=1)return 0;let n=0;const i=new XE;t.getCoordinate(0,i);let r=i.x,s=i.y;for(let o=1;o<e;o++){t.getCoordinate(o,i);const e=i.x,a=i.y,l=e-r,c=a-s;n+=Math.sqrt(l*l+c*c),r=e,s=a}return n}}class KE{}class tN{static copyCoord(t,e,n,i){const r=Math.min(t.getDimension(),n.getDimension());for(let s=0;s<r;s++)n.setOrdinate(i,s,t.getOrdinate(e,s))}static isRing(t){const e=t.size();return 0===e||!(e<=3)&&(t.getOrdinate(0,AE.X)===t.getOrdinate(e-1,AE.X)&&t.getOrdinate(0,AE.Y)===t.getOrdinate(e-1,AE.Y))}static scroll(){if(2===arguments.length){if(CE(arguments[0],AE)&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1];tN.scroll(t,e,tN.isRing(t))}else if(CE(arguments[0],AE)&&arguments[1]instanceof XE){const t=arguments[0],e=arguments[1],n=tN.indexOf(e,t);if(n<=0)return null;tN.scroll(t,n)}}else if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];if(e<=0)return null;const i=t.copy(),r=n?t.size()-1:t.size();for(let n=0;n<r;n++)for(let s=0;s<t.getDimension();s++)t.setOrdinate(n,s,i.getOrdinate((e+n)%r,s));if(n)for(let e=0;e<t.getDimension();e++)t.setOrdinate(r,e,t.getOrdinate(0,e))}}static isEqual(t,e){const n=t.size();if(n!==e.size())return!1;const i=Math.min(t.getDimension(),e.getDimension());for(let r=0;r<n;r++)for(let n=0;n<i;n++){const i=t.getOrdinate(r,n),s=e.getOrdinate(r,n);if(t.getOrdinate(r,n)!==e.getOrdinate(r,n)&&(!kE.isNaN(i)||!kE.isNaN(s)))return!1}return!0}static minCoordinateIndex(){if(1===arguments.length){const t=arguments[0];return tN.minCoordinateIndex(t,0,t.size()-1)}if(3===arguments.length){const t=arguments[0],e=arguments[2];let n=-1,i=null;for(let r=arguments[1];r<=e;r++){const e=t.getCoordinate(r);(null===i||i.compareTo(e)>0)&&(i=e,n=r)}return n}}static extend(t,e,n){const i=t.create(n,e.getDimension()),r=e.size();if(tN.copy(e,0,i,0,r),r>0)for(let t=r;t<n;t++)tN.copy(e,r-1,i,t,1);return i}static reverse(t){const e=t.size()-1,n=Math.trunc(e/2);for(let i=0;i<=n;i++)tN.swap(t,i,e-i)}static swap(t,e,n){if(e===n)return null;for(let i=0;i<t.getDimension();i++){const r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}}static copy(t,e,n,i,r){for(let s=0;s<r;s++)tN.copyCoord(t,e+s,n,i+s)}static ensureValidRing(t,e){const n=e.size();if(0===n)return e;if(n<=3)return tN.createClosedRing(t,e,4);return e.getOrdinate(0,AE.X)===e.getOrdinate(n-1,AE.X)&&e.getOrdinate(0,AE.Y)===e.getOrdinate(n-1,AE.Y)?e:tN.createClosedRing(t,e,n+1)}static indexOf(t,e){for(let n=0;n<e.size();n++)if(t.x===e.getOrdinate(n,AE.X)&&t.y===e.getOrdinate(n,AE.Y))return n;return-1}static createClosedRing(t,e,n){const i=t.create(n,e.getDimension()),r=e.size();tN.copy(e,0,i,0,r);for(let t=r;t<n;t++)tN.copy(e,0,i,t,1);return i}static minCoordinate(t){let e=null;for(let n=0;n<t.size();n++){const i=t.getCoordinate(n);(null===e||e.compareTo(i)>0)&&(e=i)}return e}}class eN extends LE{constructor(t){super(t),this.name=Object.keys({UnsupportedOperationException:eN})[0]}}class nN{static isWhitespace(t){return t<=32&&t>=0||127===t}static toUpperCase(t){return t.toUpperCase()}}class iN{static toDimensionSymbol(t){switch(t){case iN.FALSE:return iN.SYM_FALSE;case iN.TRUE:return iN.SYM_TRUE;case iN.DONTCARE:return iN.SYM_DONTCARE;case iN.P:return iN.SYM_P;case iN.L:return iN.SYM_L;case iN.A:return iN.SYM_A}throw new PE("Unknown dimension value: "+t)}static toDimensionValue(t){switch(nN.toUpperCase(t)){case iN.SYM_FALSE:return iN.FALSE;case iN.SYM_TRUE:return iN.TRUE;case iN.SYM_DONTCARE:return iN.DONTCARE;case iN.SYM_P:return iN.P;case iN.SYM_L:return iN.L;case iN.SYM_A:return iN.A}throw new PE("Unknown dimension symbol: "+t)}}iN.P=0,iN.L=1,iN.A=2,iN.FALSE=-1,iN.TRUE=-2,iN.DONTCARE=-3,iN.SYM_FALSE="F",iN.SYM_TRUE="T",iN.SYM_DONTCARE="*",iN.SYM_P="0",iN.SYM_L="1",iN.SYM_A="2";class rN{filter(t){}}class sN{filter(t,e){}isDone(){}isGeometryChanged(){}}class oN extends ZE{constructor(){super(),oN.constructor_.apply(this,arguments)}static constructor_(){if(this._points=null,0===arguments.length);else if(2===arguments.length){const t=arguments[0],e=arguments[1];ZE.constructor_.call(this,e),this.init(t)}}computeEnvelopeInternal(){return this.isEmpty()?new HE:this._points.expandEnvelope(new HE)}isRing(){return this.isClosed()&&this.isSimple()}getCoordinates(){return this._points.toCoordinateArray()}copyInternal(){return new oN(this._points.copy(),this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof ZE){const t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;const n=t;if(this._points.size()!==n._points.size())return!1;for(let t=0;t<this._points.size();t++)if(!this.equal(this._points.getCoordinate(t),n._points.getCoordinate(t),e))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){for(let t=0;t<Math.trunc(this._points.size()/2);t++){const e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e))){if(this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0){const t=this._points.copy();tN.reverse(t),this._points=t}return null}}}getCoordinate(){return this.isEmpty()?null:this._points.getCoordinate(0)}getBoundaryDimension(){return this.isClosed()?iN.FALSE:0}isClosed(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}reverseInternal(){const t=this._points.copy();return tN.reverse(t),this.getFactory().createLineString(t)}getEndPoint(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}getTypeCode(){return ZE.TYPECODE_LINESTRING}getDimension(){return 1}getLength(){return QE.ofLine(this._points)}getNumPoints(){return this._points.size()}compareToSameClass(){if(1===arguments.length){const t=arguments[0];let e=0,n=0;for(;e<this._points.size()&&n<t._points.size();){const i=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==i)return i;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){const t=arguments[0];return arguments[1].compare(this._points,t._points)}}apply(){if(CE(arguments[0],JE)){const t=arguments[0];for(let e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e))}else if(CE(arguments[0],sN)){const t=arguments[0];if(0===this._points.size())return null;for(let e=0;e<this._points.size()&&(t.filter(this._points,e),!t.isDone());e++);t.isGeometryChanged()&&this.geometryChanged()}else if(CE(arguments[0],rN)){arguments[0].filter(this)}else if(CE(arguments[0],DE)){arguments[0].filter(this)}}getBoundary(){throw new eN}isEquivalentClass(t){return t instanceof oN}getCoordinateN(t){return this._points.getCoordinate(t)}getGeometryType(){return ZE.TYPENAME_LINESTRING}getCoordinateSequence(){return this._points}isEmpty(){return 0===this._points.size()}init(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new PE("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t}isCoordinate(t){for(let e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1}getStartPoint(){return this.isEmpty()?null:this.getPointN(0)}getPointN(t){return this.getFactory().createPoint(this._points.getCoordinate(t))}get interfaces_(){return[KE]}}class aN{}class lN extends ZE{constructor(){super(),lN.constructor_.apply(this,arguments)}static constructor_(){this._coordinates=null;const t=arguments[0],e=arguments[1];ZE.constructor_.call(this,e),this.init(t)}computeEnvelopeInternal(){if(this.isEmpty())return new HE;const t=new HE;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t}getCoordinates(){return this.isEmpty()?[]:[this.getCoordinate()]}copyInternal(){return new lN(this._coordinates.copy(),this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof ZE){const t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return super.equalsExact.apply(this,arguments)}normalize(){}getCoordinate(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null}getBoundaryDimension(){return iN.FALSE}reverseInternal(){return this.getFactory().createPoint(this._coordinates.copy())}getTypeCode(){return ZE.TYPECODE_POINT}getDimension(){return 0}getNumPoints(){return this.isEmpty()?0:1}getX(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}compareToSameClass(){if(1===arguments.length){const t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){const t=arguments[0];return arguments[1].compare(this._coordinates,t._coordinates)}}apply(){if(CE(arguments[0],JE)){const t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(CE(arguments[0],sN)){const t=arguments[0];if(this.isEmpty())return null;t.filter(this._coordinates,0),t.isGeometryChanged()&&this.geometryChanged()}else if(CE(arguments[0],rN)){arguments[0].filter(this)}else if(CE(arguments[0],DE)){arguments[0].filter(this)}}getBoundary(){return this.getFactory().createGeometryCollection()}getGeometryType(){return ZE.TYPENAME_POINT}getCoordinateSequence(){return this._coordinates}getY(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}isEmpty(){return 0===this._coordinates.size()}init(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),UE.isTrue(t.size()<=1),this._coordinates=t}isSimple(){return!0}get interfaces_(){return[aN]}}class cN{static ofRing(){if(arguments[0]instanceof Array){const t=arguments[0];return Math.abs(cN.ofRingSigned(t))}if(CE(arguments[0],AE)){const t=arguments[0];return Math.abs(cN.ofRingSigned(t))}}static ofRingSigned(){if(arguments[0]instanceof Array){const t=arguments[0];if(t.length<3)return 0;let e=0;const n=t[0].x;for(let i=1;i<t.length-1;i++){const r=t[i].x-n,s=t[i+1].y;e+=r*(t[i-1].y-s)}return e/2}if(CE(arguments[0],AE)){const t=arguments[0],e=t.size();if(e<3)return 0;const n=new XE,i=new XE,r=new XE;t.getCoordinate(0,i),t.getCoordinate(1,r);const s=i.x;r.x-=s;let o=0;for(let a=1;a<e-1;a++)n.y=i.y,i.x=r.x,i.y=r.y,t.getCoordinate(a+1,r),r.x-=s,o+=i.x*(n.y-r.y);return o/2}}}class hN{add(){}addAll(){}isEmpty(){}iterator(){}size(){}toArray(){}remove(){}}class uN extends LE{constructor(t){super(t),this.name=Object.keys({IndexOutOfBoundsException:uN})[0]}}class fN extends hN{get(){}set(){}isEmpty(){}}class dN extends LE{constructor(t){super(t),this.name=Object.keys({NoSuchElementException:dN})[0]}}class gN extends fN{constructor(t){super(),this.array=[],t instanceof hN&&this.addAll(t)}get interfaces_(){return[fN,hN]}ensureCapacity(){}add(t){return 1===arguments.length?this.array.push(t):this.array.splice(arguments[0],0,arguments[1]),!0}clear(){this.array=[]}addAll(t){for(const e of t)this.array.push(e)}set(t,e){const n=this.array[t];return this.array[t]=e,n}iterator(){return new pN(this)}get(t){if(t<0||t>=this.size())throw new uN;return this.array[t]}isEmpty(){return 0===this.array.length}sort(t){t?this.array.sort(((e,n)=>t.compare(e,n))):this.array.sort()}size(){return this.array.length}toArray(){return this.array.slice()}remove(t){for(let e=0,n=this.array.length;e<n;e++)if(this.array[e]===t)return!!this.array.splice(e,1);return!1}[Symbol.iterator](){return this.array.values()}}class pN{constructor(t){this.arrayList=t,this.position=0}next(){if(this.position===this.arrayList.size())throw new dN;return this.arrayList.get(this.position++)}hasNext(){return this.position<this.arrayList.size()}set(t){return this.arrayList.set(this.position-1,t)}remove(){this.arrayList.remove(this.arrayList.get(this.position))}}class _N{static sort(){const t=arguments[0];if(1===arguments.length)t.sort(((t,e)=>t.compareTo(e)));else if(2===arguments.length)t.sort(((t,e)=>arguments[1].compare(t,e)));else if(3===arguments.length){const e=t.slice(arguments[1],arguments[2]);e.sort();const n=t.slice(0,arguments[1]).concat(e,t.slice(arguments[2],t.length));t.splice(0,t.length);for(const e of n)t.push(e)}else if(4===arguments.length){const e=t.slice(arguments[1],arguments[2]);e.sort(((t,e)=>arguments[3].compare(t,e)));const n=t.slice(0,arguments[1]).concat(e,t.slice(arguments[2],t.length));t.splice(0,t.length);for(const e of n)t.push(e)}}static asList(t){const e=new gN;for(const n of t)e.add(n);return e}static copyOf(t,e){return t.slice(0,e)}}class yN{constructor(t){this.str=t}append(t){this.str+=t}setCharAt(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)}toString(){return this.str}}class mN{constructor(t){this.value=t}intValue(){return this.value}compareTo(t){return this.value<t?-1:this.value>t?1:0}static compare(t,e){return t<e?-1:t>e?1:0}static isNan(t){return Number.isNaN(t)}static valueOf(t){return new mN(t)}}class xN{constructor(){xN.constructor_.apply(this,arguments)}static constructor_(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){const t=arguments[0];this.init(t)}else if(arguments[0]instanceof xN){const t=arguments[0];this.init(t)}else if("string"==typeof arguments[0]){const t=arguments[0];xN.constructor_.call(this,xN.parse(t))}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.init(t,e)}}static determinant(){if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];return xN.determinant(xN.valueOf(t),xN.valueOf(e),xN.valueOf(n),xN.valueOf(i))}if(arguments[3]instanceof xN&&arguments[2]instanceof xN&&arguments[0]instanceof xN&&arguments[1]instanceof xN){const t=arguments[1],e=arguments[2],n=arguments[3];return arguments[0].multiply(n).selfSubtract(t.multiply(e))}}static sqr(t){return xN.valueOf(t).selfMultiply(t)}static valueOf(){if("string"==typeof arguments[0]){const t=arguments[0];return xN.parse(t)}if("number"==typeof arguments[0]){return new xN(arguments[0])}}static sqrt(t){return xN.valueOf(t).sqrt()}static parse(t){let e=0;const n=t.length;for(;nN.isWhitespace(t.charAt(e));)e++;let i=!1;if(e<n){const n=t.charAt(e);"-"!==n&&"+"!==n||(e++,"-"===n&&(i=!0))}const r=new xN;let s=0,o=0,a=0,l=!1;for(;!(e>=n);){const n=t.charAt(e);if(e++,nN.isDigit(n)){const t=n-"0";r.selfMultiply(xN.TEN),r.selfAdd(t),s++}else{if("."!==n){if("e"===n||"E"===n){const n=t.substring(e);try{a=mN.parseInt(n)}catch(e){throw e instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+n+" in string "+t):e}break}throw new NumberFormatException("Unexpected character '"+n+"' at position "+e+" in string "+t)}o=s,l=!0}}let c=r;l||(o=s);const h=s-o-a;if(0===h)c=r;else if(h>0){const t=xN.TEN.pow(h);c=r.divide(t)}else if(h<0){const t=xN.TEN.pow(-h);c=r.multiply(t)}return i?c.negate():c}static createNaN(){return new xN(kE.NaN,kE.NaN)}static copy(t){return new xN(t)}static magnitude(t){const e=Math.abs(t),n=Math.log(e)/Math.log(10);let i=Math.trunc(Math.floor(n));return 10*Math.pow(10,i)<=e&&(i+=1),i}static stringOfChar(t,e){const n=new yN;for(let i=0;i<e;i++)n.append(t);return n.toString()}le(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo}extractSignificantDigits(t,e){let n=this.abs(),i=xN.magnitude(n._hi);const r=xN.TEN.pow(i);n=n.divide(r),n.gt(xN.TEN)?(n=n.divide(xN.TEN),i+=1):n.lt(xN.ONE)&&(n=n.multiply(xN.TEN),i-=1);const s=i+1,o=new yN,a=xN.MAX_PRINT_DIGITS-1;for(let e=0;e<=a;e++){t&&e===s&&o.append(".");const i=Math.trunc(n._hi);if(i<0)break;let r=!1,l=0;i>9?(r=!0,l="9"):l="0"+i,o.append(l),n=n.subtract(xN.valueOf(i)).multiply(xN.TEN),r&&n.selfAdd(xN.TEN);let c=!0;const h=xN.magnitude(n._hi);if(h<0&&Math.abs(h)>=a-e&&(c=!1),!c)break}return e[0]=i,o.toString()}sqr(){return this.multiply(this)}doubleValue(){return this._hi+this._lo}subtract(){if(arguments[0]instanceof xN){const t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){const t=arguments[0];return this.add(-t)}}equals(){if(1===arguments.length&&arguments[0]instanceof xN){const t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}}isZero(){return 0===this._hi&&0===this._lo}selfSubtract(){if(arguments[0]instanceof xN){const t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){const t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}}getSpecialNumberString(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}min(t){return this.le(t)?this:t}selfDivide(){if(1===arguments.length){if(arguments[0]instanceof xN){const t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){const t=arguments[0];return this.selfDivide(t,0)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];let n=null,i=null,r=null,s=null,o=null,a=null,l=null,c=null;return o=this._hi/t,a=xN.SPLIT*o,n=a-o,c=xN.SPLIT*t,n=a-n,i=o-n,r=c-t,l=o*t,r=c-r,s=t-r,c=n*r-l+n*s+i*r+i*s,a=(this._hi-l-c+this._lo-o*e)/t,c=o+a,this._hi=c,this._lo=o-c+a,this}}dump(){return"DD<"+this._hi+", "+this._lo+">"}divide(){if(arguments[0]instanceof xN){const t=arguments[0];let e=null,n=null,i=null,r=null,s=null,o=null,a=null,l=null;s=this._hi/t._hi,o=xN.SPLIT*s,e=o-s,l=xN.SPLIT*t._hi,e=o-e,n=s-e,i=l-t._hi,a=s*t._hi,i=l-i,r=t._hi-i,l=e*i-a+e*r+n*i+n*r,o=(this._hi-a-l+this._lo-s*t._lo)/t._hi,l=s+o;return new xN(l,s-l+o)}if("number"==typeof arguments[0]){const t=arguments[0];return kE.isNaN(t)?xN.createNaN():xN.copy(this).selfDivide(t,0)}}ge(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo}pow(t){if(0===t)return xN.valueOf(1);let e=new xN(this),n=xN.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2==1&&n.selfMultiply(e),i/=2,i>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n}ceil(){if(this.isNaN())return xN.NaN;const t=Math.ceil(this._hi);let e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new xN(t,e)}compareTo(t){const e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0}rint(){if(this.isNaN())return this;return this.add(.5).floor()}setValue(){if(arguments[0]instanceof xN){const t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){const t=arguments[0];return this.init(t),this}}max(t){return this.ge(t)?this:t}sqrt(){if(this.isZero())return xN.valueOf(0);if(this.isNegative())return xN.NaN;const t=1/Math.sqrt(this._hi),e=this._hi*t,n=xN.valueOf(e),i=this.subtract(n.sqr())._hi*(.5*t);return n.add(i)}selfAdd(){if(1===arguments.length){if(arguments[0]instanceof xN){const t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){const t=arguments[0];let e=null,n=null,i=null,r=null,s=null,o=null;return i=this._hi+t,s=i-this._hi,r=i-s,r=t-s+(this._hi-r),o=r+this._lo,e=i+o,n=o+(i-e),this._hi=e+n,this._lo=n+(e-this._hi),this}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];let n=null,i=null,r=null,s=null,o=null,a=null,l=null,c=null;o=this._hi+t,r=this._lo+e,l=o-this._hi,c=r-this._lo,a=o-l,s=r-c,a=t-l+(this._hi-a),s=e-c+(this._lo-s),l=a+r,n=o+l,i=l+(o-n),l=s+i;const h=n+l,u=l+(n-h);return this._hi=h,this._lo=u,this}}selfMultiply(){if(1===arguments.length){if(arguments[0]instanceof xN){const t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){const t=arguments[0];return this.selfMultiply(t,0)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];let n=null,i=null,r=null,s=null,o=null,a=null;o=xN.SPLIT*this._hi,n=o-this._hi,a=xN.SPLIT*t,n=o-n,i=this._hi-n,r=a-t,o=this._hi*t,r=a-r,s=t-r,a=n*r-o+n*s+i*r+i*s+(this._hi*e+this._lo*t);const l=o+a;n=o-l;const c=a+n;return this._hi=l,this._lo=c,this}}selfSqr(){return this.selfMultiply(this)}floor(){if(this.isNaN())return xN.NaN;const t=Math.floor(this._hi);let e=0;return t===this._hi&&(e=Math.floor(this._lo)),new xN(t,e)}negate(){return this.isNaN()?this:new xN(-this._hi,-this._lo)}clone(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}}multiply(){if(arguments[0]instanceof xN){const t=arguments[0];return t.isNaN()?xN.createNaN():xN.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){const t=arguments[0];return kE.isNaN(t)?xN.createNaN():xN.copy(this).selfMultiply(t,0)}}isNaN(){return kE.isNaN(this._hi)}intValue(){return Math.trunc(this._hi)}toString(){const t=xN.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()}toStandardNotation(){const t=this.getSpecialNumberString();if(null!==t)return t;const e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),i=e[0]+1;let r=n;if("."===n.charAt(0))r="0"+n;else if(i<0)r="0."+xN.stringOfChar("0",-i)+n;else if(-1===n.indexOf(".")){const t=i-n.length;r=n+xN.stringOfChar("0",t)+".0"}return this.isNegative()?"-"+r:r}reciprocal(){let t=null,e=null,n=null,i=null,r=null,s=null,o=null,a=null;r=1/this._hi,s=xN.SPLIT*r,t=s-r,a=xN.SPLIT*this._hi,t=s-t,e=r-t,n=a-this._hi,o=r*this._hi,n=a-n,i=this._hi-n,a=t*n-o+t*i+e*n+e*i,s=(1-o-a-r*this._lo)/this._hi;const l=r+s;return new xN(l,r-l+s)}toSciNotation(){if(this.isZero())return xN.SCI_NOT_ZERO;const t=this.getSpecialNumberString();if(null!==t)return t;const e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),i=xN.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new IllegalStateException("Found leading zero: "+n);let r="";n.length>1&&(r=n.substring(1));const s=n.charAt(0)+"."+r;return this.isNegative()?"-"+s+i:s+i}abs(){return this.isNaN()?xN.NaN:this.isNegative()?this.negate():new xN(this)}isPositive(){return this._hi>0||0===this._hi&&this._lo>0}lt(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo}add(){if(arguments[0]instanceof xN){const t=arguments[0];return xN.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){const t=arguments[0];return xN.copy(this).selfAdd(t)}}init(){if(1===arguments.length){if("number"==typeof arguments[0]){const t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof xN){const t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this._hi=t,this._lo=e}}gt(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo}isNegative(){return this._hi<0||0===this._hi&&this._lo<0}trunc(){return this.isNaN()?xN.NaN:this.isPositive()?this.floor():this.ceil()}signum(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}get interfaces_(){return[FE,zE,TE]}}xN.PI=new xN(3.141592653589793,12246467991473532e-32),xN.TWO_PI=new xN(6.283185307179586,24492935982947064e-32),xN.PI_2=new xN(1.5707963267948966,6123233995736766e-32),xN.E=new xN(2.718281828459045,14456468917292502e-32),xN.NaN=new xN(kE.NaN,kE.NaN),xN.EPS=123259516440783e-46,xN.SPLIT=134217729,xN.MAX_PRINT_DIGITS=32,xN.TEN=xN.valueOf(10),xN.ONE=xN.valueOf(1),xN.SCI_NOT_EXPONENT_CHAR="E",xN.SCI_NOT_ZERO="0.0E0";class bN{static orientationIndex(t,e,n){const i=bN.orientationIndexFilter(t,e,n);if(i<=1)return i;const r=xN.valueOf(e.x).selfAdd(-t.x),s=xN.valueOf(e.y).selfAdd(-t.y),o=xN.valueOf(n.x).selfAdd(-e.x),a=xN.valueOf(n.y).selfAdd(-e.y);return r.selfMultiply(a).selfSubtract(s.selfMultiply(o)).signum()}static signOfDet2x2(){if(arguments[3]instanceof xN&&arguments[2]instanceof xN&&arguments[0]instanceof xN&&arguments[1]instanceof xN){const t=arguments[1],e=arguments[2],n=arguments[3];return arguments[0].multiply(n).selfSubtract(t.multiply(e)).signum()}if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3],r=xN.valueOf(t),s=xN.valueOf(e),o=xN.valueOf(n),a=xN.valueOf(i);return r.multiply(a).selfSubtract(s.multiply(o)).signum()}}static intersection(t,e,n,i){const r=new xN(t.y).selfSubtract(e.y),s=new xN(e.x).selfSubtract(t.x),o=new xN(t.x).selfMultiply(e.y).selfSubtract(new xN(e.x).selfMultiply(t.y)),a=new xN(n.y).selfSubtract(i.y),l=new xN(i.x).selfSubtract(n.x),c=new xN(n.x).selfMultiply(i.y).selfSubtract(new xN(i.x).selfMultiply(n.y)),h=s.multiply(c).selfSubtract(l.multiply(o)),u=a.multiply(o).selfSubtract(r.multiply(c)),f=r.multiply(l).selfSubtract(a.multiply(s)),d=h.selfDivide(f).doubleValue(),g=u.selfDivide(f).doubleValue();return kE.isNaN(d)||kE.isInfinite(d)||kE.isNaN(g)||kE.isInfinite(g)?null:new XE(d,g)}static orientationIndexFilter(t,e,n){let i=null;const r=(t.x-n.x)*(e.y-n.y),s=(t.y-n.y)*(e.x-n.x),o=r-s;if(r>0){if(s<=0)return bN.signum(o);i=r+s}else{if(!(r<0))return bN.signum(o);if(s>=0)return bN.signum(o);i=-r-s}const a=bN.DP_SAFE_EPSILON*i;return o>=a||-o>=a?bN.signum(o):2}static signum(t){return t>0?1:t<0?-1:0}}bN.DP_SAFE_EPSILON=1e-15;class vN{static index(t,e,n){return bN.orientationIndex(t,e,n)}static isCCW(){if(arguments[0]instanceof Array){const t=arguments[0],e=t.length-1;if(e<3)throw new PE("Ring has fewer than 4 points, so orientation cannot be determined");let n=t[0],i=0;for(let r=1;r<=e;r++){const e=t[r];e.y>n.y&&(n=e,i=r)}let r=i;do{r-=1,r<0&&(r=e)}while(t[r].equals2D(n)&&r!==i);let s=i;do{s=(s+1)%e}while(t[s].equals2D(n)&&s!==i);const o=t[r],a=t[s];if(o.equals2D(n)||a.equals2D(n)||o.equals2D(a))return!1;const l=vN.index(o,n,a);let c=null;return c=0===l?o.x>a.x:l>0,c}if(CE(arguments[0],AE)){const t=arguments[0],e=t.size()-1;if(e<3)throw new PE("Ring has fewer than 4 points, so orientation cannot be determined");let n=t.getCoordinate(0),i=0;for(let r=1;r<=e;r++){const e=t.getCoordinate(r);e.y>n.y&&(n=e,i=r)}let r=null,s=i;do{s-=1,s<0&&(s=e),r=t.getCoordinate(s)}while(r.equals2D(n)&&s!==i);let o=null,a=i;do{a=(a+1)%e,o=t.getCoordinate(a)}while(o.equals2D(n)&&a!==i);if(r.equals2D(n)||o.equals2D(n)||r.equals2D(o))return!1;const l=vN.index(r,n,o);let c=null;return c=0===l?r.x>o.x:l>0,c}}}vN.CLOCKWISE=-1,vN.RIGHT=vN.CLOCKWISE,vN.COUNTERCLOCKWISE=1,vN.LEFT=vN.COUNTERCLOCKWISE,vN.COLLINEAR=0,vN.STRAIGHT=vN.COLLINEAR;class MN{}class wN extends ZE{constructor(){super(),wN.constructor_.apply(this,arguments)}static constructor_(){this._shell=null,this._holes=null;let t=arguments[0],e=arguments[1],n=arguments[2];if(ZE.constructor_.call(this,n),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),ZE.hasNullElements(e))throw new PE("holes must not contain null elements");if(t.isEmpty()&&ZE.hasNonEmptyElements(e))throw new PE("shell is empty but holes are not");this._shell=t,this._holes=e}computeEnvelopeInternal(){return this._shell.getEnvelopeInternal()}getCoordinates(){if(this.isEmpty())return[];const t=new Array(this.getNumPoints()).fill(null);let e=-1;const n=this._shell.getCoordinates();for(let i=0;i<n.length;i++)e++,t[e]=n[i];for(let n=0;n<this._holes.length;n++){const i=this._holes[n].getCoordinates();for(let n=0;n<i.length;n++)e++,t[e]=i[n]}return t}getArea(){let t=0;t+=cN.ofRing(this._shell.getCoordinateSequence());for(let e=0;e<this._holes.length;e++)t-=cN.ofRing(this._holes[e].getCoordinateSequence());return t}copyInternal(){const t=this._shell.copy(),e=new Array(this._holes.length).fill(null);for(let t=0;t<this._holes.length;t++)e[t]=this._holes[t].copy();return new wN(t,e,this._factory)}isRectangle(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;const t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal();for(let n=0;n<5;n++){const i=t.getX(n);if(i!==e.getMinX()&&i!==e.getMaxX())return!1;const r=t.getY(n);if(r!==e.getMinY()&&r!==e.getMaxY())return!1}let n=t.getX(0),i=t.getY(0);for(let e=1;e<=4;e++){const r=t.getX(e),s=t.getY(e);if(r!==n===(s!==i))return!1;n=r,i=s}return!0}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof ZE){const t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;const n=t,i=this._shell,r=n._shell;if(!i.equalsExact(r,e))return!1;if(this._holes.length!==n._holes.length)return!1;for(let t=0;t<this._holes.length;t++)if(!this._holes[t].equalsExact(n._holes[t],e))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){if(0===arguments.length){this._shell=this.normalized(this._shell,!0);for(let t=0;t<this._holes.length;t++)this._holes[t]=this.normalized(this._holes[t],!1);_N.sort(this._holes)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];if(t.isEmpty())return null;const n=t.getCoordinateSequence(),i=tN.minCoordinateIndex(n,0,n.size()-2);tN.scroll(n,i,!0),vN.isCCW(n)===e&&tN.reverse(n)}}getCoordinate(){return this._shell.getCoordinate()}getNumInteriorRing(){return this._holes.length}getBoundaryDimension(){return 1}reverseInternal(){const t=this.getExteriorRing().reverse(),e=new Array(this.getNumInteriorRing()).fill(null);for(let t=0;t<e.length;t++)e[t]=this.getInteriorRingN(t).reverse();return this.getFactory().createPolygon(t,e)}getTypeCode(){return ZE.TYPECODE_POLYGON}getDimension(){return 2}getLength(){let t=0;t+=this._shell.getLength();for(let e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t}getNumPoints(){let t=this._shell.getNumPoints();for(let e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t}convexHull(){return this.getExteriorRing().convexHull()}normalized(t,e){const n=t.copy();return this.normalize(n,e),n}compareToSameClass(){if(1===arguments.length){const t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){const t=arguments[1],e=arguments[0],n=this._shell,i=e._shell,r=n.compareToSameClass(i,t);if(0!==r)return r;const s=this.getNumInteriorRing(),o=e.getNumInteriorRing();let a=0;for(;a<s&&a<o;){const n=this.getInteriorRingN(a),i=e.getInteriorRingN(a),r=n.compareToSameClass(i,t);if(0!==r)return r;a++}return a<s?1:a<o?-1:0}}apply(){if(CE(arguments[0],JE)){const t=arguments[0];this._shell.apply(t);for(let e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(CE(arguments[0],sN)){const t=arguments[0];if(this._shell.apply(t),!t.isDone())for(let e=0;e<this._holes.length&&(this._holes[e].apply(t),!t.isDone());e++);t.isGeometryChanged()&&this.geometryChanged()}else if(CE(arguments[0],rN)){arguments[0].filter(this)}else if(CE(arguments[0],DE)){const t=arguments[0];t.filter(this),this._shell.apply(t);for(let e=0;e<this._holes.length;e++)this._holes[e].apply(t)}}getBoundary(){if(this.isEmpty())return this.getFactory().createMultiLineString();const t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(let e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)}getGeometryType(){return ZE.TYPENAME_POLYGON}getExteriorRing(){return this._shell}isEmpty(){return this._shell.isEmpty()}getInteriorRingN(t){return this._holes[t]}get interfaces_(){return[MN]}}class EN extends hN{contains(){}}class NN extends EN{}class IN extends NN{constructor(t){super(),this.array=[],t instanceof hN&&this.addAll(t)}contains(t){for(const e of this.array)if(0===e.compareTo(t))return!0;return!1}add(t){if(this.contains(t))return!1;for(let e=0,n=this.array.length;e<n;e++){if(1===this.array[e].compareTo(t))return!!this.array.splice(e,0,t)}return this.array.push(t),!0}addAll(t){for(const e of t)this.add(e);return!0}remove(){throw new eN}size(){return this.array.length}isEmpty(){return 0===this.array.length}toArray(){return this.array.slice()}iterator(){return new SN(this.array)}}class SN{constructor(t){this.array=t,this.position=0}next(){if(this.position===this.array.length)throw new dN;return this.array[this.position++]}hasNext(){return this.position<this.array.length}remove(){throw new eN}}class CN extends ZE{constructor(){super(),CN.constructor_.apply(this,arguments)}static constructor_(){if(this._geometries=null,0===arguments.length);else if(2===arguments.length){let t=arguments[0],e=arguments[1];if(ZE.constructor_.call(this,e),null===t&&(t=[]),ZE.hasNullElements(t))throw new PE("geometries must not contain null elements");this._geometries=t}}computeEnvelopeInternal(){const t=new HE;for(let e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t}getGeometryN(t){return this._geometries[t]}getCoordinates(){const t=new Array(this.getNumPoints()).fill(null);let e=-1;for(let n=0;n<this._geometries.length;n++){const i=this._geometries[n].getCoordinates();for(let n=0;n<i.length;n++)e++,t[e]=i[n]}return t}getArea(){let t=0;for(let e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t}copyInternal(){const t=new Array(this._geometries.length).fill(null);for(let e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new CN(t,this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof ZE){const t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;const n=t;if(this._geometries.length!==n._geometries.length)return!1;for(let t=0;t<this._geometries.length;t++)if(!this._geometries[t].equalsExact(n._geometries[t],e))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){for(let t=0;t<this._geometries.length;t++)this._geometries[t].normalize();_N.sort(this._geometries)}getCoordinate(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}getBoundaryDimension(){let t=iN.FALSE;for(let e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t}reverseInternal(){const t=this._geometries.length,e=new gN(t);for(let n=0;n<t;n++)e.add(this._geometries[n].reverse());return this.getFactory().buildGeometry(e)}getTypeCode(){return ZE.TYPECODE_GEOMETRYCOLLECTION}getDimension(){let t=iN.FALSE;for(let e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t}getLength(){let t=0;for(let e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t}getNumPoints(){let t=0;for(let e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t}getNumGeometries(){return this._geometries.length}compareToSameClass(){if(1===arguments.length){const t=arguments[0],e=new IN(_N.asList(this._geometries)),n=new IN(_N.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){const t=arguments[1],e=arguments[0],n=this.getNumGeometries(),i=e.getNumGeometries();let r=0;for(;r<n&&r<i;){const n=this.getGeometryN(r),i=e.getGeometryN(r),s=n.compareToSameClass(i,t);if(0!==s)return s;r++}return r<n?1:r<i?-1:0}}apply(){if(CE(arguments[0],JE)){const t=arguments[0];for(let e=0;e<this._geometries.length;e++)this._geometries[e].apply(t)}else if(CE(arguments[0],sN)){const t=arguments[0];if(0===this._geometries.length)return null;for(let e=0;e<this._geometries.length&&(this._geometries[e].apply(t),!t.isDone());e++);t.isGeometryChanged()&&this.geometryChanged()}else if(CE(arguments[0],rN)){const t=arguments[0];t.filter(this);for(let e=0;e<this._geometries.length;e++)this._geometries[e].apply(t)}else if(CE(arguments[0],DE)){const t=arguments[0];t.filter(this);for(let e=0;e<this._geometries.length;e++)this._geometries[e].apply(t)}}getBoundary(){return ZE.checkNotGeometryCollection(this),UE.shouldNeverReachHere(),null}getGeometryType(){return ZE.TYPENAME_GEOMETRYCOLLECTION}isEmpty(){for(let t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0}}class ON extends CN{constructor(){super(),ON.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0],e=arguments[1];CN.constructor_.call(this,t,e)}copyInternal(){const t=new Array(this._geometries.length).fill(null);for(let e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new ON(t,this._factory)}isValid(){return!0}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof ZE){const t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,e)}return super.equalsExact.apply(this,arguments)}getCoordinate(){if(1===arguments.length&&Number.isInteger(arguments[0])){const t=arguments[0];return this._geometries[t].getCoordinate()}return super.getCoordinate.apply(this,arguments)}getBoundaryDimension(){return iN.FALSE}getTypeCode(){return ZE.TYPECODE_MULTIPOINT}getDimension(){return 0}getBoundary(){return this.getFactory().createGeometryCollection()}getGeometryType(){return ZE.TYPENAME_MULTIPOINT}get interfaces_(){return[aN]}}class kN extends oN{constructor(){super(),kN.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0],e=arguments[1];oN.constructor_.call(this,t,e),this.validateConstruction()}copyInternal(){return new kN(this._points.copy(),this._factory)}getBoundaryDimension(){return iN.FALSE}isClosed(){return!!this.isEmpty()||super.isClosed.call(this)}reverseInternal(){const t=this._points.copy();return tN.reverse(t),this.getFactory().createLinearRing(t)}getTypeCode(){return ZE.TYPECODE_LINEARRING}validateConstruction(){if(!this.isEmpty()&&!super.isClosed.call(this))throw new PE("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<kN.MINIMUM_VALID_SIZE)throw new PE("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}getGeometryType(){return ZE.TYPENAME_LINEARRING}}kN.MINIMUM_VALID_SIZE=4;class TN extends XE{constructor(){super(),TN.constructor_.apply(this,arguments)}static constructor_(){if(0===arguments.length)XE.constructor_.call(this);else if(1===arguments.length){if(arguments[0]instanceof TN){const t=arguments[0];XE.constructor_.call(this,t.x,t.y)}else if(arguments[0]instanceof XE){const t=arguments[0];XE.constructor_.call(this,t.x,t.y)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];XE.constructor_.call(this,t,e,XE.NULL_ORDINATE)}}setOrdinate(t,e){switch(t){case TN.X:this.x=e;break;case TN.Y:this.y=e;break;default:throw new PE("Invalid ordinate index: "+t)}}getZ(){return XE.NULL_ORDINATE}getOrdinate(t){switch(t){case TN.X:return this.x;case TN.Y:return this.y}throw new PE("Invalid ordinate index: "+t)}setZ(t){throw new PE("CoordinateXY dimension 2 does not support z-ordinate")}copy(){return new TN(this)}toString(){return"("+this.x+", "+this.y+")"}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}}TN.X=0,TN.Y=1,TN.Z=-1,TN.M=-1;class AN extends XE{constructor(){super(),AN.constructor_.apply(this,arguments)}static constructor_(){if(this._m=null,0===arguments.length)XE.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof AN){const t=arguments[0];XE.constructor_.call(this,t.x,t.y),this._m=t._m}else if(arguments[0]instanceof XE){const t=arguments[0];XE.constructor_.call(this,t.x,t.y),this._m=this.getM()}}else if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];XE.constructor_.call(this,t,e,XE.NULL_ORDINATE),this._m=n}}getM(){return this._m}setOrdinate(t,e){switch(t){case AN.X:this.x=e;break;case AN.Y:this.y=e;break;case AN.M:this._m=e;break;default:throw new PE("Invalid ordinate index: "+t)}}setM(t){this._m=t}getZ(){return XE.NULL_ORDINATE}getOrdinate(t){switch(t){case AN.X:return this.x;case AN.Y:return this.y;case AN.M:return this._m}throw new PE("Invalid ordinate index: "+t)}setZ(t){throw new PE("CoordinateXY dimension 2 does not support z-ordinate")}copy(){return new AN(this)}toString(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}}AN.X=0,AN.Y=1,AN.Z=-1,AN.M=2;class RN extends XE{constructor(){super(),RN.constructor_.apply(this,arguments)}static constructor_(){if(this._m=null,0===arguments.length)XE.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof RN){const t=arguments[0];XE.constructor_.call(this,t),this._m=t._m}else if(arguments[0]instanceof XE){const t=arguments[0];XE.constructor_.call(this,t),this._m=this.getM()}}else if(4===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];XE.constructor_.call(this,t,e,n),this._m=i}}getM(){return this._m}setOrdinate(t,e){switch(t){case XE.X:this.x=e;break;case XE.Y:this.y=e;break;case XE.Z:this.z=e;break;case XE.M:this._m=e;break;default:throw new PE("Invalid ordinate index: "+t)}}setM(t){this._m=t}getOrdinate(t){switch(t){case XE.X:return this.x;case XE.Y:return this.y;case XE.Z:return this.getZ();case XE.M:return this.getM()}throw new PE("Invalid ordinate index: "+t)}copy(){return new RN(this)}toString(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}}class LN{static measures(t){return t instanceof TN?0:t instanceof AN||t instanceof RN?1:0}static dimension(t){return t instanceof TN?2:t instanceof AN?3:t instanceof RN?4:3}static create(){if(1===arguments.length){const t=arguments[0];return LN.create(t,0)}if(2===arguments.length){const t=arguments[0],e=arguments[1];return 2===t?new TN:3===t&&0===e?new XE:3===t&&1===e?new AN:4===t&&1===e?new RN:new XE}}}class PN extends gN{constructor(){super(),PN.constructor_.apply(this,arguments)}static constructor_(){if(0===arguments.length);else if(1===arguments.length){const t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.ensureCapacity(t.length),this.add(t,e)}}getCoordinate(t){return this.get(t)}addAll(){if(2===arguments.length&&"boolean"==typeof arguments[1]&&CE(arguments[0],hN)){const t=arguments[1];let e=!1;for(let n=arguments[0].iterator();n.hasNext();)this.add(n.next(),t),e=!0;return e}return super.addAll.apply(this,arguments)}clone(){const t=super.clone.call(this);for(let e=0;e<this.size();e++)t.add(e,this.get(e).clone());return t}toCoordinateArray(){if(0===arguments.length)return this.toArray(PN.coordArrayType);if(1===arguments.length){if(arguments[0])return this.toArray(PN.coordArrayType);const t=this.size(),e=new Array(t).fill(null);for(let n=0;n<t;n++)e[n]=this.get(t-n-1);return e}}add(){if(1===arguments.length){const t=arguments[0];return super.add.call(this,t)}if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){const t=arguments[0],e=arguments[1];return this.add(t,e,!0),!0}if(arguments[0]instanceof XE&&"boolean"==typeof arguments[1]){const t=arguments[0];if(!arguments[1]&&this.size()>=1){if(this.get(this.size()-1).equals2D(t))return null}super.add.call(this,t)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){const t=arguments[0],e=arguments[1];return this.add(t,e),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){const t=arguments[0],e=arguments[1];if(arguments[2])for(let n=0;n<t.length;n++)this.add(t[n],e);else for(let n=t.length-1;n>=0;n--)this.add(t[n],e);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof XE){const t=arguments[0],e=arguments[1];if(!arguments[2]){const n=this.size();if(n>0){if(t>0){if(this.get(t-1).equals2D(e))return null}if(t<n){if(this.get(t).equals2D(e))return null}}}super.add.call(this,t,e)}}else if(4===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];let r=1;n>i&&(r=-1);for(let s=n;s!==i;s+=r)this.add(t[s],e);return!0}}closeRing(){if(this.size()>0){const t=this.get(0).copy();this.add(t,!1)}}}PN.coordArrayType=new Array(0).fill(null);class DN{static log10(t){const e=Math.log(t);return kE.isInfinite(e)||kE.isNaN(e)?e:e/DN.LOG_10}static min(t,e,n,i){let r=t;return e<r&&(r=e),n<r&&(r=n),i<r&&(r=i),r}static clamp(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}}static wrap(t,e){return t<0?e- -t%e:t%e}static max(){if(3===arguments.length){const t=arguments[1],e=arguments[2];let n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){const t=arguments[1],e=arguments[2],n=arguments[3];let i=arguments[0];return t>i&&(i=t),e>i&&(i=e),n>i&&(i=n),i}}static average(t,e){return(t+e)/2}}DN.LOG_10=Math.log(10);class zN{static arraycopy(t,e,n,i,r){let s=0;for(let o=e;o<e+r;o++)n[i+s]=t[o],s++}static getProperty(t){return{"line.separator":"\n"}[t]}}class FN{static isRing(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])}static ptNotInList(t,e){for(let n=0;n<t.length;n++){const i=t[n];if(FN.indexOf(i,e)<0)return i}return null}static scroll(t,e){const n=FN.indexOf(e,t);if(n<0)return null;const i=new Array(t.length).fill(null);zN.arraycopy(t,n,i,0,t.length-n),zN.arraycopy(t,0,i,t.length-n,n),zN.arraycopy(i,0,t,0,t.length)}static equals(){if(2===arguments.length){const t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(0!==n.compare(t[i],e[i]))return!1;return!0}}static intersection(t,e){const n=new PN;for(let i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()}static measures(t){if(null===t||0===t.length)return 0;let e=0;for(const n of t)e=Math.max(e,LN.measures(n));return e}static hasRepeatedPoints(t){for(let e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1}static removeRepeatedPoints(t){if(!FN.hasRepeatedPoints(t))return t;return new PN(t,!1).toCoordinateArray()}static reverse(t){const e=t.length-1,n=Math.trunc(e/2);for(let i=0;i<=n;i++){const n=t[i];t[i]=t[e-i],t[e-i]=n}}static removeNull(t){let e=0;for(let n=0;n<t.length;n++)null!==t[n]&&e++;const n=new Array(e).fill(null);if(0===e)return n;let i=0;for(let e=0;e<t.length;e++)null!==t[e]&&(n[i++]=t[e]);return n}static copyDeep(){if(1===arguments.length){const t=arguments[0],e=new Array(t.length).fill(null);for(let n=0;n<t.length;n++)e[n]=t[n].copy();return e}if(5===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3],r=arguments[4];for(let s=0;s<r;s++)n[i+s]=t[e+s].copy()}}static isEqualReversed(t,e){for(let n=0;n<t.length;n++){const i=t[n],r=e[t.length-n-1];if(0!==i.compareTo(r))return!1}return!0}static envelope(t){const e=new HE;for(let n=0;n<t.length;n++)e.expandToInclude(t[n]);return e}static toCoordinateArray(t){return t.toArray(FN.coordArrayType)}static dimension(t){if(null===t||0===t.length)return 3;let e=0;for(const n of t)e=Math.max(e,LN.dimension(n));return e}static atLeastNCoordinatesOrNothing(t,e){return e.length>=t?e:[]}static indexOf(t,e){for(let n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1}static increasingDirection(t){for(let e=0;e<Math.trunc(t.length/2);e++){const n=t.length-1-e,i=t[e].compareTo(t[n]);if(0!==i)return i}return 1}static compare(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0}static minCoordinate(t){let e=null;for(let n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e}static extract(t,e,n){e=DN.clamp(e,0,t.length);let i=(n=DN.clamp(n,-1,t.length))-e+1;n<0&&(i=0),e>=t.length&&(i=0),n<e&&(i=0);const r=new Array(i).fill(null);if(0===i)return r;let s=0;for(let i=e;i<=n;i++)r[s++]=t[i];return r}}FN.ForwardComparator=class{compare(t,e){const n=t,i=e;return FN.compare(n,i)}get interfaces_(){return[qE]}},FN.BidirectionalComparator=class{compare(t,e){const n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;const r=FN.compare(n,i);return FN.isEqualReversed(n,i)?0:r}OLDcompare(t,e){const n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;const r=FN.increasingDirection(n),s=FN.increasingDirection(i);let o=r>0?0:n.length-1,a=s>0?0:n.length-1;for(let t=0;t<n.length;t++){const t=n[o].compareTo(i[a]);if(0!==t)return t;o+=r,a+=s}return 0}get interfaces_(){return[qE]}},FN.coordArrayType=new Array(0).fill(null);class GN{constructor(t){this.str=t}append(t){this.str+=t}setCharAt(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)}toString(){return this.str}}class qN{constructor(){qN.constructor_.apply(this,arguments)}static constructor_(){if(this._dimension=3,this._measures=0,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){const t=arguments[0];qN.constructor_.call(this,t,FN.dimension(t),FN.measures(t))}else if(Number.isInteger(arguments[0])){const t=arguments[0];this._coordinates=new Array(t).fill(null);for(let e=0;e<t;e++)this._coordinates[e]=new XE}else if(CE(arguments[0],AE)){const t=arguments[0];if(null===t)return this._coordinates=new Array(0).fill(null),null;this._dimension=t.getDimension(),this._measures=t.getMeasures(),this._coordinates=new Array(t.size()).fill(null);for(let e=0;e<this._coordinates.length;e++)this._coordinates[e]=t.getCoordinateCopy(e)}}else if(2===arguments.length){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1];qN.constructor_.call(this,t,e,FN.measures(t))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1];this._coordinates=new Array(t).fill(null),this._dimension=e;for(let n=0;n<t;n++)this._coordinates[n]=LN.create(e)}}else if(3===arguments.length)if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1],n=arguments[2];this._dimension=e,this._measures=n,this._coordinates=null===t?new Array(0).fill(null):t}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1],n=arguments[2];this._coordinates=new Array(t).fill(null),this._dimension=e,this._measures=n;for(let e=0;e<t;e++)this._coordinates[e]=this.createCoordinate()}}getM(t){return this.hasM()?this._coordinates[t].getM():kE.NaN}setOrdinate(t,e,n){switch(e){case AE.X:this._coordinates[t].x=n;break;case AE.Y:this._coordinates[t].y=n;break;default:this._coordinates[t].setOrdinate(e,n)}}getZ(t){return this.hasZ()?this._coordinates[t].getZ():kE.NaN}size(){return this._coordinates.length}getOrdinate(t,e){switch(e){case AE.X:return this._coordinates[t].x;case AE.Y:return this._coordinates[t].y;default:return this._coordinates[t].getOrdinate(e)}}getCoordinate(){if(1===arguments.length){const t=arguments[0];return this._coordinates[t]}if(2===arguments.length){const t=arguments[0];arguments[1].setCoordinate(this._coordinates[t])}}getCoordinateCopy(t){const e=this.createCoordinate();return e.setCoordinate(this._coordinates[t]),e}createCoordinate(){return LN.create(this.getDimension(),this.getMeasures())}getDimension(){return this._dimension}getX(t){return this._coordinates[t].x}getMeasures(){return this._measures}expandEnvelope(t){for(let e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t}copy(){const t=new Array(this.size()).fill(null);for(let e=0;e<this._coordinates.length;e++){const n=this.createCoordinate();n.setCoordinate(this._coordinates[e]),t[e]=n}return new qN(t,this._dimension,this._measures)}toString(){if(this._coordinates.length>0){const t=new GN(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(let e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"}getY(t){return this._coordinates[t].y}toCoordinateArray(){return this._coordinates}get interfaces_(){return[AE,FE]}}class jN{static instance(){return jN.instanceObject}readResolve(){return jN.instance()}create(){if(1===arguments.length){if(arguments[0]instanceof Array){return new qN(arguments[0])}if(CE(arguments[0],AE)){return new qN(arguments[0])}}else{if(2===arguments.length){let t=arguments[1];return t>3&&(t=3),t<2&&(t=2),new qN(arguments[0],t)}if(3===arguments.length){let t=arguments[2],e=arguments[1]-t;return t>1&&(t=1),e>3&&(e=3),e<2&&(e=2),new qN(arguments[0],e+t,t)}}}get interfaces_(){return[RE,FE]}}jN.instanceObject=new jN;class BN extends CN{constructor(){super(),BN.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0],e=arguments[1];CN.constructor_.call(this,t,e)}copyInternal(){const t=new Array(this._geometries.length).fill(null);for(let e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new BN(t,this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof ZE){const t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,e)}return super.equalsExact.apply(this,arguments)}getBoundaryDimension(){return 1}getTypeCode(){return ZE.TYPECODE_MULTIPOLYGON}getDimension(){return 2}getBoundary(){if(this.isEmpty())return this.getFactory().createMultiLineString();const t=new gN;for(let e=0;e<this._geometries.length;e++){const n=this._geometries[e].getBoundary();for(let e=0;e<n.getNumGeometries();e++)t.add(n.getGeometryN(e))}const e=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(e))}getGeometryType(){return ZE.TYPENAME_MULTIPOLYGON}get interfaces_(){return[MN]}}class UN{get(){}put(){}size(){}values(){}entrySet(){}}class YN extends EN{constructor(t){super(),this.map=new Map,t instanceof hN&&this.addAll(t)}contains(t){const e=t.hashCode?t.hashCode():t;return!!this.map.has(e)}add(t){const e=t.hashCode?t.hashCode():t;return!this.map.has(e)&&!!this.map.set(e,t)}addAll(t){for(const e of t)this.add(e);return!0}remove(){throw new eN}size(){return this.map.size}isEmpty(){return 0===this.map.size}toArray(){return Array.from(this.map.values())}iterator(){return new WN(this.map)}[Symbol.iterator](){return this.map}}class WN{constructor(t){this.iterator=t.values();const{done:e,value:n}=this.iterator.next();this.done=e,this.value=n}next(){if(this.done)throw new dN;const t=this.value,{done:e,value:n}=this.iterator.next();return this.done=e,this.value=n,t}hasNext(){return!this.done}remove(){throw new eN}}class $N extends UN{constructor(){super(),this.map=new Map}get(t){return this.map.get(t)||null}put(t,e){return this.map.set(t,e),e}values(){const t=new gN,e=this.map.values();let n=e.next();for(;!n.done;)t.add(n.value),n=e.next();return t}entrySet(){const t=new YN;return this.map.entries().forEach((e=>t.add(e))),t}size(){return this.map.size()}}class XN{constructor(){XN.constructor_.apply(this,arguments)}static constructor_(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=XN.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof VN){const t=arguments[0];this._modelType=t,t===XN.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){const t=arguments[0];this._modelType=XN.FIXED,this.setScale(t)}else if(arguments[0]instanceof XN){const t=arguments[0];this._modelType=t._modelType,this._scale=t._scale}}static mostPrecise(t,e){return t.compareTo(e)>=0?t:e}equals(t){if(!(t instanceof XN))return!1;const e=t;return this._modelType===e._modelType&&this._scale===e._scale}compareTo(t){const e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return mN.compare(n,i)}getScale(){return this._scale}isFloating(){return this._modelType===XN.FLOATING||this._modelType===XN.FLOATING_SINGLE}getType(){return this._modelType}toString(){let t="UNKNOWN";return this._modelType===XN.FLOATING?t="Floating":this._modelType===XN.FLOATING_SINGLE?t="Floating-Single":this._modelType===XN.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}makePrecise(){if("number"==typeof arguments[0]){const t=arguments[0];if(kE.isNaN(t))return t;if(this._modelType===XN.FLOATING_SINGLE){return t}return this._modelType===XN.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof XE){const t=arguments[0];if(this._modelType===XN.FLOATING)return null;t.x=this.makePrecise(t.x),t.y=this.makePrecise(t.y)}}getMaximumSignificantDigits(){let t=16;return this._modelType===XN.FLOATING?t=16:this._modelType===XN.FLOATING_SINGLE?t=6:this._modelType===XN.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}setScale(t){this._scale=Math.abs(t)}get interfaces_(){return[FE,zE]}}class VN{constructor(){VN.constructor_.apply(this,arguments)}static constructor_(){this._name=null;const t=arguments[0];this._name=t,VN.nameToTypeMap.put(t,this)}readResolve(){return VN.nameToTypeMap.get(this._name)}toString(){return this._name}get interfaces_(){return[FE]}}VN.nameToTypeMap=new $N,XN.Type=VN,XN.FIXED=new VN("FIXED"),XN.FLOATING=new VN("FLOATING"),XN.FLOATING_SINGLE=new VN("FLOATING SINGLE"),XN.maximumPreciseValue=9007199254740992;class HN extends CN{constructor(){super(),HN.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0],e=arguments[1];CN.constructor_.call(this,t,e)}copyInternal(){const t=new Array(this._geometries.length).fill(null);for(let e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new HN(t,this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof ZE){const t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,e)}return super.equalsExact.apply(this,arguments)}getBoundaryDimension(){return this.isClosed()?iN.FALSE:0}isClosed(){if(this.isEmpty())return!1;for(let t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0}getTypeCode(){return ZE.TYPECODE_MULTILINESTRING}getDimension(){return 1}getBoundary(){throw new eN}getGeometryType(){return ZE.TYPENAME_MULTILINESTRING}get interfaces_(){return[KE]}}class ZN{constructor(){ZN.constructor_.apply(this,arguments)}static constructor_(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,0===arguments.length)ZN.constructor_.call(this,new XN,0);else if(1===arguments.length){if(CE(arguments[0],RE)){const t=arguments[0];ZN.constructor_.call(this,new XN,0,t)}else if(arguments[0]instanceof XN){const t=arguments[0];ZN.constructor_.call(this,t,0,ZN.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];ZN.constructor_.call(this,t,e,ZN.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];this._precisionModel=t,this._coordinateSequenceFactory=n,this._SRID=e}}static toMultiPolygonArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toGeometryArray(t){if(null===t)return null;const e=new Array(t.size()).fill(null);return t.toArray(e)}static getDefaultCoordinateSequenceFactory(){return jN.instance()}static toMultiLineStringArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toLineStringArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toMultiPointArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toLinearRingArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toPointArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toPolygonArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static createPointFromInternalCoord(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)}createEmpty(t){switch(t){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new PE("Invalid dimension: "+t)}}toGeometry(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new XE(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new XE(t.getMinX(),t.getMinY()),new XE(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new XE(t.getMinX(),t.getMinY()),new XE(t.getMinX(),t.getMaxY()),new XE(t.getMaxX(),t.getMaxY()),new XE(t.getMaxX(),t.getMinY()),new XE(t.getMinX(),t.getMinY())]),null)}createLineString(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){const t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(CE(arguments[0],AE)){return new oN(arguments[0],this)}}}createMultiLineString(){if(0===arguments.length)return new HN(null,this);if(1===arguments.length){return new HN(arguments[0],this)}}buildGeometry(t){let e=null,n=!1,i=!1;for(let r=t.iterator();r.hasNext();){const t=r.next(),s=t.getTypeCode();null===e&&(e=s),s!==e&&(n=!0),t instanceof CN&&(i=!0)}if(null===e)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(ZN.toGeometryArray(t));const r=t.iterator().next();if(t.size()>1){if(r instanceof wN)return this.createMultiPolygon(ZN.toPolygonArray(t));if(r instanceof oN)return this.createMultiLineString(ZN.toLineStringArray(t));if(r instanceof lN)return this.createMultiPoint(ZN.toPointArray(t));UE.shouldNeverReachHere("Unhandled geometry type: "+r.getGeometryType())}return r}createMultiPointFromCoords(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}createPoint(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof XE){const t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(CE(arguments[0],AE)){return new lN(arguments[0],this)}}}getCoordinateSequenceFactory(){return this._coordinateSequenceFactory}createPolygon(){if(0===arguments.length)return this.createPolygon(null,null);if(1===arguments.length){if(CE(arguments[0],AE)){const t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){const t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof kN){const t=arguments[0];return this.createPolygon(t,null)}}else if(2===arguments.length){return new wN(arguments[0],arguments[1],this)}}getSRID(){return this._SRID}createGeometryCollection(){if(0===arguments.length)return new CN(null,this);if(1===arguments.length){return new CN(arguments[0],this)}}getPrecisionModel(){return this._precisionModel}createLinearRing(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){const t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(CE(arguments[0],AE)){return new kN(arguments[0],this)}}}createMultiPolygon(){if(0===arguments.length)return new BN(null,this);if(1===arguments.length){return new BN(arguments[0],this)}}createMultiPoint(){if(0===arguments.length)return new ON(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){return new ON(arguments[0],this)}if(CE(arguments[0],AE)){const t=arguments[0];if(null===t)return this.createMultiPoint(new Array(0).fill(null));const e=new Array(t.size()).fill(null);for(let n=0;n<t.size();n++){const i=this.getCoordinateSequenceFactory().create(1,t.getDimension(),t.getMeasures());tN.copy(t,n,i,0,1),e[n]=this.createPoint(i)}return this.createMultiPoint(e)}}}get interfaces_(){return[FE]}}const JN=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];class QN{constructor(t){this.geometryFactory=t||new ZN}read(t){let e;e="string"==typeof t?JSON.parse(t):t;const n=e.type;if(!KN[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==JN.indexOf(n)?KN[n].call(this,e.coordinates):"GeometryCollection"===n?KN[n].call(this,e.geometries):KN[n].call(this,e)}write(t){const e=t.getGeometryType();if(!tI[e])throw new Error("Geometry is not supported");return tI[e].call(this,t)}}const KN={Feature:function(t){const e={};for(const n in t)e[n]=t[n];if(t.geometry){const n=t.geometry.type;if(!KN[n])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=KN.bbox.call(this,t.bbox)),e},FeatureCollection:function(t){const e={};if(t.features){e.features=[];for(let n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.call(this,t.bbox)),e},coordinates:function(t){const e=[];for(let n=0;n<t.length;++n){const i=t[n];e.push(new XE(...i))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new XE(t[0],t[1]),new XE(t[2],t[1]),new XE(t[2],t[3]),new XE(t[0],t[3]),new XE(t[0],t[1])])},Point:function(t){const e=new XE(...t);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){const e=[];for(let n=0;n<t.length;++n)e.push(KN.Point.call(this,t[n]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){const e=KN.coordinates.call(this,t);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){const e=[];for(let n=0;n<t.length;++n)e.push(KN.LineString.call(this,t[n]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){const e=KN.coordinates.call(this,t[0]),n=this.geometryFactory.createLinearRing(e),i=[];for(let e=1;e<t.length;++e){const n=t[e],r=KN.coordinates.call(this,n),s=this.geometryFactory.createLinearRing(r);i.push(s)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(t){const e=[];for(let n=0;n<t.length;++n){const i=t[n];e.push(KN.Polygon.call(this,i))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){const e=[];for(let n=0;n<t.length;++n){const i=t[n];e.push(this.read(i))}return this.geometryFactory.createGeometryCollection(e)}},tI={coordinate:function(t){const e=[t.x,t.y];return t.z&&e.push(t.z),t.m&&e.push(t.m),e},Point:function(t){return{type:"Point",coordinates:tI.coordinate.call(this,t.getCoordinate())}},MultiPoint:function(t){const e=[];for(let n=0;n<t._geometries.length;++n){const i=t._geometries[n],r=tI.Point.call(this,i);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){const e=[],n=t.getCoordinates();for(let t=0;t<n.length;++t){const i=n[t];e.push(tI.coordinate.call(this,i))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){const e=[];for(let n=0;n<t._geometries.length;++n){const i=t._geometries[n],r=tI.LineString.call(this,i);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){const e=[],n=tI.LineString.call(this,t._shell);e.push(n.coordinates);for(let n=0;n<t._holes.length;++n){const i=t._holes[n],r=tI.LineString.call(this,i);e.push(r.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){const e=[];for(let n=0;n<t._geometries.length;++n){const i=t._geometries[n],r=tI.Polygon.call(this,i);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){const e=[];for(let n=0;n<t._geometries.length;++n){const i=t._geometries[n],r=i.getGeometryType();e.push(tI[r].call(this,i))}return{type:"GeometryCollection",geometries:e}}};class eI{constructor(t){this.parser=new QN(t||new ZN)}read(t){return this.parser.read(t)}}class nI{constructor(){this.parser=new QN(this.geometryFactory)}write(t){return this.parser.write(t)}}class iI{constructor(){iI.constructor_.apply(this,arguments)}static constructor_(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1}transformPoint(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))}transformPolygon(t,e){let n=!0;const i=this.transformLinearRing(t.getExteriorRing(),t);null!==i&&i instanceof kN&&!i.isEmpty()||(n=!1);const r=new gN;for(let e=0;e<t.getNumInteriorRing();e++){const i=this.transformLinearRing(t.getInteriorRingN(e),t);null===i||i.isEmpty()||(i instanceof kN||(n=!1),r.add(i))}if(n)return this._factory.createPolygon(i,r.toArray([]));{const t=new gN;return null!==i&&t.add(i),t.addAll(r),this._factory.buildGeometry(t)}}createCoordinateSequence(t){return this._factory.getCoordinateSequenceFactory().create(t)}getInputGeometry(){return this._inputGeom}transformMultiLineString(t,e){const n=new gN;for(let e=0;e<t.getNumGeometries();e++){const i=this.transformLineString(t.getGeometryN(e),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)}transformCoordinates(t,e){return this.copy(t)}transformLineString(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))}transformMultiPoint(t,e){const n=new gN;for(let e=0;e<t.getNumGeometries();e++){const i=this.transformPoint(t.getGeometryN(e),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)}transformMultiPolygon(t,e){const n=new gN;for(let e=0;e<t.getNumGeometries();e++){const i=this.transformPolygon(t.getGeometryN(e),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)}copy(t){return t.copy()}transformGeometryCollection(t,e){const n=new gN;for(let e=0;e<t.getNumGeometries();e++){const i=this.transform(t.getGeometryN(e));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(ZN.toGeometryArray(n)):this._factory.buildGeometry(n)}transform(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof lN)return this.transformPoint(t,null);if(t instanceof ON)return this.transformMultiPoint(t,null);if(t instanceof kN)return this.transformLinearRing(t,null);if(t instanceof oN)return this.transformLineString(t,null);if(t instanceof HN)return this.transformMultiLineString(t,null);if(t instanceof wN)return this.transformPolygon(t,null);if(t instanceof BN)return this.transformMultiPolygon(t,null);if(t instanceof CN)return this.transformGeometryCollection(t,null);throw new PE("Unknown Geometry subtype: "+t.getGeometryType())}transformLinearRing(t,e){const n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);const i=n.size();return i>0&&i<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)}}class rI{static intersection(t,e,n,i){const r=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,o=t.x>e.x?t.x:e.x,a=t.y>e.y?t.y:e.y,l=n.x<i.x?n.x:i.x,c=n.y<i.y?n.y:i.y,h=n.x>i.x?n.x:i.x,u=n.y>i.y?n.y:i.y,f=((r>l?r:l)+(o<h?o:h))/2,d=((s>c?s:c)+(a<u?a:u))/2,g=t.x-f,p=t.y-d,_=e.x-f,y=e.y-d,m=n.x-f,x=n.y-d,b=i.x-f,v=i.y-d,M=p-y,w=_-g,E=g*y-_*p,N=x-v,I=b-m,S=m*v-b*x,C=M*I-N*w,O=(w*S-I*E)/C,k=(N*E-M*S)/C;return kE.isNaN(O)||kE.isInfinite(O)||kE.isNaN(k)||kE.isInfinite(k)?null:new XE(O+f,k+d)}}class sI{static segmentToSegment(t,e,n,i){if(t.equals(e))return sI.pointToSegment(t,n,i);if(n.equals(i))return sI.pointToSegment(i,t,e);let r=!1;if(HE.intersects(t,e,n,i)){const s=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(0===s)r=!0;else{const o=(t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/s,l=o/s;(l<0||l>1||a<0||a>1)&&(r=!0)}}else r=!0;return r?DN.min(sI.pointToSegment(t,n,i),sI.pointToSegment(e,n,i),sI.pointToSegment(n,t,e),sI.pointToSegment(i,t,e)):0}static pointToSegment(t,e,n){if(e.x===n.x&&e.y===n.y)return t.distance(e);const i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/i;if(r<=0)return t.distance(e);if(r>=1)return t.distance(n);const s=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(s)*Math.sqrt(i)}static pointToLinePerpendicular(t,e,n){const i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(r)*Math.sqrt(i)}static pointToSegmentString(t,e){if(0===e.length)throw new PE("Line array must contain at least one vertex");let n=t.distance(e[0]);for(let i=0;i<e.length-1;i++){const r=sI.pointToSegment(t,e[i],e[i+1]);r<n&&(n=r)}return n}}const oI="XY",aI="XYZ",lI="XYM",cI="XYZM",hI={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},uI="EMPTY",fI=1,dI=2,gI=3,pI=4,_I=5,yI=6;for(const t in hI)hI[t].toUpperCase();class mI{constructor(t){this.wkt=t,this.index_=-1}isAlpha_(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}isNumeric_(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)}isWhiteSpace_(t){return" "==t||"\t"==t||"\r"==t||"\n"==t}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){const t=this.nextChar_(),e=this.index_;let n,i=t;if("("==t)n=dI;else if(","==t)n=_I;else if(")"==t)n=gI;else if(this.isNumeric_(t)||"-"==t)n=pI,i=this.readNumber_();else if(this.isAlpha_(t))n=fI,i=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(""!==t)throw new Error("Unexpected character: "+t);n=yI}return{position:e,value:i,type:n}}readNumber_(){let t;const e=this.index_;let n=!1,i=!1;do{"."==t?n=!0:"e"!=t&&"E"!=t||(i=!0),t=this.nextChar_()}while(this.isNumeric_(t,n)||!i&&("e"==t||"E"==t)||i&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))}readText_(){let t;const e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()}}class xI{constructor(t,e){this.lexer_=t,this.token_,this.layout_=oI,this.factory=e}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(t){return this.token_.type==t}match(t){const e=this.isTokenType(t);return e&&this.consume_(),e}parse(){this.consume_();return this.parseGeometry_()}parseGeometryLayout_(){let t=oI;const e=this.token_;if(this.isTokenType(fI)){const n=e.value;"Z"===n?t=aI:"M"===n?t=lI:"ZM"===n&&(t=cI),t!==oI&&this.consume_()}return t}parseGeometryCollectionText_(){if(this.match(dI)){const t=[];do{t.push(this.parseGeometry_())}while(this.match(_I));if(this.match(gI))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(dI)){const t=this.parsePoint_();if(this.match(gI))return t}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(dI)){const t=this.parsePointList_();if(this.match(gI))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(dI)){const t=this.parseLineStringTextList_();if(this.match(gI))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(dI)){let t;if(t=this.token_.type==dI?this.parsePointTextList_():this.parsePointList_(),this.match(gI))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(dI)){const t=this.parseLineStringTextList_();if(this.match(gI))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(dI)){const t=this.parsePolygonTextList_();if(this.match(gI))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parsePoint_(){const t=[],e=this.layout_.length;for(let n=0;n<e;++n){const e=this.token_;if(!this.match(pI))break;t.push(e.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())}parsePointList_(){const t=[this.parsePoint_()];for(;this.match(_I);)t.push(this.parsePoint_());return t}parsePointTextList_(){const t=[this.parsePointText_()];for(;this.match(_I);)t.push(this.parsePointText_());return t}parseLineStringTextList_(){const t=[this.parseLineStringText_()];for(;this.match(_I);)t.push(this.parseLineStringText_());return t}parsePolygonTextList_(){const t=[this.parsePolygonText_()];for(;this.match(_I);)t.push(this.parsePolygonText_());return t}isEmptyGeometry_(){const t=this.isTokenType(fI)&&this.token_.value==uI;return t&&this.consume_(),t}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){const t=this.factory,e=t=>new XE(...t),n=n=>{const i=n.map((n=>t.createLinearRing(n.map(e))));return i.length>1?t.createPolygon(i[0],i.slice(1)):t.createPolygon(i[0])},i=this.token_;if(this.match(fI)){const r=i.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==r){const e=this.parseGeometryCollectionText_();return t.createGeometryCollection(e)}switch(r){case"POINT":{const e=this.parsePointText_();return e?t.createPoint(new XE(...e)):t.createPoint()}case"LINESTRING":{const n=this.parseLineStringText_().map(e);return t.createLineString(n)}case"LINEARRING":{const n=this.parseLineStringText_().map(e);return t.createLinearRing(n)}case"POLYGON":{const e=this.parsePolygonText_();return e&&0!==e.length?n(e):t.createPolygon()}case"MULTIPOINT":{const n=this.parseMultiPointText_();if(!n||0===n.length)return t.createMultiPoint();const i=n.map(e).map((e=>t.createPoint(e)));return t.createMultiPoint(i)}case"MULTILINESTRING":{const n=this.parseMultiLineStringText_().map((n=>t.createLineString(n.map(e))));return t.createMultiLineString(n)}case"MULTIPOLYGON":{const e=this.parseMultiPolygonText_();if(!e||0===e.length)return t.createMultiPolygon();const i=e.map(n);return t.createMultiPolygon(i)}default:throw new Error("Invalid geometry type: "+r)}}throw new Error(this.formatErrorMessage_())}}function bI(t){if(t.isEmpty())return"";const e=t.getCoordinate(),n=[e.x,e.y];return void 0===e.z||Number.isNaN(e.z)||n.push(e.z),void 0===e.m||Number.isNaN(e.m)||n.push(e.m),n.join(" ")}function vI(t){const e=t.getCoordinates().map((t=>{const e=[t.x,t.y];return void 0===t.z||Number.isNaN(t.z)||e.push(t.z),void 0===t.m||Number.isNaN(t.m)||e.push(t.m),e})),n=[];for(let t=0,i=e.length;t<i;++t)n.push(e[t].join(" "));return n.join(", ")}function MI(t){const e=[];e.push("("+vI(t.getExteriorRing())+")");for(let n=0,i=t.getNumInteriorRing();n<i;++n)e.push("("+vI(t.getInteriorRingN(n))+")");return e.join(", ")}const wI={Point:bI,LineString:vI,LinearRing:vI,Polygon:MI,MultiPoint:function(t){const e=[];for(let n=0,i=t.getNumGeometries();n<i;++n)e.push("("+bI(t.getGeometryN(n))+")");return e.join(", ")},MultiLineString:function(t){const e=[];for(let n=0,i=t.getNumGeometries();n<i;++n)e.push("("+vI(t.getGeometryN(n))+")");return e.join(", ")},MultiPolygon:function(t){const e=[];for(let n=0,i=t.getNumGeometries();n<i;++n)e.push("("+MI(t.getGeometryN(n))+")");return e.join(", ")},GeometryCollection:function(t){const e=[];for(let n=0,i=t.getNumGeometries();n<i;++n)e.push(EI(t.getGeometryN(n)));return e.join(", ")}};function EI(t){let e=t.getGeometryType();const n=wI[e];e=e.toUpperCase();const i=function(t){let e="";if(t.isEmpty())return e;const n=t.getCoordinate();return void 0===n.z||Number.isNaN(n.z)||(e+="Z"),void 0===n.m||Number.isNaN(n.m)||(e+="M"),e}(t);if(i.length>0&&(e+=" "+i),t.isEmpty())return e+" "+uI;return e+" ("+n(t)+")"}class NI{constructor(t){this.geometryFactory=t||new ZN,this.precisionModel=this.geometryFactory.getPrecisionModel()}read(t){const e=new mI(t);return new xI(e,this.geometryFactory).parse()}write(t){return EI(t)}}class II{constructor(t){this.parser=new NI(t)}write(t){return this.parser.write(t)}static toLineString(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}class SI{constructor(){SI.constructor_.apply(this,arguments)}static constructor_(){this._result=null,this._inputLines=Array(2).fill().map((()=>Array(2))),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new XE,this._intPt[1]=new XE,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}static computeEdgeDistance(t,e,n){const i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y);let s=-1;if(t.equals(e))s=0;else if(t.equals(n))s=i>r?i:r;else{const n=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y);s=i>r?n:o,0!==s||t.equals(e)||(s=Math.max(n,o))}return UE.isTrue(!(0===s&&!t.equals(e)),"Bad distance calculation"),s}static nonRobustComputeEdgeDistance(t,e,n){const i=t.x-e.x,r=t.y-e.y,s=Math.sqrt(i*i+r*r);return UE.isTrue(!(0===s&&!t.equals(e)),"Invalid distance calculation"),s}getIndexAlongSegment(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]}getTopologySummary(){const t=new GN;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()}computeIntersection(t,e,n,i){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,e,n,i)}getIntersectionNum(){return this._result}computeIntLineIndex(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((()=>Array(2))),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){const t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}}isProper(){return this.hasIntersection()&&this._isProper}setPrecisionModel(t){this._precisionModel=t}isInteriorIntersection(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){const t=arguments[0];for(let e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}}getIntersection(t){return this._intPt[t]}isEndPoint(){return this.hasIntersection()&&!this._isProper}hasIntersection(){return this._result!==SI.NO_INTERSECTION}getEdgeDistance(t,e){return SI.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])}isCollinear(){return this._result===SI.COLLINEAR_INTERSECTION}toString(){return II.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+II.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}getEndpoint(t,e){return this._inputLines[t][e]}isIntersection(t){for(let e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1}getIntersectionAlongSegment(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]}}SI.DONT_INTERSECT=0,SI.DO_INTERSECT=1,SI.COLLINEAR=2,SI.NO_INTERSECTION=0,SI.POINT_INTERSECTION=1,SI.COLLINEAR_INTERSECTION=2;class CI extends SI{constructor(){super()}static nearestEndpoint(t,e,n,i){let r=t,s=sI.pointToSegment(t,n,i),o=sI.pointToSegment(e,n,i);return o<s&&(s=o,r=e),o=sI.pointToSegment(n,t,e),o<s&&(s=o,r=n),o=sI.pointToSegment(i,t,e),o<s&&(s=o,r=i),r}isInSegmentEnvelopes(t){const e=new HE(this._inputLines[0][0],this._inputLines[0][1]),n=new HE(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)}computeIntersection(){if(3!==arguments.length)return super.computeIntersection.apply(this,arguments);{const t=arguments[0],e=arguments[1],n=arguments[2];if(this._isProper=!1,HE.intersects(e,n,t)&&0===vN.index(e,n,t)&&0===vN.index(n,e,t))return this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this._result=SI.POINT_INTERSECTION,null;this._result=SI.NO_INTERSECTION}}intersection(t,e,n,i){let r=this.intersectionSafe(t,e,n,i);return this.isInSegmentEnvelopes(r)||(r=new XE(CI.nearestEndpoint(t,e,n,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(r),r}checkDD(t,e,n,i,r){const s=bN.intersection(t,e,n,i),o=this.isInSegmentEnvelopes(s);zN.out.println("DD in env = "+o+"  --------------------- "+s),r.distance(s)>1e-4&&zN.out.println("Distance = "+r.distance(s))}intersectionSafe(t,e,n,i){let r=rI.intersection(t,e,n,i);return null===r&&(r=CI.nearestEndpoint(t,e,n,i)),r}computeCollinearIntersection(t,e,n,i){const r=HE.intersects(t,e,n),s=HE.intersects(t,e,i),o=HE.intersects(n,i,t),a=HE.intersects(n,i,e);return r&&s?(this._intPt[0]=n,this._intPt[1]=i,SI.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=t,this._intPt[1]=e,SI.COLLINEAR_INTERSECTION):r&&o?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||s||a?SI.COLLINEAR_INTERSECTION:SI.POINT_INTERSECTION):r&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||s||o?SI.COLLINEAR_INTERSECTION:SI.POINT_INTERSECTION):s&&o?(this._intPt[0]=i,this._intPt[1]=t,!i.equals(t)||r||a?SI.COLLINEAR_INTERSECTION:SI.POINT_INTERSECTION):s&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||r||o?SI.COLLINEAR_INTERSECTION:SI.POINT_INTERSECTION):SI.NO_INTERSECTION}computeIntersect(t,e,n,i){if(this._isProper=!1,!HE.intersects(t,e,n,i))return SI.NO_INTERSECTION;const r=vN.index(t,e,n),s=vN.index(t,e,i);if(r>0&&s>0||r<0&&s<0)return SI.NO_INTERSECTION;const o=vN.index(n,i,t),a=vN.index(n,i,e);if(o>0&&a>0||o<0&&a<0)return SI.NO_INTERSECTION;return 0===r&&0===s&&0===o&&0===a?this.computeCollinearIntersection(t,e,n,i):(0===r||0===s||0===o||0===a?(this._isProper=!1,t.equals2D(n)||t.equals2D(i)?this._intPt[0]=t:e.equals2D(n)||e.equals2D(i)?this._intPt[0]=e:0===r?this._intPt[0]=new XE(n):0===s?this._intPt[0]=new XE(i):0===o?this._intPt[0]=new XE(t):0===a&&(this._intPt[0]=new XE(e))):(this._isProper=!0,this._intPt[0]=this.intersection(t,e,n,i)),SI.POINT_INTERSECTION)}}class OI{constructor(){OI.constructor_.apply(this,arguments)}static constructor_(){if(this.p0=null,this.p1=null,0===arguments.length)OI.constructor_.call(this,new XE,new XE);else if(1===arguments.length){const t=arguments[0];OI.constructor_.call(this,t.p0,t.p1)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.p0=t,this.p1=e}else if(4===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];OI.constructor_.call(this,new XE(t,e),new XE(n,i))}}static midPoint(t,e){return new XE((t.x+e.x)/2,(t.y+e.y)/2)}minX(){return Math.min(this.p0.x,this.p1.x)}orientationIndex(){if(arguments[0]instanceof OI){const t=arguments[0],e=vN.index(this.p0,this.p1,t.p0),n=vN.index(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof XE){const t=arguments[0];return vN.index(this.p0,this.p1,t)}}toGeometry(t){return t.createLineString([this.p0,this.p1])}isVertical(){return this.p0.x===this.p1.x}equals(t){if(!(t instanceof OI))return!1;const e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)}intersection(t){const e=new CI;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null}project(){if(arguments[0]instanceof XE){const t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new XE(t);const e=this.projectionFactor(t),n=new XE;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof OI){const t=arguments[0],e=this.projectionFactor(t.p0),n=this.projectionFactor(t.p1);if(e>=1&&n>=1)return null;if(e<=0&&n<=0)return null;let i=this.project(t.p0);e<0&&(i=this.p0),e>1&&(i=this.p1);let r=this.project(t.p1);return n<0&&(r=this.p0),n>1&&(r=this.p1),new OI(i,r)}}normalize(){this.p1.compareTo(this.p0)<0&&this.reverse()}angle(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}getCoordinate(t){return 0===t?this.p0:this.p1}distancePerpendicular(t){return sI.pointToLinePerpendicular(t,this.p0,this.p1)}minY(){return Math.min(this.p0.y,this.p1.y)}midPoint(){return OI.midPoint(this.p0,this.p1)}projectionFactor(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;const e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;if(i<=0)return kE.NaN;return((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i}closestPoints(t){const e=this.intersection(t);if(null!==e)return[e,e];const n=new Array(2).fill(null);let i=kE.MAX_VALUE,r=null;const s=this.closestPoint(t.p0);i=s.distance(t.p0),n[0]=s,n[1]=t.p0;const o=this.closestPoint(t.p1);r=o.distance(t.p1),r<i&&(i=r,n[0]=o,n[1]=t.p1);const a=t.closestPoint(this.p0);r=a.distance(this.p0),r<i&&(i=r,n[0]=this.p0,n[1]=a);const l=t.closestPoint(this.p1);return r=l.distance(this.p1),r<i&&(i=r,n[0]=this.p1,n[1]=l),n}closestPoint(t){const e=this.projectionFactor(t);if(e>0&&e<1)return this.project(t);return this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1}maxX(){return Math.max(this.p0.x,this.p1.x)}getLength(){return this.p0.distance(this.p1)}compareTo(t){const e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)}reverse(){const t=this.p0;this.p0=this.p1,this.p1=t}equalsTopo(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)}lineIntersection(t){return rI.intersection(this.p0,this.p1,t.p0,t.p1)}maxY(){return Math.max(this.p0.y,this.p1.y)}pointAlongOffset(t,e){const n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,s=this.p1.y-this.p0.y,o=Math.sqrt(r*r+s*s);let a=0,l=0;if(0!==e){if(o<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");a=e*r/o,l=e*s/o}return new XE(n-l,i+a)}setCoordinates(){if(1===arguments.length){const t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.p0.x=t.x,this.p0.y=t.y,this.p1.x=e.x,this.p1.y=e.y}}segmentFraction(t){let e=this.projectionFactor(t);return e<0?e=0:(e>1||kE.isNaN(e))&&(e=1),e}toString(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}isHorizontal(){return this.p0.y===this.p1.y}reflect(t){const e=this.p1.getY()-this.p0.getY(),n=this.p0.getX()-this.p1.getX(),i=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),r=e*e+n*n,s=e*e-n*n,o=t.getX(),a=t.getY();return new XE((-s*o-2*e*n*a-2*e*i)/r,(s*a-2*e*n*o-2*n*i)/r)}distance(){if(arguments[0]instanceof OI){const t=arguments[0];return sI.segmentToSegment(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof XE){const t=arguments[0];return sI.pointToSegment(t,this.p0,this.p1)}}pointAlong(t){const e=new XE;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}hashCode(){let t=kE.doubleToLongBits(this.p0.x);t^=31*kE.doubleToLongBits(this.p0.y);const e=Math.trunc(t)^Math.trunc(t>>32);let n=kE.doubleToLongBits(this.p1.x);n^=31*kE.doubleToLongBits(this.p1.y);return e^(Math.trunc(n)^Math.trunc(n>>32))}get interfaces_(){return[zE,FE]}}class kI{constructor(){kI.constructor_.apply(this,arguments)}static constructor_(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new OI,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof oN&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1];kI.constructor_.call(this,t.getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1];this._srcPts=t,this._isClosed=kI.isClosed(t),this._snapTolerance=e}}static isClosed(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])}snapVertices(t,e){const n=this._isClosed?t.size()-1:t.size();for(let i=0;i<n;i++){const n=t.get(i),r=this.findSnapForVertex(n,e);null!==r&&(t.set(i,new XE(r)),0===i&&this._isClosed&&t.set(t.size()-1,new XE(r)))}}findSnapForVertex(t,e){for(let n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null}snapTo(t){const e=new PN(this._srcPts);this.snapVertices(e,t),this.snapSegments(e,t);return e.toCoordinateArray()}snapSegments(t,e){if(0===e.length)return null;let n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(let i=0;i<n;i++){const n=e[i],r=this.findSegmentIndexToSnap(n,t);r>=0&&t.add(r+1,new XE(n),!1)}}findSegmentIndexToSnap(t,e){let n=kE.MAX_VALUE,i=-1;for(let r=0;r<e.size()-1;r++){if(this._seg.p0=e.get(r),this._seg.p1=e.get(r+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}const s=this._seg.distance(t);s<this._snapTolerance&&s<n&&(n=s,i=r)}return i}setAllowSnappingToSourceVertices(t){this._allowSnappingToSourceVertices=t}}class TI{constructor(){TI.constructor_.apply(this,arguments)}static constructor_(){this._srcGeom=null;const t=arguments[0];this._srcGeom=t}static snap(t,e,n){const i=new Array(2).fill(null),r=new TI(t);i[0]=r.snapTo(e,n);const s=new TI(e);return i[1]=s.snapTo(i[0],n),i}static computeOverlaySnapTolerance(){if(1===arguments.length){const t=arguments[0];let e=TI.computeSizeBasedSnapTolerance(t);const n=t.getPrecisionModel();if(n.getType()===XN.FIXED){const t=1/n.getScale()*2/1.415;t>e&&(e=t)}return e}if(2===arguments.length){const t=arguments[0],e=arguments[1];return Math.min(TI.computeOverlaySnapTolerance(t),TI.computeOverlaySnapTolerance(e))}}static computeSizeBasedSnapTolerance(t){const e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*TI.SNAP_PRECISION_FACTOR}static snapToSelf(t,e,n){return new TI(t).snapToSelf(e,n)}snapTo(t,e){const n=this.extractTargetCoordinates(t);return new AI(e,n).transform(this._srcGeom)}snapToSelf(t,e){const n=this.extractTargetCoordinates(this._srcGeom),i=new AI(t,n,!0).transform(this._srcGeom);let r=i;return e&&CE(r,MN)&&(r=i.buffer(0)),r}computeSnapTolerance(t){return this.computeMinimumSegmentLength(t)/10}extractTargetCoordinates(t){const e=new IN,n=t.getCoordinates();for(let t=0;t<n.length;t++)e.add(n[t]);return e.toArray(new Array(0).fill(null))}computeMinimumSegmentLength(t){let e=kE.MAX_VALUE;for(let n=0;n<t.length-1;n++){const i=t[n].distance(t[n+1]);i<e&&(e=i)}return e}}TI.SNAP_PRECISION_FACTOR=1e-9;class AI extends iI{constructor(){super(),AI.constructor_.apply(this,arguments)}static constructor_(){if(this._snapTolerance=null,this._snapPts=null,this._isSelfSnap=!1,2===arguments.length){const t=arguments[0],e=arguments[1];this._snapTolerance=t,this._snapPts=e}else if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];this._snapTolerance=t,this._snapPts=e,this._isSelfSnap=n}}snapLine(t,e){const n=new kI(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)}transformCoordinates(t,e){const n=t.toCoordinateArray(),i=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(i)}}class RI{constructor(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=new OE,this._commonSignExp=null}getCommon(){return kE.longBitsToDouble(this._commonBits)}add(t){const e=kE.doubleToLongBits(t);if(this._isFirst)return this._commonBits=e,this._commonSignExp=RI.signExpBits(this._commonBits),this._isFirst=!1,null;if(RI.signExpBits(e)!==this._commonSignExp)return this._commonBits.high=0,this._commonBits.low=0,null;this._commonMantissaBitsCount=RI.numCommonMostSigMantissaBits(this._commonBits,e),this._commonBits=RI.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))}toString(){if(1===arguments.length){const t=arguments[0],e=kE.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+OE.toBinaryString(t),i=n.substring(n.length-64);return i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]"}}getClass(){return RI}get interfaces_(){return[]}static getBit(t,e){const n=1<<e%32;return e<32?0!=(t.low&n)?1:0:0!=(t.high&n)?1:0}static signExpBits(t){return t.high>>>20}static zeroLowerBits(t,e){let n="low";if(e>32&&(t.low=0,e%=32,n="high"),e>0){const i=e<32?~((1<<e)-1):0;t[n]&=i}return t}static numCommonMostSigMantissaBits(t,e){let n=0;for(let i=52;i>=0;i--){if(RI.getBit(t,i)!==RI.getBit(e,i))return n;n++}return 52}}class LI{constructor(){LI.constructor_.apply(this,arguments)}static constructor_(){this._commonCoord=null,this._ccFilter=new PI}addCommonBits(t){const e=new DI(this._commonCoord);t.apply(e),t.geometryChanged()}removeCommonBits(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;const e=new XE(this._commonCoord);e.x=-e.x,e.y=-e.y;const n=new DI(e);return t.apply(n),t.geometryChanged(),t}getCommonCoordinate(){return this._commonCoord}add(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()}}class PI{constructor(){PI.constructor_.apply(this,arguments)}static constructor_(){this._commonBitsX=new RI,this._commonBitsY=new RI}filter(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)}getCommonCoordinate(){return new XE(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())}get interfaces_(){return[JE]}}class DI{constructor(){DI.constructor_.apply(this,arguments)}static constructor_(){this.trans=null;const t=arguments[0];this.trans=t}filter(t,e){const n=t.getOrdinate(e,0)+this.trans.x,i=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,i)}isDone(){return!1}isGeometryChanged(){return!0}get interfaces_(){return[sN]}}LI.CommonCoordinateFilter=PI,LI.Translater=DI;class zI{static toLocationSymbol(t){switch(t){case zI.EXTERIOR:return"e";case zI.BOUNDARY:return"b";case zI.INTERIOR:return"i";case zI.NONE:return"-"}throw new PE("Unknown location value: "+t)}}zI.INTERIOR=0,zI.BOUNDARY=1,zI.EXTERIOR=2,zI.NONE=-1;class FI{constructor(){FI.constructor_.apply(this,arguments)}static constructor_(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;const t=arguments[0];this._p=t}static locatePointInRing(){if(arguments[0]instanceof XE&&CE(arguments[1],AE)){const t=arguments[1],e=new FI(arguments[0]),n=new XE,i=new XE;for(let r=1;r<t.size();r++)if(t.getCoordinate(r,n),t.getCoordinate(r-1,i),e.countSegment(n,i),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof XE&&arguments[1]instanceof Array){const t=arguments[1],e=new FI(arguments[0]);for(let n=1;n<t.length;n++){const i=t[n],r=t[n-1];if(e.countSegment(i,r),e.isOnSegment())return e.getLocation()}return e.getLocation()}}countSegment(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){let n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){let n=vN.index(t,e,this._p);if(n===vN.COLLINEAR)return this._isPointOnSegment=!0,null;e.y<t.y&&(n=-n),n===vN.LEFT&&this._crossingCount++}}isPointInPolygon(){return this.getLocation()!==zI.EXTERIOR}getLocation(){return this._isPointOnSegment?zI.BOUNDARY:this._crossingCount%2==1?zI.INTERIOR:zI.EXTERIOR}isOnSegment(){return this._isPointOnSegment}}class GI{static isOnLine(){if(arguments[0]instanceof XE&&CE(arguments[1],AE)){const t=arguments[0],e=arguments[1],n=new CI,i=new XE,r=new XE,s=e.size();for(let o=1;o<s;o++)if(e.getCoordinate(o-1,i),e.getCoordinate(o,r),n.computeIntersection(t,i,r),n.hasIntersection())return!0;return!1}if(arguments[0]instanceof XE&&arguments[1]instanceof Array){const t=arguments[0],e=arguments[1],n=new CI;for(let i=1;i<e.length;i++){const r=e[i-1],s=e[i];if(n.computeIntersection(t,r,s),n.hasIntersection())return!0}return!1}}static locateInRing(t,e){return FI.locatePointInRing(t,e)}static isInRing(t,e){return GI.locateInRing(t,e)!==zI.EXTERIOR}}class qI{isInBoundary(t){}}class jI{isInBoundary(t){return t%2==1}get interfaces_(){return[qI]}}class BI{isInBoundary(t){return t>0}get interfaces_(){return[qI]}}class UI{isInBoundary(t){return t>1}get interfaces_(){return[qI]}}class YI{isInBoundary(t){return 1===t}get interfaces_(){return[qI]}}qI.Mod2BoundaryNodeRule=jI,qI.EndPointBoundaryNodeRule=BI,qI.MultiValentEndPointBoundaryNodeRule=UI,qI.MonoValentEndPointBoundaryNodeRule=YI,qI.MOD2_BOUNDARY_RULE=new jI,qI.ENDPOINT_BOUNDARY_RULE=new BI,qI.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new UI,qI.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new YI,qI.OGC_SFS_BOUNDARY_RULE=qI.MOD2_BOUNDARY_RULE;class WI{hasNext(){}next(){}remove(){}}class $I{constructor(){$I.constructor_.apply(this,arguments)}static constructor_(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;const t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()}static isAtomic(t){return!(t instanceof CN)}next(){if(this._atStart)return this._atStart=!1,$I.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new dN;const t=this._parent.getGeometryN(this._index++);return t instanceof CN?(this._subcollectionIterator=new $I(t),this._subcollectionIterator.next()):t}remove(){throw new eN(this.getClass().getName())}hasNext(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}get interfaces_(){return[WI]}}class XI{constructor(){XI.constructor_.apply(this,arguments)}static constructor_(){if(this._boundaryRule=qI.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){const t=arguments[0];if(null===t)throw new PE("Rule must be non-null");this._boundaryRule=t}}locateInPolygonRing(t,e){return e.getEnvelopeInternal().intersects(t)?GI.locateInRing(t,e.getCoordinates()):zI.EXTERIOR}intersects(t,e){return this.locate(t,e)!==zI.EXTERIOR}updateLocationInfo(t){t===zI.INTERIOR&&(this._isIn=!0),t===zI.BOUNDARY&&this._numBoundaries++}computeLocation(t,e){if(e instanceof lN&&this.updateLocationInfo(this.locateOnPoint(t,e)),e instanceof oN)this.updateLocationInfo(this.locateOnLineString(t,e));else if(e instanceof wN)this.updateLocationInfo(this.locateInPolygon(t,e));else if(e instanceof HN){const n=e;for(let e=0;e<n.getNumGeometries();e++){const i=n.getGeometryN(e);this.updateLocationInfo(this.locateOnLineString(t,i))}}else if(e instanceof BN){const n=e;for(let e=0;e<n.getNumGeometries();e++){const i=n.getGeometryN(e);this.updateLocationInfo(this.locateInPolygon(t,i))}}else if(e instanceof CN){const n=new $I(e);for(;n.hasNext();){const i=n.next();i!==e&&this.computeLocation(t,i)}}}locateOnPoint(t,e){return e.getCoordinate().equals2D(t)?zI.INTERIOR:zI.EXTERIOR}locateOnLineString(t,e){if(!e.getEnvelopeInternal().intersects(t))return zI.EXTERIOR;const n=e.getCoordinateSequence();return e.isClosed()||!t.equals(n.getCoordinate(0))&&!t.equals(n.getCoordinate(n.size()-1))?GI.isOnLine(t,n)?zI.INTERIOR:zI.EXTERIOR:zI.BOUNDARY}locateInPolygon(t,e){if(e.isEmpty())return zI.EXTERIOR;const n=e.getExteriorRing(),i=this.locateInPolygonRing(t,n);if(i===zI.EXTERIOR)return zI.EXTERIOR;if(i===zI.BOUNDARY)return zI.BOUNDARY;for(let n=0;n<e.getNumInteriorRing();n++){const i=e.getInteriorRingN(n),r=this.locateInPolygonRing(t,i);if(r===zI.INTERIOR)return zI.EXTERIOR;if(r===zI.BOUNDARY)return zI.BOUNDARY}return zI.INTERIOR}locate(t,e){return e.isEmpty()?zI.EXTERIOR:e instanceof oN?this.locateOnLineString(t,e):e instanceof wN?this.locateInPolygon(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?zI.BOUNDARY:this._numBoundaries>0||this._isIn?zI.INTERIOR:zI.EXTERIOR)}}class VI{static octant(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new PE("Cannot compute the octant for point ( "+t+", "+e+" )");const n=Math.abs(t),i=Math.abs(e);return t>=0?e>=0?n>=i?0:1:n>=i?7:6:e>=0?n>=i?3:2:n>=i?4:5}if(arguments[0]instanceof XE&&arguments[1]instanceof XE){const t=arguments[0],e=arguments[1],n=e.x-t.x,i=e.y-t.y;if(0===n&&0===i)throw new PE("Cannot compute the octant for two identical points "+t);return VI.octant(n,i)}}}class HI{getCoordinates(){}size(){}getCoordinate(t){}isClosed(){}setData(t){}getData(){}}class ZI{constructor(){ZI.constructor_.apply(this,arguments)}static constructor_(){this._pts=null,this._data=null;const t=arguments[0],e=arguments[1];this._pts=t,this._data=e}getCoordinates(){return this._pts}size(){return this._pts.length}getCoordinate(t){return this._pts[t]}isClosed(){return this._pts[0].equals(this._pts[this._pts.length-1])}getSegmentOctant(t){return t===this._pts.length-1?-1:VI.octant(this.getCoordinate(t),this.getCoordinate(t+1))}setData(t){this._data=t}getData(){return this._data}toString(){return II.toLineString(new qN(this._pts))}get interfaces_(){return[HI]}}class JI{getBounds(){}}class QI{constructor(){QI.constructor_.apply(this,arguments)}static constructor_(){this._bounds=null,this._item=null;const t=arguments[0],e=arguments[1];this._bounds=t,this._item=e}getItem(){return this._item}getBounds(){return this._bounds}get interfaces_(){return[JI,FE]}}class KI{constructor(){KI.constructor_.apply(this,arguments)}static constructor_(){this._size=null,this._items=null,this._size=0,this._items=new gN,this._items.add(null)}poll(){if(this.isEmpty())return null;const t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t}size(){return this._size}reorder(t){let e=null;const n=this._items.get(t);for(;2*t<=this._size&&(e=2*t,e!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)}clear(){this._size=0,this._items.clear()}peek(){if(this.isEmpty())return null;return this._items.get(1)}isEmpty(){return 0===this._size}add(t){this._items.add(null),this._size+=1;let e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)}}class tS{insert(t,e){}remove(t,e){}query(){}}class eS{constructor(){eS.constructor_.apply(this,arguments)}static constructor_(){if(this._childBoundables=new gN,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){const t=arguments[0];this._level=t}}getLevel(){return this._level}size(){return this._childBoundables.size()}getChildBoundables(){return this._childBoundables}addChildBoundable(t){UE.isTrue(null===this._bounds),this._childBoundables.add(t)}isEmpty(){return this._childBoundables.isEmpty()}getBounds(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds}get interfaces_(){return[JI,FE]}}const nS={reverseOrder:function(){return{compare:(t,e)=>e.compareTo(t)}},min:function(t){return nS.sort(t),t.get(0)},sort:function(t,e){const n=t.toArray();e?_N.sort(n,e):_N.sort(n);const i=t.iterator();for(let t=0,e=n.length;t<e;t++)i.next(),i.set(n[t])},singletonList:function(t){const e=new gN;return e.add(t),e}};class iS{static maxDistance(t,e,n,i,r,s,o,a){let l=iS.distance(t,e,r,s);return l=Math.max(l,iS.distance(t,e,o,a)),l=Math.max(l,iS.distance(n,i,r,s)),l=Math.max(l,iS.distance(n,i,o,a)),l}static distance(t,e,n,i){const r=n-t,s=i-e;return Math.sqrt(r*r+s*s)}static maximumDistance(t,e){const n=Math.min(t.getMinX(),e.getMinX()),i=Math.min(t.getMinY(),e.getMinY()),r=Math.max(t.getMaxX(),e.getMaxX()),s=Math.max(t.getMaxY(),e.getMaxY());return iS.distance(n,i,r,s)}static minMaxDistance(t,e){const n=t.getMinX(),i=t.getMinY(),r=t.getMaxX(),s=t.getMaxY(),o=e.getMinX(),a=e.getMinY(),l=e.getMaxX(),c=e.getMaxY();let h=iS.maxDistance(n,i,n,s,o,a,o,c);return h=Math.min(h,iS.maxDistance(n,i,n,s,o,a,l,a)),h=Math.min(h,iS.maxDistance(n,i,n,s,l,c,o,c)),h=Math.min(h,iS.maxDistance(n,i,n,s,l,c,l,a)),h=Math.min(h,iS.maxDistance(n,i,r,i,o,a,o,c)),h=Math.min(h,iS.maxDistance(n,i,r,i,o,a,l,a)),h=Math.min(h,iS.maxDistance(n,i,r,i,l,c,o,c)),h=Math.min(h,iS.maxDistance(n,i,r,i,l,c,l,a)),h=Math.min(h,iS.maxDistance(r,s,n,s,o,a,o,c)),h=Math.min(h,iS.maxDistance(r,s,n,s,o,a,l,a)),h=Math.min(h,iS.maxDistance(r,s,n,s,l,c,o,c)),h=Math.min(h,iS.maxDistance(r,s,n,s,l,c,l,a)),h=Math.min(h,iS.maxDistance(r,s,r,i,o,a,o,c)),h=Math.min(h,iS.maxDistance(r,s,r,i,o,a,l,a)),h=Math.min(h,iS.maxDistance(r,s,r,i,l,c,o,c)),h=Math.min(h,iS.maxDistance(r,s,r,i,l,c,l,a)),h}}class rS{constructor(){rS.constructor_.apply(this,arguments)}static constructor_(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;const t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()}static area(t){return t.getBounds().getArea()}static isComposite(t){return t instanceof eS}maximumDistance(){return iS.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}expandToQueue(t,e){const n=rS.isComposite(this._boundable1),i=rS.isComposite(this._boundable2);if(n&&i)return rS.area(this._boundable1)>rS.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,t,e),null):(this.expand(this._boundable2,this._boundable1,!0,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,!1,t,e),null;if(i)return this.expand(this._boundable2,this._boundable1,!0,t,e),null;throw new PE("neither boundable is composite")}isLeaves(){return!(rS.isComposite(this._boundable1)||rS.isComposite(this._boundable2))}compareTo(t){const e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0}expand(t,e,n,i,r){for(let s=t.getChildBoundables().iterator();s.hasNext();){const t=s.next();let o=null;o=n?new rS(e,t,this._itemDistance):new rS(t,e,this._itemDistance),o.getDistance()<r&&i.add(o)}}getBoundable(t){return 0===t?this._boundable1:this._boundable2}getDistance(){return this._distance}distance(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}get interfaces_(){return[zE]}}class sS{visitItem(t){}}class oS{constructor(){oS.constructor_.apply(this,arguments)}static constructor_(){if(this._root=null,this._built=!1,this._itemBoundables=new gN,this._nodeCapacity=null,0===arguments.length)oS.constructor_.call(this,oS.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){const t=arguments[0];UE.isTrue(t>1,"Node capacity must be greater than 1"),this._nodeCapacity=t}}static compareDoubles(t,e){return t>e?1:t<e?-1:0}queryInternal(){if(CE(arguments[2],sS)&&arguments[0]instanceof Object&&arguments[1]instanceof eS){const t=arguments[0],e=arguments[2],n=arguments[1].getChildBoundables();for(let i=0;i<n.size();i++){const r=n.get(i);this.getIntersectsOp().intersects(r.getBounds(),t)&&(r instanceof eS?this.queryInternal(t,r,e):r instanceof QI?e.visitItem(r.getItem()):UE.shouldNeverReachHere())}}else if(CE(arguments[2],fN)&&arguments[0]instanceof Object&&arguments[1]instanceof eS){const t=arguments[0],e=arguments[2],n=arguments[1].getChildBoundables();for(let i=0;i<n.size();i++){const r=n.get(i);this.getIntersectsOp().intersects(r.getBounds(),t)&&(r instanceof eS?this.queryInternal(t,r,e):r instanceof QI?e.add(r.getItem()):UE.shouldNeverReachHere())}}}getNodeCapacity(){return this._nodeCapacity}lastNode(t){return t.get(t.size()-1)}size(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){let t=0;for(let e=arguments[0].getChildBoundables().iterator();e.hasNext();){const n=e.next();n instanceof eS?t+=this.size(n):n instanceof QI&&(t+=1)}return t}}removeItem(t,e){let n=null;for(let i=t.getChildBoundables().iterator();i.hasNext();){const t=i.next();t instanceof QI&&t.getItem()===e&&(n=t)}return null!==n&&(t.getChildBoundables().remove(n),!0)}itemsTree(){if(0===arguments.length){this.build();const t=this.itemsTree(this._root);return null===t?new gN:t}if(1===arguments.length){const t=arguments[0],e=new gN;for(let n=t.getChildBoundables().iterator();n.hasNext();){const t=n.next();if(t instanceof eS){const n=this.itemsTree(t);null!==n&&e.add(n)}else t instanceof QI?e.add(t.getItem()):UE.shouldNeverReachHere()}return e.size()<=0?null:e}}insert(t,e){UE.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new QI(t,e))}boundablesAtLevel(){if(1===arguments.length){const t=arguments[0],e=new gN;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];if(UE.isTrue(t>-2),e.getLevel()===t)return n.add(e),null;for(let i=e.getChildBoundables().iterator();i.hasNext();){const e=i.next();e instanceof eS?this.boundablesAtLevel(t,e,n):(UE.isTrue(e instanceof QI),-1===t&&n.add(e))}return null}}query(){if(1===arguments.length){const t=arguments[0];this.build();const e=new gN;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,e),e}if(2===arguments.length){const t=arguments[0],e=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,e)}}build(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}getRoot(){return this.build(),this._root}remove(){if(2===arguments.length){const t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];let i=this.removeItem(e,n);if(i)return!0;let r=null;for(let s=e.getChildBoundables().iterator();s.hasNext();){const e=s.next();if(this.getIntersectsOp().intersects(e.getBounds(),t)&&(e instanceof eS&&(i=this.remove(t,e,n),i))){r=e;break}}return null!==r&&r.getChildBoundables().isEmpty()&&e.getChildBoundables().remove(r),i}}createHigherLevels(t,e){UE.isTrue(!t.isEmpty());const n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)}depth(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){let t=0;for(let e=arguments[0].getChildBoundables().iterator();e.hasNext();){const n=e.next();if(n instanceof eS){const e=this.depth(n);e>t&&(t=e)}}return t+1}}createParentBoundables(t,e){UE.isTrue(!t.isEmpty());const n=new gN;n.add(this.createNode(e));const i=new gN(t);nS.sort(i,this.getComparator());for(let t=i.iterator();t.hasNext();){const i=t.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(i)}return n}isEmpty(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}get interfaces_(){return[FE]}}oS.IntersectsOp=function(){},oS.DEFAULT_NODE_CAPACITY=10;class aS{distance(t,e){}}class lS extends oS{constructor(){super(),lS.constructor_.apply(this,arguments)}static constructor_(){if(0===arguments.length)lS.constructor_.call(this,lS.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){const t=arguments[0];oS.constructor_.call(this,t)}}static centreX(t){return lS.avg(t.getMinX(),t.getMaxX())}static avg(t,e){return(t+e)/2}static getItems(t){const e=new Array(t.size()).fill(null);let n=0;for(;!t.isEmpty();){const i=t.poll();e[n]=i.getBoundable(0).getItem(),n++}return e}static centreY(t){return lS.avg(t.getMinY(),t.getMaxY())}createParentBoundablesFromVerticalSlices(t,e){UE.isTrue(t.length>0);const n=new gN;for(let i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return n}nearestNeighbourK(){if(2===arguments.length){const t=arguments[0],e=arguments[1];return this.nearestNeighbourK(t,kE.POSITIVE_INFINITY,e)}if(3===arguments.length){const t=arguments[0],e=arguments[2];let n=arguments[1];const i=new KI;i.add(t);const r=new KI;for(;!i.isEmpty()&&n>=0;){const t=i.poll(),s=t.getDistance();if(s>=n)break;if(t.isLeaves())if(r.size()<e)r.add(t);else{r.peek().getDistance()>s&&(r.poll(),r.add(t));n=r.peek().getDistance()}else t.expandToQueue(i,n)}return lS.getItems(r)}}createNode(t){return new cS(t)}size(){return 0===arguments.length?super.size.call(this):super.size.apply(this,arguments)}insert(){if(!(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof HE))return super.insert.apply(this,arguments);{const t=arguments[0],e=arguments[1];if(t.isNull())return null;super.insert.call(this,t,e)}}getIntersectsOp(){return lS.intersectsOp}verticalSlices(t,e){const n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator();for(let t=0;t<e;t++){i[t]=new gN;let e=0;for(;r.hasNext()&&e<n;){const n=r.next();i[t].add(n),e++}}return i}query(){if(1===arguments.length){const t=arguments[0];return super.query.call(this,t)}if(2===arguments.length){const t=arguments[0],e=arguments[1];super.query.call(this,t,e)}}getComparator(){return lS.yComparator}createParentBoundablesFromVerticalSlice(t,e){return super.createParentBoundables.call(this,t,e)}remove(){if(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof HE){const t=arguments[0],e=arguments[1];return super.remove.call(this,t,e)}return super.remove.apply(this,arguments)}depth(){return 0===arguments.length?super.depth.call(this):super.depth.apply(this,arguments)}createParentBoundables(t,e){UE.isTrue(!t.isEmpty());const n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new gN(t);nS.sort(i,lS.xComparator);const r=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(r,e)}nearestNeighbour(){if(1===arguments.length){if(CE(arguments[0],aS)){const t=arguments[0];if(this.isEmpty())return null;const e=new rS(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof rS){const t=arguments[0];let e=kE.POSITIVE_INFINITY,n=null;const i=new KI;for(i.add(t);!i.isEmpty()&&e>0;){const t=i.poll(),r=t.getDistance();if(r>=e)break;t.isLeaves()?(e=r,n=t):t.expandToQueue(i,e)}return null===n?null:[n.getBoundable(0).getItem(),n.getBoundable(1).getItem()]}}else{if(2===arguments.length){const t=arguments[0],e=arguments[1];if(this.isEmpty()||t.isEmpty())return null;const n=new rS(this.getRoot(),t.getRoot(),e);return this.nearestNeighbour(n)}if(3===arguments.length){const t=arguments[2],e=new QI(arguments[0],arguments[1]),n=new rS(this.getRoot(),e,t);return this.nearestNeighbour(n)[0]}if(4===arguments.length){const t=arguments[2],e=arguments[3],n=new QI(arguments[0],arguments[1]),i=new rS(this.getRoot(),n,t);return this.nearestNeighbourK(i,e)}}}isWithinDistance(){if(2===arguments.length){const t=arguments[0],e=arguments[1];let n=kE.POSITIVE_INFINITY;const i=new KI;for(i.add(t);!i.isEmpty();){const t=i.poll(),r=t.getDistance();if(r>e)return!1;if(t.maximumDistance()<=e)return!0;if(t.isLeaves()){if(n=r,n<=e)return!0}else t.expandToQueue(i,n)}return!1}if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2],i=new rS(this.getRoot(),t.getRoot(),e);return this.isWithinDistance(i,n)}}get interfaces_(){return[tS,FE]}}class cS extends eS{constructor(){super(),cS.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0];eS.constructor_.call(this,t)}computeBounds(){let t=null;for(let e=this.getChildBoundables().iterator();e.hasNext();){const n=e.next();null===t?t=new HE(n.getBounds()):t.expandToInclude(n.getBounds())}return t}}lS.STRtreeNode=cS,lS.xComparator=new class{get interfaces_(){return[qE]}compare(t,e){return oS.compareDoubles(lS.centreX(t.getBounds()),lS.centreX(e.getBounds()))}},lS.yComparator=new class{get interfaces_(){return[qE]}compare(t,e){return oS.compareDoubles(lS.centreY(t.getBounds()),lS.centreY(e.getBounds()))}},lS.intersectsOp=new class{get interfaces_(){return[IntersectsOp]}intersects(t,e){return t.intersects(e)}},lS.DEFAULT_NODE_CAPACITY=10;class hS{static relativeSign(t,e){return t<e?-1:t>e?1:0}static compare(t,e,n){if(e.equals2D(n))return 0;const i=hS.relativeSign(e.x,n.x),r=hS.relativeSign(e.y,n.y);switch(t){case 0:return hS.compareValue(i,r);case 1:return hS.compareValue(r,i);case 2:return hS.compareValue(r,-i);case 3:return hS.compareValue(-i,r);case 4:return hS.compareValue(-i,-r);case 5:return hS.compareValue(-r,-i);case 6:return hS.compareValue(-r,i);case 7:return hS.compareValue(i,-r)}return UE.shouldNeverReachHere("invalid octant value"),0}static compareValue(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0}}class uS{constructor(){uS.constructor_.apply(this,arguments)}static constructor_(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;const t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._segString=t,this.coord=new XE(e),this.segmentIndex=n,this._segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n))}getCoordinate(){return this.coord}print(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)}compareTo(t){const e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:this._isInterior?e._isInterior?hS.compare(this._segmentOctant,this.coord,e.coord):1:-1}isEndPoint(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t}toString(){return this.segmentIndex+":"+this.coord.toString()}isInterior(){return this._isInterior}get interfaces_(){return[zE]}}class fS extends UN{}function dS(t){return null==t?0:t.color}function gS(t){return null==t?null:t.parent}function pS(t,e){null!==t&&(t.color=e)}function _S(t){return null==t?null:t.left}function yS(t){return null==t?null:t.right}class mS extends fS{constructor(){super(),this.root_=null,this.size_=0}get(t){let e=this.root_;for(;null!==e;){const n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null}put(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue(){return this.value},getKey(){return this.key}},this.size_=1,null;let n,i,r=this.root_;do{if(n=r,i=t.compareTo(r.key),i<0)r=r.left;else{if(!(i>0)){const t=r.value;return r.value=e,t}r=r.right}}while(null!==r);const s={key:t,left:null,right:null,value:e,parent:n,color:0,getValue(){return this.value},getKey(){return this.key}};return i<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null}fixAfterInsertion(t){let e;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)gS(t)===_S(gS(gS(t)))?(e=yS(gS(gS(t))),1===dS(e)?(pS(gS(t),0),pS(e,0),pS(gS(gS(t)),1),t=gS(gS(t))):(t===yS(gS(t))&&(t=gS(t),this.rotateLeft(t)),pS(gS(t),0),pS(gS(gS(t)),1),this.rotateRight(gS(gS(t))))):(e=_S(gS(gS(t))),1===dS(e)?(pS(gS(t),0),pS(e,0),pS(gS(gS(t)),1),t=gS(gS(t))):(t===_S(gS(t))&&(t=gS(t),this.rotateRight(t)),pS(gS(t),0),pS(gS(gS(t)),1),this.rotateLeft(gS(gS(t)))));this.root_.color=0}values(){const t=new gN;let e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=mS.successor(e));)t.add(e.value);return t}entrySet(){const t=new YN;let e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=mS.successor(e));)t.add(e);return t}rotateLeft(t){if(null!=t){const e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}}rotateRight(t){if(null!=t){const e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}}getFirstEntry(){let t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t}static successor(t){let e;if(null===t)return null;if(null!==t.right){for(e=t.right;null!==e.left;)e=e.left;return e}{e=t.parent;let n=t;for(;null!==e&&n===e.right;)n=e,e=e.parent;return e}}size(){return this.size_}containsKey(t){let e=this.root_;for(;null!==e;){const n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return!0;e=e.right}}return!1}}class xS{constructor(){xS.constructor_.apply(this,arguments)}static constructor_(){this._nodeMap=new mS,this._edge=null;const t=arguments[0];this._edge=t}getSplitCoordinates(){const t=new PN;this.addEndpoints();const e=this.iterator();let n=e.next();for(;e.hasNext();){const i=e.next();this.addEdgeCoordinates(n,i,t),n=i}return t.toCoordinateArray()}addCollapsedNodes(){const t=new gN;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(let e=t.iterator();e.hasNext();){const t=e.next().intValue();this.add(this._edge.getCoordinate(t),t)}}createSplitEdgePts(t,e){let n=e.segmentIndex-t.segmentIndex+2;if(2===n)return[new XE(t.coord),new XE(e.coord)];const i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);r||n--;const s=new Array(n).fill(null);let o=0;s[o++]=new XE(t.coord);for(let n=t.segmentIndex+1;n<=e.segmentIndex;n++)s[o++]=this._edge.getCoordinate(n);return r&&(s[o]=new XE(e.coord)),s}print(t){t.println("Intersections:");for(let e=this.iterator();e.hasNext();){e.next().print(t)}}findCollapsesFromExistingVertices(t){for(let e=0;e<this._edge.size()-2;e++){const n=this._edge.getCoordinate(e);this._edge.getCoordinate(e+1);const i=this._edge.getCoordinate(e+2);n.equals2D(i)&&t.add(mN.valueOf(e+1))}}addEdgeCoordinates(t,e,n){const i=this.createSplitEdgePts(t,e);n.add(i,!1)}iterator(){return this._nodeMap.values().iterator()}addSplitEdges(t){this.addEndpoints(),this.addCollapsedNodes();const e=this.iterator();let n=e.next();for(;e.hasNext();){const i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}}findCollapseIndex(t,e,n){if(!t.coord.equals2D(e.coord))return!1;let i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0)}findCollapsesFromInsertedNodes(t){const e=new Array(1).fill(null),n=this.iterator();let i=n.next();for(;n.hasNext();){const r=n.next();this.findCollapseIndex(i,r,e)&&t.add(mN.valueOf(e[0])),i=r}}getEdge(){return this._edge}addEndpoints(){const t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)}createSplitEdge(t,e){const n=this.createSplitEdgePts(t,e);return new vS(n,this._edge.getData())}add(t,e){const n=new uS(this._edge,t,e,this._edge.getSegmentOctant(e)),i=this._nodeMap.get(n);return null!==i?(UE.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(n,n),n)}checkSplitEdgesCorrectness(t){const e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new jE("bad split edge start point at "+n);const i=t.get(t.size()-1).getCoordinates(),r=i[i.length-1];if(!r.equals2D(e[e.length-1]))throw new jE("bad split edge end point at "+r)}}class bS{addIntersection(t,e){}get interfaces_(){return[HI]}}class vS{constructor(){vS.constructor_.apply(this,arguments)}static constructor_(){this._nodeList=new xS(this),this._pts=null,this._data=null;const t=arguments[0],e=arguments[1];this._pts=t,this._data=e}static getNodedSubstrings(){if(1===arguments.length){const t=arguments[0],e=new gN;return vS.getNodedSubstrings(t,e),e}if(2===arguments.length){const t=arguments[1];for(let e=arguments[0].iterator();e.hasNext();){e.next().getNodeList().addSplitEdges(t)}}}getCoordinates(){return this._pts}size(){return this._pts.length}getCoordinate(t){return this._pts[t]}isClosed(){return this._pts[0].equals(this._pts[this._pts.length-1])}getSegmentOctant(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))}setData(t){this._data=t}safeOctant(t,e){return t.equals2D(e)?0:VI.octant(t,e)}getData(){return this._data}addIntersection(){if(2===arguments.length){const t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){const t=arguments[1],e=arguments[3],n=new XE(arguments[0].getIntersection(e));this.addIntersection(n,t)}}toString(){return II.toLineString(new qN(this._pts))}getNodeList(){return this._nodeList}addIntersectionNode(t,e){let n=e;const i=n+1;if(i<this._pts.length){const e=this._pts[i];t.equals2D(e)&&(n=i)}return this._nodeList.add(t,n)}addIntersections(t,e,n){for(let i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)}get interfaces_(){return[bS]}}class MS{constructor(){MS.constructor_.apply(this,arguments)}static constructor_(){this._overlapSeg1=new OI,this._overlapSeg2=new OI}overlap(){if(2===arguments.length);else if(4===arguments.length){const t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}class wS{constructor(){wS.constructor_.apply(this,arguments)}static constructor_(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;const t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=i}getLineSegment(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]}computeSelect(t,e,n,i){const r=this._pts[e],s=this._pts[n];if(n-e==1)return i.select(this,e),null;if(!t.intersects(r,s))return null;const o=Math.trunc((e+n)/2);e<o&&this.computeSelect(t,e,o,i),o<n&&this.computeSelect(t,o,n,i)}getCoordinates(){const t=new Array(this._end-this._start+1).fill(null);let e=0;for(let n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t}computeOverlaps(){if(2===arguments.length){const t=arguments[0],e=arguments[1];this.computeOverlaps(this._start,this._end,t,t._start,t._end,e)}else if(6===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3],r=arguments[4],s=arguments[5];if(e-t==1&&r-i==1)return s.overlap(this,t,n,i),null;if(!this.overlaps(t,e,n,i,r))return null;const o=Math.trunc((t+e)/2),a=Math.trunc((i+r)/2);t<o&&(i<a&&this.computeOverlaps(t,o,n,i,a,s),a<r&&this.computeOverlaps(t,o,n,a,r,s)),o<e&&(i<a&&this.computeOverlaps(o,e,n,i,a,s),a<r&&this.computeOverlaps(o,e,n,a,r,s))}}setId(t){this._id=t}select(t,e){this.computeSelect(t,this._start,this._end,e)}getEnvelope(){if(null===this._env){const t=this._pts[this._start],e=this._pts[this._end];this._env=new HE(t,e)}return this._env}overlaps(t,e,n,i,r){return HE.intersects(this._pts[t],this._pts[e],n._pts[i],n._pts[r])}getEndIndex(){return this._end}getStartIndex(){return this._start}getContext(){return this._context}getId(){return this._id}}class ES{static isNorthern(t){return t===ES.NE||t===ES.NW}static isOpposite(t,e){if(t===e)return!1;return 2===(t-e+4)%4}static commonHalfPlane(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;const n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n}static isInHalfPlane(t,e){return e===ES.SE?t===ES.SE||t===ES.SW:t===e||t===e+1}static quadrant(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new PE("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?ES.NE:ES.SE:e>=0?ES.NW:ES.SW}if(arguments[0]instanceof XE&&arguments[1]instanceof XE){const t=arguments[0],e=arguments[1];if(e.x===t.x&&e.y===t.y)throw new PE("Cannot compute the quadrant for two identical points "+t);return e.x>=t.x?e.y>=t.y?ES.NE:ES.SE:e.y>=t.y?ES.NW:ES.SW}}}ES.NE=0,ES.NW=1,ES.SW=2,ES.SE=3;class NS{static findChainEnd(t,e){let n=e;for(;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;const i=ES.quadrant(t[n],t[n+1]);let r=e+1;for(;r<t.length;){if(!t[r-1].equals2D(t[r])){if(ES.quadrant(t[r-1],t[r])!==i)break}r++}return r-1}static getChains(){if(1===arguments.length){const t=arguments[0];return NS.getChains(t,null)}if(2===arguments.length){const t=arguments[0],e=arguments[1],n=new gN;let i=0;do{const r=NS.findChainEnd(t,i),s=new wS(t,i,r,e);n.add(s),i=r}while(i<t.length-1);return n}}}class IS{computeNodes(t){}getNodedSubstrings(){}}class SS{constructor(){SS.constructor_.apply(this,arguments)}static constructor_(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){const t=arguments[0];this.setSegmentIntersector(t)}}setSegmentIntersector(t){this._segInt=t}get interfaces_(){return[IS]}}class CS extends SS{constructor(){super(),CS.constructor_.apply(this,arguments)}static constructor_(){if(this._monoChains=new gN,this._index=new lS,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,0===arguments.length);else if(1===arguments.length){const t=arguments[0];SS.constructor_.call(this,t)}}getMonotoneChains(){return this._monoChains}getNodedSubstrings(){return vS.getNodedSubstrings(this._nodedSegStrings)}getIndex(){return this._index}add(t){for(let e=NS.getChains(t.getCoordinates(),t).iterator();e.hasNext();){const t=e.next();t.setId(this._idCounter++),this._index.insert(t.getEnvelope(),t),this._monoChains.add(t)}}computeNodes(t){this._nodedSegStrings=t;for(let e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()}intersectChains(){const t=new OS(this._segInt);for(let e=this._monoChains.iterator();e.hasNext();){const n=e.next();for(let e=this._index.query(n.getEnvelope()).iterator();e.hasNext();){const i=e.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}}}}class OS extends MS{constructor(){super(),OS.constructor_.apply(this,arguments)}static constructor_(){this._si=null;const t=arguments[0];this._si=t}overlap(){if(4!==arguments.length)return super.overlap.apply(this,arguments);{const t=arguments[1],e=arguments[2],n=arguments[3],i=arguments[0].getContext(),r=e.getContext();this._si.processIntersections(i,t,r,n)}}}CS.SegmentOverlapAction=OS;class kS extends jE{constructor(t,e){super(e?t+" [ "+e+" ]":t),this.pt=e?new XE(e):void 0,this.name=Object.keys({TopologyException:kS})[0]}getCoordinate(){return this.pt}}class TS{processIntersections(t,e,n,i){}isDone(){}}class AS{constructor(){AS.constructor_.apply(this,arguments)}static constructor_(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._keepIntersections=!0,this._isInteriorIntersectionsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new gN,this._intersectionCount=0;const t=arguments[0];this._li=t,this._interiorIntersection=null}static createAllIntersectionsFinder(t){const e=new AS(t);return e.setFindAllIntersections(!0),e}static isInteriorVertexIntersection(){if(4===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[3];return(!arguments[2]||!n)&&!!t.equals2D(e)}if(8===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3],r=arguments[4],s=arguments[5],o=arguments[6],a=arguments[7];return!!AS.isInteriorVertexIntersection(t,n,r,o)||(!!AS.isInteriorVertexIntersection(t,i,r,a)||(!!AS.isInteriorVertexIntersection(e,n,s,o)||!!AS.isInteriorVertexIntersection(e,i,s,a)))}}static createInteriorIntersectionCounter(t){const e=new AS(t);return e.setInteriorIntersectionsOnly(!0),e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e}static createIntersectionCounter(t){const e=new AS(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e}static isEndSegment(t,e){return 0===e||e>=t.size()-2}static createAnyIntersectionFinder(t){return new AS(t)}static createInteriorIntersectionsFinder(t){const e=new AS(t);return e.setFindAllIntersections(!0),e.setInteriorIntersectionsOnly(!0),e}setCheckEndSegmentsOnly(t){this._isCheckEndSegmentsOnly=t}getIntersectionSegments(){return this._intSegments}count(){return this._intersectionCount}getIntersections(){return this._intersections}setFindAllIntersections(t){this._findAllIntersections=t}setKeepIntersections(t){this._keepIntersections=t}getIntersection(){return this._interiorIntersection}processIntersections(t,e,n,i){if(!this._findAllIntersections&&this.hasIntersection())return null;const r=t===n;if(r&&e===i)return null;if(this._isCheckEndSegmentsOnly){if(!(AS.isEndSegment(t,e)||AS.isEndSegment(n,i)))return null}const s=t.getCoordinate(e),o=t.getCoordinate(e+1),a=n.getCoordinate(i),l=n.getCoordinate(i+1),c=0===e,h=e+2===t.size(),u=0===i,f=i+2===n.size();this._li.computeIntersection(s,o,a,l);const d=this._li.hasIntersection()&&this._li.isInteriorIntersection();let g=!1;if(!this._isInteriorIntersectionsOnly){g=!(r&&Math.abs(i-e)<=1)&&AS.isInteriorVertexIntersection(s,o,a,l,c,h,u,f)}(d||g)&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=s,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=l,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)}hasIntersection(){return null!==this._interiorIntersection}isDone(){return!this._findAllIntersections&&null!==this._interiorIntersection}setInteriorIntersectionsOnly(t){this._isInteriorIntersectionsOnly=t}get interfaces_(){return[TS]}}class RS{constructor(){RS.constructor_.apply(this,arguments)}static constructor_(){this._li=new CI,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;const t=arguments[0];this._segStrings=t}static computeIntersections(t){const e=new RS(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()}execute(){if(null!==this._segInt)return null;this.checkInteriorIntersections()}getIntersections(){return this._segInt.getIntersections()}isValid(){return this.execute(),this._isValid}setFindAllIntersections(t){this._findAllIntersections=t}checkInteriorIntersections(){this._isValid=!0,this._segInt=new AS(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);const t=new CS;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null}checkValid(){if(this.execute(),!this._isValid)throw new kS(this.getErrorMessage(),this._segInt.getIntersection())}getErrorMessage(){if(this._isValid)return"no intersections found";const t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+II.toLineString(t[0],t[1])+" and "+II.toLineString(t[2],t[3])}}class LS{constructor(){LS.constructor_.apply(this,arguments)}static constructor_(){this._nv=null;const t=arguments[0];this._nv=new RS(LS.toSegmentStrings(t))}static toSegmentStrings(t){const e=new gN;for(let n=t.iterator();n.hasNext();){const t=n.next();e.add(new ZI(t.getCoordinates(),t))}return e}static checkValid(t){new LS(t).checkValid()}checkValid(){this._nv.checkValid()}}class PS{constructor(){PS.constructor_.apply(this,arguments)}static constructor_(){this._mapOp=null;const t=arguments[0];this._mapOp=t}static map(t,e){return new PS(e).map(t)}map(t){const e=new gN;for(let n=0;n<t.getNumGeometries();n++){const i=this._mapOp.map(t.getGeometryN(n));i.isEmpty()||e.add(i)}return t.getFactory().createGeometryCollection(ZN.toGeometryArray(e))}}class DS{static opposite(t){return t===DS.LEFT?DS.RIGHT:t===DS.RIGHT?DS.LEFT:t}}DS.ON=0,DS.LEFT=1,DS.RIGHT=2;class zS{constructor(){zS.constructor_.apply(this,arguments)}static constructor_(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){const t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){const t=arguments[0];this.init(1),this.location[DS.ON]=t}else if(arguments[0]instanceof zS){const t=arguments[0];if(this.init(t.location.length),null!==t)for(let e=0;e<this.location.length;e++)this.location[e]=t.location[e]}}else if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];this.init(3),this.location[DS.ON]=t,this.location[DS.LEFT]=e,this.location[DS.RIGHT]=n}}setAllLocations(t){for(let e=0;e<this.location.length;e++)this.location[e]=t}isNull(){for(let t=0;t<this.location.length;t++)if(this.location[t]!==zI.NONE)return!1;return!0}setAllLocationsIfNull(t){for(let e=0;e<this.location.length;e++)this.location[e]===zI.NONE&&(this.location[e]=t)}isLine(){return 1===this.location.length}merge(t){if(t.location.length>this.location.length){const t=new Array(3).fill(null);t[DS.ON]=this.location[DS.ON],t[DS.LEFT]=zI.NONE,t[DS.RIGHT]=zI.NONE,this.location=t}for(let e=0;e<this.location.length;e++)this.location[e]===zI.NONE&&e<t.location.length&&(this.location[e]=t.location[e])}getLocations(){return this.location}flip(){if(this.location.length<=1)return null;const t=this.location[DS.LEFT];this.location[DS.LEFT]=this.location[DS.RIGHT],this.location[DS.RIGHT]=t}toString(){const t=new yN;return this.location.length>1&&t.append(zI.toLocationSymbol(this.location[DS.LEFT])),t.append(zI.toLocationSymbol(this.location[DS.ON])),this.location.length>1&&t.append(zI.toLocationSymbol(this.location[DS.RIGHT])),t.toString()}setLocations(t,e,n){this.location[DS.ON]=t,this.location[DS.LEFT]=e,this.location[DS.RIGHT]=n}get(t){return t<this.location.length?this.location[t]:zI.NONE}isArea(){return this.location.length>1}isAnyNull(){for(let t=0;t<this.location.length;t++)if(this.location[t]===zI.NONE)return!0;return!1}setLocation(){if(1===arguments.length){const t=arguments[0];this.setLocation(DS.ON,t)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.location[t]=e}}init(t){this.location=new Array(t).fill(null),this.setAllLocations(zI.NONE)}isEqualOnSide(t,e){return this.location[e]===t.location[e]}allPositionsEqual(t){for(let e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0}}class FS{constructor(){FS.constructor_.apply(this,arguments)}static constructor_(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){const t=arguments[0];this.elt[0]=new zS(t),this.elt[1]=new zS(t)}else if(arguments[0]instanceof FS){const t=arguments[0];this.elt[0]=new zS(t.elt[0]),this.elt[1]=new zS(t.elt[1])}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.elt[0]=new zS(zI.NONE),this.elt[1]=new zS(zI.NONE),this.elt[t].setLocation(e)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];this.elt[0]=new zS(t,e,n),this.elt[1]=new zS(t,e,n)}else if(4===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.elt[0]=new zS(zI.NONE,zI.NONE,zI.NONE),this.elt[1]=new zS(zI.NONE,zI.NONE,zI.NONE),this.elt[t].setLocations(e,n,i)}}static toLineLabel(t){const e=new FS(zI.NONE);for(let n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e}getGeometryCount(){let t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t}setAllLocations(t,e){this.elt[t].setAllLocations(e)}isNull(t){return this.elt[t].isNull()}setAllLocationsIfNull(){if(1===arguments.length){const t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.elt[t].setAllLocationsIfNull(e)}}isLine(t){return this.elt[t].isLine()}merge(t){for(let e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new zS(t.elt[e]):this.elt[e].merge(t.elt[e])}flip(){this.elt[0].flip(),this.elt[1].flip()}getLocation(){if(1===arguments.length){const t=arguments[0];return this.elt[t].get(DS.ON)}if(2===arguments.length){const t=arguments[0],e=arguments[1];return this.elt[t].get(e)}}toString(){const t=new yN;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()}isArea(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){const t=arguments[0];return this.elt[t].isArea()}}isAnyNull(t){return this.elt[t].isAnyNull()}setLocation(){if(2===arguments.length){const t=arguments[0],e=arguments[1];this.elt[t].setLocation(DS.ON,e)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];this.elt[t].setLocation(e,n)}}isEqualOnSide(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)}allPositionsEqual(t,e){return this.elt[t].allPositionsEqual(e)}toLine(t){this.elt[t].isArea()&&(this.elt[t]=new zS(this.elt[t].location[0]))}}class GS{constructor(){GS.constructor_.apply(this,arguments)}static constructor_(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new gN,this._pts=new gN,this._label=new FS(zI.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new gN,this._geometryFactory=null,0===arguments.length);else if(2===arguments.length){const t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()}}computeRing(){if(null!==this._ring)return null;const t=new Array(this._pts.size()).fill(null);for(let e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=vN.isCCW(this._ring.getCoordinates())}isIsolated(){return 1===this._label.getGeometryCount()}computePoints(t){this._startDe=t;let e=t,n=!0;do{if(null===e)throw new kS("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new kS("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);const t=e.getLabel();UE.isTrue(t.isArea()),this.mergeLabel(t),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)}getLinearRing(){return this._ring}getCoordinate(t){return this._pts.get(t)}computeMaxNodeDegree(){this._maxNodeDegree=0;let t=this._startDe;do{const e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2}addPoints(t,e,n){const i=t.getCoordinates();if(e){let t=1;n&&(t=0);for(let e=t;e<i.length;e++)this._pts.add(i[e])}else{let t=i.length-2;n&&(t=i.length-1);for(let e=t;e>=0;e--)this._pts.add(i[e])}}isHole(){return this._isHole}setInResult(){let t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)}containsPoint(t){const e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!GI.isInRing(t,e.getCoordinates()))return!1;for(let e=this._holes.iterator();e.hasNext();){if(e.next().containsPoint(t))return!1}return!0}addHole(t){this._holes.add(t)}isShell(){return null===this._shell}getLabel(){return this._label}getEdges(){return this._edges}getMaxNodeDegree(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}getShell(){return this._shell}mergeLabel(){if(1===arguments.length){const t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){const t=arguments[1],e=arguments[0].getLocation(t,DS.RIGHT);if(e===zI.NONE)return null;if(this._label.getLocation(t)===zI.NONE)return this._label.setLocation(t,e),null}}setShell(t){this._shell=t,null!==t&&t.addHole(this)}toPolygon(t){const e=new Array(this._holes.size()).fill(null);for(let t=0;t<this._holes.size();t++)e[t]=this._holes.get(t).getLinearRing();return t.createPolygon(this.getLinearRing(),e)}}class qS extends GS{constructor(){super(),qS.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0],e=arguments[1];GS.constructor_.call(this,t,e)}setEdgeRing(t,e){t.setMinEdgeRing(e)}getNext(t){return t.getNextMin()}}class jS extends GS{constructor(){super(),jS.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0],e=arguments[1];GS.constructor_.call(this,t,e)}buildMinimalRings(){const t=new gN;let e=this._startDe;do{if(null===e.getMinEdgeRing()){const n=new qS(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t}setEdgeRing(t,e){t.setEdgeRing(e)}linkDirectedEdgesForMinimalEdgeRings(){let t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)}getNext(t){return t.getNext()}}class BS{constructor(){BS.constructor_.apply(this,arguments)}static constructor_(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){const t=arguments[0];this._label=t}}setVisited(t){this._isVisited=t}setInResult(t){this._isInResult=t}isCovered(){return this._isCovered}isCoveredSet(){return this._isCoveredSet}setLabel(t){this._label=t}getLabel(){return this._label}setCovered(t){this._isCovered=t,this._isCoveredSet=!0}updateIM(t){UE.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)}isInResult(){return this._isInResult}isVisited(){return this._isVisited}}class US extends BS{constructor(){super(),US.constructor_.apply(this,arguments)}static constructor_(){this._coord=null,this._edges=null;const t=arguments[0],e=arguments[1];this._coord=t,this._edges=e,this._label=new FS(0,zI.NONE)}isIncidentEdgeInResult(){for(let t=this.getEdges().getEdges().iterator();t.hasNext();){if(t.next().getEdge().isInResult())return!0}return!1}isIsolated(){return 1===this._label.getGeometryCount()}getCoordinate(){return this._coord}print(t){t.println("node "+this._coord+" lbl: "+this._label)}computeIM(t){}computeMergedLocation(t,e){let n=zI.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){const i=t.getLocation(e);n!==zI.BOUNDARY&&(n=i)}return n}setLabel(){if(2!==arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return super.setLabel.apply(this,arguments);{const t=arguments[0],e=arguments[1];null===this._label?this._label=new FS(t,e):this._label.setLocation(t,e)}}getEdges(){return this._edges}mergeLabel(){if(arguments[0]instanceof US){const t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof FS){const t=arguments[0];for(let e=0;e<2;e++){const n=this.computeMergedLocation(t,e);this._label.getLocation(e)===zI.NONE&&this._label.setLocation(e,n)}}}add(t){this._edges.insert(t),t.setNode(this)}setLabelBoundary(t){if(null===this._label)return null;let e=zI.NONE;null!==this._label&&(e=this._label.getLocation(t));let n=null;switch(e){case zI.BOUNDARY:n=zI.INTERIOR;break;case zI.INTERIOR:default:n=zI.BOUNDARY}this._label.setLocation(t,n)}}class YS{constructor(){YS.constructor_.apply(this,arguments)}static constructor_(){this.nodeMap=new mS,this.nodeFact=null;const t=arguments[0];this.nodeFact=t}find(t){return this.nodeMap.get(t)}addNode(){if(arguments[0]instanceof XE){const t=arguments[0];let e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof US){const t=arguments[0],e=this.nodeMap.get(t.getCoordinate());return null===e?(this.nodeMap.put(t.getCoordinate(),t),t):(e.mergeLabel(t),e)}}print(t){for(let e=this.iterator();e.hasNext();){e.next().print(t)}}iterator(){return this.nodeMap.values().iterator()}values(){return this.nodeMap.values()}getBoundaryNodes(t){const e=new gN;for(let n=this.iterator();n.hasNext();){const i=n.next();i.getLabel().getLocation(t)===zI.BOUNDARY&&e.add(i)}return e}add(t){const e=t.getCoordinate();this.addNode(e).add(t)}}class WS{constructor(){WS.constructor_.apply(this,arguments)}static constructor_(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){const t=arguments[0];this._edge=t}else if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];WS.constructor_.call(this,t,e,n,null)}else if(4===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];WS.constructor_.call(this,t),this.init(e,n),this._label=i}}compareDirection(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:vN.index(t._p0,t._p1,this._p1)}getDy(){return this._dy}getCoordinate(){return this._p0}setNode(t){this._node=t}print(t){const e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);t.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)}compareTo(t){const e=t;return this.compareDirection(e)}getDirectedCoordinate(){return this._p1}getDx(){return this._dx}getLabel(){return this._label}getEdge(){return this._edge}getQuadrant(){return this._quadrant}getNode(){return this._node}toString(){const t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label}computeLabel(t){}init(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=ES.quadrant(this._dx,this._dy),UE.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")}get interfaces_(){return[zE]}}class $S extends WS{constructor(){super(),$S.constructor_.apply(this,arguments)}static constructor_(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];const t=arguments[0],e=arguments[1];if(WS.constructor_.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{const e=t.getNumPoints()-1;this.init(t.getCoordinate(e),t.getCoordinate(e-1))}this.computeDirectedLabel()}static depthFactor(t,e){return t===zI.EXTERIOR&&e===zI.INTERIOR?1:t===zI.INTERIOR&&e===zI.EXTERIOR?-1:0}getNextMin(){return this._nextMin}getDepth(t){return this._depth[t]}setVisited(t){this._isVisited=t}computeDirectedLabel(){this._label=new FS(this._edge.getLabel()),this._isForward||this._label.flip()}getNext(){return this._next}setDepth(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new kS("assigned depths do not match",this.getCoordinate());this._depth[t]=e}isInteriorAreaEdge(){let t=!0;for(let e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,DS.LEFT)===zI.INTERIOR&&this._label.getLocation(e,DS.RIGHT)===zI.INTERIOR||(t=!1);return t}setNextMin(t){this._nextMin=t}print(t){super.print.call(this,t),t.print(" "+this._depth[DS.LEFT]+"/"+this._depth[DS.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")}setMinEdgeRing(t){this._minEdgeRing=t}isLineEdge(){const t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,zI.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,zI.EXTERIOR);return t&&e&&n}setEdgeRing(t){this._edgeRing=t}getMinEdgeRing(){return this._minEdgeRing}getDepthDelta(){let t=this._edge.getDepthDelta();return this._isForward||(t=-t),t}setInResult(t){this._isInResult=t}getSym(){return this._sym}isForward(){return this._isForward}getEdge(){return this._edge}printEdge(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)}setSym(t){this._sym=t}setVisitedEdge(t){this.setVisited(t),this._sym.setVisited(t)}setEdgeDepths(t,e){let n=this.getEdge().getDepthDelta();this._isForward||(n=-n);let i=1;t===DS.LEFT&&(i=-1);const r=DS.opposite(t),s=e+n*i;this.setDepth(t,e),this.setDepth(r,s)}getEdgeRing(){return this._edgeRing}isInResult(){return this._isInResult}setNext(t){this._next=t}isVisited(){return this._isVisited}}class XS{createNode(t){return new US(t,null)}}class VS{constructor(){VS.constructor_.apply(this,arguments)}static constructor_(){if(this._edges=new gN,this._nodes=null,this._edgeEndList=new gN,0===arguments.length)this._nodes=new YS(new XS);else if(1===arguments.length){const t=arguments[0];this._nodes=new YS(t)}}static linkResultDirectedEdges(t){for(let e=t.iterator();e.hasNext();){e.next().getEdges().linkResultDirectedEdges()}}printEdges(t){t.println("Edges:");for(let e=0;e<this._edges.size();e++){t.println("edge "+e+":");const n=this._edges.get(e);n.print(t),n.eiList.print(t)}}find(t){return this._nodes.find(t)}addNode(){if(arguments[0]instanceof US){const t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof XE){const t=arguments[0];return this._nodes.addNode(t)}}getNodeIterator(){return this._nodes.iterator()}linkResultDirectedEdges(){for(let t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkResultDirectedEdges()}}debugPrintln(t){zN.out.println(t)}isBoundaryNode(t,e){const n=this._nodes.find(e);if(null===n)return!1;const i=n.getLabel();return null!==i&&i.getLocation(t)===zI.BOUNDARY}linkAllDirectedEdges(){for(let t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkAllDirectedEdges()}}matchInSameDirection(t,e,n,i){return!!t.equals(n)&&(vN.index(t,e,i)===vN.COLLINEAR&&ES.quadrant(t,e)===ES.quadrant(n,i))}getEdgeEnds(){return this._edgeEndList}debugPrint(t){zN.out.print(t)}getEdgeIterator(){return this._edges.iterator()}findEdgeInSameDirection(t,e){for(let n=0;n<this._edges.size();n++){const i=this._edges.get(n),r=i.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1]))return i;if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return i}return null}insertEdge(t){this._edges.add(t)}findEdgeEnd(t){for(let e=this.getEdgeEnds().iterator();e.hasNext();){const n=e.next();if(n.getEdge()===t)return n}return null}addEdges(t){for(let e=t.iterator();e.hasNext();){const t=e.next();this._edges.add(t);const n=new $S(t,!0),i=new $S(t,!1);n.setSym(i),i.setSym(n),this.add(n),this.add(i)}}add(t){this._nodes.add(t),this._edgeEndList.add(t)}getNodes(){return this._nodes.values()}findEdge(t,e){for(let n=0;n<this._edges.size();n++){const i=this._edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null}}class HS{constructor(){HS.constructor_.apply(this,arguments)}static constructor_(){this._geometryFactory=null,this._shellList=new gN;const t=arguments[0];this._geometryFactory=t}static findEdgeRingContaining(t,e){const n=t.getLinearRing(),i=n.getEnvelopeInternal();let r=n.getCoordinateN(0),s=null,o=null;for(let t=e.iterator();t.hasNext();){const e=t.next(),a=e.getLinearRing(),l=a.getEnvelopeInternal();if(l.equals(i))continue;if(!l.contains(i))continue;r=FN.ptNotInList(n.getCoordinates(),a.getCoordinates());let c=!1;GI.isInRing(r,a.getCoordinates())&&(c=!0),c&&(null===s||o.contains(l))&&(s=e,o=s.getLinearRing().getEnvelopeInternal())}return s}sortShellsAndHoles(t,e,n){for(let i=t.iterator();i.hasNext();){const t=i.next();t.isHole()?n.add(t):e.add(t)}}computePolygons(t){const e=new gN;for(let n=t.iterator();n.hasNext();){const t=n.next().toPolygon(this._geometryFactory);e.add(t)}return e}placeFreeHoles(t,e){for(let n=e.iterator();n.hasNext();){const e=n.next();if(null===e.getShell()){const n=HS.findEdgeRingContaining(e,t);if(null===n)throw new kS("unable to assign hole to a shell",e.getCoordinate(0));e.setShell(n)}}}buildMinimalEdgeRings(t,e,n){const i=new gN;for(let r=t.iterator();r.hasNext();){const t=r.next();if(t.getMaxNodeDegree()>2){t.linkDirectedEdgesForMinimalEdgeRings();const i=t.buildMinimalRings(),r=this.findShell(i);null!==r?(this.placePolygonHoles(r,i),e.add(r)):n.addAll(i)}else i.add(t)}return i}buildMaximalEdgeRings(t){const e=new gN;for(let n=t.iterator();n.hasNext();){const t=n.next();if(t.isInResult()&&t.getLabel().isArea()&&null===t.getEdgeRing()){const n=new jS(t,this._geometryFactory);e.add(n),n.setInResult()}}return e}placePolygonHoles(t,e){for(let n=e.iterator();n.hasNext();){const e=n.next();e.isHole()&&e.setShell(t)}}getPolygons(){return this.computePolygons(this._shellList)}findShell(t){let e=0,n=null;for(let i=t.iterator();i.hasNext();){const t=i.next();t.isHole()||(n=t,e++)}return UE.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n}add(){if(1===arguments.length){const t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){const t=arguments[0],e=arguments[1];VS.linkResultDirectedEdges(e);const n=this.buildMaximalEdgeRings(t),i=new gN,r=this.buildMinimalEdgeRings(n,this._shellList,i);this.sortShellsAndHoles(r,this._shellList,i),this.placeFreeHoles(this._shellList,i)}}}class ZS{constructor(){ZS.constructor_.apply(this,arguments)}static constructor_(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new gN,this._resultLineList=new gN;const t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n}collectLines(t){for(let e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){const n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}}labelIsolatedLine(t,e){const n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)}build(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList}collectLineEdge(t,e,n){const i=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!OC.isResultOfOp(i,e)||r.isCovered()||(n.add(r),t.setVisitedEdge(!0)))}findCoveredLineEdges(){for(let t=this._op.getGraph().getNodes().iterator();t.hasNext();){t.next().getEdges().findCoveredLineEdges()}for(let t=this._op.getGraph().getEdgeEnds().iterator();t.hasNext();){const e=t.next(),n=e.getEdge();if(e.isLineEdge()&&!n.isCoveredSet()){const t=this._op.isCoveredByA(e.getCoordinate());n.setCovered(t)}}}labelIsolatedLines(t){for(let e=t.iterator();e.hasNext();){const t=e.next(),n=t.getLabel();t.isIsolated()&&(n.isNull(0)?this.labelIsolatedLine(t,0):this.labelIsolatedLine(t,1))}}buildLines(t){for(let t=this._lineEdgesList.iterator();t.hasNext();){const e=t.next(),n=this._geometryFactory.createLineString(e.getCoordinates());this._resultLineList.add(n),e.setInResult(!0)}}collectBoundaryTouchEdge(t,e,n){const i=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(UE.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(OC.isResultOfOp(i,e)&&e===OC.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))}}class JS{constructor(){JS.constructor_.apply(this,arguments)}static constructor_(){this._op=null,this._geometryFactory=null,this._resultPointList=new gN;const t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e}filterCoveredNodeToPoint(t){const e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){const t=this._geometryFactory.createPoint(e);this._resultPointList.add(t)}}extractNonCoveredResultNodes(t){for(let e=this._op.getGraph().getNodes().iterator();e.hasNext();){const n=e.next();if(!n.isInResult()&&(!n.isIncidentEdgeInResult()&&(0===n.getEdges().getDegree()||t===OC.INTERSECTION))){const e=n.getLabel();OC.isResultOfOp(e,t)&&this.filterCoveredNodeToPoint(n)}}}build(t){return this.extractNonCoveredResultNodes(t),this._resultPointList}}class QS{locate(t){}}class KS{constructor(){KS.constructor_.apply(this,arguments)}static constructor_(){this._geom=null;const t=arguments[0];this._geom=t}static locatePointInPolygon(t,e){if(e.isEmpty())return zI.EXTERIOR;const n=e.getExteriorRing(),i=KS.locatePointInRing(t,n);if(i!==zI.INTERIOR)return i;for(let n=0;n<e.getNumInteriorRing();n++){const i=e.getInteriorRingN(n),r=KS.locatePointInRing(t,i);if(r===zI.BOUNDARY)return zI.BOUNDARY;if(r===zI.INTERIOR)return zI.EXTERIOR}return zI.INTERIOR}static locatePointInRing(t,e){return e.getEnvelopeInternal().intersects(t)?GI.locateInRing(t,e.getCoordinates()):zI.EXTERIOR}static containsPointInPolygon(t,e){return zI.EXTERIOR!==KS.locatePointInPolygon(t,e)}static locateInGeometry(t,e){if(e instanceof wN)return KS.locatePointInPolygon(t,e);if(e instanceof CN){const n=new $I(e);for(;n.hasNext();){const i=n.next();if(i!==e){const e=KS.locateInGeometry(t,i);if(e!==zI.EXTERIOR)return e}}}return zI.EXTERIOR}static isContained(t,e){return zI.EXTERIOR!==KS.locate(t,e)}static locate(t,e){return e.isEmpty()?zI.EXTERIOR:e.getEnvelopeInternal().intersects(t)?KS.locateInGeometry(t,e):zI.EXTERIOR}locate(t){return KS.locate(t,this._geom)}get interfaces_(){return[QS]}}class tC{constructor(){tC.constructor_.apply(this,arguments)}static constructor_(){this._edgeMap=new mS,this._edgeList=null,this._ptInAreaLocation=[zI.NONE,zI.NONE]}getNextCW(t){this.getEdges();const e=this._edgeList.indexOf(t);let n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)}propagateSideLabels(t){let e=zI.NONE;for(let n=this.iterator();n.hasNext();){const i=n.next().getLabel();i.isArea(t)&&i.getLocation(t,DS.LEFT)!==zI.NONE&&(e=i.getLocation(t,DS.LEFT))}if(e===zI.NONE)return null;let n=e;for(let e=this.iterator();e.hasNext();){const i=e.next(),r=i.getLabel();if(r.getLocation(t,DS.ON)===zI.NONE&&r.setLocation(t,DS.ON,n),r.isArea(t)){const e=r.getLocation(t,DS.LEFT),s=r.getLocation(t,DS.RIGHT);if(s!==zI.NONE){if(s!==n)throw new kS("side location conflict",i.getCoordinate());e===zI.NONE&&UE.shouldNeverReachHere("found single null side (at "+i.getCoordinate()+")"),n=e}else UE.isTrue(r.getLocation(t,DS.LEFT)===zI.NONE,"found single null side"),r.setLocation(t,DS.RIGHT,n),r.setLocation(t,DS.LEFT,n)}}}getCoordinate(){const t=this.iterator();if(!t.hasNext())return null;return t.next().getCoordinate()}print(t){zN.out.println("EdgeEndStar:   "+this.getCoordinate());for(let e=this.iterator();e.hasNext();){e.next().print(t)}}isAreaLabelsConsistent(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}checkAreaLabelsConsistent(t){const e=this.getEdges();if(e.size()<=0)return!0;const n=e.size()-1,i=e.get(n).getLabel().getLocation(t,DS.LEFT);UE.isTrue(i!==zI.NONE,"Found unlabelled area edge");let r=i;for(let e=this.iterator();e.hasNext();){const n=e.next().getLabel();UE.isTrue(n.isArea(t),"Found non-area edge");const i=n.getLocation(t,DS.LEFT),s=n.getLocation(t,DS.RIGHT);if(i===s)return!1;if(s!==r)return!1;r=i}return!0}findIndex(t){this.iterator();for(let e=0;e<this._edgeList.size();e++){if(this._edgeList.get(e)===t)return e}return-1}iterator(){return this.getEdges().iterator()}getEdges(){return null===this._edgeList&&(this._edgeList=new gN(this._edgeMap.values())),this._edgeList}getLocation(t,e,n){return this._ptInAreaLocation[t]===zI.NONE&&(this._ptInAreaLocation[t]=KS.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]}toString(){const t=new yN;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(let e=this.iterator();e.hasNext();){const n=e.next();t.append(n),t.append("\n")}return t.toString()}computeEdgeEndLabels(t){for(let e=this.iterator();e.hasNext();){e.next().computeLabel(t)}}computeLabelling(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);const e=[!1,!1];for(let t=this.iterator();t.hasNext();){const n=t.next().getLabel();for(let t=0;t<2;t++)n.isLine(t)&&n.getLocation(t)===zI.BOUNDARY&&(e[t]=!0)}for(let n=this.iterator();n.hasNext();){const i=n.next(),r=i.getLabel();for(let n=0;n<2;n++)if(r.isAnyNull(n)){let s=zI.NONE;if(e[n])s=zI.EXTERIOR;else{const e=i.getCoordinate();s=this.getLocation(n,e,t)}r.setAllLocationsIfNull(n,s)}}}getDegree(){return this._edgeMap.size()}insertEdgeEnd(t,e){this._edgeMap.put(t,e),this._edgeList=null}}class eC extends tC{constructor(){super(),eC.constructor_.apply(this,arguments)}static constructor_(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}linkResultDirectedEdges(){this.getResultAreaEdges();let t=null,e=null,n=this._SCANNING_FOR_INCOMING;for(let i=0;i<this._resultAreaEdgeList.size();i++){const r=this._resultAreaEdgeList.get(i),s=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),n){case this._SCANNING_FOR_INCOMING:if(!s.isInResult())continue;e=s,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new kS("no outgoing dirEdge found",this.getCoordinate());UE.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}}insert(t){const e=t;this.insertEdgeEnd(e,e)}getRightmostEdge(){const t=this.getEdges(),e=t.size();if(e<1)return null;const n=t.get(0);if(1===e)return n;const i=t.get(e-1),r=n.getQuadrant(),s=i.getQuadrant();return ES.isNorthern(r)&&ES.isNorthern(s)?n:ES.isNorthern(r)||ES.isNorthern(s)?0!==n.getDy()?n:0!==i.getDy()?i:(UE.shouldNeverReachHere("found two horizontal edges incident on node"),null):i}print(t){zN.out.println("DirectedEdgeStar: "+this.getCoordinate());for(let e=this.iterator();e.hasNext();){const n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}}getResultAreaEdges(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new gN;for(let t=this.iterator();t.hasNext();){const e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList}updateLabelling(t){for(let e=this.iterator();e.hasNext();){const n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}}linkAllDirectedEdges(){this.getEdges();let t=null,e=null;for(let n=this._edgeList.size()-1;n>=0;n--){const i=this._edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)}computeDepths(){if(1===arguments.length){const t=arguments[0],e=this.findIndex(t),n=t.getDepth(DS.LEFT),i=t.getDepth(DS.RIGHT),r=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,r)!==i)throw new kS("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){const t=arguments[1];let e=arguments[2];for(let n=arguments[0];n<t;n++){const t=this._edgeList.get(n);t.setEdgeDepths(DS.RIGHT,e),e=t.getDepth(DS.LEFT)}return e}}mergeSymLabels(){for(let t=this.iterator();t.hasNext();){const e=t.next();e.getLabel().merge(e.getSym().getLabel())}}linkMinimalDirectedEdges(t){let e=null,n=null,i=this._SCANNING_FOR_INCOMING;for(let r=this._resultAreaEdgeList.size()-1;r>=0;r--){const s=this._resultAreaEdgeList.get(r),o=s.getSym();switch(null===e&&s.getEdgeRing()===t&&(e=s),i){case this._SCANNING_FOR_INCOMING:if(o.getEdgeRing()!==t)continue;n=o,i=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(s.getEdgeRing()!==t)continue;n.setNextMin(s),i=this._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(UE.isTrue(null!==e,"found null for first outgoing dirEdge"),UE.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))}getOutgoingDegree(){if(0===arguments.length){let t=0;for(let e=this.iterator();e.hasNext();){e.next().isInResult()&&t++}return t}if(1===arguments.length){const t=arguments[0];let e=0;for(let n=this.iterator();n.hasNext();){n.next().getEdgeRing()===t&&e++}return e}}getLabel(){return this._label}findCoveredLineEdges(){let t=zI.NONE;for(let e=this.iterator();e.hasNext();){const n=e.next(),i=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=zI.INTERIOR;break}if(i.isInResult()){t=zI.EXTERIOR;break}}}if(t===zI.NONE)return null;let e=t;for(let t=this.iterator();t.hasNext();){const n=t.next(),i=n.getSym();n.isLineEdge()?n.getEdge().setCovered(e===zI.INTERIOR):(n.isInResult()&&(e=zI.EXTERIOR),i.isInResult()&&(e=zI.INTERIOR))}}computeLabelling(t){super.computeLabelling.call(this,t),this._label=new FS(zI.NONE);for(let t=this.iterator();t.hasNext();){const e=t.next().getEdge().getLabel();for(let t=0;t<2;t++){const n=e.getLocation(t);n!==zI.INTERIOR&&n!==zI.BOUNDARY||this._label.setLocation(t,zI.INTERIOR)}}}}class nC extends XS{constructor(){super()}createNode(t){return new US(t,new eC)}}class iC{constructor(){iC.constructor_.apply(this,arguments)}static constructor_(){this.mce=null,this.chainIndex=null;const t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e}computeIntersections(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)}}class rC{constructor(){rC.constructor_.apply(this,arguments)}static constructor_(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){const t=arguments[0],e=arguments[1];this._eventType=rC.DELETE,this._xValue=t,this._insertEvent=e}else if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];this._eventType=rC.INSERT,this._label=t,this._xValue=e,this._obj=n}}isDelete(){return this._eventType===rC.DELETE}setDeleteEventIndex(t){this._deleteEventIndex=t}getObject(){return this._obj}compareTo(t){const e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0}getInsertEvent(){return this._insertEvent}isInsert(){return this._eventType===rC.INSERT}isSameLabel(t){return null!==this._label&&this._label===t._label}getDeleteEventIndex(){return this._deleteEventIndex}get interfaces_(){return[zE]}}rC.INSERT=1,rC.DELETE=2;class sC{}class oC{constructor(){oC.constructor_.apply(this,arguments)}static constructor_(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;const t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n}static isAdjacentSegments(t,e){return 1===Math.abs(t-e)}isTrivialIntersection(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(oC.isAdjacentSegments(e,i))return!0;if(t.isClosed()){const n=t.getNumPoints()-1;if(0===e&&i===n||0===i&&e===n)return!0}}return!1}getProperIntersectionPoint(){return this._properIntersectionPoint}setIsDoneIfProperInt(t){this._isDoneWhenProperInt=t}hasProperInteriorIntersection(){return this._hasProperInterior}isBoundaryPointInternal(t,e){for(let n=e.iterator();n.hasNext();){const e=n.next().getCoordinate();if(t.isIntersection(e))return!0}return!1}hasProperIntersection(){return this._hasProper}hasIntersection(){return this._hasIntersection}isDone(){return this._isDone}isBoundaryPoint(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))}setBoundaryNodes(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e}addIntersections(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;const r=t.getCoordinates()[e],s=t.getCoordinates()[e+1],o=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,s,o,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))}}class aC extends sC{constructor(){super(),aC.constructor_.apply(this,arguments)}static constructor_(){this.events=new gN,this.nOverlaps=null}prepareEvents(){nS.sort(this.events);for(let t=0;t<this.events.size();t++){const e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}}computeIntersections(){if(1===arguments.length){const t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(let e=0;e<this.events.size();e++){const n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof oC&&CE(arguments[0],fN)&&CE(arguments[1],fN)){const t=arguments[0],e=arguments[1],n=arguments[2];this.addEdges(t,t),this.addEdges(e,e),this.computeIntersections(n)}else if("boolean"==typeof arguments[2]&&CE(arguments[0],fN)&&arguments[1]instanceof oC){const t=arguments[0],e=arguments[1];arguments[2]?this.addEdges(t,null):this.addEdges(t),this.computeIntersections(e)}}addEdge(t,e){const n=t.getMonotoneChainEdge(),i=n.getStartIndexes();for(let t=0;t<i.length-1;t++){const i=new iC(n,t),r=new rC(e,n.getMinX(t),i);this.events.add(r),this.events.add(new rC(n.getMaxX(t),r))}}processOverlaps(t,e,n,i){const r=n.getObject();for(let s=t;s<e;s++){const t=this.events.get(s);if(t.isInsert()){const e=t.getObject();n.isSameLabel(t)||(r.computeIntersections(e,i),this.nOverlaps++)}}}addEdges(){if(1===arguments.length){for(let t=arguments[0].iterator();t.hasNext();){const e=t.next();this.addEdge(e,e)}}else if(2===arguments.length){const t=arguments[1];for(let e=arguments[0].iterator();e.hasNext();){const n=e.next();this.addEdge(n,t)}}}}class lC{constructor(){lC.constructor_.apply(this,arguments)}static constructor_(){this._min=kE.POSITIVE_INFINITY,this._max=kE.NEGATIVE_INFINITY}getMin(){return this._min}intersects(t,e){return!(this._min>e||this._max<t)}getMax(){return this._max}toString(){return II.toLineString(new XE(this._min,0),new XE(this._max,0))}}lC.NodeComparator=class{compare(t,e){const n=t,i=e,r=(n._min+n._max)/2,s=(i._min+i._max)/2;return r<s?-1:r>s?1:0}get interfaces_(){return[qE]}};class cC extends lC{constructor(){super(),cC.constructor_.apply(this,arguments)}static constructor_(){this._item=null;const t=arguments[0],e=arguments[1],n=arguments[2];this._min=t,this._max=e,this._item=n}query(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)}}class hC extends lC{constructor(){super(),hC.constructor_.apply(this,arguments)}static constructor_(){this._node1=null,this._node2=null;const t=arguments[0],e=arguments[1];this._node1=t,this._node2=e,this.buildExtent(this._node1,this._node2)}buildExtent(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)}query(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)}}class uC{constructor(){uC.constructor_.apply(this,arguments)}static constructor_(){this._leaves=new gN,this._root=null,this._level=0}buildTree(){nS.sort(this._leaves,new lC.NodeComparator);let t=this._leaves,e=null,n=new gN;for(;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}}insert(t,e,n){if(null!==this._root)throw new IllegalStateException("Index cannot be added to once it has been queried");this._leaves.add(new cC(t,e,n))}query(t,e,n){if(this.init(),null===this._root)return null;this._root.query(t,e,n)}buildRoot(){if(null!==this._root)return null;this._root=this.buildTree()}printNode(t){zN.out.println(II.toLineString(new XE(t._min,this._level),new XE(t._max,this._level)))}init(){return null!==this._root||0===this._leaves.size()?null:void this.buildRoot()}buildLevel(t,e){this._level++,e.clear();for(let n=0;n<t.size();n+=2){const i=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(i);else{const i=new hC(t.get(n),t.get(n+1));e.add(i)}}}}class fC{constructor(){fC.constructor_.apply(this,arguments)}static constructor_(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){const t=arguments[0];this._lines=t}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this._lines=t,this._isForcedToLineString=e}}static getGeometry(){if(1===arguments.length){const t=arguments[0];return t.getFactory().buildGeometry(fC.getLines(t))}if(2===arguments.length){const t=arguments[0],e=arguments[1];return t.getFactory().buildGeometry(fC.getLines(t,e))}}static getLines(){if(1===arguments.length){const t=arguments[0];return fC.getLines(t,!1)}if(2===arguments.length){if(CE(arguments[0],hN)&&CE(arguments[1],hN)){const t=arguments[1];for(let e=arguments[0].iterator();e.hasNext();){const n=e.next();fC.getLines(n,t)}return t}if(arguments[0]instanceof ZE&&"boolean"==typeof arguments[1]){const t=arguments[0],e=arguments[1],n=new gN;return t.apply(new fC(n,e)),n}if(arguments[0]instanceof ZE&&CE(arguments[1],hN)){const t=arguments[0],e=arguments[1];return t instanceof oN?e.add(t):t.apply(new fC(e)),e}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&CE(arguments[0],hN)&&CE(arguments[1],hN)){const t=arguments[1],e=arguments[2];for(let n=arguments[0].iterator();n.hasNext();){const i=n.next();fC.getLines(i,t,e)}return t}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ZE&&CE(arguments[1],hN)){const t=arguments[1],e=arguments[2];return arguments[0].apply(new fC(t,e)),t}}}filter(t){if(this._isForcedToLineString&&t instanceof kN){const e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof oN&&this._lines.add(t)}setForceToLineString(t){this._isForcedToLineString=t}get interfaces_(){return[DE]}}class dC{constructor(){dC.constructor_.apply(this,arguments)}static constructor_(){this._items=new gN}visitItem(t){this._items.add(t)}getItems(){return this._items}get interfaces_(){return[sS]}}class gC{constructor(){gC.constructor_.apply(this,arguments)}static constructor_(){this._geom=null,this._index=null;const t=arguments[0];if(!(CE(t,MN)||t instanceof kN))throw new PE("Argument must be Polygonal or LinearRing");this._geom=t}locate(t){null===this._index&&(this._index=new _C(this._geom),this._geom=null);const e=new FI(t),n=new pC(e);return this._index.query(t.y,t.y,n),e.getLocation()}get interfaces_(){return[QS]}}class pC{constructor(){pC.constructor_.apply(this,arguments)}static constructor_(){this._counter=null;const t=arguments[0];this._counter=t}visitItem(t){const e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))}get interfaces_(){return[sS]}}class _C{constructor(){_C.constructor_.apply(this,arguments)}static constructor_(){this._isEmpty=!1,this._index=new uC;const t=arguments[0];t.isEmpty()?this._isEmpty=!0:this.init(t)}init(t){for(let e=fC.getLines(t).iterator();e.hasNext();){const t=e.next().getCoordinates();this.addLine(t)}}addLine(t){for(let e=1;e<t.length;e++){const n=new OI(t[e-1],t[e]),i=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y);this._index.insert(i,r,n)}}query(){if(2===arguments.length){const t=arguments[0],e=arguments[1];if(this._isEmpty)return new gN;const n=new dC;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];if(this._isEmpty)return null;this._index.query(t,e,n)}}}gC.SegmentVisitor=pC,gC.IntervalIndexedGeometry=_C;class yC{constructor(){yC.constructor_.apply(this,arguments)}static constructor_(){this.coord=null,this.segmentIndex=null,this.dist=null;const t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new XE(t),this.segmentIndex=e,this.dist=n}getSegmentIndex(){return this.segmentIndex}getCoordinate(){return this.coord}print(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)}compareTo(t){const e=t;return this.compare(e.segmentIndex,e.dist)}isEndPoint(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t}toString(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}getDistance(){return this.dist}compare(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0}get interfaces_(){return[zE]}}class mC{constructor(){mC.constructor_.apply(this,arguments)}static constructor_(){this._nodeMap=new mS,this.edge=null;const t=arguments[0];this.edge=t}print(t){t.println("Intersections:");for(let e=this.iterator();e.hasNext();){e.next().print(t)}}iterator(){return this._nodeMap.values().iterator()}addSplitEdges(t){this.addEndpoints();const e=this.iterator();let n=e.next();for(;e.hasNext();){const i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}}addEndpoints(){const t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)}createSplitEdge(t,e){let n=e.segmentIndex-t.segmentIndex+2;const i=this.edge.pts[e.segmentIndex],r=e.dist>0||!e.coord.equals2D(i);r||n--;const s=new Array(n).fill(null);let o=0;s[o++]=new XE(t.coord);for(let n=t.segmentIndex+1;n<=e.segmentIndex;n++)s[o++]=this.edge.pts[n];return r&&(s[o]=e.coord),new EC(s,new FS(this.edge._label))}add(t,e,n){const i=new yC(t,e,n),r=this._nodeMap.get(i);return null!==r?r:(this._nodeMap.put(i,i),i)}isIntersection(t){for(let e=this.iterator();e.hasNext();){if(e.next().coord.equals(t))return!0}return!1}}class xC{constructor(){xC.constructor_.apply(this,arguments)}static constructor_(){if(this._matrix=null,0===arguments.length)this._matrix=Array(3).fill().map((()=>Array(3))),this.setAll(iN.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){const t=arguments[0];xC.constructor_.call(this),this.set(t)}else if(arguments[0]instanceof xC){const t=arguments[0];xC.constructor_.call(this),this._matrix[zI.INTERIOR][zI.INTERIOR]=t._matrix[zI.INTERIOR][zI.INTERIOR],this._matrix[zI.INTERIOR][zI.BOUNDARY]=t._matrix[zI.INTERIOR][zI.BOUNDARY],this._matrix[zI.INTERIOR][zI.EXTERIOR]=t._matrix[zI.INTERIOR][zI.EXTERIOR],this._matrix[zI.BOUNDARY][zI.INTERIOR]=t._matrix[zI.BOUNDARY][zI.INTERIOR],this._matrix[zI.BOUNDARY][zI.BOUNDARY]=t._matrix[zI.BOUNDARY][zI.BOUNDARY],this._matrix[zI.BOUNDARY][zI.EXTERIOR]=t._matrix[zI.BOUNDARY][zI.EXTERIOR],this._matrix[zI.EXTERIOR][zI.INTERIOR]=t._matrix[zI.EXTERIOR][zI.INTERIOR],this._matrix[zI.EXTERIOR][zI.BOUNDARY]=t._matrix[zI.EXTERIOR][zI.BOUNDARY],this._matrix[zI.EXTERIOR][zI.EXTERIOR]=t._matrix[zI.EXTERIOR][zI.EXTERIOR]}}static matches(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){const t=arguments[0],e=arguments[1];return e===iN.SYM_DONTCARE||(e===iN.SYM_TRUE&&(t>=0||t===iN.TRUE)||(e===iN.SYM_FALSE&&t===iN.FALSE||(e===iN.SYM_P&&t===iN.P||(e===iN.SYM_L&&t===iN.L||e===iN.SYM_A&&t===iN.A))))}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){const t=arguments[1];return new xC(arguments[0]).matches(t)}}static isTrue(t){return t>=0||t===iN.TRUE}isIntersects(){return!this.isDisjoint()}isCovers(){return(xC.isTrue(this._matrix[zI.INTERIOR][zI.INTERIOR])||xC.isTrue(this._matrix[zI.INTERIOR][zI.BOUNDARY])||xC.isTrue(this._matrix[zI.BOUNDARY][zI.INTERIOR])||xC.isTrue(this._matrix[zI.BOUNDARY][zI.BOUNDARY]))&&this._matrix[zI.EXTERIOR][zI.INTERIOR]===iN.FALSE&&this._matrix[zI.EXTERIOR][zI.BOUNDARY]===iN.FALSE}isCoveredBy(){return(xC.isTrue(this._matrix[zI.INTERIOR][zI.INTERIOR])||xC.isTrue(this._matrix[zI.INTERIOR][zI.BOUNDARY])||xC.isTrue(this._matrix[zI.BOUNDARY][zI.INTERIOR])||xC.isTrue(this._matrix[zI.BOUNDARY][zI.BOUNDARY]))&&this._matrix[zI.INTERIOR][zI.EXTERIOR]===iN.FALSE&&this._matrix[zI.BOUNDARY][zI.EXTERIOR]===iN.FALSE}set(){if(1===arguments.length){const t=arguments[0];for(let e=0;e<t.length;e++){const n=Math.trunc(e/3),i=e%3;this._matrix[n][i]=iN.toDimensionValue(t.charAt(e))}}else if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];this._matrix[t][e]=n}}isContains(){return xC.isTrue(this._matrix[zI.INTERIOR][zI.INTERIOR])&&this._matrix[zI.EXTERIOR][zI.INTERIOR]===iN.FALSE&&this._matrix[zI.EXTERIOR][zI.BOUNDARY]===iN.FALSE}setAtLeast(){if(1===arguments.length){const t=arguments[0];for(let e=0;e<t.length;e++){const n=Math.trunc(e/3),i=e%3;this.setAtLeast(n,i,iN.toDimensionValue(t.charAt(e)))}}else if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];this._matrix[t][e]<n&&(this._matrix[t][e]=n)}}setAtLeastIfValid(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)}isWithin(){return xC.isTrue(this._matrix[zI.INTERIOR][zI.INTERIOR])&&this._matrix[zI.INTERIOR][zI.EXTERIOR]===iN.FALSE&&this._matrix[zI.BOUNDARY][zI.EXTERIOR]===iN.FALSE}isTouches(t,e){return t>e?this.isTouches(e,t):(t===iN.A&&e===iN.A||t===iN.L&&e===iN.L||t===iN.L&&e===iN.A||t===iN.P&&e===iN.A||t===iN.P&&e===iN.L)&&(this._matrix[zI.INTERIOR][zI.INTERIOR]===iN.FALSE&&(xC.isTrue(this._matrix[zI.INTERIOR][zI.BOUNDARY])||xC.isTrue(this._matrix[zI.BOUNDARY][zI.INTERIOR])||xC.isTrue(this._matrix[zI.BOUNDARY][zI.BOUNDARY])))}isOverlaps(t,e){return t===iN.P&&e===iN.P||t===iN.A&&e===iN.A?xC.isTrue(this._matrix[zI.INTERIOR][zI.INTERIOR])&&xC.isTrue(this._matrix[zI.INTERIOR][zI.EXTERIOR])&&xC.isTrue(this._matrix[zI.EXTERIOR][zI.INTERIOR]):t===iN.L&&e===iN.L&&(1===this._matrix[zI.INTERIOR][zI.INTERIOR]&&xC.isTrue(this._matrix[zI.INTERIOR][zI.EXTERIOR])&&xC.isTrue(this._matrix[zI.EXTERIOR][zI.INTERIOR]))}isEquals(t,e){return t===e&&(xC.isTrue(this._matrix[zI.INTERIOR][zI.INTERIOR])&&this._matrix[zI.INTERIOR][zI.EXTERIOR]===iN.FALSE&&this._matrix[zI.BOUNDARY][zI.EXTERIOR]===iN.FALSE&&this._matrix[zI.EXTERIOR][zI.INTERIOR]===iN.FALSE&&this._matrix[zI.EXTERIOR][zI.BOUNDARY]===iN.FALSE)}toString(){const t=new GN("123456789");for(let e=0;e<3;e++)for(let n=0;n<3;n++)t.setCharAt(3*e+n,iN.toDimensionSymbol(this._matrix[e][n]));return t.toString()}setAll(t){for(let e=0;e<3;e++)for(let n=0;n<3;n++)this._matrix[e][n]=t}get(t,e){return this._matrix[t][e]}transpose(){let t=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=t,t=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=t,t=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=t,this}matches(t){if(9!==t.length)throw new PE("Should be length 9: "+t);for(let e=0;e<3;e++)for(let n=0;n<3;n++)if(!xC.matches(this._matrix[e][n],t.charAt(3*e+n)))return!1;return!0}add(t){for(let e=0;e<3;e++)for(let n=0;n<3;n++)this.setAtLeast(e,n,t.get(e,n))}isDisjoint(){return this._matrix[zI.INTERIOR][zI.INTERIOR]===iN.FALSE&&this._matrix[zI.INTERIOR][zI.BOUNDARY]===iN.FALSE&&this._matrix[zI.BOUNDARY][zI.INTERIOR]===iN.FALSE&&this._matrix[zI.BOUNDARY][zI.BOUNDARY]===iN.FALSE}isCrosses(t,e){return t===iN.P&&e===iN.L||t===iN.P&&e===iN.A||t===iN.L&&e===iN.A?xC.isTrue(this._matrix[zI.INTERIOR][zI.INTERIOR])&&xC.isTrue(this._matrix[zI.INTERIOR][zI.EXTERIOR]):t===iN.L&&e===iN.P||t===iN.A&&e===iN.P||t===iN.A&&e===iN.L?xC.isTrue(this._matrix[zI.INTERIOR][zI.INTERIOR])&&xC.isTrue(this._matrix[zI.EXTERIOR][zI.INTERIOR]):t===iN.L&&e===iN.L&&0===this._matrix[zI.INTERIOR][zI.INTERIOR]}get interfaces_(){return[TE]}}class bC{constructor(){bC.constructor_.apply(this,arguments)}static constructor_(){if(this._data=null,this._size=0,0===arguments.length)bC.constructor_.call(this,10);else if(1===arguments.length){const t=arguments[0];this._data=new Array(t).fill(null)}}size(){return this._size}addAll(t){return null===t||0===t.length?null:(this.ensureCapacity(this._size+t.length),zN.arraycopy(t,0,this._data,this._size,t.length),void(this._size+=t.length))}ensureCapacity(t){if(t<=this._data.length)return null;const e=Math.max(t,2*this._data.length);this._data=_N.copyOf(this._data,e)}toArray(){const t=new Array(this._size).fill(null);return zN.arraycopy(this._data,0,t,0,this._size),t}add(t){this.ensureCapacity(this._size+1),this._data[this._size]=t,++this._size}}class vC{static toIntArray(t){const e=new Array(t.size()).fill(null);for(let n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e}getChainStartIndices(t){let e=0;const n=new bC(Math.trunc(t.length/2));n.add(e);do{const i=this.findChainEnd(t,e);n.add(i),e=i}while(e<t.length-1);return n.toArray()}findChainEnd(t,e){const n=ES.quadrant(t[e],t[e+1]);let i=e+1;for(;i<t.length;){if(ES.quadrant(t[i-1],t[i])!==n)break;i++}return i-1}OLDgetChainStartIndices(t){let e=0;const n=new gN;n.add(e);do{const i=this.findChainEnd(t,e);n.add(i),e=i}while(e<t.length-1);return vC.toIntArray(n)}}class MC{constructor(){MC.constructor_.apply(this,arguments)}static constructor_(){this.e=null,this.pts=null,this.startIndex=null;const t=arguments[0];this.e=t,this.pts=t.getCoordinates();const e=new vC;this.startIndex=e.getChainStartIndices(this.pts)}getCoordinates(){return this.pts}getMaxX(t){const e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n}getMinX(t){const e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n}computeIntersectsForChain(){if(4===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],i)}else if(6===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3],r=arguments[4],s=arguments[5];if(e-t==1&&r-i==1)return s.addIntersections(this.e,t,n.e,i),null;if(!this.overlaps(t,e,n,i,r))return null;const o=Math.trunc((t+e)/2),a=Math.trunc((i+r)/2);t<o&&(i<a&&this.computeIntersectsForChain(t,o,n,i,a,s),a<r&&this.computeIntersectsForChain(t,o,n,a,r,s)),o<e&&(i<a&&this.computeIntersectsForChain(o,e,n,i,a,s),a<r&&this.computeIntersectsForChain(o,e,n,a,r,s))}}overlaps(t,e,n,i,r){return HE.intersects(this.pts[t],this.pts[e],n.pts[i],n.pts[r])}getStartIndexes(){return this.startIndex}computeIntersects(t,e){for(let n=0;n<this.startIndex.length-1;n++)for(let i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)}}class wC{constructor(){wC.constructor_.apply(this,arguments)}static constructor_(){this._depth=Array(2).fill().map((()=>Array(3)));for(let t=0;t<2;t++)for(let e=0;e<3;e++)this._depth[t][e]=wC.NULL_VALUE}static depthAtLocation(t){return t===zI.EXTERIOR?0:t===zI.INTERIOR?1:wC.NULL_VALUE}getDepth(t,e){return this._depth[t][e]}setDepth(t,e,n){this._depth[t][e]=n}isNull(){if(0===arguments.length){for(let t=0;t<2;t++)for(let e=0;e<3;e++)if(this._depth[t][e]!==wC.NULL_VALUE)return!1;return!0}if(1===arguments.length){const t=arguments[0];return this._depth[t][1]===wC.NULL_VALUE}if(2===arguments.length){const t=arguments[0],e=arguments[1];return this._depth[t][e]===wC.NULL_VALUE}}normalize(){for(let t=0;t<2;t++)if(!this.isNull(t)){let e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(let n=1;n<3;n++){let i=0;this._depth[t][n]>e&&(i=1),this._depth[t][n]=i}}}getDelta(t){return this._depth[t][DS.RIGHT]-this._depth[t][DS.LEFT]}getLocation(t,e){return this._depth[t][e]<=0?zI.EXTERIOR:zI.INTERIOR}toString(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}add(){if(1===arguments.length){const t=arguments[0];for(let e=0;e<2;e++)for(let n=1;n<3;n++){const i=t.getLocation(e,n);i!==zI.EXTERIOR&&i!==zI.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=wC.depthAtLocation(i):this._depth[e][n]+=wC.depthAtLocation(i))}}else if(3===arguments.length){const t=arguments[0],e=arguments[1];arguments[2]===zI.INTERIOR&&this._depth[t][e]++}}}wC.NULL_VALUE=-1;class EC extends BS{constructor(){super(),EC.constructor_.apply(this,arguments)}static constructor_(){if(this.pts=null,this._env=null,this.eiList=new mC(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new wC,this._depthDelta=0,1===arguments.length){const t=arguments[0];EC.constructor_.call(this,t,null)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.pts=t,this._label=e}}static updateIM(){if(!(2===arguments.length&&arguments[1]instanceof xC&&arguments[0]instanceof FS))return super.updateIM.apply(this,arguments);{const t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,DS.ON),t.getLocation(1,DS.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,DS.LEFT),t.getLocation(1,DS.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,DS.RIGHT),t.getLocation(1,DS.RIGHT),2))}}getDepth(){return this._depth}getCollapsedEdge(){const t=new Array(2).fill(null);t[0]=this.pts[0],t[1]=this.pts[1];return new EC(t,FS.toLineLabel(this._label))}isIsolated(){return this._isIsolated}getCoordinates(){return this.pts}setIsolated(t){this._isIsolated=t}setName(t){this._name=t}equals(t){if(!(t instanceof EC))return!1;const e=t;if(this.pts.length!==e.pts.length)return!1;let n=!0,i=!0,r=this.pts.length;for(let t=0;t<this.pts.length;t++)if(this.pts[t].equals2D(e.pts[t])||(n=!1),this.pts[t].equals2D(e.pts[--r])||(i=!1),!n&&!i)return!1;return!0}getCoordinate(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){const t=arguments[0];return this.pts[t]}}print(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(let e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)}computeIM(t){EC.updateIM(this._label,t)}isCollapsed(){return!!this._label.isArea()&&(3===this.pts.length&&!!this.pts[0].equals(this.pts[2]))}isClosed(){return this.pts[0].equals(this.pts[this.pts.length-1])}getMaximumSegmentIndex(){return this.pts.length-1}getDepthDelta(){return this._depthDelta}getNumPoints(){return this.pts.length}printReverse(t){t.print("edge "+this._name+": ");for(let e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")}getMonotoneChainEdge(){return null===this._mce&&(this._mce=new MC(this)),this._mce}getEnvelope(){if(null===this._env){this._env=new HE;for(let t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env}addIntersection(t,e,n,i){const r=new XE(t.getIntersection(i));let s=e,o=t.getEdgeDistance(n,i);const a=s+1;if(a<this.pts.length){const t=this.pts[a];r.equals2D(t)&&(s=a,o=0)}this.eiList.add(r,s,o)}toString(){const t=new GN;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(let e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()}isPointwiseEqual(t){if(this.pts.length!==t.pts.length)return!1;for(let e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0}setDepthDelta(t){this._depthDelta=t}getEdgeIntersectionList(){return this.eiList}addIntersections(t,e,n){for(let i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)}}class NC extends VS{constructor(){super(),NC.constructor_.apply(this,arguments)}static constructor_(){if(this._parentGeom=null,this._lineEdgeMap=new $N,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new XI,2===arguments.length){const t=arguments[0],e=arguments[1];NC.constructor_.call(this,t,e,qI.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];this._argIndex=t,this._parentGeom=e,this._boundaryNodeRule=n,null!==e&&this.add(e)}}static determineBoundary(t,e){return t.isInBoundary(e)?zI.BOUNDARY:zI.INTERIOR}insertBoundaryPoint(t,e){const n=this._nodes.addNode(e).getLabel();let i=1,r=zI.NONE;r=n.getLocation(t,DS.ON),r===zI.BOUNDARY&&i++;const s=NC.determineBoundary(this._boundaryNodeRule,i);n.setLocation(t,s)}computeSelfNodes(){if(2===arguments.length){const t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){const t=arguments[1],e=arguments[2],n=new oC(arguments[0],!0,!1);n.setIsDoneIfProperInt(e);const i=this.createEdgeSetIntersector(),r=this._parentGeom instanceof kN||this._parentGeom instanceof wN||this._parentGeom instanceof BN,s=t||!r;return i.computeIntersections(this._edges,n,s),this.addSelfIntersectionNodes(this._argIndex),n}}computeSplitEdges(t){for(let e=this._edges.iterator();e.hasNext();){e.next().eiList.addSplitEdges(t)}}computeEdgeIntersections(t,e,n){const i=new oC(e,n,!0);i.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes());return this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,i),i}getGeometry(){return this._parentGeom}getBoundaryNodeRule(){return this._boundaryNodeRule}hasTooFewPoints(){return this._hasTooFewPoints}addPoint(){if(arguments[0]instanceof lN){const t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,zI.INTERIOR)}else if(arguments[0]instanceof XE){const t=arguments[0];this.insertPoint(this._argIndex,t,zI.INTERIOR)}}addPolygon(t){this.addPolygonRing(t.getExteriorRing(),zI.EXTERIOR,zI.INTERIOR);for(let e=0;e<t.getNumInteriorRing();e++){const n=t.getInteriorRingN(e);this.addPolygonRing(n,zI.INTERIOR,zI.EXTERIOR)}}addEdge(t){this.insertEdge(t);const e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],zI.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],zI.BOUNDARY)}addLineString(t){const e=FN.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;const n=new EC(e,new FS(this._argIndex,zI.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),UE.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])}getInvalidPoint(){return this._invalidPoint}getBoundaryPoints(){const t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null);let n=0;for(let i=t.iterator();i.hasNext();){const t=i.next();e[n++]=t.getCoordinate().copy()}return e}getBoundaryNodes(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes}addSelfIntersectionNode(t,e,n){if(this.isBoundaryNode(t,e))return null;n===zI.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)}addPolygonRing(t,e,n){if(t.isEmpty())return null;const i=FN.removeRepeatedPoints(t.getCoordinates());if(i.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=i[0],null;let r=e,s=n;vN.isCCW(i)&&(r=n,s=e);const o=new EC(i,new FS(this._argIndex,zI.BOUNDARY,r,s));this._lineEdgeMap.put(t,o),this.insertEdge(o),this.insertPoint(this._argIndex,i[0],zI.BOUNDARY)}insertPoint(t,e,n){const i=this._nodes.addNode(e),r=i.getLabel();null===r?i._label=new FS(t,n):r.setLocation(t,n)}createEdgeSetIntersector(){return new aC}addSelfIntersectionNodes(t){for(let e=this._edges.iterator();e.hasNext();){const n=e.next(),i=n.getLabel().getLocation(t);for(let e=n.eiList.iterator();e.hasNext();){const n=e.next();this.addSelfIntersectionNode(t,n.coord,i)}}}add(){if(!(1===arguments.length&&arguments[0]instanceof ZE))return super.add.apply(this,arguments);{const t=arguments[0];if(t.isEmpty())return null;if(t instanceof BN&&(this._useBoundaryDeterminationRule=!1),t instanceof wN)this.addPolygon(t);else if(t instanceof oN)this.addLineString(t);else if(t instanceof lN)this.addPoint(t);else if(t instanceof ON)this.addCollection(t);else if(t instanceof HN)this.addCollection(t);else if(t instanceof BN)this.addCollection(t);else{if(!(t instanceof CN))throw new eN(t.getGeometryType());this.addCollection(t)}}}addCollection(t){for(let e=0;e<t.getNumGeometries();e++){const n=t.getGeometryN(e);this.add(n)}}locate(t){return CE(this._parentGeom,MN)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new gC(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)}findEdge(){if(1===arguments.length&&arguments[0]instanceof oN){const t=arguments[0];return this._lineEdgeMap.get(t)}return super.findEdge.apply(this,arguments)}}class IC{constructor(){IC.constructor_.apply(this,arguments)}static constructor_(){if(this._li=new CI,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){const t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new NC(0,t)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];IC.constructor_.call(this,t,e,qI.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];t.getPrecisionModel().compareTo(e.getPrecisionModel())>=0?this.setComputationPrecision(t.getPrecisionModel()):this.setComputationPrecision(e.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new NC(0,t,n),this._arg[1]=new NC(1,e,n)}}getArgGeometry(t){return this._arg[t].getGeometry()}setComputationPrecision(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)}}class SC{constructor(){SC.constructor_.apply(this,arguments)}static constructor_(){this._pts=null,this._orientation=null;const t=arguments[0];this._pts=t,this._orientation=SC.orientation(t)}static orientation(t){return 1===FN.increasingDirection(t)}static compareOriented(t,e,n,i){const r=e?1:-1,s=i?1:-1,o=e?t.length:-1,a=i?n.length:-1;let l=e?0:t.length-1,c=i?0:n.length-1;for(;;){const e=t[l].compareTo(n[c]);if(0!==e)return e;l+=r,c+=s;const i=l===o,h=c===a;if(i&&!h)return-1;if(!i&&h)return 1;if(i&&h)return 0}}compareTo(t){const e=t;return SC.compareOriented(this._pts,this._orientation,e._pts,e._orientation)}get interfaces_(){return[zE]}}class CC{constructor(){CC.constructor_.apply(this,arguments)}static constructor_(){this._edges=new gN,this._ocaMap=new mS}print(t){t.print("MULTILINESTRING ( ");for(let e=0;e<this._edges.size();e++){const n=this._edges.get(e);e>0&&t.print(","),t.print("(");const i=n.getCoordinates();for(let e=0;e<i.length;e++)e>0&&t.print(","),t.print(i[e].x+" "+i[e].y);t.println(")")}t.print(")  ")}addAll(t){for(let e=t.iterator();e.hasNext();)this.add(e.next())}findEdgeIndex(t){for(let e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1}iterator(){return this._edges.iterator()}getEdges(){return this._edges}get(t){return this._edges.get(t)}findEqualEdge(t){const e=new SC(t.getCoordinates());return this._ocaMap.get(e)}add(t){this._edges.add(t);const e=new SC(t.getCoordinates());this._ocaMap.put(e,t)}}class OC extends IC{constructor(){super(),OC.constructor_.apply(this,arguments)}static constructor_(){this._ptLocator=new XI,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new CC,this._resultPolyList=new gN,this._resultLineList=new gN,this._resultPointList=new gN;const t=arguments[0],e=arguments[1];IC.constructor_.call(this,t,e),this._graph=new VS(new nC),this._geomFact=t.getFactory()}static overlayOp(t,e,n){return new OC(t,e).getResultGeometry(n)}static union(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return OC.createEmptyResult(OC.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}if(t.isGeometryCollection()||e.isGeometryCollection())throw new PE("This method does not support GeometryCollection arguments");return TC.overlayOp(t,e,OC.UNION)}static intersection(t,e){if(t.isEmpty()||e.isEmpty())return OC.createEmptyResult(OC.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){const n=e;return PS.map(t,new class{get interfaces_(){return[MapOp]}map(t){return OC.intersection(t,n)}})}return TC.overlayOp(t,e,OC.INTERSECTION)}static symDifference(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return OC.createEmptyResult(OC.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}if(t.isGeometryCollection()||e.isGeometryCollection())throw new PE("This method does not support GeometryCollection arguments");return TC.overlayOp(t,e,OC.SYMDIFFERENCE)}static resultDimension(t,e,n){const i=e.getDimension(),r=n.getDimension();let s=-1;switch(t){case OC.INTERSECTION:s=Math.min(i,r);break;case OC.UNION:s=Math.max(i,r);break;case OC.DIFFERENCE:s=i;break;case OC.SYMDIFFERENCE:s=Math.max(i,r)}return s}static createEmptyResult(t,e,n,i){const r=OC.resultDimension(t,e,n);return i.createEmpty(r)}static difference(t,e){if(t.isEmpty())return OC.createEmptyResult(OC.DIFFERENCE,t,e,t.getFactory());if(e.isEmpty())return t.copy();if(t.isGeometryCollection()||e.isGeometryCollection())throw new PE("This method does not support GeometryCollection arguments");return TC.overlayOp(t,e,OC.DIFFERENCE)}static isResultOfOp(){if(2===arguments.length){const t=arguments[0],e=arguments[1],n=t.getLocation(0),i=t.getLocation(1);return OC.isResultOfOp(n,i,e)}if(3===arguments.length){let t=arguments[0],e=arguments[1],n=arguments[2];switch(t===zI.BOUNDARY&&(t=zI.INTERIOR),e===zI.BOUNDARY&&(e=zI.INTERIOR),n){case OC.INTERSECTION:return t===zI.INTERIOR&&e===zI.INTERIOR;case OC.UNION:return t===zI.INTERIOR||e===zI.INTERIOR;case OC.DIFFERENCE:return t===zI.INTERIOR&&e!==zI.INTERIOR;case OC.SYMDIFFERENCE:return t===zI.INTERIOR&&e!==zI.INTERIOR||t!==zI.INTERIOR&&e===zI.INTERIOR}return!1}}insertUniqueEdge(t){const e=this._edgeList.findEqualEdge(t);if(null!==e){const n=e.getLabel();let i=t.getLabel();e.isPointwiseEqual(t)||(i=new FS(t.getLabel()),i.flip());const r=e.getDepth();r.isNull()&&r.add(n),r.add(i),n.merge(i)}else this._edgeList.add(t)}getGraph(){return this._graph}cancelDuplicateResultEdges(){for(let t=this._graph.getEdgeEnds().iterator();t.hasNext();){const e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}}isCoveredByLA(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)}computeGeometry(t,e,n,i){const r=new gN;return r.addAll(t),r.addAll(e),r.addAll(n),r.isEmpty()?OC.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(r)}mergeSymLabels(){for(let t=this._graph.getNodes().iterator();t.hasNext();){t.next().getEdges().mergeSymLabels()}}isCovered(t,e){for(let n=e.iterator();n.hasNext();){const e=n.next();if(this._ptLocator.locate(t,e)!==zI.EXTERIOR)return!0}return!1}replaceCollapsedEdges(){const t=new gN;for(let e=this._edgeList.iterator();e.hasNext();){const n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)}updateNodeLabelling(){for(let t=this._graph.getNodes().iterator();t.hasNext();){const e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}}getResultGeometry(t){return this.computeOverlay(t),this._resultGeom}insertUniqueEdges(t){for(let e=t.iterator();e.hasNext();){const t=e.next();this.insertUniqueEdge(t)}}computeOverlay(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);const e=new gN;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),LS.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();const n=new HS(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();const i=new ZS(this,this._geomFact,this._ptLocator);this._resultLineList=i.build(t);const r=new JS(this,this._geomFact,this._ptLocator);this._resultPointList=r.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)}labelIncompleteNode(t,e){const n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)}copyPoints(t){for(let e=this._arg[t].getNodeIterator();e.hasNext();){const n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}}findResultAreaEdges(t){for(let e=this._graph.getEdgeEnds().iterator();e.hasNext();){const n=e.next(),i=n.getLabel();i.isArea()&&!n.isInteriorAreaEdge()&&OC.isResultOfOp(i.getLocation(0,DS.RIGHT),i.getLocation(1,DS.RIGHT),t)&&n.setInResult(!0)}}computeLabelsFromDepths(){for(let t=this._edgeList.iterator();t.hasNext();){const e=t.next(),n=e.getLabel(),i=e.getDepth();if(!i.isNull()){i.normalize();for(let t=0;t<2;t++)n.isNull(t)||!n.isArea()||i.isNull(t)||(0===i.getDelta(t)?n.toLine(t):(UE.isTrue(!i.isNull(t,DS.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(t,DS.LEFT,i.getLocation(t,DS.LEFT)),UE.isTrue(!i.isNull(t,DS.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(t,DS.RIGHT,i.getLocation(t,DS.RIGHT))))}}}computeLabelling(){for(let t=this._graph.getNodes().iterator();t.hasNext();){t.next().getEdges().computeLabelling(this._arg)}this.mergeSymLabels(),this.updateNodeLabelling()}labelIncompleteNodes(){for(let t=this._graph.getNodes().iterator();t.hasNext();){const e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}}isCoveredByA(t){return!!this.isCovered(t,this._resultPolyList)}}OC.INTERSECTION=1,OC.UNION=2,OC.DIFFERENCE=3,OC.SYMDIFFERENCE=4;class kC{constructor(){kC.constructor_.apply(this,arguments)}static constructor_(){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null;const t=arguments[0],e=arguments[1];this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()}static overlayOp(t,e,n){return new kC(t,e).getResultGeometry(n)}static union(t,e){return kC.overlayOp(t,e,OC.UNION)}static intersection(t,e){return kC.overlayOp(t,e,OC.INTERSECTION)}static symDifference(t,e){return kC.overlayOp(t,e,OC.SYMDIFFERENCE)}static difference(t,e){return kC.overlayOp(t,e,OC.DIFFERENCE)}selfSnap(t){return new TI(t).snapTo(t,this._snapTolerance)}removeCommonBits(t){this._cbr=new LI,this._cbr.add(t[0]),this._cbr.add(t[1]);const e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e}prepareResult(t){return this._cbr.addCommonBits(t),t}getResultGeometry(t){const e=this.snap(this._geom),n=OC.overlayOp(e[0],e[1],t);return this.prepareResult(n)}checkValid(t){t.isValid()||zN.out.println("Snapped geometry is invalid")}computeSnapTolerance(){this._snapTolerance=TI.computeOverlaySnapTolerance(this._geom[0],this._geom[1])}snap(t){const e=this.removeCommonBits(t);return TI.snap(e[0],e[1],this._snapTolerance)}}class TC{constructor(){TC.constructor_.apply(this,arguments)}static constructor_(){this._geom=new Array(2).fill(null);const t=arguments[0],e=arguments[1];this._geom[0]=t,this._geom[1]=e}static overlayOp(t,e,n){return new TC(t,e).getResultGeometry(n)}static union(t,e){return TC.overlayOp(t,e,OC.UNION)}static intersection(t,e){return TC.overlayOp(t,e,OC.INTERSECTION)}static symDifference(t,e){return TC.overlayOp(t,e,OC.SYMDIFFERENCE)}static difference(t,e){return TC.overlayOp(t,e,OC.DIFFERENCE)}getResultGeometry(t){let e=null,n=!1,i=null;try{e=OC.overlayOp(this._geom[0],this._geom[1],t);!0&&(n=!0)}catch(t){if(!(t instanceof jE))throw t;i=t}if(!n)try{e=kC.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof jE?i:t}return e}}class AC{get interfaces_(){return[]}getClass(){return AC}static union(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return OC.createEmptyResult(OC.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),TC.overlayOp(t,e,OC.UNION)}}class RC{constructor(){RC.constructor_.apply(this,arguments)}static constructor_(){if(this._quadrantSegments=RC.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=RC.CAP_ROUND,this._joinStyle=RC.JOIN_ROUND,this._mitreLimit=RC.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=RC.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){const t=arguments[0];this.setQuadrantSegments(t)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.setQuadrantSegments(t),this.setEndCapStyle(e)}else if(4===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.setQuadrantSegments(t),this.setEndCapStyle(e),this.setJoinStyle(n),this.setMitreLimit(i)}}static bufferDistanceError(t){const e=Math.PI/2/t;return 1-Math.cos(e/2)}getEndCapStyle(){return this._endCapStyle}isSingleSided(){return this._isSingleSided}setQuadrantSegments(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=RC.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=RC.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==RC.JOIN_ROUND&&(this._quadrantSegments=RC.DEFAULT_QUADRANT_SEGMENTS)}getJoinStyle(){return this._joinStyle}setJoinStyle(t){this._joinStyle=t}setSimplifyFactor(t){this._simplifyFactor=t<0?0:t}getSimplifyFactor(){return this._simplifyFactor}getQuadrantSegments(){return this._quadrantSegments}setEndCapStyle(t){this._endCapStyle=t}getMitreLimit(){return this._mitreLimit}setMitreLimit(t){this._mitreLimit=t}setSingleSided(t){this._isSingleSided=t}}RC.CAP_ROUND=1,RC.CAP_FLAT=2,RC.CAP_SQUARE=3,RC.JOIN_ROUND=1,RC.JOIN_MITRE=2,RC.JOIN_BEVEL=3,RC.DEFAULT_QUADRANT_SEGMENTS=8,RC.DEFAULT_MITRE_LIMIT=5,RC.DEFAULT_SIMPLIFY_FACTOR=.01;class LC extends LE{constructor(t){super(t),this.name=Object.keys({EmptyStackException:LC})[0]}}class PC extends fN{constructor(){super(),this.array=[]}add(t){return this.array.push(t),!0}get(t){if(t<0||t>=this.size())throw new uN;return this.array[t]}push(t){return this.array.push(t),t}pop(){if(0===this.array.length)throw new LC;return this.array.pop()}peek(){if(0===this.array.length)throw new LC;return this.array[this.array.length-1]}empty(){return 0===this.array.length}isEmpty(){return this.empty()}search(t){return this.array.indexOf(t)}size(){return this.array.length}toArray(){return this.array.slice()}}class DC{constructor(){DC.constructor_.apply(this,arguments)}static constructor_(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}getCoordinate(){return this._minCoord}getRightmostSide(t,e){let n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n}findRightmostEdgeAtVertex(){const t=this._minDe.getEdge().getCoordinates();UE.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");const e=t[this._minIndex-1],n=t[this._minIndex+1],i=vN.index(this._minCoord,n,e);let r=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&i===vN.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&i===vN.CLOCKWISE)&&(r=!0),r&&(this._minIndex=this._minIndex-1)}getRightmostSideOfSegment(t,e){const n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;let i=DS.LEFT;return n[e].y<n[e+1].y&&(i=DS.RIGHT),i}getEdge(){return this._orientedDe}checkForRightmostCoordinate(t){const e=t.getEdge().getCoordinates();for(let n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])}findRightmostEdgeAtNode(){const t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}findEdge(t){for(let e=t.iterator();e.hasNext();){const t=e.next();t.isForward()&&this.checkForRightmostCoordinate(t)}UE.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe;this.getRightmostSide(this._minDe,this._minIndex)===DS.LEFT&&(this._orientedDe=this._minDe.getSym())}}class zC{constructor(){this.array=[]}addLast(t){this.array.push(t)}removeFirst(){return this.array.shift()}isEmpty(){return 0===this.array.length}}class FC{constructor(){FC.constructor_.apply(this,arguments)}static constructor_(){this._finder=null,this._dirEdgeList=new gN,this._nodes=new gN,this._rightMostCoord=null,this._env=null,this._finder=new DC}clearVisitedEdges(){for(let t=this._dirEdgeList.iterator();t.hasNext();){t.next().setVisited(!1)}}getRightmostCoordinate(){return this._rightMostCoord}computeNodeDepth(t){let e=null;for(let n=t.getEdges().iterator();n.hasNext();){const t=n.next();if(t.isVisited()||t.getSym().isVisited()){e=t;break}}if(null===e)throw new kS("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(let e=t.getEdges().iterator();e.hasNext();){const t=e.next();t.setVisited(!0),this.copySymDepths(t)}}computeDepth(t){this.clearVisitedEdges();const e=this._finder.getEdge();e.getNode(),e.getLabel(),e.setEdgeDepths(DS.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)}create(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}findResultEdges(){for(let t=this._dirEdgeList.iterator();t.hasNext();){const e=t.next();e.getDepth(DS.RIGHT)>=1&&e.getDepth(DS.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}}computeDepths(t){const e=new YN,n=new zC,i=t.getNode();for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){const t=n.removeFirst();e.add(t),this.computeNodeDepth(t);for(let i=t.getEdges().iterator();i.hasNext();){const t=i.next().getSym();if(t.isVisited())continue;const r=t.getNode();e.contains(r)||(n.addLast(r),e.add(r))}}}compareTo(t){const e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0}getEnvelope(){if(null===this._env){const t=new HE;for(let e=this._dirEdgeList.iterator();e.hasNext();){const n=e.next().getEdge().getCoordinates();for(let e=0;e<n.length-1;e++)t.expandToInclude(n[e])}this._env=t}return this._env}addReachable(t){const e=new PC;for(e.add(t);!e.empty();){const t=e.pop();this.add(t,e)}}copySymDepths(t){const e=t.getSym();e.setDepth(DS.LEFT,t.getDepth(DS.RIGHT)),e.setDepth(DS.RIGHT,t.getDepth(DS.LEFT))}add(t,e){t.setVisited(!0),this._nodes.add(t);for(let n=t.getEdges().iterator();n.hasNext();){const t=n.next();this._dirEdgeList.add(t);const i=t.getSym().getNode();i.isVisited()||e.push(i)}}getNodes(){return this._nodes}getDirectedEdges(){return this._dirEdgeList}get interfaces_(){return[zE]}}class GC{constructor(){GC.constructor_.apply(this,arguments)}static constructor_(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=vN.COUNTERCLOCKWISE;const t=arguments[0];this._inputLine=t}static simplify(t,e){return new GC(t).simplify(e)}isDeletable(t,e,n,i){const r=this._inputLine[t],s=this._inputLine[e],o=this._inputLine[n];return!!this.isConcave(r,s,o)&&(!!this.isShallow(r,s,o,i)&&this.isShallowSampled(r,s,t,n,i))}deleteShallowConcavities(){let t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),i=!1;for(;n<this._inputLine.length;){let r=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=GC.DELETE,r=!0,i=!0),t=r?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return i}isShallowConcavity(t,e,n,i){if(!(vN.index(t,e,n)===this._angleOrientation))return!1;return sI.pointToSegment(e,t,n)<i}isShallowSampled(t,e,n,i,r){let s=Math.trunc((i-n)/GC.NUM_PTS_TO_CHECK);s<=0&&(s=1);for(let o=n;o<i;o+=s)if(!this.isShallow(t,e,this._inputLine[o],r))return!1;return!0}isConcave(t,e,n){return vN.index(t,e,n)===this._angleOrientation}simplify(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=vN.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);let e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()}findNextNonDeletedIndex(t){let e=t+1;for(;e<this._inputLine.length&&this._isDeleted[e]===GC.DELETE;)e++;return e}isShallow(t,e,n,i){return sI.pointToSegment(e,t,n)<i}collapseLine(){const t=new PN;for(let e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==GC.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()}}GC.INIT=0,GC.DELETE=1,GC.KEEP=1,GC.NUM_PTS_TO_CHECK=10;class qC{constructor(){qC.constructor_.apply(this,arguments)}static constructor_(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new gN}getCoordinates(){return this._ptList.toArray(qC.COORDINATE_ARRAY_TYPE)}setPrecisionModel(t){this._precisionModel=t}addPt(t){const e=new XE(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)}reverse(){}addPts(t,e){if(e)for(let e=0;e<t.length;e++)this.addPt(t[e]);else for(let e=t.length-1;e>=0;e--)this.addPt(t[e])}isRedundant(t){if(this._ptList.size()<1)return!1;const e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance}toString(){return(new ZN).createLineString(this.getCoordinates()).toString()}closeRing(){if(this._ptList.size()<1)return null;const t=new XE(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)}setMinimumVertexDistance(t){this._minimimVertexDistance=t}}qC.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);class jC{static toDegrees(t){return 180*t/Math.PI}static normalize(t){for(;t>Math.PI;)t-=jC.PI_TIMES_2;for(;t<=-Math.PI;)t+=jC.PI_TIMES_2;return t}static angle(){if(1===arguments.length){const t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){const t=arguments[0],e=arguments[1],n=e.x-t.x,i=e.y-t.y;return Math.atan2(i,n)}}static isAcute(t,e,n){const i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)>0}static isObtuse(t,e,n){const i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)<0}static interiorAngle(t,e,n){const i=jC.angle(e,t),r=jC.angle(e,n);return Math.abs(r-i)}static normalizePositive(t){if(t<0){for(;t<0;)t+=jC.PI_TIMES_2;t>=jC.PI_TIMES_2&&(t=0)}else{for(;t>=jC.PI_TIMES_2;)t-=jC.PI_TIMES_2;t<0&&(t=0)}return t}static angleBetween(t,e,n){const i=jC.angle(e,t),r=jC.angle(e,n);return jC.diff(i,r)}static diff(t,e){let n=null;return n=t<e?e-t:t-e,n>Math.PI&&(n=2*Math.PI-n),n}static toRadians(t){return t*Math.PI/180}static getTurn(t,e){const n=Math.sin(e-t);return n>0?jC.COUNTERCLOCKWISE:n<0?jC.CLOCKWISE:jC.NONE}static angleBetweenOriented(t,e,n){const i=jC.angle(e,t),r=jC.angle(e,n)-i;return r<=-Math.PI?r+jC.PI_TIMES_2:r>Math.PI?r-jC.PI_TIMES_2:r}}jC.PI_TIMES_2=2*Math.PI,jC.PI_OVER_2=Math.PI/2,jC.PI_OVER_4=Math.PI/4,jC.COUNTERCLOCKWISE=vN.COUNTERCLOCKWISE,jC.CLOCKWISE=vN.CLOCKWISE,jC.NONE=vN.COLLINEAR;class BC{constructor(){BC.constructor_.apply(this,arguments)}static constructor_(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new OI,this._seg1=new OI,this._offset0=new OI,this._offset1=new OI,this._side=0,this._hasNarrowConcaveAngle=!1;const t=arguments[0],e=arguments[1],n=arguments[2];this._precisionModel=t,this._bufParams=e,this._li=new CI,this._filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===RC.JOIN_ROUND&&(this._closingSegLengthFactor=BC.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}addNextSegment(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;const n=vN.index(this._s0,this._s1,this._s2),i=n===vN.CLOCKWISE&&this._side===DS.LEFT||n===vN.COUNTERCLOCKWISE&&this._side===DS.RIGHT;0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)}addLineEndCap(t,e){const n=new OI(t,e),i=new OI;this.computeOffsetSegment(n,DS.LEFT,this._distance,i);const r=new OI;this.computeOffsetSegment(n,DS.RIGHT,this._distance,r);const s=e.x-t.x,o=e.y-t.y,a=Math.atan2(o,s);switch(this._bufParams.getEndCapStyle()){case RC.CAP_ROUND:this._segList.addPt(i.p1),this.addDirectedFillet(e,a+Math.PI/2,a-Math.PI/2,vN.CLOCKWISE,this._distance),this._segList.addPt(r.p1);break;case RC.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(r.p1);break;case RC.CAP_SQUARE:const t=new XE;t.x=Math.abs(this._distance)*Math.cos(a),t.y=Math.abs(this._distance)*Math.sin(a);const n=new XE(i.p1.x+t.x,i.p1.y+t.y),s=new XE(r.p1.x+t.x,r.p1.y+t.y);this._segList.addPt(n),this._segList.addPt(s)}}getCoordinates(){return this._segList.getCoordinates()}addMitreJoin(t,e,n,i){const r=rI.intersection(e.p0,e.p1,n.p0,n.p1);if(null!==r){if((i<=0?1:r.distance(t)/Math.abs(i))<=this._bufParams.getMitreLimit())return this._segList.addPt(r),null}this.addLimitedMitreJoin(e,n,i,this._bufParams.getMitreLimit())}addOutsideTurn(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*BC.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===RC.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===RC.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))}createSquare(t){this._segList.addPt(new XE(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new XE(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new XE(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new XE(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()}addSegments(t,e){this._segList.addPts(t,e)}addFirstSegment(){this._segList.addPt(this._offset1.p0)}addCornerFillet(t,e,n,i,r){const s=e.x-t.x,o=e.y-t.y;let a=Math.atan2(o,s);const l=n.x-t.x,c=n.y-t.y,h=Math.atan2(c,l);i===vN.CLOCKWISE?a<=h&&(a+=2*Math.PI):a>=h&&(a-=2*Math.PI),this._segList.addPt(e),this.addDirectedFillet(t,a,h,i,r),this._segList.addPt(n)}addLastSegment(){this._segList.addPt(this._offset1.p1)}initSideSegments(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)}addLimitedMitreJoin(t,e,n,i){const r=this._seg0.p1,s=jC.angle(r,this._seg0.p0),o=jC.angleBetweenOriented(this._seg0.p0,r,this._seg1.p1)/2,a=jC.normalize(s+o),l=jC.normalize(a+Math.PI),c=i*n,h=n-c*Math.abs(Math.sin(o)),u=r.x+c*Math.cos(l),f=r.y+c*Math.sin(l),d=new XE(u,f),g=new OI(r,d),p=g.pointAlongOffset(1,h),_=g.pointAlongOffset(1,-h);this._side===DS.LEFT?(this._segList.addPt(p),this._segList.addPt(_)):(this._segList.addPt(_),this._segList.addPt(p))}addDirectedFillet(t,e,n,i,r){const s=i===vN.CLOCKWISE?-1:1,o=Math.abs(e-n),a=Math.trunc(o/this._filletAngleQuantum+.5);if(a<1)return null;const l=o/a,c=new XE;for(let n=0;n<a;n++){const i=e+s*n*l;c.x=t.x+r*Math.cos(i),c.y=t.y+r*Math.sin(i),this._segList.addPt(c)}}computeOffsetSegment(t,e,n,i){const r=e===DS.LEFT?1:-1,s=t.p1.x-t.p0.x,o=t.p1.y-t.p0.y,a=Math.sqrt(s*s+o*o),l=r*n*s/a,c=r*n*o/a;i.p0.x=t.p0.x-c,i.p0.y=t.p0.y+l,i.p1.x=t.p1.x-c,i.p1.y=t.p1.y+l}addInsideTurn(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*BC.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){const t=new XE((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(t);const e=new XE((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(e)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}createCircle(t){const e=new XE(t.x+this._distance,t.y);this._segList.addPt(e),this.addDirectedFillet(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}addBevelJoin(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)}init(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new qC,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*BC.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}addCollinear(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2);this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===RC.JOIN_BEVEL||this._bufParams.getJoinStyle()===RC.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,vN.CLOCKWISE,this._distance))}closeRing(){this._segList.closeRing()}hasNarrowConcaveAngle(){return this._hasNarrowConcaveAngle}}BC.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,BC.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,BC.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,BC.MAX_CLOSING_SEG_LEN_FACTOR=80;class UC{constructor(){UC.constructor_.apply(this,arguments)}static constructor_(){this._distance=0,this._precisionModel=null,this._bufParams=null;const t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e}static copyCoordinates(t){const e=new Array(t.length).fill(null);for(let n=0;n<e.length;n++)e[n]=new XE(t[n]);return e}getOffsetCurve(t,e){if(this._distance=e,0===e)return null;const n=e<0,i=Math.abs(e),r=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,n,r);const s=r.getCoordinates();return n&&FN.reverse(s),s}computeSingleSidedBufferCurve(t,e,n){const i=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);const e=GC.simplify(t,-i),r=e.length-1;n.initSideSegments(e[r],e[r-1],DS.LEFT),n.addFirstSegment();for(let t=r-2;t>=0;t--)n.addNextSegment(e[t],!0)}else{n.addSegments(t,!1);const e=GC.simplify(t,i),r=e.length-1;n.initSideSegments(e[0],e[1],DS.LEFT),n.addFirstSegment();for(let t=2;t<=r;t++)n.addNextSegment(e[t],!0)}n.addLastSegment(),n.closeRing()}computeRingBufferCurve(t,e,n){let i=this.simplifyTolerance(this._distance);e===DS.RIGHT&&(i=-i);const r=GC.simplify(t,i),s=r.length-1;n.initSideSegments(r[s-1],r[0],e);for(let t=1;t<=s;t++){const e=1!==t;n.addNextSegment(r[t],e)}n.closeRing()}computeLineBufferCurve(t,e){const n=this.simplifyTolerance(this._distance),i=GC.simplify(t,n),r=i.length-1;e.initSideSegments(i[0],i[1],DS.LEFT);for(let t=2;t<=r;t++)e.addNextSegment(i[t],!0);e.addLastSegment(),e.addLineEndCap(i[r-1],i[r]);const s=GC.simplify(t,-n),o=s.length-1;e.initSideSegments(s[o],s[o-1],DS.LEFT);for(let t=o-2;t>=0;t--)e.addNextSegment(s[t],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()}computePointCurve(t,e){switch(this._bufParams.getEndCapStyle()){case RC.CAP_ROUND:e.createCircle(t);break;case RC.CAP_SQUARE:e.createSquare(t)}}getLineCurve(t,e){if(this._distance=e,this.isLineOffsetEmpty(e))return null;const n=Math.abs(e),i=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],i);else if(this._bufParams.isSingleSided()){const n=e<0;this.computeSingleSidedBufferCurve(t,n,i)}else this.computeLineBufferCurve(t,i);return i.getCoordinates()}getBufferParameters(){return this._bufParams}simplifyTolerance(t){return t*this._bufParams.getSimplifyFactor()}getRingCurve(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return UC.copyCoordinates(t);const i=this.getSegGen(n);return this.computeRingBufferCurve(t,e,i),i.getCoordinates()}computeOffsetCurve(t,e,n){const i=this.simplifyTolerance(this._distance);if(e){const e=GC.simplify(t,-i),r=e.length-1;n.initSideSegments(e[r],e[r-1],DS.LEFT),n.addFirstSegment();for(let t=r-2;t>=0;t--)n.addNextSegment(e[t],!0)}else{const e=GC.simplify(t,i),r=e.length-1;n.initSideSegments(e[0],e[1],DS.LEFT),n.addFirstSegment();for(let t=2;t<=r;t++)n.addNextSegment(e[t],!0)}n.addLastSegment()}isLineOffsetEmpty(t){return 0===t||t<0&&!this._bufParams.isSingleSided()}getSegGen(t){return new BC(this._precisionModel,this._bufParams,t)}}class YC{constructor(){YC.constructor_.apply(this,arguments)}static constructor_(){this._subgraphs=null,this._seg=new OI;const t=arguments[0];this._subgraphs=t}findStabbedSegments(){if(1===arguments.length){const t=arguments[0],e=new gN;for(let n=this._subgraphs.iterator();n.hasNext();){const i=n.next(),r=i.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,i.getDirectedEdges(),e)}return e}if(3===arguments.length)if(CE(arguments[2],fN)&&arguments[0]instanceof XE&&arguments[1]instanceof $S){const t=arguments[0],e=arguments[1],n=arguments[2],i=e.getEdge().getCoordinates();for(let r=0;r<i.length-1;r++){this._seg.p0=i[r],this._seg.p1=i[r+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse();if(Math.max(this._seg.p0.x,this._seg.p1.x)<t.x)continue;if(this._seg.isHorizontal())continue;if(t.y<this._seg.p0.y||t.y>this._seg.p1.y)continue;if(vN.index(this._seg.p0,this._seg.p1,t)===vN.RIGHT)continue;let s=e.getDepth(DS.LEFT);this._seg.p0.equals(i[r])||(s=e.getDepth(DS.RIGHT));const o=new WC(this._seg,s);n.add(o)}}else if(CE(arguments[2],fN)&&arguments[0]instanceof XE&&CE(arguments[1],fN)){const t=arguments[0],e=arguments[2];for(let n=arguments[1].iterator();n.hasNext();){const i=n.next();i.isForward()&&this.findStabbedSegments(t,i,e)}}}getDepth(t){const e=this.findStabbedSegments(t);if(0===e.size())return 0;return nS.min(e)._leftDepth}}class WC{constructor(){WC.constructor_.apply(this,arguments)}static constructor_(){this._upwardSeg=null,this._leftDepth=null;const t=arguments[0],e=arguments[1];this._upwardSeg=new OI(t),this._leftDepth=e}compareTo(t){const e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;let n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n?n:(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg),0!==n?n:this._upwardSeg.compareTo(e._upwardSeg))}compareX(t,e){const n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)}toString(){return this._upwardSeg.toString()}get interfaces_(){return[zE]}}YC.DepthSegment=WC;class $C extends LE{constructor(){super(),$C.constructor_.apply(this,arguments)}static constructor_(){LE.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}class XC{constructor(){XC.constructor_.apply(this,arguments)}static constructor_(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){const t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1];this.x=t,this.y=e,this.w=1}else if(arguments[0]instanceof XC&&arguments[1]instanceof XC){const t=arguments[0],e=arguments[1];this.x=t.y*e.w-e.y*t.w,this.y=e.x*t.w-t.x*e.w,this.w=t.x*e.y-e.x*t.y}else if(arguments[0]instanceof XE&&arguments[1]instanceof XE){const t=arguments[0],e=arguments[1];this.x=t.y-e.y,this.y=e.x-t.x,this.w=t.x*e.y-e.x*t.y}}else if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2];this.x=t,this.y=e,this.w=n}else if(4===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3],r=t.y-e.y,s=e.x-t.x,o=t.x*e.y-e.x*t.y,a=n.y-i.y,l=i.x-n.x,c=n.x*i.y-i.x*n.y;this.x=s*c-l*o,this.y=a*o-r*c,this.w=r*l-a*s}}getY(){const t=this.y/this.w;if(kE.isNaN(t)||kE.isInfinite(t))throw new $C;return t}getX(){const t=this.x/this.w;if(kE.isNaN(t)||kE.isInfinite(t))throw new $C;return t}getCoordinate(){const t=new XE;return t.x=this.getX(),t.y=this.getY(),t}}class VC{constructor(){VC.constructor_.apply(this,arguments)}static constructor_(){this.p0=null,this.p1=null,this.p2=null;const t=arguments[0],e=arguments[1],n=arguments[2];this.p0=t,this.p1=e,this.p2=n}static area(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)}static signedArea(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2}static det(t,e,n,i){return t*i-e*n}static interpolateZ(t,e,n,i){const r=e.x,s=e.y,o=n.x-r,a=i.x-r,l=n.y-s,c=i.y-s,h=o*c-a*l,u=t.x-r,f=t.y-s,d=(c*u-a*f)/h,g=(-l*u+o*f)/h;return e.getZ()+d*(n.getZ()-e.getZ())+g*(i.getZ()-e.getZ())}static longestSideLength(t,e,n){const i=t.distance(e),r=e.distance(n),s=n.distance(t);let o=i;return r>o&&(o=r),s>o&&(o=s),o}static circumcentreDD(t,e,n){const i=xN.valueOf(t.x).subtract(n.x),r=xN.valueOf(t.y).subtract(n.y),s=xN.valueOf(e.x).subtract(n.x),o=xN.valueOf(e.y).subtract(n.y),a=xN.determinant(i,r,s,o).multiply(2),l=i.sqr().add(r.sqr()),c=s.sqr().add(o.sqr()),h=xN.determinant(r,l,o,c),u=xN.determinant(i,l,s,c),f=xN.valueOf(n.x).subtract(h.divide(a)).doubleValue(),d=xN.valueOf(n.y).add(u.divide(a)).doubleValue();return new XE(f,d)}static isAcute(t,e,n){return!!jC.isAcute(t,e,n)&&(!!jC.isAcute(e,n,t)&&!!jC.isAcute(n,t,e))}static circumcentre(t,e,n){const i=n.x,r=n.y,s=t.x-i,o=t.y-r,a=e.x-i,l=e.y-r,c=2*VC.det(s,o,a,l),h=VC.det(o,s*s+o*o,l,a*a+l*l),u=VC.det(s,s*s+o*o,a,a*a+l*l);return new XE(i-h/c,r+u/c)}static perpendicularBisector(t,e){const n=e.x-t.x,i=e.y-t.y,r=new XC(t.x+n/2,t.y+i/2,1),s=new XC(t.x-i+n/2,t.y+n+i/2,1);return new XC(r,s)}static angleBisector(t,e,n){const i=e.distance(t),r=i/(i+e.distance(n)),s=n.x-t.x,o=n.y-t.y;return new XE(t.x+r*s,t.y+r*o)}static area3D(t,e,n){const i=e.x-t.x,r=e.y-t.y,s=e.getZ()-t.getZ(),o=n.x-t.x,a=n.y-t.y,l=n.getZ()-t.getZ(),c=r*l-s*a,h=s*o-i*l,u=i*a-r*o,f=c*c+h*h+u*u;return Math.sqrt(f)/2}static centroid(t,e,n){const i=(t.x+e.x+n.x)/3,r=(t.y+e.y+n.y)/3;return new XE(i,r)}static inCentre(t,e,n){const i=e.distance(n),r=t.distance(n),s=t.distance(e),o=i+r+s,a=(i*t.x+r*e.x+s*n.x)/o,l=(i*t.y+r*e.y+s*n.y)/o;return new XE(a,l)}area(){return VC.area(this.p0,this.p1,this.p2)}signedArea(){return VC.signedArea(this.p0,this.p1,this.p2)}interpolateZ(t){if(null===t)throw new PE("Supplied point is null.");return VC.interpolateZ(t,this.p0,this.p1,this.p2)}longestSideLength(){return VC.longestSideLength(this.p0,this.p1,this.p2)}isAcute(){return VC.isAcute(this.p0,this.p1,this.p2)}circumcentre(){return VC.circumcentre(this.p0,this.p1,this.p2)}area3D(){return VC.area3D(this.p0,this.p1,this.p2)}centroid(){return VC.centroid(this.p0,this.p1,this.p2)}inCentre(){return VC.inCentre(this.p0,this.p1,this.p2)}}class HC{constructor(){HC.constructor_.apply(this,arguments)}static constructor_(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new gN;const t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n}addRingSide(t,e,n,i,r){if(0===e&&t.length<kN.MINIMUM_VALID_SIZE)return null;let s=i,o=r;t.length>=kN.MINIMUM_VALID_SIZE&&vN.isCCW(t)&&(s=r,o=i,n=DS.opposite(n));const a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,s,o)}addRingBothSides(t,e){this.addRingSide(t,e,DS.LEFT,zI.EXTERIOR,zI.INTERIOR),this.addRingSide(t,e,DS.RIGHT,zI.INTERIOR,zI.EXTERIOR)}addPoint(t){if(this._distance<=0)return null;const e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,zI.EXTERIOR,zI.INTERIOR)}addPolygon(t){let e=this._distance,n=DS.LEFT;this._distance<0&&(e=-this._distance,n=DS.RIGHT);const i=t.getExteriorRing(),r=FN.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&r.length<3)return null;this.addRingSide(r,e,n,zI.EXTERIOR,zI.INTERIOR);for(let i=0;i<t.getNumInteriorRing();i++){const r=t.getInteriorRingN(i),s=FN.removeRepeatedPoints(r.getCoordinates());this._distance>0&&this.isErodedCompletely(r,-this._distance)||this.addRingSide(s,e,DS.opposite(n),zI.INTERIOR,zI.EXTERIOR)}}isTriangleErodedCompletely(t,e){const n=new VC(t[0],t[1],t[2]),i=n.inCentre();return sI.pointToSegment(i,n.p0,n.p1)<Math.abs(e)}addLineString(t){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;const e=FN.removeRepeatedPoints(t.getCoordinates());if(FN.isRing(e)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(e,this._distance);else{const t=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(t,zI.EXTERIOR,zI.INTERIOR)}}addCurve(t,e,n){if(null===t||t.length<2)return null;const i=new vS(t,new FS(0,zI.BOUNDARY,e,n));this._curveList.add(i)}getCurves(){return this.add(this._inputGeom),this._curveList}add(t){if(t.isEmpty())return null;if(t instanceof wN)this.addPolygon(t);else if(t instanceof oN)this.addLineString(t);else if(t instanceof lN)this.addPoint(t);else if(t instanceof ON)this.addCollection(t);else if(t instanceof HN)this.addCollection(t);else if(t instanceof BN)this.addCollection(t);else{if(!(t instanceof CN))throw new eN(t.getGeometryType());this.addCollection(t)}}isErodedCompletely(t,e){const n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);const i=t.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return e<0&&2*Math.abs(e)>r}addCollection(t){for(let e=0;e<t.getNumGeometries();e++){const n=t.getGeometryN(e);this.add(n)}}}class ZC{constructor(){ZC.constructor_.apply(this,arguments)}static constructor_(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;const t=arguments[0];this._li=t}static isAdjacentSegments(t,e){return 1===Math.abs(t-e)}isTrivialIntersection(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(ZC.isAdjacentSegments(e,i))return!0;if(t.isClosed()){const n=t.size()-1;if(0===e&&i===n||0===i&&e===n)return!0}}return!1}getProperIntersectionPoint(){return this._properIntersectionPoint}hasProperInteriorIntersection(){return this._hasProperInterior}getLineIntersector(){return this._li}hasProperIntersection(){return this._hasProper}processIntersections(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;const r=t.getCoordinates()[e],s=t.getCoordinates()[e+1],o=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,s,o,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}hasIntersection(){return this._hasIntersection}isDone(){return!1}hasInteriorIntersection(){return this._hasInterior}get interfaces_(){return[TS]}}class JC{constructor(){JC.constructor_.apply(this,arguments)}static constructor_(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new CC;const t=arguments[0];this._bufParams=t}static depthDelta(t){const e=t.getLocation(0,DS.LEFT),n=t.getLocation(0,DS.RIGHT);return e===zI.INTERIOR&&n===zI.EXTERIOR?1:e===zI.EXTERIOR&&n===zI.INTERIOR?-1:0}static convertSegStrings(t){const e=new ZN,n=new gN;for(;t.hasNext();){const i=t.next(),r=e.createLineString(i.getCoordinates());n.add(r)}return e.buildGeometry(n)}setWorkingPrecisionModel(t){this._workingPrecisionModel=t}insertUniqueEdge(t){const e=this._edgeList.findEqualEdge(t);if(null!==e){const n=e.getLabel();let i=t.getLabel();e.isPointwiseEqual(t)||(i=new FS(t.getLabel()),i.flip()),n.merge(i);const r=JC.depthDelta(i),s=e.getDepthDelta()+r;e.setDepthDelta(s)}else this._edgeList.add(t),t.setDepthDelta(JC.depthDelta(t.getLabel()))}buildSubgraphs(t,e){const n=new gN;for(let i=t.iterator();i.hasNext();){const t=i.next(),r=t.getRightmostCoordinate(),s=new YC(n).getDepth(r);t.computeDepth(s),t.findResultEdges(),n.add(t),e.add(t.getDirectedEdges(),t.getNodes())}}createSubgraphs(t){const e=new gN;for(let n=t.getNodes().iterator();n.hasNext();){const t=n.next();if(!t.isVisited()){const n=new FC;n.create(t),e.add(n)}}return nS.sort(e,nS.reverseOrder()),e}createEmptyResultGeometry(){return this._geomFact.createPolygon()}getNoder(t){if(null!==this._workingNoder)return this._workingNoder;const e=new CS,n=new CI;return n.setPrecisionModel(t),e.setSegmentIntersector(new ZC(n)),e}buffer(t,e){let n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();const i=new UC(n,this._bufParams),r=new HC(t,e,i).getCurves();if(r.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(r,n),this._graph=new VS(new nC),this._graph.addEdges(this._edgeList.getEdges());const s=this.createSubgraphs(this._graph),o=new HS(this._geomFact);this.buildSubgraphs(s,o);const a=o.getPolygons();if(a.size()<=0)return this.createEmptyResultGeometry();return this._geomFact.buildGeometry(a)}computeNodedEdges(t,e){const n=this.getNoder(e);n.computeNodes(t);for(let t=n.getNodedSubstrings().iterator();t.hasNext();){const e=t.next(),n=e.getCoordinates();if(2===n.length&&n[0].equals2D(n[1]))continue;const i=e.getData(),r=new EC(e.getCoordinates(),new FS(i));this.insertUniqueEdge(r)}}setNoder(t){this._workingNoder=t}}class QC{constructor(){QC.constructor_.apply(this,arguments)}static constructor_(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){const t=arguments[0],e=arguments[1];QC.constructor_.call(this,t,e,0,0)}else if(4===arguments.length){const t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._isScaled=!this.isIntegerPrecision()}}rescale(){if(CE(arguments[0],hN)){for(let t=arguments[0].iterator();t.hasNext();){const e=t.next();this.rescale(e.getCoordinates())}}else if(arguments[0]instanceof Array){const t=arguments[0];for(let e=0;e<t.length;e++)t[e].x=t[e].x/this._scaleFactor+this._offsetX,t[e].y=t[e].y/this._scaleFactor+this._offsetY;2===t.length&&t[0].equals2D(t[1])&&zN.out.println(t)}}scale(){if(CE(arguments[0],hN)){const t=arguments[0],e=new gN(t.size());for(let n=t.iterator();n.hasNext();){const t=n.next();e.add(new vS(this.scale(t.getCoordinates()),t.getData()))}return e}if(arguments[0]instanceof Array){const t=arguments[0],e=new Array(t.length).fill(null);for(let n=0;n<t.length;n++)e[n]=new XE(Math.round((t[n].x-this._offsetX)*this._scaleFactor),Math.round((t[n].y-this._offsetY)*this._scaleFactor),t[n].getZ());return FN.removeRepeatedPoints(e)}}isIntegerPrecision(){return 1===this._scaleFactor}getNodedSubstrings(){const t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t}computeNodes(t){let e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)}get interfaces_(){return[IS]}}class KC{constructor(){KC.constructor_.apply(this,arguments)}static constructor_(){this._li=new CI,this._segStrings=null;const t=arguments[0];this._segStrings=t}checkEndPtVertexIntersections(){if(0===arguments.length)for(let t=this._segStrings.iterator();t.hasNext();){const e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length){const t=arguments[0];for(let e=arguments[1].iterator();e.hasNext();){const n=e.next().getCoordinates();for(let e=1;e<n.length-1;e++)if(n[e].equals(t))throw new jE("found endpt/interior pt intersection at index "+e+" :pt "+t)}}}checkInteriorIntersections(){if(0===arguments.length)for(let t=this._segStrings.iterator();t.hasNext();){const e=t.next();for(let t=this._segStrings.iterator();t.hasNext();){const n=t.next();this.checkInteriorIntersections(e,n)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1],n=t.getCoordinates(),i=e.getCoordinates();for(let r=0;r<n.length-1;r++)for(let n=0;n<i.length-1;n++)this.checkInteriorIntersections(t,r,e,n)}else if(4===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];if(t===n&&e===i)return null;const r=t.getCoordinates()[e],s=t.getCoordinates()[e+1],o=n.getCoordinates()[i],a=n.getCoordinates()[i+1];if(this._li.computeIntersection(r,s,o,a),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,r,s)||this.hasInteriorIntersection(this._li,o,a)))throw new jE("found non-noded intersection at "+r+"-"+s+" and "+o+"-"+a)}}checkValid(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}checkCollapses(){if(0===arguments.length)for(let t=this._segStrings.iterator();t.hasNext();){const e=t.next();this.checkCollapses(e)}else if(1===arguments.length){const t=arguments[0].getCoordinates();for(let e=0;e<t.length-2;e++)this.checkCollapse(t[e],t[e+1],t[e+2])}}hasInteriorIntersection(t,e,n){for(let i=0;i<t.getIntersectionNum();i++){const r=t.getIntersection(i);if(!r.equals(e)&&!r.equals(n))return!0}return!1}checkCollapse(t,e,n){if(t.equals(n))throw new jE("found non-noded collapse at "+KC.fact.createLineString([t,e,n]))}}KC.fact=new ZN;class tO{constructor(){tO.constructor_.apply(this,arguments)}static constructor_(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;const t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new PE("Scale factor must be non-zero");1!==e&&(this._pt=new XE(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new XE,this._p1Scaled=new XE),this.initCorners(this._pt)}intersectsScaled(t,e){const n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),s=Math.max(t.y,e.y),o=this._maxx<n||this._minx>i||this._maxy<r||this._miny>s;if(o)return!1;const a=this.intersectsToleranceSquare(t,e);return UE.isTrue(!(o&&a),"Found bad envelope test"),a}initCorners(t){const e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new XE(this._maxx,this._maxy),this._corner[1]=new XE(this._minx,this._maxy),this._corner[2]=new XE(this._minx,this._miny),this._corner[3]=new XE(this._maxx,this._miny)}intersects(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}scale(t){return Math.round(t*this._scaleFactor)}getCoordinate(){return this._originalPt}copyScaled(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)}getSafeEnvelope(){if(null===this._safeEnv){const t=tO.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new HE(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv}intersectsPixelClosure(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))}intersectsToleranceSquare(t,e){let n=!1,i=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||(!(!n||!i)||(!!t.equals(this._pt)||!!e.equals(this._pt))))))}addSnappedNode(t,e){const n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)}}tO.SAFE_ENV_EXPANSION_FACTOR=.75;class eO{constructor(){eO.constructor_.apply(this,arguments)}static constructor_(){this.selectedSegment=new OI}select(){if(1===arguments.length);else if(2===arguments.length){const t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}}}class nO{constructor(){nO.constructor_.apply(this,arguments)}static constructor_(){this._index=null;const t=arguments[0];this._index=t}snap(){if(1===arguments.length){const t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){const t=arguments[0],e=arguments[1],n=arguments[2],i=t.getSafeEnvelope(),r=new iO(t,e,n);return this._index.query(i,new class{get interfaces_(){return[sS]}visitItem(t){t.select(i,r)}}),r.isNodeAdded()}}}class iO extends eO{constructor(){super(),iO.constructor_.apply(this,arguments)}static constructor_(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;const t=arguments[0],e=arguments[1],n=arguments[2];this._hotPixel=t,this._parentEdge=e,this._hotPixelVertexIndex=n}isNodeAdded(){return this._isNodeAdded}select(){if(!(2===arguments.length&&Number.isInteger(arguments[1])&&arguments[0]instanceof wS))return super.select.apply(this,arguments);{const t=arguments[1],e=arguments[0].getContext();if(this._parentEdge===e&&(t===this._hotPixelVertexIndex||t+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(e,t)}}}nO.HotPixelSnapAction=iO;class rO{constructor(){rO.constructor_.apply(this,arguments)}static constructor_(){this._li=null,this._interiorIntersections=null;const t=arguments[0];this._li=t,this._interiorIntersections=new gN}processIntersections(t,e,n,i){if(t===n&&e===i)return null;const r=t.getCoordinates()[e],s=t.getCoordinates()[e+1],o=n.getCoordinates()[i],a=n.getCoordinates()[i+1];if(this._li.computeIntersection(r,s,o,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(let t=0;t<this._li.getIntersectionNum();t++)this._interiorIntersections.add(this._li.getIntersection(t));t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)}}isDone(){return!1}getInteriorIntersections(){return this._interiorIntersections}get interfaces_(){return[TS]}}class sO{constructor(){sO.constructor_.apply(this,arguments)}static constructor_(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;const t=arguments[0];this._pm=t,this._li=new CI,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()}checkCorrectness(t){const e=vS.getNodedSubstrings(t),n=new KC(e);try{n.checkValid()}catch(t){if(!(t instanceof LE))throw t;t.printStackTrace()}}getNodedSubstrings(){return vS.getNodedSubstrings(this._nodedSegStrings)}snapRound(t,e){const n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)}findInteriorIntersections(t,e){const n=new rO(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()}computeVertexSnaps(){if(CE(arguments[0],hN)){for(let t=arguments[0].iterator();t.hasNext();){const e=t.next();this.computeVertexSnaps(e)}}else if(arguments[0]instanceof vS){const t=arguments[0],e=t.getCoordinates();for(let n=0;n<e.length;n++){const i=new tO(e[n],this._scaleFactor,this._li);this._pointSnapper.snap(i,t,n)&&t.addIntersection(e[n],n)}}}computeNodes(t){this._nodedSegStrings=t,this._noder=new CS,this._pointSnapper=new nO(this._noder.getIndex()),this.snapRound(t,this._li)}computeIntersectionSnaps(t){for(let e=t.iterator();e.hasNext();){const t=e.next(),n=new tO(t,this._scaleFactor,this._li);this._pointSnapper.snap(n)}}get interfaces_(){return[IS]}}class oO{constructor(){oO.constructor_.apply(this,arguments)}static constructor_(){if(this._argGeom=null,this._distance=null,this._bufParams=new RC,this._resultGeometry=null,this._saveException=null,1===arguments.length){const t=arguments[0];this._argGeom=t}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this._argGeom=t,this._bufParams=e}}static bufferOp(){if(2===arguments.length){const t=arguments[1];return new oO(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ZE&&"number"==typeof arguments[1]){const t=arguments[1],e=arguments[2],n=new oO(arguments[0]);n.setQuadrantSegments(e);return n.getResultGeometry(t)}if(arguments[2]instanceof RC&&arguments[0]instanceof ZE&&"number"==typeof arguments[1]){const t=arguments[1];return new oO(arguments[0],arguments[2]).getResultGeometry(t)}}else if(4===arguments.length){const t=arguments[1],e=arguments[2],n=arguments[3],i=new oO(arguments[0]);i.setQuadrantSegments(e),i.setEndCapStyle(n);return i.getResultGeometry(t)}}static precisionScaleFactor(t,e,n){const i=t.getEnvelopeInternal(),r=DN.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY()))+2*(e>0?e:0),s=n-Math.trunc(Math.log(r)/Math.log(10)+1);return Math.pow(10,s)}bufferFixedPrecision(t){const e=new QC(new sO(new XN(1)),t.getScale()),n=new JC(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)}bufferReducedPrecision(){if(0===arguments.length){for(let t=oO.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(t){if(!(t instanceof kS))throw t;this._saveException=t}if(null!==this._resultGeometry)return null}throw this._saveException}if(1===arguments.length){const t=arguments[0],e=oO.precisionScaleFactor(this._argGeom,this._distance,t),n=new XN(e);this.bufferFixedPrecision(n)}}computeGeometry(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;const t=this._argGeom.getFactory().getPrecisionModel();t.getType()===XN.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()}setQuadrantSegments(t){this._bufParams.setQuadrantSegments(t)}bufferOriginalPrecision(){try{const t=new JC(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof jE))throw t;this._saveException=t}}getResultGeometry(t){return this._distance=t,this.computeGeometry(),this._resultGeometry}setEndCapStyle(t){this._bufParams.setEndCapStyle(t)}}function aO(t){return 180*(t/6371.0088%(2*Math.PI))/Math.PI}oO.CAP_ROUND=RC.CAP_ROUND,oO.CAP_BUTT=RC.CAP_FLAT,oO.CAP_FLAT=RC.CAP_FLAT,oO.CAP_SQUARE=RC.CAP_SQUARE,oO.MAX_PRECISION_DIGITS=12;const lO=Object.assign({},{GeoJSONReader:eI,GeoJSONWriter:nI,BufferOp:oO});function cO(t,e={}){let n=e.step?e.step:8,i=!1!==e.wgs84,r=0;switch(typeof e.dist){case"number":r=i?aO(e.dist):e.dist;break;case"string":r=e.dist;break;default:r=0}let s=(new lO.GeoJSONReader).read(Yo(t)),o=[];return s.features.forEach((t=>{let e=0;e="number"==typeof r?r:i?aO(t.properties[r]):t.properties[r];let s=(new lO.GeoJSONWriter).write(lO.BufferOp.bufferOp(t.geometry,e,n));0!==s.coordinates[0].length&&o.push({type:"Feature",properties:t.properties,geometry:s})})),o={type:"FeatureCollection",features:o},e.merge&&(o=uO(o)),o}const hO=Object.assign({},{GeoJSONReader:eI,GeoJSONWriter:nI,UnionOp:AC});function uO(t,e={}){let n=(new hO.GeoJSONReader).read(cO(t));if(null!=e.id&&null!=e.id){let t=Array.from(new Set(n.features.map((t=>t.properties[e.id])))),i=[];return t.forEach((t=>{let r=n.features.filter((n=>n.properties[e.id]==t)),s=r[0].geometry;for(let t=1;t<r.length;t++)s=hO.UnionOp.union(s,r[t].geometry);i.push({type:"Feature",properties:{id:t},geometry:(new hO.GeoJSONWriter).write(s)})})),{type:"FeatureCollection",features:i}}{let t=n.features[0].geometry;for(let e=1;e<n.features.length;e++)t=hO.UnionOp.union(t,n.features[e].geometry);return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:(new hO.GeoJSONWriter).write(t)}]}}}function fO(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i,r=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(t),s="Feature"===(i=e).type?i.geometry:i,o=s.type,a=e.bbox,l=s.coordinates;if(a&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(r,a))return!1;"Polygon"===o&&(l=[l]);for(var c=!1,h=0;h<l.length&&!c;h++)if(dO(r,l[h][0],n.ignoreBoundary)){for(var u=!1,f=1;f<l[h].length&&!u;)dO(r,l[h][f],!n.ignoreBoundary)&&(u=!0),f++;u||(c=!0)}return c}function dO(t,e,n){var i=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var r=0,s=e.length-1;r<e.length;s=r++){var o=e[r][0],a=e[r][1],l=e[s][0],c=e[s][1];if(t[1]*(o-l)+a*(l-t[0])+c*(t[0]-o)==0&&(o-t[0])*(l-t[0])<=0&&(a-t[1])*(c-t[1])<=0)return!n;a>t[1]!=c>t[1]&&t[0]<(l-o)*(t[1]-a)/(c-a)+o&&(i=!i)}return i}const gO=Object.assign({},{geoProject:ah,range:gt,rollup:D,ascending:e});function pO(t,e,n,i,r,s){let o=gO.range(0+r/2,i,r).reverse(),a=gO.range(0+r/2,n,r).map(((t,e)=>o.map((e=>[t,e])))).flat();const l=gO.geoProject(t,e),c=uO(l).features[0].geometry;let h=[];a.forEach(((t,e)=>{fO(t,c)&&h.push(t)}));let u=[];l.features.forEach(((t,e)=>{h.forEach(((n,i)=>{fO(n,t)&&u.push([e,t.properties[s],n])}))}));const f=gO.rollup(u,(t=>t.length),(t=>t[0])),d=new Map(t.features.map(((t,e)=>[e,t.properties])));let g=[];return u.forEach((t=>{g.push({type:"Feature",properties:Object.assign(d.get(t[0]),{___value:+t[1]/f.get(t[0]),___count:f.get(t[0])}),geometry:{type:"Point",coordinates:t[2]}})})),{type:"FeatureCollection",features:g.sort(((t,e)=>gO.ascending(t.properties.dot_value,e.properties.dot_value)))}}function _O(t,e,n={},i,r,s){n.geojson=pO(n.geojson,e,r,s,null!=n.step?n.step:20,n.values),n.values="___value",EE(t,rs(),!0,n,0,r,s)}function yO(t,e,n={},i,r,s){n.geojson=pO(n.geojson,e,r,s,null!=n.step?n.step:20,n.values),n.values="___value",SE(t,rs(),!0,n,0,r,s)}const mO=Object.assign({},{descending:n,max:nt,scaleSqrt:Wx,select:Io,pointer:Ao});function xO(t,e,n,i={},r,s){if(0!=i.display){let o=Date.now().toString(36)+Math.random().toString(36).substring(2),a=Bo(i.geojson),l=i.top_values,c=i.bottom_values,h=i.top_fill?i.top_fill:"#d64f4f",u=i.bottom_fill?i.bottom_fill:"#4fabd6",f=i.k?i.k:50,d=i.stroke?i.stroke:"white",g=i.strokeWidth?i.strokeWidth:.5,p=i.fillOpacity?i.fillOpacity:1,_=i.strokeOpacity?i.strokeOpacity:1,y=!!i.top_tooltip&&i.top_tooltip;Array.isArray(y)&&(y={fields:y}),"string"==typeof y&&(y={fields:[y]});let m=!!i.bottom_tooltip&&i.bottom_tooltip;Array.isArray(m)&&(m={fields:m}),"string"==typeof m&&(m={fields:[m]});let x=i.leg_x?i.leg_x:null,b=i.leg_y?i.leg_y:null,v=i.leg_fontSize?i.leg_fontSize:14,M=i.leg_fontSize2?i.leg_fontSize2:10,w=i.leg_round?i.leg_round:void 0,E=i.leg_txtcol?i.leg_txtcol:"#363636",N=i.leg_title?i.leg_title:"Title, year",I=i.leg_top_txt?i.leg_top_txt:l,S=i.leg_bottom_txt?i.leg_bottom_txt:c,C=i.leg_top_fill?i.leg_top_fill:h,O=i.leg_bottom_fill?i.leg_bottom_fill:u,k=i.leg_stroke?i.leg_stroke:E,T=i.leg_strokeWidth?i.leg_strokeWidth:.8;const A=ME(a,{planar:n}).features.sort(((t,e)=>mO.descending(+t.properties[l],+e.properties[l]))).filter((t=>null!=t.geometry.coordinates)),R=mO.max(A,(t=>+t.properties[l])),L=mO.max(A,(t=>+t.properties[c]));let P=mO.scaleSqrt([0,Math.max(R,L)],[0,f]);for(let n=0;n<A.length;n++){const i=e(A[n].geometry.coordinates)[0],a=e(A[n].geometry.coordinates)[1],f=P(A[n].properties[l]),x=P(A[n].properties[c]),b=Math.max(f,x);t.append("circle").attr("cx",i).attr("cy",a).attr("r",f).style("fill",h).attr("stroke",d).attr("stroke-width",g).attr("clip-path","url(#top-clip_"+o+n+")").on("touchmove mousemove",(function(e,i){y&&t.select("#info").call(_E,{fields:function(){const t=Array.isArray(y.fields)?y.fields:[y.fields];let e=[];return t.forEach((t=>{e.push("$"==t[0]?`${A[n].properties[t.substr(1,t.length)]}`:t)})),e}(),fontWeight:y.fontWeight,fontSize:y.fontSize,fontStyle:y.fontStyle,fill:y.fill,stroke:y.stroke,strokeWidth:y.strokeWidth,fillOpacity:y.fillOpacity,strokeOpacity:y.strokeOpacity,col:y.col,type:pE(mO.pointer(e,this),r,s)}),y&&(t.select("#info").attr("transform",`translate(${mO.pointer(e,this)})`),mO.select(this).attr("stroke-opacity",_-.3).attr("fill-opacity",p-.3))})).on("touchend mouseleave",(function(){t.select("#info").call(_E,null),mO.select(this).attr("stroke-opacity",_).attr("fill-opacity",p)})),t.append("clipPath").attr("id","top-clip_"+o+n).append("rect").attr("x",i-f-g).attr("y",a+-f-g).attr("height",f+g).attr("width",2*f+2*g),t.append("circle").attr("cx",i).attr("cy",a).attr("r",x).style("fill",u).attr("stroke",d).attr("stroke-width",g).attr("clip-path","url(#bottom-clip_"+o+n+")").on("touchmove mousemove",(function(e,i){m&&t.select("#info").call(_E,{fields:function(){const t=Array.isArray(m.fields)?m.fields:[m.fields];let e=[];return t.forEach((t=>{e.push("$"==t[0]?`${A[n].properties[t.substr(1,t.length)]}`:t)})),e}(),fontWeight:m.fontWeight,fontSize:m.fontSize,fontStyle:m.fontStyle,fill:m.fill,stroke:m.stroke,strokeWidth:m.strokeWidth,fillOpacity:m.fillOpacity,strokeOpacity:m.strokeOpacity,col:m.col,type:pE(mO.pointer(e,this),r,s)}),m&&(t.select("#info").attr("transform",`translate(${mO.pointer(e,this)})`),mO.select(this).attr("stroke-opacity",_-.3).attr("fill-opacity",p-.3))})).on("touchend mouseleave",(function(){t.select("#info").call(_E,null),mO.select(this).attr("stroke-opacity",_).attr("fill-opacity",p)})),t.append("clipPath").attr("id","bottom-clip_"+o+n).append("rect").attr("x",i-x-g).attr("y",a).attr("height",x+g).attr("width",2*x+2*g).attr("fill","none").attr("stroke","red"),t.append("line").attr("x1",i-b).attr("x2",i+b).attr("y1",a).attr("y2",a).attr("stroke",d).attr("stroke-width",g)}if(null!=x&&null!=b){const e=30,n=3,i=P(Math.max(+R,+L));let r=t.append("g");const s=P(mO.max(A,(t=>+t.properties[l])));let h=A.map((t=>+t.properties[l])),u=[P.invert(s/3),P.invert(s/1.5),mO.max(h)];r.selectAll("circle").data(u.sort(mO.descending)).join("circle").attr("cx",x+i).attr("cy",b+s+(N.split("\n").length+1)*v).attr("r",(t=>P(t))).attr("fill",C).attr("stroke",k).attr("stroke-width",T).attr("clip-path","url(#legtop-clip_"+o+")"),r.append("clipPath").attr("id","legtop-clip_"+o).append("rect").attr("x",x-T+i-s).attr("y",b+(N.split("\n").length+1)*v-T).attr("height",s+T).attr("width",2*s+2*T),r.selectAll("line").data(u).join("line").attr("x1",x+i).attr("y1",(t=>b+(N.split("\n").length+1)*v+s-P(t))).attr("x2",x+2*i+v).attr("y2",(t=>b+(N.split("\n").length+1)*v+s-P(t))).attr("stroke",k).attr("stroke-width",T).attr("stroke-dasharray",2),r.selectAll("text").data(u).join("text").attr("x",x+2*i+v+M/2).attr("y",(t=>b+(N.split("\n").length+1)*v+s-P(t))).attr("font-size",M).attr("dominant-baseline","central").attr("fill",E).text((t=>void 0!==w||0!==w?t.toFixed(w):t));let f=t.append("g");const d=P(mO.max(A,(t=>+t.properties[c])));let g=a.features.map((t=>+t.properties[c])),p=[P.invert(d/3),P.invert(d/1.5),mO.max(g)];f.selectAll("circle").data(p.sort(mO.descending)).join("circle").attr("cx",x+i).attr("cy",b+s+(N.split("\n").length+1)*v+e).attr("r",(t=>P(t))).attr("fill",O).attr("stroke",k).attr("stroke-width",T).attr("clip-path","url(#legbottom-clip_"+o+")"),f.append("clipPath").attr("id","legbottom-clip_"+o).append("rect").attr("x",x-T+i-d).attr("y",b+(N.split("\n").length+1)*v+e+s).attr("height",d+T).attr("width",2*d+2*T),f.selectAll("line").data(p).join("line").attr("x1",x+i).attr("y1",(t=>b+(N.split("\n").length+1)*v+s+e+P(t))).attr("x2",x+2*i+v).attr("y2",(t=>b+(N.split("\n").length+1)*v+s+e+P(t))).attr("stroke",k).attr("stroke-width",T).attr("stroke-dasharray",2),f.selectAll("text").data(p).join("text").attr("x",x+2*i+v+M/2).attr("y",(t=>b+(N.split("\n").length+1)*v+s+e+P(t))).attr("font-size",M).attr("dominant-baseline","central").attr("fill",E).text((t=>void 0!==w||0!==w?t.toFixed(w):t));let _=t.append("g").attr("class","bertinlegend");_.append("line").attr("x1",x+i-s).attr("x2",x+i+s).attr("y1",b+(N.split("\n").length+1)*v+s).attr("y2",b+(N.split("\n").length+1)*v+s).attr("stroke",E).attr("stroke-width",T),_.append("line").attr("x1",x+i-d).attr("x2",x+i+d).attr("y1",b+(N.split("\n").length+1)*v+s+e).attr("y2",b+(N.split("\n").length+1)*v+s+e).attr("stroke",E).attr("stroke-width",T),_.append("g").selectAll("text").data(N.split("\n")).join("text").attr("x",x).attr("y",b).attr("font-size",`${v}px`).attr("dy",((t,e)=>e*v)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",E).text((t=>t)),_.append("text").attr("x",x+i).attr("y",b+(N.split("\n").length+1)*v+s+n).text(I).attr("fill",E).attr("font-size",`${M}px`).attr("text-anchor","middle").attr("dominant-baseline","hanging"),_.append("text").attr("x",x+i).attr("y",b+(N.split("\n").length+1)*v+s+e-n).text(S).attr("fill",E).attr("font-size",`${M}px`).attr("text-anchor","middle").attr("dominant-baseline","baseline")}}}const bO=Object.assign({},{geoPath:xr});function vO(t,e,n={},i){if(0!=n.display){let r=Bo(n.geojson),s=n.values,o=n.fill?n.fill:"white",a=n.stroke?n.stroke:"white",l=n.strokeWidth?n.strokeWidth:.5,c=n.fillOpacity?n.fillOpacity:1,h=r.features.filter((t=>null==t.properties[s]));"l"==yE(r)&&(a=n.stroke?n.stroke:"white",o=n.fill?n.fill:"none",l=n.strokeWidth?n.strokeWidth:1),t.append("g").attr("clip-path",null==i?"none":`url(#clip_${i})`).selectAll("path").data(h).join("path").attr("d",bO.geoPath(e)).attr("fill",o).attr("stroke",a).attr("stroke-width",l).attr("fill-opacity",c),Ry(t,{x:n.leg_x,y:n.leg_y,w:n.leg_w,h:n.leg_h,text:n.leg_text?n.leg_text:"Missing data",fontSize:n.leg_fontSize2,stroke:n.leg_stroke,fillOpacity:n.leg_fillOpacity?n.leg_fillOpacity:c,fill:o,strokeWidth:n.leg_strokeWidth,txtcol:n.leg_txtcol})}}const MO=Object.assign({},{geoPath:xr});const wO=Object.assign({},{scaleLinear:Cx,geoPath:xr,geoProject:ah});function EO(t,e,n,i,r={}){if(0!=r.display){let s=null!=r.precision?r.precision:3,o=null!=r.dist?r.dist:5,a=null!=r.nb?r.nb:3;null==r.steps||r.steps;let l=null!=r.stroke?r.stroke:"#5d81ba",c=null!=r.strokeOpacity?r.strokeOpacity:[1,.1],h=null!=r.strokeWidth?r.strokeWidth:[1.2,.2],u=null!=r.strokeDasharray?r.strokeDasharray:"none",f=null!=r.strokeLinecap?r.strokeLinecap:"round",d=null!=r.strokeLinejoin?r.strokeLinejoin:"round",g=[],p=cO(wO.geoProject(uO(n),e),{dist:o,wgs84:!1,step:s});g.push(p.features[0]);for(let t=1;t<=a;t++)p=cO(p,{dist:o,wgs84:!1,step:s}),g.push(p.features[0]);t.append("g").attr("clip-path",null==i?"none":`url(#clip_${i})`).selectAll("path").data(g).join("path").attr("d",wO.geoPath()).attr("fill","none").attr("stroke-opacity",((t,e)=>Array.isArray(c)?wO.scaleLinear().domain([1,a]).range(c)(e):c)).attr("stroke-width",((t,e)=>Array.isArray(h)?wO.scaleLinear().domain([1,a]).range(h)(e):h)).attr("stroke",((t,e)=>Array.isArray(l)?wO.scaleLinear().domain([1,a]).range(l)(e):l)).attr("stroke-dasharray",u).attr("stroke-linecap",f).attr("stroke-linejoin",d)}}const NO=Object.assign({},{geoPath:xr});function IO(t,e,n={}){if(0!=n.display){let i=n.geojson,r=null!=n.thickness&&null!=n.thickness?n.thickness:7,s=null!=n.fill&&null!=n.fill?n.fill:"#9e9477",o=null!=n.fillOpacity&&null!=n.fillOpacity?n.fillOpacity:.2,a=null!=n.blur&&null!=n.blur?n.blur:4;const l=Date.now().toString(36)+Math.random().toString(36).substring(2);t.append("defs").append("filter").attr("id",`blur${l}`).append("feGaussianBlur").attr("stdDeviation",a);let c=uO(i);t.append("clipPath").attr("id",`inner${l}`).append("path").datum(c).attr("d",NO.geoPath(e)),t.append("g").attr("clip-path",`url(#inner${l})`).append("path").datum(c).attr("fill","none").attr("stroke",s).attr("stroke-linecap","round").attr("stroke-linejoin","round").attr("stroke-opacity",o).attr("stroke-width",2*r).attr("filter",`url(#blur${l})`).attr("d",NO.geoPath(e))}}function SO(){this.reset()}SO.prototype={constructor:SO,reset:function(){this.s=this.t=0},add:function(t){OO(CO,t,this.t),OO(this,CO.s,this.s),this.s?this.t+=CO.t:this.s=CO.t},valueOf:function(){return this.s}};const CO=new SO;function OO(t,e,n){const i=t.s=e+n,r=i-e,s=i-r;t.t=e-s+(n-r)}function kO(t,e){t&&AO.hasOwnProperty(t.type)&&AO[t.type](t,e)}const TO={Feature:function(t,e){kO(t.geometry,e)},FeatureCollection:function(t,e){let n=t.features,i=-1,r=n.length;for(;++i<r;)kO(n[i].geometry,e)}},AO={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){let n=t.coordinates,i=-1,r=n.length;for(;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){RO(t.coordinates,e,0)},MultiLineString:function(t,e){let n=t.coordinates,i=-1,r=n.length;for(;++i<r;)RO(n[i],e,0)},Polygon:function(t,e){LO(t.coordinates,e)},MultiPolygon:function(t,e){let n=t.coordinates,i=-1,r=n.length;for(;++i<r;)LO(n[i],e)},GeometryCollection:function(t,e){let n=t.geometries,i=-1,r=n.length;for(;++i<r;)kO(n[i],e)}};function RO(t,e,n){let i,r=-1,s=t.length-n;for(e.lineStart();++r<s;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function LO(t,e){let n=-1,i=t.length;for(e.polygonStart();++n<i;)RO(t[n],e,1);e.polygonEnd()}let PO,DO,zO,FO=new SO;const GO={sphere:t=>{},point:t=>{},lineStart:function(){GO.point=jO,GO.lineEnd=qO},lineEnd:t=>{},polygonStart:t=>{},polygonEnd:t=>{}};function qO(){GO.point=GO.lineEnd=t=>{}}function jO(t,e){t*=Math.PI/180,e*=Math.PI/180,PO=t,DO=Math.sin(e),zO=Math.cos(e),GO.point=BO}function BO(t,e){t*=Math.PI/180,e*=Math.PI/180;const n=Math.sin(e),i=Math.cos(e),r=Math.abs(t-PO),s=Math.cos(r),o=i*Math.sin(r),a=zO*n-DO*i*s,l=DO*n+zO*i*s;FO.add(Math.atan2(Math.sqrt(o*o+a*a),l)),PO=t,DO=n,zO=i}function UO(t){return FO.reset(),function(t,e){t&&TO.hasOwnProperty(t.type)?TO[t.type](t,e):kO(t,e)}(t,GO),+FO}const YO=[null,null],WO={type:"LineString",coordinates:YO};function $O(t,e){return YO[0]=t,YO[1]=e,UO(WO)}function XO(){return 1}var VO={units:"kilometers",radius:6371.0088};var HO=Object.freeze({__proto__:null,geoScaleBar:function(){let t,e,n,i,r,s=null,o=0,a=0,l=1,c=VO.radius,h=VO.units,u=t=>+t.toFixed(2),f=2,d=4,g="start",p=1,_=!0;function y(y){r=null===r?null:r||h.charAt(0).toUpperCase()+h.slice(1);let m=s[1][0]-s[0][0],x=s[1][1]-s[0][1],b=s[0][0]+m*o,v=s[0][1]+x*a,M=t.invert([b,v]),w=0,E=0;if(e)w=e,E=w/($O(M,t.invert([b+1,v]))*c);else{let e=.01,i=80/(_?1:p),r=0,s=100,o=[1,2,4,5];for(;E<i&&r<s;){for(let n=0,r=o.length;n<r&&(w=e*o[n],E=w/($O(M,t.invert([b+1,v]))*c),!(E>=i));n++);e*=10,r++}n=w}let N=w/(_?p:1),I=null===i?[]:i||[0,N/4,N/2,N],S=t=>t*E/(w/p),C=y.selection?y.selection():y,O=C.selectAll(".label").data([r]),k=C.selectAll(".domain").data([null]),T=C.selectAll(".tick").data(I,S).order(),A=T.exit(),R=T.enter().append("g").attr("class","tick"),L=T.select("line"),P=T.select("text"),D=T.select("rect");C.attr("font-family","sans-serif").attr("transform",`translate(${[b,v]})`),k=k.merge(k.enter().insert("path",".tick").attr("class","domain").attr("fill","none").attr("stroke","currentColor")),T=T.merge(R),L=L.merge(R.append("line").attr("stroke","currentColor").attr("y2",d*l)),P=P.merge(R.append("text").attr("fill","currentColor").attr("y",d*l+f*l).attr("font-size",10).attr("text-anchor","middle").attr("dy",(1===l?.71:0)+"em")),D=D.merge(R.append("rect").attr("fill",((t,e)=>e%2==0?"currentColor":"#fff")).attr("stroke","currentColor").attr("stroke-width",.5).attr("width",((t,e,n)=>e===n.length-1?0:S(I[e+1]-t))).attr("y",1===l?0:-d).attr("height",d)),y!==C&&(T=T.transition(y),k=k.transition(y),D=D.transition(y),A=A.transition(y).attr("opacity",1e-6).attr("transform",(t=>`translate(${S(t)})`)),R.attr("opacity",1e-6).attr("transform",(t=>`translate(${S(t)})`))),A.remove(),k.attr("d",`M${S(0)},${d*l} L${S(0)},0 L${S(N)},0 L${S(N)},${d*l}`),T.attr("transform",(t=>`translate(${S(t)})`)).attr("opacity",1),L.attr("y2",d*l),P.attr("y",d*l+f*l).text(u),D.attr("fill",((t,e)=>e%2==0?"currentColor":"#fff")).attr("width",((t,e,n)=>e===n.length-1?0:S(I[e+1]-t))).attr("y",1===l?0:-d).attr("height",d),null===O?O.remove():(y!==C?O.transition(y).attr("x","start"===g?0:S("middle"===g?N/2:N)).attr("y",1===l?0:"1.3em").attr("text-anchor",g).text((t=>t)):O.attr("x","start"===g?0:S("middle"===g?N/2:N)).attr("y",1===l?0:"1.3em").attr("text-anchor",g).text((t=>t)),O.enter().append("text").attr("class","label").attr("fill","currentColor").attr("font-size",12).attr("dy","-0.32em").attr("x","start"===g?0:S("middle"===g?N/2:N)).attr("y",1===l?0:"1.3em").attr("text-anchor",g).text((t=>t)))}return y.distance=function(t){return arguments.length?(e=+t,y):e||n},y.extent=function(t){return arguments.length?(s=t,y):s},y.label=function(t){return arguments.length?(r=t,y):r},y.labelAnchor=function(t){return arguments.length?(g=t,y):g},y.left=function(t){return arguments.length?(o=+t>1?1:+t<0?0:+t,y):o},y.orient=function(t){return arguments.length?(l=t(),y):1===l?"bottom":"top"},y.projection=function(e){return arguments.length?(t=e,y):t},y.radius=function(t){return arguments.length?(c=+t,y):c},y.size=function(t){return arguments.length?(s=[[0,0],t],y):s[1]},y.top=function(t){return arguments.length?(a=+t>1?1:+t<0?0:+t,y):a},y.tickFormat=function(t){return arguments.length?(u=t,y):u},y.tickPadding=function(t){return arguments.length?(f=+t,y):f},y.tickSize=function(t){return arguments.length?(d=+t,y):d},y.tickValues=function(t){return arguments.length?(i=t,y):i},y.units=function(t){return arguments.length?(({units:h,radius:c}=t),y):h},y.zoomClamp=function(t){return arguments.length?(_=!!t,y):_},y.zoomFactor=function(t){return arguments.length?(p=+t,y):p},y},geoScaleBottom:XO,geoScaleTop:function(){return-1},geoScaleFeet:{units:"feet",radius:20902259.664},geoScaleKilometers:VO,geoScaleMeters:{units:"meters",radius:6371008.8},geoScaleMiles:{units:"miles",radius:3958.7613}});const ZO=Object.assign({},HO);function JO(t,e,n,i={}){if(0!=i.display){let r,s,o,a,l,c,h=i.position?i.position:"topright",u=i.text?i.text:"Your text here!",f=i.fontSize?i.fontSize:15,d=i.fontFamily?i.fontFamily:"Robotto",g=i.margin?i.margin:0,p=i.textDecoration?i.textDecoration:"none",_=i.fontWeight?i.fontWeight:"normal",y=i.fontStyle?i.fontStyle:"normal",m=i.anchor?i.anchor:"start",x=i.baseline?i.baseline:"baseline",b=i.fill?i.fill:"#474342",v=i.stroke?i.stroke:"none",M=i.frame_fill?i.frame_fill:"none",w=i.frame_stroke?i.frame_stroke:"none",E=i.strokeWidth?i.strokeWidth:1,N=i.frame_opacity?i.frame_opacity:1;switch(h){case"topleft":m="start",x="hanging",r=5,s=5;break;case"topright":m="end",x="hanging",r=e-5,s=5;break;case"top":m="middle",x="hanging",r=e/2,s=5;break;case"left":m="start",x="middle",r=5,s=n/2;break;case"middle":m="middle",x="middle",r=e/2,s=n/2;break;case"right":m="end",x="middle",r=e-5,s=n/2;break;case"bottomleft":m="start",x="baseline",r=5,s=n-5;break;case"bottom":m="middle",x="baseline",r=e/2,s=n-5;break;case"bottomright":m="end",x="baseline",r=e-5,s=n-5;break;default:r=h[0],s=h[1]}let I=u.split("\n"),S=[];I.forEach((t=>S.push(t.length)));let C=S.indexOf(Math.max(...S)),O=t.append("text").attr("font-size",`${f}px`).attr("font-family",d).attr("font-style",y).attr("text-decoration",p).attr("font-weight",_).text(I[C]);t.node().appendChild(O.node()),document.body.appendChild(t.node());const k=O.node().getBBox().width;document.body.removeChild(t.node()),O.remove();let T=f*S.length;"hanging"==x&&(l=0,a=g),"middle"==x&&(l=f*I.length/2,a=0),"baseline"==x&&(l=f*I.length,a=-g),"start"==m&&(c=0,o=g),"middle"==m&&(c=k/2,o=0),"end"==m&&(c=k,o=-g);let A=t.append("g").attr(":inkscape:groupmode","layer").attr("id","note").attr(":inkscape:label","note");A.append("rect").attr("x",r-g-c+o).attr("y",s-g-l+a).attr("height",T+2*g).attr("width",k+2*g).attr("fill",M).attr("stroke-width",E).attr("fill-opacity",N).attr("stroke",w),A.selectAll("text").data(I).join("text").attr("x",r+o).attr("y",s-+l+a).attr("font-size",`${f}px`).attr("font-style",y).attr("text-decoration",p).attr("font-weight",_).attr("font-family",d).attr("dy",((t,e)=>e*f)).attr("text-anchor",m).attr("dominant-baseline","hanging").attr("fill",b).attr("stroke",v).text((t=>t))}}function QO(t,e,n,i={},r){if(0!=i.display){let r,s=Bo(i.geojson),o=i.values,a=i.fill?i.fill:"#474342",l=i.fontSize?i.fontSize:10,c=i.fontFamily?i.fontFamily:"Robotto",h=i.textDecoration?i.textDecoration:"none",u=i.fontWeight?i.fontWeight:"normal",f=i.fontStyle?i.fontStyle:"normal",d=null!=i.opacity?i.opacity:1,g=1==i.halo,p=i.halo_style?i.halo_style:["white",4,.5];r="p"==yE(s)?s.features:ME(s,{planar:n}).features,t.append("g").selectAll("text").data(r.filter((t=>null!=t.geometry.coordinates)).filter((t=>null!=t.properties[o]))).join("text").attr("x",(t=>e(t.geometry.coordinates)[0])).attr("y",(t=>e(t.geometry.coordinates)[1])).attr("fill",a).attr("opacity",d).attr("font-size",l).attr("font-family",c).attr("font-style",f).attr("text-decoration",h).attr("font-weight",u).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("paint-order","stroke").attr("stroke",g?p[0]:"none").attr("stroke-width",g?p[1]:0).attr("stroke-opacity",g?p[2]:0).attr("stroke-linejoin","round").attr("stroke-linecap","round").text((t=>t.properties[o]))}}const KO=Object.assign({},{select:Io,pointer:Ao,min:rt,max:nt,descending:n,scaleLinear:Cx});function tk(t,e,n,i={},r,s,o){if(0!=i.display){let r=Bo(i.geojson),a=i.values,l=null!=i.k?i.k:50,c=null!=i.w?i.w:10,h=i.fill?i.fill:"#ffa3e3",u=i.stroke?i.stroke:"#a31d88",f=null!=i.strokeWidth?i.strokeWidth:1,d=null!=i.fillOpacity?i.fillOpacity:1,g=i.strokeLinecap?i.strokeLinecap:"round",p=i.strokeLinejoin?i.strokeLinejoin:"round",_=null!=i.strokeDasharray?i.strokeDasharray:"none",y=null!=i.strokeOpacity?i.strokeOpacity:1,m=!!i.tooltip&&i.tooltip;Array.isArray(m)&&(m={fields:m}),"string"==typeof m&&(m={fields:[m]});let x=i.leg_x?i.leg_x:null,b=i.leg_y?i.leg_y:null;!i.leg_w||i.leg_w,!i.leg_h||i.leg_h;let v=i.leg_title?i.leg_title:null,M=i.leg_fontSize?i.leg_fontSize:14,w=i.leg_fontSize2?i.leg_fontSize2:10;!i.leg_stroke||i.leg_stroke,!i.fillOpacity||i.fillOpacity,!i.leg_strokeWidth||i.leg_strokeWidth;let E,N=i.leg_txtcol?i.leg_txtcol:"#363636",I=void 0!==i.leg_round?i.leg_round:void 0;E="p"==yE(r)?r.features:ME(r,{planar:n}).features;const S=KO.scaleLinear().domain([0,KO.max(E.map((t=>+t.properties[a])))]).range([0,l]);t.append("g").selectAll("path").data(E.filter((t=>null!=t.geometry.coordinates)).filter((t=>null!=t.properties[a])).sort(((t,e)=>KO.descending(+t.properties[a],+e.properties[a])))).join("path").attr("fill",(t=>uE(E,h).getcol(t.properties[h.values]))).attr("stroke",(t=>uE(E,u).getcol(t.properties[u.values]))).attr("stroke-width",(t=>dE(E,f).getthickness(t.properties[f.values]||void 0))).attr("fill-opacity",d).attr("stroke-opacity",y).attr("stroke-linecap",g).attr("stroke-linejoin",p).attr("stroke-dasharray",_).attr("d",(t=>`M ${e(t.geometry.coordinates)[0]-c/2}, ${e(t.geometry.coordinates)[1]} ${e(t.geometry.coordinates)[0]}, ${e(t.geometry.coordinates)[1]-S(t.properties[a])} ${e(t.geometry.coordinates)[0]+c/2}, ${e(t.geometry.coordinates)[1]}`)).on("touchmove mousemove",(function(e,n){m&&t.select("#info").call(_E,{fields:function(){const t=Array.isArray(m.fields)?m.fields:[m.fields];let e=[];return t.forEach((t=>{e.push("$"==t[0]?`${n.properties[t.substr(1,t.length)]}`:t)})),e}(),fontWeight:m.fontWeight,fontSize:m.fontSize,fontStyle:m.fontStyle,fill:m.fill,stroke:m.stroke,strokeWidth:m.strokeWidth,fillOpacity:m.fillOpacity,strokeOpacity:m.strokeOpacity,col:m.col,type:pE(KO.pointer(e,this),s,o)}),m&&(t.select("#info").attr("transform",`translate(${KO.pointer(e,this)})`),KO.select(this).attr("stroke-opacity",y-.3).attr("fill-opacity",d-.3).raise())})).on("touchend mouseleave",(function(){t.select("#info").call(_E,null),KO.select(this).attr("stroke-opacity",y).attr("fill-opacity",d).lower()}));const C=E.filter((t=>""!=t.properties[a])).map((t=>+t.properties[a])),O=[KO.min(C),S.invert(l/3),S.invert(l/1.5),KO.max(C)];if(null!=x&&null!=b){let e=t.append("g").attr("class","bertinlegend");null!=v&&(v.split("\n").length,e.append("g").selectAll("text").data(v.split("\n")).join("text").attr("x",x).attr("y",b).attr("font-size",`${M}px`).attr("dy",((t,e)=>e*M)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",N).text((t=>t))),e.append("g").selectAll("path").data(O.sort(KO.descending)).join("path").attr("d",(t=>`M ${-c/2},0 0,${-S(t)} ${c/2},0`)).attr("fill","object"==typeof h?"white":h).attr("stroke","object"==typeof u?"black":u).attr("stroke-width",1).attr("transform",((t,e)=>`translate(${x+c/2+(c+5)*e},${b+l+(v.split("\n").length+1)*M})`)),e.append("g").selectAll("text").data(O.sort(KO.descending)).join("text").attr("text-anchor","start").attr("dominant-baseline","middle").attr("transform",((t,e)=>`translate(${x+c/2+(c+5)*e},${b+l+(v.split("\n").length+1)*M+w/2}) rotate(90)`)).attr("font-size",`${w}px`).attr("fill",N).text((t=>kM(t,I)))}gE(r,t,h,u,f)}}const ek=Object.assign({},{sum:mt,select:Io,pointer:Ao,forceX:ky,forceY:Ty,forceCollide:iy,forceSimulation:Oy});function nk(t,e,n,i={},r,s,o){if(0!=i.display){let r=["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],a=Bo(i.geojson),l=i.values,c=null!=i.radius?i.radius:4,h=null!=i.nbmax?i.nbmax:200,u=null!=i.onedot?i.onedot:Math.round(ek.sum(a.features.map((t=>+t.properties[l])))/h),f=null!=i.span?i.span:.5,d=null!=i.fill?i.fill:r[Math.floor(Math.random()*r.length)],g=null!=i.stroke?i.stroke:"none",p=null!=i.strokeWidth?i.strokeWidth:0,_=null!=i.fillOpacity?i.fillOpacity:1,y=null!=i.strokeDasharray?i.strokeDasharray:"none",m=null!=i.strokeOpacity?i.strokeOpacity:1,x=!!i.tooltip&&i.tooltip;Array.isArray(x)&&(x={fields:x}),"string"==typeof x&&(x={fields:[x]});let b,v=null!=i.iteration?i.iteration:200;b="p"==yE(a)?a.features:ME(a,{planar:n}).features;let M=[];for(let t=0;t<=b.length-1;t++){let e=Math.round(+b[t].properties[l]/u);for(let n=1;n<=e;n++)M.push({...b[t]})}const w=ek.forceSimulation(M).force("x",ek.forceX((t=>e(t.geometry.coordinates)[0]))).force("y",ek.forceY((t=>e(t.geometry.coordinates)[1]))).force("collide",ek.forceCollide(c+f+p/2));for(let t=0;t<v;t++)w.tick();t.append("g").selectAll("circle").data(M.filter((t=>null!=t.geometry.coordinates))).join("circle").attr("fill",(t=>uE(M,d).getcol(t.properties[d.values]))).attr("stroke",(t=>uE(M,g).getcol(t.properties[g.values]))).attr("stroke-width",(t=>dE(M,p).getthickness(t.properties[p.values]||void 0))).attr("fill-opacity",_).attr("stroke-dasharray",y).attr("stroke-opacity",m).attr("cx",(t=>t.x)).attr("cy",(t=>t.y)).attr("r",c).on("touchmove mousemove",(function(e,n){x&&t.select("#info").call(_E,{fields:function(){const t=Array.isArray(x.fields)?x.fields:[x.fields];let e=[];return t.forEach((t=>{e.push("$"==t[0]?`${n.properties[t.substr(1,t.length)]}`:t)})),e}(),fontWeight:x.fontWeight,fontSize:x.fontSize,fontStyle:x.fontStyle,fill:x.fill,stroke:x.stroke,strokeWidth:x.strokeWidth,fillOpacity:x.fillOpacity,strokeOpacity:x.strokeOpacity,col:x.col,type:pE(ek.pointer(e,this),s,o)}),x&&(t.select("#info").attr("transform",`translate(${ek.pointer(e,this)})`),ek.select(this).attr("stroke-opacity",m-.3).attr("fill-opacity",_-.3))})).on("touchend mouseleave",(function(){t.select("#info").call(_E,null),ek.select(this).attr("stroke-opacity",m).attr("fill-opacity",_)}));const E=null!=i.leg_x?i.leg_x:null,N=null!=i.leg_y?i.leg_y:null,I=i.leg_title?i.leg_title:"leg_title",S=null!=i.leg_fontSize?i.leg_fontSize:14,C=null!=i.leg_fontSize2?i.leg_fontSize2:10,O=i.leg_txtcol?i.leg_txtcol:"#363636",k=i.leg_stroke?i.leg_stroke:g,T=null!=i.leg_strokeWidth?i.leg_strokeWidth:p,A="string"==typeof d?d:i.leg_fill,R=i.leg_txt?i.leg_txt:u;if(null!=E&&null!=N){let e=t.append("g").attr("class","bertinlegend");null!=I&&(I.split("\n").length,e.append("g").selectAll("text").data(I.split("\n")).join("text").attr("x",E).attr("y",N).attr("font-size",`${S}px`).attr("dy",((t,e)=>e*S)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",O).text((t=>t))),e.append("circle").attr("r",c).attr("fill",A).attr("stroke",k).attr("stroke-width",T).attr("cx",E+c).attr("cy",N+2*c+I.split("\n").length*S),e.append("text").attr("fill",O).attr("font-size",`${C}px`).attr("dominant-baseline","middle").attr("x",E+2*c+C).attr("y",N+2*c+I.split("\n").length*S).text(R)}gE({type:"FeatureCollection",features:M},t,d,g,p)}}function ik(t){t=Yo(t);let e=[];t.features.forEach((t=>{e.push(function(t){let e=[];t.geometry.type.includes("Multi")?t.geometry.coordinates.forEach((n=>{e.push({type:"Feature",properties:t.properties,geometry:{type:t.geometry.type.replace("Multi",""),coordinates:n}})})):e.push({...t});const n=Ie(t);return e.forEach((t=>t.__share=Ie(t)/n)),JSON.parse(JSON.stringify(e))}(t))}));const n=Object.keys(t).filter((t=>"features"!=t)),i={};return n.forEach((e=>{i[e]=t[e]})),i.features=e.flat(),i}function rk(t,e,n){if(null!==t)for(var i,r,s,o,a,l,c,h,u=0,f=0,d=t.type,g="FeatureCollection"===d,p="Feature"===d,_=g?t.features.length:1,y=0;y<_;y++){a=(h=!!(c=g?t.features[y].geometry:p?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var m=0;m<a;m++){var x=0,b=0;if(null!==(o=h?c.geometries[m]:c)){l=o.coordinates;var v=o.type;switch(u=!n||"Polygon"!==v&&"MultiPolygon"!==v?0:1,v){case null:break;case"Point":if(!1===e(l,f,y,x,b))return!1;f++,x++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],f,y,x,b))return!1;f++,"MultiPoint"===v&&x++}"LineString"===v&&x++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-u;r++){if(!1===e(l[i][r],f,y,x,b))return!1;f++}"MultiLineString"===v&&x++,"Polygon"===v&&b++}"Polygon"===v&&x++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(b=0,r=0;r<l[i].length;r++){for(s=0;s<l[i][r].length-u;s++){if(!1===e(l[i][r][s],f,y,x,b))return!1;f++}b++}x++}break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===rk(o.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function sk(t){var e=[1/0,1/0,-1/0,-1/0];return rk(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function ok(t){return Array.isArray(t)?lk(t):t&&t.bbox?lk(t.bbox):[360*ak(),180*ak()]}function ak(){return Math.random()-.5}function lk(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}function ck(t,e,n){let i=[];t.features.forEach((t=>{i.push(function(t,e,n){let i=[],r=0,s=0;const o=Math.round(+t.properties[e]/n),a=sk(t);for(;r<o&&s<10*o;){const e=ok(a),n={type:"Feature",properties:t.properties,geometry:{type:"Point",coordinates:e}};fO(n,t)&&(i.push(n),r++),s++}return JSON.parse(JSON.stringify(i))}(t,e,n))}));const r=Object.keys(t).filter((t=>"features"!=t)),s={};return r.forEach((e=>{s[e]=t[e]})),s.features=i.flat(),s}sk.default=sk;const hk=Object.assign({},{sum:mt});function uk(t){return t.k}function fk(t){return[t.x,t.y]}function dk(t){return function(){return t}}const gk=Object.assign({},{tile:function(){let t=0,e=0,n=960,i=500,r=!0,s=!0,o=256,a=uk,l=fk,c=0;function h(){const h=+a.apply(this,arguments),u=l.apply(this,arguments),f=Math.log2(h/o),d=Math.round(Math.max(f+c,0)),g=Math.pow(2,f-d)*o,p=+u[0]-h/2,_=+u[1]-h/2,y=Math.max(r?0:-1/0,Math.floor((t-p)/g)),m=Math.min(r?1<<d:1/0,Math.ceil((n-p)/g)),x=Math.max(s?0:-1/0,Math.floor((e-_)/g)),b=Math.min(s?1<<d:1/0,Math.ceil((i-_)/g)),v=[];for(let t=x;t<b;++t)for(let e=y;e<m;++e)v.push([e,t,d]);return v.translate=[p/g,_/g],v.scale=g,v}return h.size=function(r){return arguments.length?(t=e=0,n=+r[0],i=+r[1],h):[n-t,i-e]},h.extent=function(r){return arguments.length?(t=+r[0][0],e=+r[0][1],n=+r[1][0],i=+r[1][1],h):[[t,e],[n,i]]},h.scale=function(t){return arguments.length?(a="function"==typeof t?t:dk(+t),h):a},h.translate=function(t){return arguments.length?(l="function"==typeof t?t:dk([+t[0],+t[1]]),h):l},h.zoomDelta=function(t){return arguments.length?(c=+t,h):c},h.tileSize=function(t){return arguments.length?(o=+t,h):o},h.clamp=function(t){return arguments.length?(r=s=!!t,h):r&&s},h.clampX=function(t){return arguments.length?(r=!!t,h):r},h.clampY=function(t){return arguments.length?(s=!!t,h):s},h},geoPath:xr});function pk(t,e,n,i={}){if(0!=i.display){let r=i.url?i.url:"https://github.com/neocarto/bertin/raw/main/img/logo.png",s=i.position?i.position:"left";const o=new Image;o.src=r,o.onload=()=>{let a,l,c=null!=i.size?i.size:100,h=o.height*c/o.width;switch(s){case"left":a=10,l=n-10-h;break;case"middle":a=e/2-c/2,l=n-10-h;break;case"right":a=e-10-c,l=n-10-h;break;default:a=s[0],l=s[1]}t.append("g").append("image").attr("xlink:href",r).attr("width",c).attr("height",h).attr("x",a).attr("y",l)}}}function _k(t,e,n,i,r={}){if(0!=r.display){let s=null!=r.nb?r.nb:16,o=null!=r.position?r.position:[e/4,n-n/4],a=r.stroke?r.stroke:"#394a70",l=null!=r.strokeWidth?r.strokeWidth:1,c=null!=r.strokeOpacity?r.strokeOpacity:.3,h=r.strokeDasharray?r.strokeDasharray:[3,2],u=[];for(let t=0;t<s;t++)u[t]=360/s*t*(Math.PI/180);let f=Math.max(e,n);t.append("g").attr("clip-path",null==i?"none":`url(#clip_${i})`).selectAll("polyline").data(u).enter().append("polyline").attr("fill","none").attr("stroke",a).attr("stroke-opacity",c).attr("stroke-width",l).attr("stroke-dasharray",h).attr("points",(function(t,e){let n=o[0]+Math.cos(t)*f,i=o[1]+Math.sin(t)*f;return o[0]+","+o[1]+" "+n+","+i}))}}function yk(t,e,n,i={},r){if(0!=i.display&&!n){let n=i.fill?i.fill:"#d91848",s=i.fillOpacity?i.fillOpacity:.5,o=i.stroke?i.stroke:"#d91848",a=null!=i.strokeWidth?i.strokeWidth:.2,l=null!=i.strokeOpacity?i.strokeOpacity:.6,c=i.step?i.step:10;t.append("g").attr("clip-path",null==r?"none":`url(#clip_${r})`).append("path").datum(function(t){const e=Tn().center((t=>t)).radius(t/4).precision(10),n=[];for(let i=-80;i<=80;i+=t)for(let r=-180;r<180;r+=t)n.push({type:"Feature",properties:{},geometry:{type:"MultiPolygon",coordinates:[e([r,i]).coordinates]}});return{type:"FeatureCollection",features:n}}(c)).attr("d",xr(e)).style("fill",n).style("fill-opacity",s).style("stroke",o).style("stroke-width",a).style("stroke-opacity",l)}}const mk=Object.assign({},{geoPath:xr,geoArea:Ie});function xk({mainmap:t={selection:null,projection:null,width:null,height:null},x:e=5,y:n=5,geojson:i=bk,extent:r=null,threshold:s=.1,precision:o=10,projection:a="Equirectangular",width:l=200,background:c={stroke:"black",strokeWidth:1,strokeOpacity:1,fill:"white",fillOpacity:1},frame:h={stroke:"none",strokeWidth:1,strokeOpacity:1,fill:"red",fillOpacity:.25},geometries:u={fill:"#CCC",stroke:"none",strokeWidth:1,fillOpacity:1,strokeOpacity:1},raise:f={fill:"red",stroke:"none",strokeWidth:1,fillOpacity:1,strokeOpacity:1},dot:d={fill:"red",r:5,stroke:"none",strokeWidth:1,fillOpacity:1,strokeOpacity:1}}={}){const g=Date.now().toString(36)+Math.random().toString(36).substring(2);r=Array.isArray(r)&&Array.isArray(r[0])&&Array.isArray(r[1])?$o(r):r;const p={type:"Sphere"};let _=t.selection;a=(a=Eg(a)).fitWidth(l,r||p);const y=mk.geoPath(a);let m="";null!=r&&(m=y.bounds(r),_.append("clipPath").attr("id",`extent_${g}`).append("rect").attr("x",0).attr("y",0).attr("width",m[1][0]).attr("height",m[1][1])),null==r?_.append("g").append("path").attr("d",y(p)).attr("fill",c.fill).attr("fill-opacity",c.fillOpacity).attr("stroke","none").attr("transform",`translate(${e} ${n})`):_.append("g").append("rect").attr("x",0).attr("y",0).attr("width",m[1][0]).attr("height",m[1][1]).attr("fill",c.fill).attr("fill-opacity",c.fillOpacity).attr("stroke","none").attr("transform",`translate(${e} ${n})`),_.append("g").append("path").datum(i).attr("fill",u.fill).attr("fill-opacity",u.fillOpacity).attr("stroke",u.stroke).attr("stroke-width",u.strokeWidth).attr("stroke-opacity",u.strokeOpacity).attr("d",y).attr("transform",`translate(${e} ${n})`).attr("clip-path",`url(#extent_${g})`),null==r?_.append("g").append("path").attr("d",y(p)).attr("fill","none").attr("stroke",c.stroke).attr("stroke-width",c.strokeWidth).attr("stroke-opacity",c.strokeOpacity).attr("transform",`translate(${e} ${n})`):_.append("g").append("rect").attr("x",0).attr("y",0).attr("width",m[1][0]).attr("height",m[1][1]).attr("fill","none").attr("stroke",c.stroke).attr("stroke-width",c.strokeWidth).attr("stroke-opacity",c.strokeOpacity).attr("transform",`translate(${e} ${n})`);let x=[];for(let e=0;e<=t.width;e+=t.width/o)x.push(e);let b=[];for(let e=0;e<=t.height;e+=t.width/o)b.push(e);let v=[];v.push(x.map((e=>t.projection.invert([e,0])))),v.push(b.map((e=>t.projection.invert([t.width,e])))),v.push(x.reverse().map((e=>t.projection.invert([e,t.height])))),v.push(b.reverse().map((e=>t.projection.invert([0,e]))));const M={type:"Feature",geometry:{type:"Polygon",coordinates:[v.flat()]}};if(mk.geoArea(M)>s)_.append("g").append("path").datum(M).attr("fill",h.fill).attr("fill-opacity",h.fillOpacity).attr("stroke",h.stroke).attr("stroke-width",h.strokeWidth).attr("stroke-opacity",h.strokeOpacity).attr("d",y).attr("transform",`translate(${e} ${n})`),_.append("clipPath").attr("id",`clipminimap_${g}`).append("path").datum(M).attr("d",mk.geoPath(a)),_.append("g").append("path").attr("clip-path",`url(#clipminimap_${g})`).datum(i).attr("fill",f.fill).attr("fill-opacity",f.fillOpacity).attr("stroke",f.stroke).attr("stroke-width",f.strokeWidth).attr("stroke-opacity",f.strokeOpacity).attr("d",y).attr("transform",`translate(${e} ${n})`);else{const i=t.projection.invert([t.width/2,t.height/2]);_.append("circle").attr("cx",a(i)[0]).attr("cy",a(i)[1]).attr("fill",d.fill).attr("fill-opacity",d.fillOpacity).attr("stroke",d.stroke).attr("stroke-width",d.strokeWidth).attr("stroke-opacity",d.strokeOpacity).attr("r",d.r).attr("transform",`translate(${e} ${n})`)}}const bk={type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"MultiPolygon",coordinates:[[[[9.8,1],[4.41,6.36],[-7.54,4.35],[-16.73,12.33],[-17.01,21.2],[-5.91,35.81],[11.31,37],[10.33,33.7],[19.06,30.27],[21.61,32.93],[34.48,31.58],[36.02,36.93],[27.67,36.66],[26.74,40.4],[41.5,42.64],[31.19,46.63],[22.57,40.05],[13.71,45.59],[15.61,40.07],[3.94,43.53],[-2.13,36.74],[-9,37.02],[-9.29,42.92],[-1.79,43.39],[-1.37,48.66],[9.44,54.81],[21.04,55.3],[21.85,65.54],[13.28,55.35],[7.42,62.6],[18.6,70.1],[27.77,71.19],[41.02,67.7],[34.77,64.56],[66.93,71.3],[102.03,77.22],[111.14,76.75],[106.36,73.19],[124.38,73.81],[130.57,70.96],[141.55,72.77],[160.54,69.36],[179.95,68.97],[179.61,62.71],[163.39,59.62],[156.72,50.89],[155.55,55.28],[164.03,61.35],[146.33,59.71],[135.22,54.89],[141.53,53.18],[140.17,48.45],[126.67,37.83],[117.76,39.11],[121.63,28.54],[116.49,22.94],[106.79,21.01],[109.44,14.1],[104.89,9.85],[91.62,22.54],[80.26,15.67],[76.54,8.94],[70.98,20.71],[66.25,25.47],[57.33,25.78],[47.95,29.99],[51.22,24.63],[56.08,26.11],[57.84,19.02],[43.95,12.6],[35.22,28.05],[39.72,15.26],[44.27,10.46],[51.29,11.83],[47.95,4.46],[40.17,-2.76],[39.86,-16.43],[27.1,-33.53],[19.95,-34.81],[11.85,-18.14],[13.64,-12.25],[9.8,1]],[[27.64,58],[27.64,58]],[[5.07,52.92],[5.07,52.92]],[[133.26,45.54],[133.26,45.54]],[[57.64,42.15],[57.64,42.15]],[[60.06,44.85],[60.06,44.85]],[[34.86,-13.51],[34.86,-13.51]],[[29.21,-3.33],[29.21,-3.33]],[[34,.25],[34,.25]],[[48.87,38.43],[54.01,36.82],[50.3,44.66],[48.87,38.43]]],[[[8.72,3.8],[8.72,3.8]]],[[[179.08,-8.36],[179.08,-8.36]]],[[[179.18,-8],[179.18,-8]]],[[[73.71,4.23],[73.71,4.23]]],[[[73.41,5.19],[73.41,5.19]]],[[[73.37,3.53],[73.37,3.53]]],[[[-61.77,17.13],[-61.77,17.13]]],[[[50.42,26.6],[50.42,26.6]]],[[[-78.15,25.26],[-78.15,25.26]]],[[[-77.25,25.13],[-77.25,25.13]]],[[[-59.53,13.06],[-59.53,13.06]]],[[[43.87,-12.2],[43.87,-12.2]]],[[[-23.9,15.8],[-23.9,15.8]]],[[[-61.45,15.56],[-61.45,15.56]]],[[[11.95,55.99],[11.95,55.99]]],[[[-16.13,28.6],[-16.13,28.6]]],[[[3.2,39.88],[3.2,39.88]]],[[[-7.41,62.14],[-7.41,62.14]]],[[[158.06,6.98],[158.06,6.98]]],[[[-2.51,49.41],[-2.51,49.41]]],[[[-61.56,12.03],[-61.56,12.03]]],[[[-4.6,54.09],[-4.6,54.09]]],[[[15.66,38.42],[15.66,38.42]]],[[[9.12,41.24],[9.12,41.24]]],[[[-2.12,49.26],[-2.12,49.26]]],[[[-158.96,2.2],[-158.96,2.2]]],[[[-62.67,17.34],[-62.67,17.34]]],[[[-60.95,13.71],[-60.95,13.71]]],[[[171.05,7.14],[171.05,7.14]]],[[[14.55,35.76],[14.55,35.76]]],[[[57.71,-20.1],[57.71,-20.1]]],[[[167.02,-.55],[167.02,-.55]]],[[[134.66,7.59],[134.66,7.59]]],[[[104.28,1.37],[104.28,1.37]]],[[[6.69,.07],[6.69,.07]]],[[[55.49,-4.52],[55.49,-4.52]]],[[[-175.25,-20.99],[-175.25,-20.99]]],[[[-61.2,13.1],[-61.2,13.1]]],[[[-172.27,-13.44],[-172.27,-13.44]]],[[[-53.38,-33.74],[-64.89,-40.71],[-65.97,-48.05],[-71.03,-53.81],[-75.43,-47.25],[-72.46,-41.99],[-70.39,-18.34],[-81.1,-6.07],[-77.34,6.54],[-94.85,16.43],[-103.5,18.33],[-123.73,38.92],[-122.21,47.99],[-134.24,58.21],[-151.57,60.99],[-156.55,56.98],[-166.37,63.1],[-166.55,68.36],[-156.82,71.31],[-135.87,68.91],[-127.84,70.24],[-113.86,67.7],[-96.46,67.47],[-96.88,71.01],[-81.24,67.46],[-92.45,62.79],[-92.42,57.35],[-79.77,54.65],[-77.49,62.59],[-67.03,58.18],[-64.07,60.45],[-55.81,53.33],[-66.41,50.26],[-64.51,46.24],[-73.65,41],[-76.07,35.38],[-84.02,30.11],[-97.55,27.01],[-95.75,18.77],[-86.83,21.43],[-88.69,15.84],[-83.13,15],[-82.25,9.01],[-62.62,9.74],[-52.99,5.46],[-50.4,-.07],[-35.51,-5.14],[-42.06,-22.95],[-48.58,-25.87],[-53.38,-33.74]],[[-79.06,43.28],[-79.06,43.28]],[[-82.64,42.56],[-82.64,42.56]],[[-89.58,48],[-89.58,48]],[[-69.37,-15.52],[-69.37,-15.52]],[[-84.11,46.35],[-84.11,46.35]]],[[[9.44,42.77],[9.44,42.77]]],[[[-61.9,16.22],[-61.9,16.22]]],[[[-60.6,14.51],[-60.6,14.51]]],[[[55.75,-20.58],[55.75,-20.58]]],[[[143.1,54.4],[143.1,54.4]]],[[[-179.96,65.13],[-179.94,68.93],[-170.01,66.09],[-179.96,65.13]]],[[[50.59,69.33],[50.59,69.33]]],[[[-179.92,70.99],[-179.92,70.99]]],[[[143.02,74.29],[143.02,74.29]]],[[[146.73,75.49],[146.73,75.49]]],[[[139.11,76.1],[139.11,76.1]]],[[[67.15,76.1],[67.15,76.1]]],[[[102.93,79.28],[102.93,79.28]]],[[[97.77,80.13],[97.77,80.13]]],[[[48.83,80.81],[48.83,80.81]]],[[[96.49,81.64],[96.49,81.64]]],[[[-68.63,-52.64],[-68.63,-52.64]]],[[[180,-90],[-180,-90],[-180,-84.35],[-157.56,-83.39],[-149.08,-79.48],[-157.93,-77.06],[-133.87,-74.93],[-98.4,-75.24],[-102.72,-73],[-77.24,-73.81],[-67.51,-72.83],[-64.78,-67.02],[-59.9,-72.99],[-63.16,-75.41],[-80.3,-78.85],[-61.85,-83.37],[-29.76,-80.18],[-33.72,-77.31],[-18.87,-75.25],[-9.45,-71.1],[26.45,-71.03],[50.32,-66.39],[69.56,-67.74],[67,-72.9],[84.96,-67.08],[113.2,-65.77],[130.73,-66.15],[167.7,-70.79],[162.19,-75.39],[166.09,-78.57],[160.13,-81.2],[180,-84.35],[180,-90]]],[[[-60.07,-79.69],[-60.07,-79.69]]],[[[-160.29,-79.27],[-160.29,-79.27]]],[[[-66.83,-78.44],[-66.83,-78.44]]],[[[-45.35,-78.69],[-45.35,-78.69]]],[[[-121.2,-73.5],[-121.2,-73.5]]],[[[-126.08,-73.3],[-126.08,-73.3]]],[[[-73.93,-72.46],[-73.93,-72.46]]],[[[-96.74,-71.63],[-96.74,-71.63]]],[[[-70.02,-69.19],[-70.02,-69.19]]],[[[144.4,-40.46],[144.4,-40.46]]],[[[137.56,-35.64],[137.56,-35.64]]],[[[130.24,-11.09],[130.24,-11.09]]],[[[142.55,-10.71],[146.28,-18.87],[153.21,-25.93],[150.01,-37.7],[140.36,-37.88],[131.18,-31.48],[115.12,-34.36],[113.65,-22.58],[130.99,-12.24],[140,-17.71],[142.55,-10.71]]],[[[109.65,2.08],[116.78,7.03],[115.97,-3.61],[109.65,2.08]]],[[[-66.84,-55.18],[-66.84,-55.18]]],[[[-73.17,-53.52],[-73.17,-53.52]]],[[[-74.68,-50],[-74.68,-50]]],[[[-73.89,-42.06],[-73.89,-42.06]]],[[[-75.1,19.9],[-75.1,19.9]]],[[[33.02,34.57],[33.02,34.57]]],[[[-71.76,19.71],[-71.76,19.71]]],[[[179.99,-16.17],[179.99,-16.17]]],[[[178.27,-17.35],[178.27,-17.35]]],[[[-59.2,-51.32],[-59.2,-51.32]]],[[[-58.78,-51.32],[-58.78,-51.32]]],[[[-7.25,55.07],[-7.25,55.07]]],[[[-3.35,58.65],[1.36,51.13],[-5.44,50.19],[-3.35,58.65]]],[[[23.9,35.53],[23.9,35.53]]],[[[23.39,39.02],[23.39,39.02]]],[[[-52.73,69.93],[-52.73,69.93]]],[[[-25.45,70.62],[-25.45,70.62]]],[[[-32.21,83.61],[-13.54,81.21],[-19.08,80.28],[-22.37,70.12],[-41.06,65.1],[-43.14,60.08],[-48.64,61.24],[-59.82,75.91],[-72.59,78.52],[-61,81.49],[-32.21,83.61]]],[[[120.01,-9.36],[120.01,-9.36]]],[[[124.47,-8.97],[124.47,-8.97]]],[[[116.82,-8.31],[116.82,-8.31]]],[[[117.97,-8.1],[117.97,-8.1]]],[[[124.04,-7.96],[124.04,-7.96]]],[[[115.49,-8.15],[115.49,-8.15]]],[[[138.52,-8.15],[138.52,-8.15]]],[[[115,-6.89],[115,-6.89]]],[[[106.16,-6.01],[106.16,-6.01]]],[[[134.58,-5.42],[134.58,-5.42]]],[[[127.07,-3.18],[127.07,-3.18]]],[[[129.1,-2.86],[129.1,-2.86]]],[[[107.85,-2.55],[107.85,-2.55]]],[[[124.53,-1.64],[124.53,-1.64]]],[[[135.48,-1.59],[135.48,-1.59]]],[[[105.88,-1.49],[105.88,-1.49]]],[[[98.86,-.79],[98.86,-.79]]],[[[140.98,-9.11],[133.89,-3.81],[137.79,-1.48],[147.45,-5.96],[140.98,-9.11]]],[[[97.41,1.72],[97.41,1.72]]],[[[125.06,1.67],[125.06,1.67]]],[[[128.17,1.92],[128.17,1.92]]],[[[95.5,5.61],[103.76,.24],[104.54,-5.84],[95.5,5.61]]],[[[92.79,13.31],[92.79,13.31]]],[[[-16.04,66.54],[-16.04,66.54]]],[[[-76.7,18.45],[-76.7,18.45]]],[[[130.98,33.79],[130.98,33.79]]],[[[134.16,34.36],[134.16,34.36]]],[[[141.28,41.35],[141.28,41.35]]],[[[142.02,45.46],[142.02,45.46]]],[[[80.41,9.71],[80.41,9.71]]],[[[49.35,-12.09],[47.13,-24.93],[43.94,-17.46],[49.35,-12.09]]],[[[22.85,78.36],[22.85,78.36]]],[[[16.82,79.88],[16.82,79.88]]],[[[23.14,80.38],[23.14,80.38]]],[[[172.9,-40.51],[172.9,-40.51]]],[[[173.08,-34.41],[173.08,-34.41]]],[[[125.64,9.61],[125.64,9.61]]],[[[123.27,10.98],[123.27,10.98]]],[[[124,11.08],[124,11.08]]],[[[119.82,11.47],[119.82,11.47]]],[[[124.44,11.45],[124.44,11.45]]],[[[122.3,11.76],[122.3,11.76]]],[[[124.92,12.56],[124.92,12.56]]],[[[121.17,13.38],[121.17,13.38]]],[[[120.91,18.57],[120.91,18.57]]],[[[154.81,-5.48],[154.81,-5.48]]],[[[152.23,-4.19],[152.23,-4.19]]],[[[151.04,-2.71],[151.04,-2.71]]],[[[-67.11,18.55],[-67.11,18.55]]],[[[161.69,-10.04],[161.69,-10.04]]],[[[159.62,-9.38],[159.62,-9.38]]],[[[160.8,-8.36],[160.8,-8.36]]],[[[158.6,-7.59],[158.6,-7.59]]],[[[-60.22,10.8],[-60.22,10.8]]],[[[121.64,25.22],[121.64,25.22]]],[[[-155.73,20.19],[-155.73,20.19]]],[[[-163.76,55.06],[-163.76,55.06]]],[[[-133.53,56.59],[-133.53,56.59]]],[[[-135.67,57.36],[-135.67,57.36]]],[[[-153.01,57.93],[-153.01,57.93]]],[[[-135.71,58.23],[-135.71,58.23]]],[[[-135.43,58.33],[-135.43,58.33]]],[[[-166.09,60.46],[-166.09,60.46]]],[[[-171.67,63.8],[-171.67,63.8]]],[[[166.95,-15.02],[166.95,-15.02]]],[[[-83.84,46.15],[-83.84,46.15]]],[[[-64.34,47.05],[-64.34,47.05]]],[[[-60.5,47],[-60.5,47]]],[[[-64.13,49.95],[-64.13,49.95]]],[[[-55.7,51.32],[-55.7,51.32]]],[[[-81.43,53.37],[-81.43,53.37]]],[[[-132.69,53.93],[-132.69,53.93]]],[[[-81.74,63.06],[-81.74,63.06]]],[[[-85.49,65.8],[-85.49,65.8]]],[[[-75.44,68.71],[-75.44,68.71]]],[[[-99.03,70.19],[-99.03,70.19]]],[[[-114.2,73.31],[-104.87,73.13],[-101.81,69.01],[-113.35,68.59],[-114.2,73.31]]],[[[-81.06,73.85],[-81.06,73.85]]],[[[-86.56,73.86],[-68.36,70.58],[-61.89,66.88],[-64.54,61.74],[-73.2,64.22],[-72.99,68.24],[-88.69,70.47],[-86.56,73.86]]],[[[-99.83,73.9],[-99.83,73.9]]],[[[-92.75,74.09],[-92.75,74.09]]],[[[-121.58,74.56],[-121.58,74.56]]],[[[-94.39,75.6],[-94.39,75.6]]],[[[-98.41,76.67],[-98.41,76.67]]],[[[-108.67,76.82],[-108.67,76.82]]],[[[-95.24,77.01],[-79.65,75.47],[-89.95,74.53],[-95.24,77.01]]],[[[-116.13,77.47],[-116.13,77.47]]],[[[-109.6,78.07],[-109.6,78.07]]],[[[-96.23,78.64],[-96.23,78.64]]],[[[-111.36,79.26],[-111.36,79.26]]],[[[-103.66,79.34],[-103.66,79.34]]],[[[-94.75,82.12],[-94.75,82.12]]],[[[-69.69,83.12],[-61.31,82.2],[-77.77,76.66],[-86.91,77.27],[-90.81,81.72],[-69.69,83.12]]],[[[-127.81,50.44],[-127.81,50.44]]],[[[163.52,-20.03],[163.52,-20.03]]],[[[110.69,20.15],[110.69,20.15]]]]}}]},vk=Object.assign({},{geoMercator:Ur,create:So,geoPath:xr});function Mk({params:t={},layers:e={}}={}){let n="user"==t.projection,i=t.projection,r=!t.reverse;const s=e.map((t=>t.type));i=s.includes("tiles")?vk.geoMercator():Eg(i);let o=t.width?t.width:1e3,a=t.extent?t.extent:null;a=Array.isArray(a)&&Array.isArray(a[0])&&Array.isArray(a[1])?$o(a):a;let l=t.margin?t.margin:1,c=t.background,h=1==t.clip,u=function(t,e,n,i,r,s){let o;const a=t.map((t=>t.geojson)).filter((t=>void 0!==t)).length,l=t.map((t=>t.type));if(e||!(l.includes("outline")||l.includes("tissot")||l.includes("geolines"))||r||(o={type:"Sphere"}),!e&&a>0&&!l.includes("outline")&&!l.includes("tissot")&&!l.includes("geolines")||r){let e=t.map((t=>t.geojson)).filter((t=>void 0!==t)),n=[];e.forEach((t=>n.push(Bo(t).features))),o={type:"FeatureCollection",features:n.flat()}}!e&&0==a&&l.includes("tiles")&&(o={type:"Sphere"}),e&&(o=e);const[[c,h],[u,f]]=Uo.geoPath(i.fitWidth(s-2*n,o)).bounds(o);let d=i.translate();return i.translate([d[0]+n,d[1]+n]),Math.ceil(f-h)+2*n}(e,a,l,i,n,o),f=0,d=e.find((t=>"header"==t.type));d&&(d.text&&(f=25*d.text.split("\n").length+10),d.fontSize&&(f=d.fontSize*d.text.split("\n").length+10));let g=0,p=e.find((t=>"footer"==t.type));p&&(p.text&&(g=10*p.text.split("\n").length+10),p.fontSize&&(g=p.fontSize*p.text.split("\n").length+10));const _=vk.create("svg").attr("width",o).attr("height",u+f+g).attr("viewBox",[0,-f,o,u+f+g]).attr("style","max-width: 100%; height: auto; height: intrinsic; background-color: white;");_.append("defs").append("style").attr("type","text/css").text("@import url('https://fonts.googleapis.com/css2?family=Pacifico&family=Roboto&family=Rubik&family=Ubuntu&display=swap');");let y=null;h&&(y=Date.now().toString(36)+Math.random().toString(36).substring(2),_.append("clipPath").attr("id",`clip_${y}`).append("path").datum({type:"Sphere"}).attr("d",vk.geoPath(i))),c&&_.append("rect").attr("x",0).attr("y",0).attr("width",o).attr("height",u).attr("fill",c);let m=e.find((t=>"outline"==t.type));m&&Tg(_,i,n,{display:m.display,fill:m.fill,fillOpacity:m.fillOpacity,stroke:"none",strokeWidth:"none"}),(r?[...e].reverse():[...e]).forEach((t=>{"graticule"==t.type&&Ig(_,i,n,{display:t.display,stroke:t.stroke,strokeWidth:t.strokeWidth,strokeOpacity:t.strokeOpacity,strokeDasharray:t.strokeDasharray,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin,step:t.step},y),"geolines"==t.type&&Og(_,i,n,{display:t.display,stroke:t.stroke,strokeWidth:t.strokeWidth,strokeOpacity:t.strokeOpacity,strokeDasharray:t.strokeDasharray,strokeLinecap:t.strokeLinecap},y),"minimap"!=t.type&&"location"!=t.type||xk({x:t.x,y:t.y,width:t.width,projection:t.projection,geojson:t.geojson,extent:t.extent,threshold:t.threshold,background:t.background,geometries:t.geometries,raise:t.raise,frame:t.frame,dot:t.dot,mainmap:{selection:_,projection:i,width:o,height:u}}),"tiles"==t.type&&function(t,e,n,i,r={}){if(0!=r.display){let s=null!=r.opacity?r.opacity:1,o=null!=r.tileSize?r.tileSize:512;null!=r.zoomDelta&&r.zoomDelta;let a=null!=r.clip?r.clip:void 0,l=r.style?r.style:"opentopomap",c=null!=r.zoomDelta?r.zoomDelta:1,h=null!=r.increasetilesize?r.increasetilesize:1,u=r.source?r.source:"bottomright";const f=[{name:"openstreetmap",provider:"OpenStreetMap contributors",url:(t,e,n)=>`https://tile.openstreetmap.org/${n}/${t}/${e}.png`},{name:"opentopomap",provider:"OpenStreetMap contributors",url:(t,e,n)=>`https://tile.opentopomap.org/${n}/${t}/${e}.png`},{name:"worldterrain",provider:"USGS, Esri, TANA, DeLorme, and NPS",url:(t,e,n)=>`https://server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/${n}/${e}/${t}.png`},{name:"worldimagery",provider:"Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",url:(t,e,n)=>`https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/${n}/${e}/${t}.png`},{name:"worldStreet",provider:"Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012",url:(t,e,n)=>`https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/${n}/${e}/${t}.png`},{name:"worldphysical",provider:"Esri, US National Park Service",url:(t,e,n)=>`https://server.arcgisonline.com/ArcGIS/rest/services/World_Physical_Map/MapServer/tile/${n}/${e}/${t}`},{name:"shadedrelief",provider:"ESRI",url:(t,e,n)=>`https://server.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/${n}/${e}/${t}.png`},{name:"oceanbasemap",provider:"GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri",url:(t,e,n)=>`https://server.arcgisonline.com/ArcGIS/rest/services/Ocean_Basemap/MapServer/tile/${n}/${e}/${t}.png`}];Object.hasOwn(l,"provider")&&Object.hasOwn(l,"url")&&(l.name="user",f.push(l),l=l.name);let d=f.find((t=>t.name==l)).url,g=gk.tile().size([e,n]).scale(2*i.scale()*Math.PI).translate(i([0,0])).tileSize(o).zoomDelta(c);const p=Date.now().toString(36)+Math.random().toString(36).substring(2);a&&t.append("clipPath").attr("id",`tileclip_${p}`).append("path").datum(a).attr("d",gk.geoPath(i)),t.append("g").attr("clip-path",`url(#tileclip_${p})`).selectAll("image").data(g()).join("image").attr("xlink:href",(t=>d(t[0],t[1],t[2]))).attr("x",(t=>Math.round((t[0]+g().translate[0])*g().scale))).attr("y",(t=>Math.round((t[1]+g().translate[1])*g().scale))).attr("width",g().scale+h+"px").attr("height",g().scale+h+"px").attr("opacity",s),JO(t,e,n,r={text:`Source: ${f.find((t=>t.name==l)).provider}`,position:u,fontSize:12,fill:"white",frame_fill:"black",frame_opacity:.3,fontFamily:"Roboto",margin:6})}}(_,o,u,i,{display:t.display,opacity:t.opacity,tileSize:t.tileSize,zoomDelta:t.zoomDelta,style:t.style,clip:t.clip,increasetilesize:t.increasetilesize,source:t.source}),"layer"!=t.type&&"simple"!=t.type&&null!=t.type||xE(_,i,{display:t.display,geojson:t.geojson,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin,fillOpacity:t.fillOpacity,strokeOpacity:t.strokeOpacity,strokeDasharray:t.strokeDasharray,symbol:t.symbol,symbol_size:t.symbol_size,symbol_iteration:t.symbol_iteration,symbol_shift:t.symbol_shift,tooltip:t.tooltip,leg_x:t.leg_x,leg_y:t.leg_y,leg_w:t.leg_w,leg_h:t.leg_h,leg_title:t.leg_title,leg_text:t.leg_text,leg_type:t.leg_type,leg_fontSize:t.leg_fontSize,leg_fontSize2:t.leg_fontSize2,leg_stroke:t.leg_stroke,leg_fillOpacity:t.leg_fillOpacity,leg_fill:t.leg_fill,leg_strokeWidth:t.leg_strokeWidth,leg_txtcol:t.leg_txtcol},y,o,u),"dotdensity"==t.type&&function(t,e,n={},i,r,s){if(0!=n.display){let o=null!=n.nbdots?n.nbdots:hk.sum(n.geojson.features.map((t=>+t.properties[n.values])))/1e3;n.dotvalue=null!=n.dotvalue?n.dotvalue:o,n.symbol_size=null!=n.symbol_size?n.symbol_size:8,n.fill=n.fill?n.fill:"#cc190c",n.leg_text=n.leg_text?n.leg_text:`= ${n.dotvalue}`,n.leg_type=n.symbol?n.symbol:"circle";let a=ik(n.geojson);a.features.forEach(((t,e)=>{t.properties.__value=+t.properties[n.values]*t.__share,t.__test=+t.properties[n.values]*t.__share}));const l=ck(a,"__value",n.dotvalue);n.geojson=JSON.parse(JSON.stringify(l)),xE(t,e,n,i,r,s)}}(_,i,{display:t.display,geojson:t.geojson,values:t.values,dotvalue:t.dotvalue,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin,fillOpacity:t.fillOpacity,strokeOpacity:t.strokeOpacity,strokeDasharray:t.strokeDasharray,symbol:t.symbol,symbol_size:t.symbol_size,symbol_iteration:t.symbol_iteration,symbol_shift:t.symbol_shift,tooltip:t.tooltip,leg_type:t.leg_type,leg_x:t.leg_x,leg_y:t.leg_y,leg_w:t.leg_w,leg_h:t.leg_h,leg_title:t.leg_title,leg_text:t.leg_text,leg_fontSize:t.leg_fontSize,leg_fontSize2:t.leg_fontSize2,leg_stroke:t.leg_stroke,leg_fillOpacity:t.leg_fillOpacity,leg_fill:t.leg_fill,leg_strokeWidth:t.leg_strokeWidth,leg_txtcol:t.leg_txtcol},y,o,u),"spikes"==t.type&&tk(_,i,n,{display:t.display,geojson:t.geojson,values:t.values,k:t.k,w:t.w,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,fillOpacity:t.fillOpacity,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin,strokeDasharray:t.strokeDasharray,strokeOpacity:t.strokeOpacity,tooltip:t.tooltip,leg_x:t.leg_x,leg_y:t.leg_y,leg_w:t.leg_w,leg_h:t.leg_h,leg_title:t.leg_title,leg_fontSize:t.leg_fontSize,leg_fontSize2:t.leg_fontSize2,leg_stroke:t.leg_stroke,leg_fillOpacity:t.leg_fillOpacity,leg_strokeWidth:t.leg_strokeWidth,leg_txtcol:t.leg_txtcol,leg_round:t.leg_round},0,o,u),"mushroom"==t.type&&xO(_,i,n,{display:t.display,geojson:t.geojson,top_values:t.top_values,bottom_values:t.bottom_values,top_fill:t.top_fill,bottom_fill:t.bottom_fill,k:t.k,stroke:t.stroke,strokeWidth:t.strokeWidth,fillOpacity:t.fillOpacity,strokeOpacity:t.strokeOpacity,top_tooltip:t.top_tooltip,bottom_tooltip:t.bottom_tooltip,leg_x:t.leg_x,leg_y:t.leg_y,leg_fontSize:t.leg_fontSize,leg_fontSize2:t.leg_fontSize2,leg_round:t.leg_round,leg_txtcol:t.leg_txtcol,leg_title:t.leg_title,leg_top_txt:t.leg_top_txt,leg_bottom_txt:t.leg_bottom_txt,leg_top_fill:t.leg_top_fill,leg_bottom_fill:t.leg_bottom_fill,leg_stroke:t.leg_stroke,leg_strokeWidth:t.leg_strokeWidth},o,u),"label"==t.type&&QO(_,i,n,{display:t.display,geojson:t.geojson,values:t.values,fill:t.fill,fontSize:t.fontSize,fontFamily:t.fontFamily,textDecoration:t.textDecoration,fontWeight:t.fontWeight,fontStyle:t.fontStyle,opacity:t.opacity,halo:t.halo,halo_style:t.halo_style}),"text"==t.type&&JO(_,o,u,{display:t.display,position:t.position,text:t.text,fill:t.fill,stroke:t.stroke,fontSize:t.fontSize,fontFamily:t.fontFamily,textDecoration:t.textDecoration,fontWeight:t.fontWeight,fontStyle:t.fontStyle,margin:t.margin,anchor:t.anchor,baseline:t.baseline,frame_fill:t.frame_fill,frame_stroke:t.frame_stroke,frame_opacity:t.frame_opacity,frame_strokeWidth:t.frame_strokeWidth}),"logo"==t.type&&pk(_,o,u,{display:t.display,url:t.url,size:t.size,position:t.position}),"missing"==t.type&&vO(_,i,{display:t.display,geojson:t.geojson,values:t.values,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,fillOpacity:t.fillOpacity,leg_x:t.leg_x,leg_y:t.leg_y,leg_w:t.leg_w,leg_h:t.leg_h,leg_text:t.leg_text,leg_fontSize:t.leg_fontSize,leg_stroke:t.leg_stroke,leg_fillOpacity:t.fillOpacity,leg_fill:t.fill,leg_strokeWidth:t.leg_strokeWidth,leg_txtcol:t.leg_txtcol},y),"shadow"==t.type&&function(t,e,n,i,r={}){if(0!=r.display){let s=r.fill?r.fill:"#35383d",o=null!=r.dx?r.dx:3,a=null!=r.dy?r.dy:3,l=null!=r.stdDeviation?r.stdDeviation:1.5,c=null!=r.opacity?r.opacity:.7,h="none",u=uO(n);t.append("defs").append("filter").attr("id","blur").append("feGaussianBlur").attr("stdDeviation",l);const f=MO.geoPath(e);t.append("g").attr("clip-path",null==i?"none":`url(#clip_${i})`).append("path").datum(u).attr("d",f).attr("fill",s).attr("opacity",c).attr("stroke",h).attr("filter","url(#blur)").attr("transform",`translate(${o} ${a})`)}}(_,i,t.geojson,y,{display:t.display,fill:t.fill,dx:t.dx,dy:t.dy,opacity:t.opacity,stdDeviation:t.stdDeviation}),"waterlines"==t.type&&EO(_,i,t.geojson,y,{display:t.display,stroke:t.stroke,dist:t.dist,unit:t.unit,nb:t.nb,precision:t.precision,strokeOpacity:t.strokeOpacity,strokeWidth:t.strokeWidth,stroke:t.stroke,strokeDasharray:t.strokeDasharray,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),"inner"==t.type&&IO(_,i,{display:t.display,geojson:t.geojson,fill:t.fill,fillOpacity:t.fillOpacity,blur:t.blur,thickness:t.thickness}),"rhumbs"==t.type&&_k(_,o,u,y,{display:t.display,nb:t.nb,position:t.position,stroke:t.stroke,strokeWidth:t.strokeWidth,strokeOpacity:t.strokeOpacity,strokeDasharray:t.strokeDasharray}),"tissot"==t.type&&yk(_,i,n,{display:t.display,step:t.step,fill:t.fill,fillOpacity:t.fillOpacity,stroke:t.stroke,strokeWidth:t.strokeWidth,strokeOpacity:t.strokeOpacity},y),"dotcartogram"==t.type&&nk(_,i,n,{display:t.display,geojson:t.geojson,values:t.values,radius:t.radius,nbmax:t.nbmax,onedot:t.onedot,span:t.span,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,fillOpacity:t.fillOpacity,strokeDasharray:t.strokeDasharray,strokeOpacity:t.strokeOpacity,iteration:t.iteration,tooltip:t.tooltip,leg_x:t.leg_x,leg_y:t.leg_y,leg_title:t.leg_title,leg_fontSize:t.leg_fontSize,leg_fontSize2:t.leg_fontSize2,leg_txtcol:t.leg_txtcol,leg_stroke:t.leg_stroke,leg_strokeWidth:t.leg_strokeWidth,leg_fill:t.leg_fill,leg_txt:t.leg_txt},0,o,u),"bubble"==t.type&&EE(_,i,n,{display:t.display,geojson:t.geojson,values:t.values,planar:t.planar,k:t.k,fixmax:t.fixmax,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,fillOpacity:t.fillOpacity,strokeDasharray:t.strokeDasharray,strokeOpacity:t.strokeOpacity,dorling:t.dorling,iteration:t.iteration,tooltip:t.tooltip,leg_x:t.leg_x,leg_y:t.leg_y,leg_stroke:t.leg_stroke,leg_fill:t.leg_fill,leg_strokeWidth:t.leg_strokeWidth,leg_txtcol:t.leg_txtcol,leg_title:t.leg_title,leg_fontSize:t.leg_fontSize,leg_fontSize2:t.leg_fontSize2,leg_round:t.leg_round},0,o,u),"square"==t.type&&SE(_,i,n,{display:t.display,geojson:t.geojson,values:t.values,planar:t.planar,k:t.k,fixmax:t.fixmax,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,fillOpacity:t.fillOpacity,strokeDasharray:t.strokeDasharray,strokeOpacity:t.strokeOpacity,dorling:t.dorling,demers:t.demers,iteration:t.iteration,tooltip:t.tooltip,leg_x:t.leg_x,leg_y:t.leg_y,leg_stroke:t.leg_stroke,leg_fill:t.leg_fill,leg_strokeWidth:t.leg_strokeWidth,leg_txtcol:t.leg_txtcol,leg_title:t.leg_title,leg_fontSize:t.leg_fontSize,leg_fontSize2:t.leg_fontSize2,leg_round:t.leg_round},0,o,u),"regularbubble"==t.type&&_O(_,i,{display:t.display,geojson:t.geojson,values:t.values,step:t.step,planar:t.planar,k:t.k,fixmax:t.fixmax,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,fillOpacity:t.fillOpacity,strokeDasharray:t.strokeDasharray,strokeOpacity:t.strokeOpacity,dorling:t.dorling,iteration:t.iteration,tooltip:t.tooltip,leg_x:t.leg_x,leg_y:t.leg_y,leg_stroke:t.leg_stroke,leg_fill:t.leg_fill,leg_strokeWidth:t.leg_strokeWidth,leg_txtcol:t.leg_txtcol,leg_title:t.leg_title,leg_fontSize:t.leg_fontSize,leg_fontSize2:t.leg_fontSize2,leg_round:t.leg_round},0,o,u),"regularsquare"==t.type&&yO(_,i,{display:t.display,geojson:t.geojson,values:t.values,step:t.step,planar:t.planar,k:t.k,fixmax:t.fixmax,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,fillOpacity:t.fillOpacity,strokeDasharray:t.strokeDasharray,strokeOpacity:t.strokeOpacity,dorling:t.dorling,demers:t.demers,iteration:t.iteration,tooltip:t.tooltip,leg_x:t.leg_x,leg_y:t.leg_y,leg_stroke:t.leg_stroke,leg_fill:t.leg_fill,leg_strokeWidth:t.leg_strokeWidth,leg_txtcol:t.leg_txtcol,leg_title:t.leg_title,leg_fontSize:t.leg_fontSize,leg_fontSize2:t.leg_fontSize2,leg_round:t.leg_round},0,o,u),"header"==t.type&&function(t,e,n={}){if(0!=n.display){let i;n.text&&(i=25),n.fontSize&&(i=n.fontSize);let r=n.text?n.text:"",s=n.fill?n.fill:"#9e9696",o=n.background?n.background:"white",a=null!=n.backgroundOpacity?n.backgroundOpacity:1,l=n.anchor?n.anchor:"middle";const c=i*r.split("\n").length;let h;"start"==l&&(h=5),"middle"==l&&(h=e/2),"end"==l&&(h=e-5);let u=t.append("g");u.append("rect").attr("x",0).attr("y",0-c-10).attr("width",e).attr("height",c+10).attr("fill",o).attr("fill-opacity",a),u.selectAll("text").data(n.text.split("\n")).join("text").attr("x",h).attr("y",-c-5).attr("font-size",`${i}px`).attr("dy",((t,e)=>e*i+i/2)).attr("text-anchor",l).attr("dominant-baseline","central").attr("fill",s).attr("font-family","sans-serif").attr("font-weight","bold").attr("fill-opacity",1).text((t=>t))}}(_,o,{display:t.display,fontSize:t.fontSize,text:t.text,fill:t.fill,background:t.background,backgroundOpacity:t.backgroundOpacity,anchor:t.anchor}),"footer"==t.type&&function(t,e,n,i={}){if(0!=i.display){let r;i.text&&(r=10),i.fontSize&&(r=i.fontSize);let s=i.text?i.text:"",o=i.fill?i.fill:"#9e9696",a=i.background?i.background:"white",l=i.backgroundOpacity?i.backgroundOpacity:1,c=i.anchor?i.anchor:"end";const h=r*s.split("\n").length;let u;"start"==c&&(u=5),"middle"==c&&(u=e/2),"end"==c&&(u=e-5);let f=t.append("g");f.append("rect").attr("x",0).attr("y",n).attr("width",e).attr("height",h+10).attr("fill",a).attr("fill-opacity",l),f.selectAll("text").data(i.text.split("\n")).join("text").attr("x",u).attr("y",n+5).attr("font-size",`${r}px`).attr("dy",((t,e)=>e*r)).attr("text-anchor",c).attr("dominant-baseline","hanging").attr("fill",o).attr("font-family","sans-serif").attr("fill-opacity",1).text((t=>t))}}(_,o,u,{display:t.display,fontSize:t.fontSize,text:t.text,fill:t.fill,background:t.background,backgroundOpacity:t.backgroundOpacity,anchor:t.anchor}),"hatch"!=t.type&&"hatching"!=t.type||function(t,e={},n,i){if(0!=e.display){let r=t.append("defs");const s=e.stroke?e.stroke:"#786d6c",o=null!=e.strokeWidth?e.strokeWidth:2,a=null!=e.strokeOpacity?e.strokeOpacity:.1,l=null!=e.angle?e.angle:45,c=null!=e.spacing?e.spacing:8,h=e.strokeDasharray?e.strokeDasharray:"none",u=Date.now().toString(36)+Math.random().toString(36).substring(2);r.append("pattern").attr("id",`hatch${u}`).attr("patternUnits","userSpaceOnUse").attr("width",c).attr("height",c).attr("patternTransform",`rotate(${l})`).append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y1",c).attr("stroke",s).attr("stroke-linejoin","butt").attr("stroke-width",o).attr("stroke-dasharray",h).attr("stroke-opacity",a),t.append("rect").attr("x",0).attr("y",0).attr("width",n).attr("height",i).attr("fill","url('#hatch"+u+"')")}}(_,{display:t.display,stroke:t.stroke,strokeWidth:t.strokeWidth,strokeOpacity:t.strokeOpacity,angle:t.angle,spacing:t.spacing,strokeDasharray:t.strokeDasharray},o,u)}));let x=e.find((t=>"scalebar"==t.type));return x&&function(t,e,n,i,r,s={}){if(0!=s.display&&!n){let n=s.x?s.x:20,o=s.y?s.y:r-30,a=s.units?s.units:"kilometers";n/=i,o/=r;const l=ZO.geoScaleBar().projection(e).size([i,r]).left(n).top(o).label("miles"==a?"Miles":"Km").units("miles"==a?ZO.geoScaleMiles:ZO.geoScaleKilometers).orient(ZO.geoScaleBottom).tickPadding(5).tickSize(0);t.append("g").attr("transform",`translate(${n}, ${o})`).append("g").call(l)}}(_,i,n,o,u,{display:x.display,x:x.x,y:x.y,units:x.units}),m&&Tg(_,i,n,{display:m.display,fill:"none",stroke:m.stroke,strokeWidth:m.strokeWidth}),_.append("g").attr("id","info").attr("class","info"),_.selectAll(".bertinlegend").raise(),Object.assign(_.node(),{})}const wk=Object.assign({},{create:So,scaleLinear:Cx});const Ek=Object.assign({},{index:F});var Nk=Object.prototype.hasOwnProperty;function Ik(t,e,n,i,r,s){3===arguments.length&&(i=s=Array,r=null);for(var o=new i(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=new s(t),l=t-1,c=0;c<t;++c)o[c]=r;function h(i,s){for(var c=e(i)&l,h=o[c],u=0;h!=r;){if(n(h,i))return a[c]=s;if(++u>=t)throw new Error("full hashmap");h=o[c=c+1&l]}return o[c]=i,a[c]=s,s}function u(i,s){for(var c=e(i)&l,h=o[c],u=0;h!=r;){if(n(h,i))return a[c];if(++u>=t)throw new Error("full hashmap");h=o[c=c+1&l]}return o[c]=i,a[c]=s,s}function f(i,s){for(var c=e(i)&l,h=o[c],u=0;h!=r;){if(n(h,i))return a[c];if(++u>=t)break;h=o[c=c+1&l]}return s}function d(){for(var t=[],e=0,n=o.length;e<n;++e){var i=o[e];i!=r&&t.push(i)}return t}return{set:h,maybeSet:u,get:f,keys:d}}function Sk(t,e){return t[0]===e[0]&&t[1]===e[1]}var Ck=new ArrayBuffer(16),Ok=new Float64Array(Ck),kk=new Uint32Array(Ck);function Tk(t){Ok[0]=t[0],Ok[1]=t[1];var e=kk[0]^kk[1];return 2147483647&(e=e<<5^e>>7^kk[2]^kk[3])}function Ak(t){var e,n,i,r,s=t.coordinates,o=t.lines,a=t.rings,l=function(){for(var t=Ik(1.4*s.length,v,M,Int32Array,-1,Int32Array),e=new Int32Array(s.length),n=0,i=s.length;n<i;++n)e[n]=t.maybeSet(n,n);return e}(),c=new Int32Array(s.length),h=new Int32Array(s.length),u=new Int32Array(s.length),f=new Int8Array(s.length),d=0;for(e=0,n=s.length;e<n;++e)c[e]=h[e]=u[e]=-1;for(e=0,n=o.length;e<n;++e){var g=o[e],p=g[0],_=g[1];for(i=l[p],r=l[++p],++d,f[i]=1;++p<=_;)b(e,i,i=r,r=l[p]);++d,f[r]=1}for(e=0,n=s.length;e<n;++e)c[e]=-1;for(e=0,n=a.length;e<n;++e){var y=a[e],m=y[0]+1,x=y[1];for(b(e,l[x-1],i=l[m-1],r=l[m]);++m<=x;)b(e,i,i=r,r=l[m])}function b(t,e,n,i){if(c[n]!==t){c[n]=t;var r=h[n];if(r>=0){var s=u[n];r===e&&s===i||r===i&&s===e||(++d,f[n]=1)}else h[n]=e,u[n]=i}}function v(t){return Tk(s[t])}function M(t,e){return Sk(s[t],s[e])}c=h=u=null;var w,E=function(t,e,n,i,r){3===arguments.length&&(i=Array,r=null);for(var s=new i(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),o=t-1,a=0;a<t;++a)s[a]=r;function l(i){for(var a=e(i)&o,l=s[a],c=0;l!=r;){if(n(l,i))return!0;if(++c>=t)throw new Error("full hashset");l=s[a=a+1&o]}return s[a]=i,!0}function c(i){for(var a=e(i)&o,l=s[a],c=0;l!=r;){if(n(l,i))return!0;if(++c>=t)break;l=s[a=a+1&o]}return!1}function h(){for(var t=[],e=0,n=s.length;e<n;++e){var i=s[e];i!=r&&t.push(i)}return t}return{add:l,has:c,values:h}}(1.4*d,Tk,Sk);for(e=0,n=s.length;e<n;++e)f[w=l[e]]&&E.add(s[w]);return E}function Rk(t,e,n,i){Lk(t,e,n),Lk(t,e,e+i),Lk(t,e+i,n)}function Lk(t,e,n){for(var i,r=e+(n---e>>1);e<r;++e,--n)i=t[e],t[e]=t[n],t[n]=i}function Pk(t){var e,n,i={};for(e in t)i[e]=null==(n=t[e])?{type:null}:("FeatureCollection"===n.type?Dk:"Feature"===n.type?zk:Fk)(n);return i}function Dk(t){var e={type:"GeometryCollection",geometries:t.features.map(zk)};return null!=t.bbox&&(e.bbox=t.bbox),e}function zk(t){var e,n=Fk(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function Fk(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Fk)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Gk(t){var e,n=t[0],i=t[1];return i<n&&(e=n,n=i,i=e),n+31*i}function qk(t,e){var n,i=t[0],r=t[1],s=e[0],o=e[1];return r<i&&(n=i,i=r,r=n),o<s&&(n=s,s=o,o=n),i===s&&r===o}const jk=Object.assign({},{topology:function(t,e){var n=function(t){var e=1/0,n=1/0,i=-1/0,r=-1/0;function s(t){null!=t&&Nk.call(o,t.type)&&o[t.type](t)}var o={GeometryCollection:function(t){t.geometries.forEach(s)},Point:function(t){a(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(a)},LineString:function(t){l(t.arcs)},MultiLineString:function(t){t.arcs.forEach(l)},Polygon:function(t){t.arcs.forEach(l)},MultiPolygon:function(t){t.arcs.forEach(c)}};function a(t){var s=t[0],o=t[1];s<e&&(e=s),s>i&&(i=s),o<n&&(n=o),o>r&&(r=o)}function l(t){t.forEach(a)}function c(t){t.forEach(l)}for(var h in t)s(t[h]);return i>=e&&r>=n?[e,n,i,r]:void 0}(t=Pk(t)),i=e>0&&n&&function(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=s-i?(n-1)/(s-i):1,l=o-r?(n-1)/(o-r):1;function c(t){return[Math.round((t[0]-i)*a),Math.round((t[1]-r)*l)]}function h(t,e){for(var n,s,o,c,h,u=-1,f=0,d=t.length,g=new Array(d);++u<d;)n=t[u],c=Math.round((n[0]-i)*a),h=Math.round((n[1]-r)*l),c===s&&h===o||(g[f++]=[s=c,o=h]);for(g.length=f;f<e;)f=g.push([g[0][0],g[0][1]]);return g}function u(t){return h(t,2)}function f(t){return h(t,4)}function d(t){return t.map(f)}function g(t){null!=t&&Nk.call(p,t.type)&&p[t.type](t)}var p={GeometryCollection:function(t){t.geometries.forEach(g)},Point:function(t){t.coordinates=c(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(c)},LineString:function(t){t.arcs=u(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(u)},Polygon:function(t){t.arcs=d(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(d)}};for(var _ in t)g(t[_]);return{scale:[1/a,1/l],translate:[i,r]}}(t,n,e),r=function(t){var e,n,i,r,s=t.coordinates,o=t.lines,a=t.rings,l=o.length+a.length;for(delete t.lines,delete t.rings,i=0,r=o.length;i<r;++i)for(e=o[i];e=e.next;)++l;for(i=0,r=a.length;i<r;++i)for(n=a[i];n=n.next;)++l;var c=Ik(2*l*1.4,Tk,Sk),h=t.arcs=[];for(i=0,r=o.length;i<r;++i){e=o[i];do{u(e)}while(e=e.next)}for(i=0,r=a.length;i<r;++i)if((n=a[i]).next)do{u(n)}while(n=n.next);else f(n);function u(t){var e,n,i,r,o,a,l,u;if(i=c.get(e=s[t[0]]))for(l=0,u=i.length;l<u;++l)if(d(r=i[l],t))return t[0]=r[0],void(t[1]=r[1]);if(o=c.get(n=s[t[1]]))for(l=0,u=o.length;l<u;++l)if(g(a=o[l],t))return t[1]=a[0],void(t[0]=a[1]);i?i.push(t):c.set(e,[t]),o?o.push(t):c.set(n,[t]),h.push(t)}function f(t){var e,n,i,r,o;if(n=c.get(s[t[0]]))for(r=0,o=n.length;r<o;++r){if(p(i=n[r],t))return t[0]=i[0],void(t[1]=i[1]);if(_(i,t))return t[0]=i[1],void(t[1]=i[0])}if(n=c.get(e=s[t[0]+y(t)]))for(r=0,o=n.length;r<o;++r){if(p(i=n[r],t))return t[0]=i[0],void(t[1]=i[1]);if(_(i,t))return t[0]=i[1],void(t[1]=i[0])}n?n.push(t):c.set(e,[t]),h.push(t)}function d(t,e){var n=t[0],i=e[0],r=t[1];if(n-r!=i-e[1])return!1;for(;n<=r;++n,++i)if(!Sk(s[n],s[i]))return!1;return!0}function g(t,e){var n=t[0],i=e[0],r=t[1],o=e[1];if(n-r!=i-o)return!1;for(;n<=r;++n,--o)if(!Sk(s[n],s[o]))return!1;return!0}function p(t,e){var n=t[0],i=e[0],r=t[1]-n;if(r!==e[1]-i)return!1;for(var o=y(t),a=y(e),l=0;l<r;++l)if(!Sk(s[n+(l+o)%r],s[i+(l+a)%r]))return!1;return!0}function _(t,e){var n=t[0],i=e[0],r=t[1],o=e[1],a=r-n;if(a!==o-i)return!1;for(var l=y(t),c=a-y(e),h=0;h<a;++h)if(!Sk(s[n+(h+l)%a],s[o-(h+c)%a]))return!1;return!0}function y(t){for(var e=t[0],n=t[1],i=e,r=i,o=s[i];++i<n;){var a=s[i];(a[0]<o[0]||a[0]===o[0]&&a[1]<o[1])&&(r=i,o=a)}return r-e}return t}(function(t){var e,n,i,r=Ak(t),s=t.coordinates,o=t.lines,a=t.rings;for(n=0,i=o.length;n<i;++n)for(var l=o[n],c=l[0],h=l[1];++c<h;)r.has(s[c])&&(e={0:c,1:l[1]},l[1]=c,l=l.next=e);for(n=0,i=a.length;n<i;++n)for(var u=a[n],f=u[0],d=f,g=u[1],p=r.has(s[f]);++d<g;)r.has(s[d])&&(p?(e={0:d,1:u[1]},u[1]=d,u=u.next=e):(Rk(s,f,g,g-d),s[g]=s[f],p=!0,d=f));return t}(function(t){var e=-1,n=[],i=[],r=[];function s(t){t&&Nk.call(o,t.type)&&o[t.type](t)}var o={GeometryCollection:function(t){t.geometries.forEach(s)},LineString:function(t){t.arcs=a(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(a)},Polygon:function(t){t.arcs=t.arcs.map(l)},MultiPolygon:function(t){t.arcs=t.arcs.map(c)}};function a(t){for(var i=0,s=t.length;i<s;++i)r[++e]=t[i];var o={0:e-s+1,1:e};return n.push(o),o}function l(t){for(var n=0,s=t.length;n<s;++n)r[++e]=t[n];var o={0:e-s+1,1:e};return i.push(o),o}function c(t){return t.map(l)}for(var h in t)s(t[h]);return{type:"Topology",coordinates:r,lines:n,rings:i,objects:t}}(t))),s=r.coordinates,o=Ik(1.4*r.arcs.length,Gk,qk);function a(t){t&&Nk.call(l,t.type)&&l[t.type](t)}t=r.objects,r.bbox=n,r.arcs=r.arcs.map((function(t,e){return o.set(t,e),s.slice(t[0],t[1]+1)})),delete r.coordinates,s=null;var l={GeometryCollection:function(t){t.geometries.forEach(a)},LineString:function(t){t.arcs=c(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(c)},Polygon:function(t){t.arcs=t.arcs.map(c)},MultiPolygon:function(t){t.arcs=t.arcs.map(h)}};function c(t){var e=[];do{var n=o.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function h(t){return t.map(c)}for(var u in t)a(t[u]);return i&&(r.transform=i,r.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var i,r,s=t[e],o=0,a=1,l=s.length,c=s[0],h=c[0],u=c[1];++o<l;)i=(c=s[o])[0],r=c[1],i===h&&r===u||(s[a++]=[i-h,r-u],h=i,u=r);1===a&&(s[a++]=[0,0]),s.length=a}return t}(r.arcs)),r},neighbors:function(t){var e={},n=t.map((function(){return[]}));function i(t,n){t.forEach((function(t){t<0&&(t=~t);var i=e[t];i?i.push(n):e[t]=[n]}))}function r(t,e){t.forEach((function(t){i(t,e)}))}var s={LineString:i,MultiLineString:r,Polygon:r,MultiPolygon:function(t,e){t.forEach((function(t){r(t,e)}))}};for(var o in t.forEach((function t(e,n){"GeometryCollection"===e.type?e.geometries.forEach((function(e){t(e,n)})):e.type in s&&s[e.type](e.arcs,n)})),e)for(var a=e[o],l=a.length,c=0;c<l;++c)for(var h=c+1;h<l;++h){var u,f=a[c],d=a[h];(u=n[f])[o=qo(u,d)]!==d&&u.splice(o,0,d),(u=n[d])[o=qo(u,f)]!==f&&u.splice(o,0,f)}return n},mesh:function(t){return Do(t,Fo.apply(this,arguments))}}),Bk=Object.assign({},Nt);function Uk(t,e={}){let n=Yo(t);if(null==e.values&&null==e.id){const t=jk.topology({d:n});return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:jk.mesh(t,Object.entries(t.objects)[0][1],((t,e)=>t!==e))}]}}{const t=e.id,i=e.values,r=e.type?e.type:"rel",s=e.share?e.share:null,o=jk.topology({d:n}),a=n.features.map((e=>e.properties[t])),l=jk.neighbors(o.objects.d.geometries),c=new Map(n.features.map((e=>[e.properties[t],e.properties[i]])));let h=[];a.forEach((e=>{l[a.indexOf(e)].map((t=>({properties:{i:e,j:a[t],varoptionsi:+c.get(e),varoptionsj:+c.get(a[t]),disc:"rel"==r?0!=Bk.min([+c.get(e),+c.get(a[t])])?Bk.max([+c.get(e),+c.get(a[t])])/Bk.min([+c.get(e),+c.get(a[t])]):null:Bk.max([+c.get(e),+c.get(a[t])])-Bk.min([+c.get(e),+c.get(a[t])])}}))).forEach((e=>{let n=jk.mesh(o,o.objects.d,((n,i)=>n.properties[t]==e.properties.i&i.properties[t]==e.properties.j)),i=Object.assign({type:"Feature"},e);h.push(Object.assign(i,{geometry:n}))}))})),h.sort(((t,e)=>Bk.descending(t.properties.disc,e.properties.disc)));const u=h.length;return h.map((t=>t.properties)).forEach(((t,e)=>{Object.assign(t,{share:(e+1)/u})})),null!=s&&(h=h.filter((t=>t.properties.share<s))),n.features=h,n}}function Yk({x:t,field:e}){let n=[...t.features.map((t=>({...t.properties})))];n.forEach((t=>{Array.isArray(e)?e.forEach((e=>delete t[e])):delete t[e]}));let i=JSON.parse(JSON.stringify(t));return i.features.map(((t,e)=>t.properties={...n[e]})),i}function Wk(t){return new Function(`return (${t})`)()}const $k=Object.assign({},{table:function(t){return JSON.parse(JSON.stringify(t.features.map((t=>t.properties))))},remove:Yk,keep:function({x:t,field:e}){let n=[];t.features.map((t=>t.properties)).forEach((t=>{n.push(Object.keys(t))})),n=Array.from(new Set(n.flat()));let i=n.filter((t=>!e.includes(t)));return Yk({x:t,field:i})},add:function({x:t,field:e,expression:n}){let i=[...t.features.map((t=>({...t.properties})))],r=[];t.features.map((t=>t.properties)).forEach((t=>{r.push(Object.keys(t))})),r=Array.from(new Set(r.flat())),r.forEach((t=>{n=n.replace(t,`d.${t}`)})),n="d=> "+n;let s=i.map(Wk(n));i.forEach(((t,n)=>{t=Object.assign(t,{[e]:s[n]})}));let o=JSON.parse(JSON.stringify(t));return o.features.map(((t,e)=>t.properties={...i[e]})),o},filter:function({x:t,expression:e}){let n=[...t.features],i=[];t.features.map((t=>t.properties)).forEach((t=>{i.push(Object.keys(t))})),i=Array.from(new Set(i.flat())),i.forEach((t=>{e=e.replace(t,`d.properties.${t}`)})),e="d => "+e;let r=JSON.parse(JSON.stringify(t));return r.features=n.filter(Wk(e)),r},subset:function({x:t,field:e,selection:n,inverse:i=!1}){let r=[...t.features];n=Array.isArray(n)?n:[n],i&&(n=Array.from(new Set(r.map((t=>t.properties[e])))).filter((t=>!n.includes(t))));let s=[];n.forEach((t=>{s.push(r.filter((n=>n.properties[e]==t)))}));let o=JSON.parse(JSON.stringify(t));return o.features=s.flat(),o},head:function({x:t,field:e,nb:n=10}){let i=[...t.features];i=i.filter((t=>""!=t.properties[e])).filter((t=>null!=t.properties[e])).filter((t=>null!=t.properties[e])).filter((t=>t.properties[e]!=1/0)).filter((t=>t.properties[e]!=-1/0)).filter((t=>NaN!=t.properties[e])),i.sort(((t,n)=>+n.properties[e]-+t.properties[e])),i=i.slice(0,n);let r=JSON.parse(JSON.stringify(t));return r.features=i,r},tail:function({x:t,field:e,nb:n=10}){let i=[...t.features];i=i.filter((t=>""!=t.properties[e])).filter((t=>null!=t.properties[e])).filter((t=>null!=t.properties[e])).filter((t=>t.properties[e]!=1/0)).filter((t=>t.properties[e]!=-1/0)).filter((t=>NaN!=t.properties[e])),i.sort(((t,n)=>+t.properties[e]-+n.properties[e])),i=i.slice(0,n);let r=JSON.parse(JSON.stringify(t));return r.features=i,r}});let Xk={table:$k.table,remove:function({geojson:t,field:e}){return $k.remove({x:t,field:e})},keep:function({geojson:t,field:e}){return $k.keep({x:t,field:e})},add:function({geojson:t,field:e,expression:n}){return $k.add({x:t,field:e,expression:n})},filter:function({geojson:t,expression:e}){return $k.filter({x:t,expression:e})},subset:function({geojson:t,field:e,selection:n,inverse:i}){return $k.subset({x:t,field:e,selection:n,inverse:i})},head:function({geojson:t,field:e,nb:n}){return $k.head({x:t,field:e,nb:n})},tail:function({geojson:t,field:e,nb:n}){return $k.tail({x:t,field:e,nb:n})}};t.bbox=$o,t.borders=function({geojson:t,id:e,values:n,type:i="rel",share:r=null}){return null==e||null==n?Uk(t):Uk(t,{id:e,values:n,type:i,share:r})},t.bubble=EE,t.dotcartogram=nk,t.draw=Mk,t.graticule=Ig,t.inner=IO,t.label=QO,t.links=function(t={}){let e,n=Bo(t.geojson),i=t.geojson_id,r=t.data,s=null!=t.data_i?t.data_i:"i",o=null!=t.data_j?t.data_j:"j",a=!!t.planar;e="p"==yE(n)?n.features:ME(n,{planar:a}).features;const l=new Map(e.map((t=>[t.properties[i],t.geometry.coordinates])));let c=[];return r.forEach((t=>{null!=l.get(t[s])&&null!=l.get(t[o])&&c.push({type:"Feature",properties:t,geometry:{type:"LineString",coordinates:[l.get(t[s]),l.get(t[o])]}})})),{type:"FeatureCollection",features:c}},t.logo=pk,t.match=function(t,e,n,i){let r=(t=Bo(t)).features.map((t=>t.properties[e])),s=n.map((t=>t[i])),o=Array.from(new Set(r.concat(s))),a=r.filter((t=>s.includes(t))),l=r.filter((t=>!s.includes(t))),c=s.filter((t=>!r.includes(t))),h=a.filter((t=>s.includes(t))),u=a.filter((t=>r.includes(t))),f=1e3,d=100,g=30,p=wk.scaleLinear().domain([0,o.length]).range([0,f]);const _=wk.create("svg").attr("width",f).attr("height",d).attr("viewBox",[0,0,f,d]).attr("style","max-width: 100%; height: auto; height: intrinsic; background-color: white;");return _.append("defs").append("pattern").attr("id","hatch").attr("patternUnits","userSpaceOnUse").attr("width",5).attr("height",5).append("line").attr("x1",0).attr("y1",0).attr("x2",5).attr("y1",5).attr("stroke","#ffcc36").attr("stroke-width",1).attr("stroke-opacity",1),_.append("rect").attr("x",0).attr("y",25).attr("height",10).attr("width",p(l.length+a.length)).attr("stroke","none").attr("fill","#CCC").attr("fill-opacity",.35),_.append("rect").attr("x",f-p(c.length+a.length)).attr("y",65).attr("height",10).attr("width",p(c.length+a.length)).attr("stroke","none").attr("fill","#CCC").attr("fill-opacity",.35),_.append("rect").attr("x",p(l.length)).attr("y",g).attr("height",40).attr("width",p(a.length)).attr("fill","#ffe599"),_.append("rect").attr("x",p(l.length)).attr("y",g).attr("height",40).attr("width",p(a.length)).attr("fill","url('#hatch')"),_.append("text").attr("x",f-p(s.length)+p(a.length)/2).attr("y",53).attr("text-anchor","middle").attr("dominant-baseline","middle").text(`${Math.round(a.length/o.length*100)}%`).attr("font-size",40).attr("fill","black"),_.append("text").attr("x",f-p(s.length)+5).attr("y",37).attr("text-anchor","start").attr("dominant-baseline","hanging").text("Matched geom").attr("font-size",12).attr("fill","black"),_.append("text").attr("x",f-p(s.length)+5).attr("y",62).attr("text-anchor","start").attr("dominant-baseline","baseline").text(`${a.length}/${r.length}`).attr("font-size",14).attr("fill","black"),_.append("text").attr("x",f-p(c.length)-5).attr("y",37).attr("text-anchor","end").attr("dominant-baseline","hanging").text("Matched data").attr("font-size",12).attr("fill","black"),_.append("text").attr("x",f-p(c.length)-5).attr("y",62).attr("text-anchor","end").attr("dominant-baseline","baseline").text(`${a.length}/${s.length}`).attr("font-size",14).attr("fill","black"),_.append("line").attr("x1",0).attr("y1",g).attr("x2",p(r.length)).attr("y2",g).attr("stroke","black").attr("stroke-width",.5),_.append("line").attr("x1",.5).attr("y1",25).attr("x2",.5).attr("y2",35).attr("stroke","black").attr("stroke-width",.5),_.append("line").attr("x1",p(r.length)-.5).attr("y1",25).attr("x2",p(r.length)-.5).attr("y2",35).attr("stroke","black").attr("stroke-width",.5),_.append("line").attr("x1",f-p(s.length)).attr("y1",70).attr("x2",f).attr("y2",70).attr("stroke","black").attr("stroke-width",.5),_.append("line").attr("x1",999.5).attr("y1",65).attr("x2",999.5).attr("y2",75).attr("stroke","black").attr("stroke-width",.5),_.append("line").attr("x1",f-p(s.length)+.5).attr("y1",65).attr("x2",f-p(s.length)+.5).attr("y2",75).attr("stroke","black").attr("stroke-width",.5),_.append("text").attr("x",f-p(s.length/2)).attr("y",95).attr("text-anchor","middle").text("DATA").attr("font-size",28).attr("font-weight","bold").attr("fill","#CCC").attr("opacity",.45),_.append("text").attr("x",p(r.length/2)).attr("y",22).attr("text-anchor","middle").text("GEOMETRIES").attr("font-size",28).attr("font-weight","bold").attr("fill","#CCC").attr("opacity",.45),Object.assign(_.node(),{matched:a,unmatched_geom:l,unmatched_data:c,matched_data:h,matched_geom:u})},t.merge=function(t,e,n,i,r=!0){let s=JSON.parse(JSON.stringify(Bo(t))),o=JSON.parse(JSON.stringify(n)),a=s.features.map((t=>t.properties[e])),l=n.map((t=>t[i]));a.filter((t=>l.includes(t)));let c=Object.keys(s.features[0].properties);if(Object.keys(o[0]).includes(i)){let t=Ek.index(o,(t=>t[i]));s.features.forEach((n=>{const i=t.get(n.properties[e]);null!=i&&Object.keys(i).forEach((t=>{void 0!==c.find((e=>e==t))&&(i[`_${t}`]=i[t],delete i[t])})),n.properties=Object.assign(n.properties,i)})),!1===r&&(s.features=s.features.filter((t=>l.includes(t.properties[e]))))}return s},t.minimap=xk,t.missing=vO,t.mushroom=xO,t.outline=Tg,t.properties=Xk,t.quickdraw=function(t,e=1e3,n=5){if(Array.isArray(t)){let i=[];return t.forEach((t=>i.push({type:"layer",geojson:t}))),Mk({params:{margin:n,width:e},layers:i})}return Mk({params:{margin:n,width:e},layers:[{type:"layer",geojson:t}]})},t.regularbubble=_O,t.regulardots=pO,t.regularsquare=yO,t.rhumbs=_k,t.simple=xE,t.spikes=tk,t.table2geo=function(t,e,n){return{type:"FeatureCollection",features:t.map((t=>({type:"Feature",properties:t,geometry:{type:"Point",coordinates:[+t[n],+t[e]]}})))}},t.waterlines=EO,Object.defineProperty(t,"__esModule",{value:!0})}));
