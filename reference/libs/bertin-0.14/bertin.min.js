!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).bertin={})}(this,(function(t){"use strict";var e="http://www.w3.org/1999/xhtml",n={svg:"http://www.w3.org/2000/svg",xhtml:e,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function r(t){var e=t+="",r=e.indexOf(":");return r>=0&&"xmlns"!==(e=t.slice(0,r))&&(t=t.slice(r+1)),n.hasOwnProperty(e)?{space:n[e],local:t}:t}function i(t){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===e&&n.documentElement.namespaceURI===e?n.createElement(t):n.createElementNS(r,t)}}function o(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function a(t){var e=r(t);return(e.local?o:i)(e)}function s(){}function u(t){return null==t?s:function(){return this.querySelector(t)}}function l(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function c(){return[]}function h(t){return null==t?c:function(){return this.querySelectorAll(t)}}function f(t){return function(){return this.matches(t)}}function p(t){return function(e){return e.matches(t)}}var d=Array.prototype.find;function g(){return this.firstElementChild}var y=Array.prototype.filter;function _(){return Array.from(this.children)}function v(t){return new Array(t.length)}function m(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function x(t){return function(){return t}}function b(t,e,n,r,i,o){for(var a,s=0,u=e.length,l=o.length;s<l;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new m(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function M(t,e,n,r,i,o,a){var s,u,l,c=new Map,h=e.length,f=o.length,p=new Array(h);for(s=0;s<h;++s)(u=e[s])&&(p[s]=l=a.call(u,u.__data__,s,e)+"",c.has(l)?i[s]=u:c.set(l,u));for(s=0;s<f;++s)l=a.call(t,o[s],s,o)+"",(u=c.get(l))?(r[s]=u,u.__data__=o[s],c.delete(l)):n[s]=new m(t,o[s]);for(s=0;s<h;++s)(u=e[s])&&c.get(p[s])===u&&(i[s]=u)}function w(t){return t.__data__}function E(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function N(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function S(t){return function(){this.removeAttribute(t)}}function I(t){return function(){this.removeAttributeNS(t.space,t.local)}}function C(t,e){return function(){this.setAttribute(t,e)}}function O(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function P(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function L(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function A(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function T(t){return function(){this.style.removeProperty(t)}}function k(t,e,n){return function(){this.style.setProperty(t,e,n)}}function R(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function D(t,e){return t.style.getPropertyValue(e)||A(t).getComputedStyle(t,null).getPropertyValue(e)}function F(t){return function(){delete this[t]}}function z(t,e){return function(){this[t]=e}}function G(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function q(t){return t.trim().split(/^|\s+/)}function j(t){return t.classList||new B(t)}function B(t){this._node=t,this._names=q(t.getAttribute("class")||"")}function U(t,e){for(var n=j(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function V(t,e){for(var n=j(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function W(t){return function(){U(this,t)}}function Y(t){return function(){V(this,t)}}function X(t,e){return function(){(e.apply(this,arguments)?U:V)(this,t)}}function $(){this.textContent=""}function H(t){return function(){this.textContent=t}}function Q(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function J(){this.innerHTML=""}function K(t){return function(){this.innerHTML=t}}function Z(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function tt(){this.nextSibling&&this.parentNode.appendChild(this)}function et(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function nt(){return null}function rt(){var t=this.parentNode;t&&t.removeChild(this)}function it(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ot(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function at(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function st(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function ut(t,e,n){return function(){var r,i=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=e);this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function lt(t,e,n){var r=A(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ct(t,e){return function(){return lt(this,t,e)}}function ht(t,e){return function(){return lt(this,t,e.apply(this,arguments))}}m.prototype={constructor:m,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},B.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var ft=[null];function pt(t,e){this._groups=t,this._parents=e}function dt(){return new pt([[document.documentElement]],ft)}function gt(t){return"string"==typeof t?new pt([[document.querySelector(t)]],[document.documentElement]):new pt([[t]],ft)}pt.prototype=dt.prototype={constructor:pt,select:function(t){"function"!=typeof t&&(t=u(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],l=s.length,c=r[i]=new Array(l),h=0;h<l;++h)(o=s[h])&&(a=t.call(o,o.__data__,h,s))&&("__data__"in o&&(a.__data__=o.__data__),c[h]=a);return new pt(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return l(t.apply(this,arguments))}}(t):h(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],u=s.length,c=0;c<u;++c)(a=s[c])&&(r.push(t.call(a,a.__data__,c,s)),i.push(a));return new pt(r,i)},selectChild:function(t){return this.select(null==t?g:function(t){return function(){return d.call(this.children,t)}}("function"==typeof t?t:p(t)))},selectChildren:function(t){return this.selectAll(null==t?_:function(t){return function(){return y.call(this.children,t)}}("function"==typeof t?t:p(t)))},filter:function(t){"function"!=typeof t&&(t=f(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&u.push(o);return new pt(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,w);var n=e?M:b,r=this._parents,i=this._groups;"function"!=typeof t&&(t=x(t));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],h=i[l],f=h.length,p=E(t.call(c,c&&c.__data__,l,r)),d=p.length,g=s[l]=new Array(d),y=a[l]=new Array(d),_=u[l]=new Array(f);n(c,h,g,y,_,p,e);for(var v,m,N=0,S=0;N<d;++N)if(v=g[N]){for(N>=S&&(S=N+1);!(m=y[S])&&++S<d;);v._next=m||null}}return(a=new pt(a,r))._enter=s,a._exit=u,a},enter:function(){return new pt(this._enter||this._groups.map(v),this._parents)},exit:function(){return new pt(this._exit||this._groups.map(v),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),u=0;u<a;++u)for(var l,c=n[u],h=r[u],f=c.length,p=s[u]=new Array(f),d=0;d<f;++d)(l=c[d]||h[d])&&(p[d]=l);for(;u<i;++u)s[u]=n[u];return new pt(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=N);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,l=i[o]=new Array(u),c=0;c<u;++c)(a=s[c])&&(l[c]=a);l.sort(e)}return new pt(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=r(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?I:S:"function"==typeof e?n.local?L:P:n.local?O:C)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?T:"function"==typeof e?R:k)(t,e,null==n?"":n)):D(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?F:"function"==typeof e?G:z)(t,e)):this.node()[t]},classed:function(t,e){var n=q(t+"");if(arguments.length<2){for(var r=j(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?X:e?W:Y)(n,e))},text:function(t){return arguments.length?this.each(null==t?$:("function"==typeof t?Q:H)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?J:("function"==typeof t?Z:K)(t)):this.node().innerHTML},raise:function(){return this.each(tt)},lower:function(){return this.each(et)},append:function(t){var e="function"==typeof t?t:a(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:a(t),r=null==e?nt:"function"==typeof e?e:u(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(rt)},clone:function(t){return this.select(t?ot:it)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=at(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?ut:st,r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?ht:ct)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};var yt=0;function _t(){return new vt}function vt(){this._="@"+(++yt).toString(36)}function mt(t){let e;for(;e=t.sourceEvent;)t=e;return t}function xt(t,e){if(t=mt(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}vt.prototype=_t.prototype={constructor:vt,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var bt=Object.freeze({__proto__:null,create:function(t){return gt(a(t).call(document.documentElement))},creator:a,local:_t,matcher:f,namespace:r,namespaces:n,pointer:xt,pointers:function(t,e){return t.target&&(t=mt(t),void 0===e&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,(t=>xt(t,e)))},select:gt,selectAll:function(t){return"string"==typeof t?new pt([document.querySelectorAll(t)],[document.documentElement]):new pt([l(t)],ft)},selection:dt,selector:u,selectorAll:h,style:D,window:A});function Mt(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function wt(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Et(t){let e,n,r;function i(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<0?i=e+1:o=e}while(i<o)}return i}return 2!==t.length?(e=Mt,n=(e,n)=>Mt(t(e),n),r=(e,n)=>t(e)-n):(e=t===Mt||t===wt?t:Nt,n=t,r=t),{left:i,center:function(t,e,n=0,o=t.length){const a=i(t,e,n,o-1);return a>n&&r(t[a-1],e)>-r(t[a],e)?a-1:a},right:function(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<=0?i=e+1:o=e}while(i<o)}return i}}}function Nt(){return 0}function St(t){return null===t?NaN:+t}function*It(t,e){if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(yield e);else{let n=-1;for(let r of t)null!=(r=e(r,++n,t))&&(r=+r)>=r&&(yield r)}}const Ct=Et(Mt),Ot=Ct.right,Pt=Ct.left,Lt=Et(St).center;var At=Ot;const Tt=Rt(zt),kt=Rt((function(t){const e=zt(t);return(t,n,r,i,o)=>{e(t,n,(r<<=2)+0,(i<<=2)+0,o<<=2),e(t,n,r+1,i+1,o),e(t,n,r+2,i+2,o),e(t,n,r+3,i+3,o)}}));function Rt(t){return function(e,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:i,width:o,height:a}=e;if(!((o=Math.floor(o))>=0))throw new RangeError("invalid width");if(!((a=Math.floor(void 0!==a?a:i.length/o))>=0))throw new RangeError("invalid height");if(!o||!a||!n&&!r)return e;const s=n&&t(n),u=r&&t(r),l=i.slice();return s&&u?(Dt(s,l,i,o,a),Dt(s,i,l,o,a),Dt(s,l,i,o,a),Ft(u,i,l,o,a),Ft(u,l,i,o,a),Ft(u,i,l,o,a)):s?(Dt(s,i,l,o,a),Dt(s,l,i,o,a),Dt(s,i,l,o,a)):u&&(Ft(u,i,l,o,a),Ft(u,l,i,o,a),Ft(u,i,l,o,a)),e}}function Dt(t,e,n,r,i){for(let o=0,a=r*i;o<a;)t(e,n,o,o+=r,1)}function Ft(t,e,n,r,i){for(let o=0,a=r*i;o<r;++o)t(e,n,o,o+a,r)}function zt(t){const e=Math.floor(t);if(e===t)return function(t){const e=2*t+1;return(n,r,i,o,a)=>{if(!((o-=a)>=i))return;let s=t*r[i];const u=a*t;for(let t=i,e=i+u;t<e;t+=a)s+=r[Math.min(o,t)];for(let t=i,l=o;t<=l;t+=a)s+=r[Math.min(o,t+u)],n[t]=s/e,s-=r[Math.max(i,t-u)]}}(t);const n=t-e,r=2*t+1;return(t,i,o,a,s)=>{if(!((a-=s)>=o))return;let u=e*i[o];const l=s*e,c=l+s;for(let t=o,e=o+l;t<e;t+=s)u+=i[Math.min(a,t)];for(let e=o,h=a;e<=h;e+=s)u+=i[Math.min(a,e+l)],t[e]=(u+n*(i[Math.max(o,e-c)]+i[Math.min(a,e+c)]))/r,u-=i[Math.max(o,e-l)]}}function Gt(t,e){let n=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&++n;else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(i=+i)>=i&&++n}return n}function qt(t){return 0|t.length}function jt(t){return!(t>0)}function Bt(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function Ut(t,e){let n,r=0,i=0,o=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(n=e-i,i+=n/++r,o+=n*(e-i));else{let a=-1;for(let s of t)null!=(s=e(s,++a,t))&&(s=+s)>=s&&(n=s-i,i+=n/++r,o+=n*(s-i))}if(r>1)return o/(r-1)}function Vt(t,e){const n=Ut(t,e);return n?Math.sqrt(n):n}function Wt(t,e){let n,r;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=r=e):(n>e&&(n=e),r<e&&(r=e)));else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class Yt{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=e[r],o=t+i,a=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);a&&(e[n++]=a),t=o}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,r,i=this._n,o=0;if(i>0){for(o=t[--i];i>0&&(e=o,n=t[--i],o=e+n,r=n-(o-e),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(n=2*r,e=o+n,n==e-o&&(o=e))}return o}}class Xt extends Map{constructor(t,e=Kt){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(Ht(this,t))}has(t){return super.has(Ht(this,t))}set(t,e){return super.set(Qt(this,t),e)}delete(t){return super.delete(Jt(this,t))}}class $t extends Set{constructor(t,e=Kt){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const e of t)this.add(e)}has(t){return super.has(Ht(this,t))}add(t){return super.add(Qt(this,t))}delete(t){return super.delete(Jt(this,t))}}function Ht({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Qt({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Jt({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Kt(t){return null!==t&&"object"==typeof t?t.valueOf():t}function Zt(t){return t}function te(t,...e){return ae(t,Zt,Zt,e)}function ee(t,...e){return ae(t,Array.from,Zt,e)}function ne(t,e){for(let n=1,r=e.length;n<r;++n)t=t.flatMap((t=>t.pop().map((([e,n])=>[...t,e,n]))));return t}function re(t,e,...n){return ae(t,Zt,e,n)}function ie(t,e,...n){return ae(t,Array.from,e,n)}function oe(t){if(1!==t.length)throw new Error("duplicate key");return t[0]}function ae(t,e,n,r){return function t(i,o){if(o>=r.length)return n(i);const a=new Xt,s=r[o++];let u=-1;for(const t of i){const e=s(t,++u,i),n=a.get(e);n?n.push(t):a.set(e,[t])}for(const[e,n]of a)a.set(e,t(n,o));return e(a)}(t,0)}function se(t,e){return Array.from(e,(e=>t[e]))}function ue(t,...e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&2!==n.length||e.length>1){const r=Uint32Array.from(t,((t,e)=>e));return e.length>1?(e=e.map((e=>t.map(e))),r.sort(((t,n)=>{for(const r of e){const e=ce(r[t],r[n]);if(e)return e}}))):(n=t.map(n),r.sort(((t,e)=>ce(n[t],n[e])))),se(t,r)}return t.sort(le(n))}function le(t=Mt){if(t===Mt)return ce;if("function"!=typeof t)throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||0===r?r:(0===t(n,n))-(0===t(e,e))}}function ce(t,e){return(null==t||!(t>=t))-(null==e||!(e>=e))||(t<e?-1:t>e?1:0)}var he=Array.prototype.slice;function fe(t){return()=>t}var pe=Math.sqrt(50),de=Math.sqrt(10),ge=Math.sqrt(2);function ye(t,e,n){var r,i,o,a,s=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=_e(t,e,n))||!isFinite(a))return[];if(a>0){let n=Math.round(t/a),r=Math.round(e/a);for(n*a<t&&++n,r*a>e&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)*a}else{a=-a;let n=Math.round(t*a),r=Math.round(e*a);for(n/a<t&&++n,r/a>e&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)/a}return r&&o.reverse(),o}function _e(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=pe?10:o>=de?5:o>=ge?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=pe?10:o>=de?5:o>=ge?2:1)}function ve(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=pe?i*=10:o>=de?i*=5:o>=ge&&(i*=2),e<t?-i:i}function me(t,e,n){let r;for(;;){const i=_e(t,e,n);if(i===r||0===i||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function xe(t){return Math.ceil(Math.log(Gt(t))/Math.LN2)+1}function be(){var t=Zt,e=Wt,n=xe;function r(r){Array.isArray(r)||(r=Array.from(r));var i,o,a,s=r.length,u=new Array(s);for(i=0;i<s;++i)u[i]=t(r[i],i,r);var l=e(u),c=l[0],h=l[1],f=n(u,c,h);if(!Array.isArray(f)){const t=h,n=+f;if(e===Wt&&([c,h]=me(c,h,n)),(f=ye(c,h,n))[0]<=c&&(a=_e(c,h,n)),f[f.length-1]>=h)if(t>=h&&e===Wt){const t=_e(c,h,n);isFinite(t)&&(t>0?h=(Math.floor(h/t)+1)*t:t<0&&(h=(Math.ceil(h*-t)+1)/-t))}else f.pop()}for(var p=f.length;f[0]<=c;)f.shift(),--p;for(;f[p-1]>h;)f.pop(),--p;var d,g=new Array(p+1);for(i=0;i<=p;++i)(d=g[i]=[]).x0=i>0?f[i-1]:c,d.x1=i<p?f[i]:h;if(isFinite(a)){if(a>0)for(i=0;i<s;++i)null!=(o=u[i])&&c<=o&&o<=h&&g[Math.min(p,Math.floor((o-c)/a))].push(r[i]);else if(a<0)for(i=0;i<s;++i)if(null!=(o=u[i])&&c<=o&&o<=h){const t=Math.floor((c-o)*a);g[Math.min(p,t+(f[t]<=o))].push(r[i])}}else for(i=0;i<s;++i)null!=(o=u[i])&&c<=o&&o<=h&&g[At(f,o,0,p)].push(r[i]);return g}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:fe(e),r):t},r.domain=function(t){return arguments.length?(e="function"==typeof t?t:fe([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?fe(he.call(t)):fe(t),r):n},r}function Me(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function we(t,e){let n,r=-1,i=-1;if(void 0===e)for(const e of t)++i,null!=e&&(n<e||void 0===n&&e>=e)&&(n=e,r=i);else for(let o of t)null!=(o=e(o,++i,t))&&(n<o||void 0===n&&o>=o)&&(n=o,r=i);return r}function Ee(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function Ne(t,e){let n,r=-1,i=-1;if(void 0===e)for(const e of t)++i,null!=e&&(n>e||void 0===n&&e>=e)&&(n=e,r=i);else for(let o of t)null!=(o=e(o,++i,t))&&(n>o||void 0===n&&o>=o)&&(n=o,r=i);return r}function Se(t,e,n=0,r=t.length-1,i){for(i=void 0===i?ce:le(i);r>n;){if(r-n>600){const o=r-n+1,a=e-n+1,s=Math.log(o),u=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);Se(t,e,Math.max(n,Math.floor(e-a*u/o+l)),Math.min(r,Math.floor(e+(o-a)*u/o+l)),i)}const o=t[e];let a=n,s=r;for(Ie(t,n,e),i(t[r],o)>0&&Ie(t,n,r);a<s;){for(Ie(t,a,s),++a,--s;i(t[a],o)<0;)++a;for(;i(t[s],o)>0;)--s}0===i(t[n],o)?Ie(t,n,s):(++s,Ie(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function Ie(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Ce(t,e=Mt){let n,r=!1;if(1===e.length){let i;for(const o of t){const t=e(o);(r?Mt(t,i)>0:0===Mt(t,t))&&(n=o,i=t,r=!0)}}else for(const i of t)(r?e(i,n)>0:0===e(i,i))&&(n=i,r=!0);return n}function Oe(t,e,n){if(r=(t=Float64Array.from(It(t,n))).length){if((e=+e)<=0||r<2)return Ee(t);if(e>=1)return Me(t);var r,i=(r-1)*e,o=Math.floor(i),a=Me(Se(t,o).subarray(0,o+1));return a+(Ee(t.subarray(o+1))-a)*(i-o)}}function Pe(t,e,n=St){if(r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}}function Le(t,e,n){if(r=(t=Float64Array.from(It(t,n))).length){if((e=+e)<=0||r<2)return Ne(t);if(e>=1)return we(t);var r,i=Math.floor((r-1)*e),o=Se(Uint32Array.from(t,((t,e)=>e)),i,0,r-1,((e,n)=>ce(t[e],t[n])));return Ce(o.subarray(0,i+1),(e=>t[e]))}}function Ae(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function Te(t,e){return[t,e]}function ke(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}function Re(t,e=Mt){if(1===e.length)return Ne(t,e);let n,r=-1,i=-1;for(const o of t)++i,(r<0?0===e(o,o):e(o,n)<0)&&(n=o,r=i);return r}var De=Fe(Math.random);function Fe(t){return function(e,n=0,r=e.length){let i=r-(n=+n);for(;i;){const r=t()*i--|0,o=e[i+n];e[i+n]=e[r+n],e[r+n]=o}return e}}function ze(t){if(!(i=t.length))return[];for(var e=-1,n=Ee(t,Ge),r=new Array(n);++e<n;)for(var i,o=-1,a=r[e]=new Array(i);++o<i;)a[o]=t[o][e];return r}function Ge(t){return t.length}function qe(t){return t instanceof $t?t:new $t(t)}function je(t,e){const n=t[Symbol.iterator](),r=new Set;for(const t of e){const e=Be(t);if(r.has(e))continue;let i,o;for(;({value:i,done:o}=n.next());){if(o)return!1;const t=Be(i);if(r.add(t),Object.is(e,t))break}}return!0}function Be(t){return null!==t&&"object"==typeof t?t.valueOf():t}var Ue=Object.freeze({__proto__:null,bisect:At,bisectRight:Ot,bisectLeft:Pt,bisectCenter:Lt,ascending:Mt,bisector:Et,blur:function(t,e){if(!((e=+e)>=0))throw new RangeError("invalid r");let n=t.length;if(!((n=Math.floor(n))>=0))throw new RangeError("invalid length");if(!n||!e)return t;const r=zt(e),i=t.slice();return r(t,i,0,n,1),r(i,t,0,n,1),r(t,i,0,n,1),t},blur2:Tt,blurImage:kt,count:Gt,cross:function(...t){const e="function"==typeof t[t.length-1]&&function(t){return e=>t(...e)}(t.pop()),n=(t=t.map(Bt)).map(qt),r=t.length-1,i=new Array(r+1).fill(0),o=[];if(r<0||n.some(jt))return o;for(;;){o.push(i.map(((e,n)=>t[n][e])));let a=r;for(;++i[a]===n[a];){if(0===a)return e?o.map(e):o;i[a--]=0}}},cumsum:function(t,e){var n=0,r=0;return Float64Array.from(t,void 0===e?t=>n+=+t||0:i=>n+=+e(i,r++,t)||0)},descending:wt,deviation:Vt,extent:Wt,Adder:Yt,fsum:function(t,e){const n=new Yt;if(void 0===e)for(let e of t)(e=+e)&&n.add(e);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&n.add(i)}return+n},fcumsum:function(t,e){const n=new Yt;let r=-1;return Float64Array.from(t,void 0===e?t=>n.add(+t||0):i=>n.add(+e(i,++r,t)||0))},group:te,flatGroup:function(t,...e){return ne(ee(t,...e),e)},flatRollup:function(t,e,...n){return ne(ie(t,e,...n),n)},groups:ee,index:function(t,...e){return ae(t,Zt,oe,e)},indexes:function(t,...e){return ae(t,Array.from,oe,e)},rollup:re,rollups:ie,groupSort:function(t,e,n){return(2!==e.length?ue(re(t,e,n),(([t,e],[n,r])=>Mt(e,r)||Mt(t,n))):ue(te(t,n),(([t,n],[r,i])=>e(n,i)||Mt(t,r)))).map((([t])=>t))},bin:be,histogram:be,thresholdFreedmanDiaconis:function(t,e,n){return Math.ceil((n-e)/(2*(Oe(t,.75)-Oe(t,.25))*Math.pow(Gt(t),-1/3)))},thresholdScott:function(t,e,n){return Math.ceil((n-e)*Math.cbrt(Gt(t))/(3.49*Vt(t)))},thresholdSturges:xe,max:Me,maxIndex:we,mean:function(t,e){let n=0,r=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(++n,r+=e);else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n},median:function(t,e){return Oe(t,.5,e)},medianIndex:function(t,e){return Le(t,.5,e)},merge:Ae,min:Ee,minIndex:Ne,mode:function(t,e){const n=new Xt;if(void 0===e)for(let e of t)null!=e&&e>=e&&n.set(e,(n.get(e)||0)+1);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&i>=i&&n.set(i,(n.get(i)||0)+1)}let r,i=0;for(const[t,e]of n)e>i&&(i=e,r=t);return r},nice:me,pairs:function(t,e=Te){const n=[];let r,i=!1;for(const o of t)i&&n.push(e(r,o)),r=o,i=!0;return n},permute:se,quantile:Oe,quantileIndex:Le,quantileSorted:Pe,quickselect:Se,range:ke,rank:function(t,e=Mt){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");let n=Array.from(t);const r=new Float64Array(n.length);2!==e.length&&(n=n.map(e),e=Mt);const i=(t,r)=>e(n[t],n[r]);let o,a;return Uint32Array.from(n,((t,e)=>e)).sort(e===Mt?(t,e)=>ce(n[t],n[e]):le(i)).forEach(((t,e)=>{const n=i(t,void 0===o?t:o);n>=0?((void 0===o||n>0)&&(o=t,a=e),r[t]=a):r[t]=NaN})),r},least:function(t,e=Mt){let n,r=!1;if(1===e.length){let i;for(const o of t){const t=e(o);(r?Mt(t,i)<0:0===Mt(t,t))&&(n=o,i=t,r=!0)}}else for(const i of t)(r?e(i,n)<0:0===e(i,i))&&(n=i,r=!0);return n},leastIndex:Re,greatest:Ce,greatestIndex:function(t,e=Mt){if(1===e.length)return we(t,e);let n,r=-1,i=-1;for(const o of t)++i,(r<0?0===e(o,o):e(o,n)>0)&&(n=o,r=i);return r},scan:function(t,e){const n=Re(t,e);return n<0?void 0:n},shuffle:De,shuffler:Fe,sum:function(t,e){let n=0;if(void 0===e)for(let e of t)(e=+e)&&(n+=e);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n},ticks:ye,tickIncrement:_e,tickStep:ve,transpose:ze,variance:Ut,zip:function(){return ze(arguments)},every:function(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const r of t)if(!e(r,++n,t))return!1;return!0},some:function(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const r of t)if(e(r,++n,t))return!0;return!1},filter:function(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");const n=[];let r=-1;for(const i of t)e(i,++r,t)&&n.push(i);return n},map:function(t,e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof e)throw new TypeError("mapper is not a function");return Array.from(t,((n,r)=>e(n,r,t)))},reduce:function(t,e,n){if("function"!=typeof e)throw new TypeError("reducer is not a function");const r=t[Symbol.iterator]();let i,o,a=-1;if(arguments.length<3){if(({done:i,value:n}=r.next()),i)return;++a}for(;({done:i,value:o}=r.next()),!i;)n=e(n,o,++a,t);return n},reverse:function(t){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(t).reverse()},sort:ue,difference:function(t,...e){t=new $t(t);for(const n of e)for(const e of n)t.delete(e);return t},disjoint:function(t,e){const n=e[Symbol.iterator](),r=new $t;for(const e of t){if(r.has(e))return!1;let t,i;for(;({value:t,done:i}=n.next())&&!i;){if(Object.is(e,t))return!1;r.add(t)}}return!0},intersection:function(t,...e){t=new $t(t),e=e.map(qe);t:for(const n of t)for(const r of e)if(!r.has(n)){t.delete(n);continue t}return t},subset:function(t,e){return je(e,t)},superset:je,union:function(...t){const e=new $t;for(const n of t)for(const t of n)e.add(t);return e},InternMap:Xt,InternSet:$t}),Ve=1e-6,We=1e-12,Ye=Math.PI,Xe=Ye/2,$e=Ye/4,He=2*Ye,Qe=180/Ye,Je=Ye/180,Ke=Math.abs,Ze=Math.atan,tn=Math.atan2,en=Math.cos,nn=Math.ceil,rn=Math.exp,on=Math.hypot,an=Math.log,sn=Math.pow,un=Math.sin,ln=Math.sign||function(t){return t>0?1:t<0?-1:0},cn=Math.sqrt,hn=Math.tan;function fn(t){return t>1?0:t<-1?Ye:Math.acos(t)}function pn(t){return t>1?Xe:t<-1?-Xe:Math.asin(t)}function dn(t){return(t=un(t/2))*t}function gn(){}function yn(t,e){t&&vn.hasOwnProperty(t.type)&&vn[t.type](t,e)}var _n={Feature:function(t,e){yn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)yn(n[r].geometry,e)}},vn={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){mn(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)mn(n[r],e,0)},Polygon:function(t,e){xn(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)xn(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)yn(n[r],e)}};function mn(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function xn(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)mn(t[n],e,1);e.polygonEnd()}function bn(t,e){t&&_n.hasOwnProperty(t.type)?_n[t.type](t,e):yn(t,e)}var Mn,wn,En,Nn,Sn,In,Cn,On,Pn,Ln,An,Tn,kn,Rn,Dn,Fn,zn=new Yt,Gn=new Yt,qn={point:gn,lineStart:gn,lineEnd:gn,polygonStart:function(){zn=new Yt,qn.lineStart=jn,qn.lineEnd=Bn},polygonEnd:function(){var t=+zn;Gn.add(t<0?He+t:t),this.lineStart=this.lineEnd=this.point=gn},sphere:function(){Gn.add(He)}};function jn(){qn.point=Un}function Bn(){Vn(Mn,wn)}function Un(t,e){qn.point=Vn,Mn=t,wn=e,En=t*=Je,Nn=en(e=(e*=Je)/2+$e),Sn=un(e)}function Vn(t,e){var n=(t*=Je)-En,r=n>=0?1:-1,i=r*n,o=en(e=(e*=Je)/2+$e),a=un(e),s=Sn*a,u=Nn*o+s*en(i),l=s*r*un(i);zn.add(tn(l,u)),En=t,Nn=o,Sn=a}function Wn(t){return Gn=new Yt,bn(t,qn),2*Gn}function Yn(t){return[tn(t[1],t[0]),pn(t[2])]}function Xn(t){var e=t[0],n=t[1],r=en(n);return[r*en(e),r*un(e),un(n)]}function $n(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Hn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Qn(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Jn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Kn(t){var e=cn(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Zn,tr,er,nr,rr,ir,or,ar,sr,ur,lr,cr,hr,fr,pr,dr,gr={point:yr,lineStart:vr,lineEnd:mr,polygonStart:function(){gr.point=xr,gr.lineStart=br,gr.lineEnd=Mr,Rn=new Yt,qn.polygonStart()},polygonEnd:function(){qn.polygonEnd(),gr.point=yr,gr.lineStart=vr,gr.lineEnd=mr,zn<0?(In=-(On=180),Cn=-(Pn=90)):Rn>Ve?Pn=90:Rn<-1e-6&&(Cn=-90),Fn[0]=In,Fn[1]=On},sphere:function(){In=-(On=180),Cn=-(Pn=90)}};function yr(t,e){Dn.push(Fn=[In=t,On=t]),e<Cn&&(Cn=e),e>Pn&&(Pn=e)}function _r(t,e){var n=Xn([t*Je,e*Je]);if(kn){var r=Hn(kn,n),i=Hn([r[1],-r[0],0],r);Kn(i),i=Yn(i);var o,a=t-Ln,s=a>0?1:-1,u=i[0]*Qe*s,l=Ke(a)>180;l^(s*Ln<u&&u<s*t)?(o=i[1]*Qe)>Pn&&(Pn=o):l^(s*Ln<(u=(u+360)%360-180)&&u<s*t)?(o=-i[1]*Qe)<Cn&&(Cn=o):(e<Cn&&(Cn=e),e>Pn&&(Pn=e)),l?t<Ln?wr(In,t)>wr(In,On)&&(On=t):wr(t,On)>wr(In,On)&&(In=t):On>=In?(t<In&&(In=t),t>On&&(On=t)):t>Ln?wr(In,t)>wr(In,On)&&(On=t):wr(t,On)>wr(In,On)&&(In=t)}else Dn.push(Fn=[In=t,On=t]);e<Cn&&(Cn=e),e>Pn&&(Pn=e),kn=n,Ln=t}function vr(){gr.point=_r}function mr(){Fn[0]=In,Fn[1]=On,gr.point=yr,kn=null}function xr(t,e){if(kn){var n=t-Ln;Rn.add(Ke(n)>180?n+(n>0?360:-360):n)}else An=t,Tn=e;qn.point(t,e),_r(t,e)}function br(){qn.lineStart()}function Mr(){xr(An,Tn),qn.lineEnd(),Ke(Rn)>Ve&&(In=-(On=180)),Fn[0]=In,Fn[1]=On,kn=null}function wr(t,e){return(e-=t)<0?e+360:e}function Er(t,e){return t[0]-e[0]}function Nr(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function Sr(t){var e,n,r,i,o,a,s;if(Pn=On=-(In=Cn=1/0),Dn=[],bn(t,gr),n=Dn.length){for(Dn.sort(Er),e=1,o=[r=Dn[0]];e<n;++e)Nr(r,(i=Dn[e])[0])||Nr(r,i[1])?(wr(r[0],i[1])>wr(r[0],r[1])&&(r[1]=i[1]),wr(i[0],r[1])>wr(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,e=0,r=o[n=o.length-1];e<=n;r=i,++e)i=o[e],(s=wr(r[1],i[0]))>a&&(a=s,In=i[0],On=r[1])}return Dn=Fn=null,In===1/0||Cn===1/0?[[NaN,NaN],[NaN,NaN]]:[[In,Cn],[On,Pn]]}var Ir={sphere:gn,point:Cr,lineStart:Pr,lineEnd:Tr,polygonStart:function(){Ir.lineStart=kr,Ir.lineEnd=Rr},polygonEnd:function(){Ir.lineStart=Pr,Ir.lineEnd=Tr}};function Cr(t,e){t*=Je;var n=en(e*=Je);Or(n*en(t),n*un(t),un(e))}function Or(t,e,n){++Zn,er+=(t-er)/Zn,nr+=(e-nr)/Zn,rr+=(n-rr)/Zn}function Pr(){Ir.point=Lr}function Lr(t,e){t*=Je;var n=en(e*=Je);fr=n*en(t),pr=n*un(t),dr=un(e),Ir.point=Ar,Or(fr,pr,dr)}function Ar(t,e){t*=Je;var n=en(e*=Je),r=n*en(t),i=n*un(t),o=un(e),a=tn(cn((a=pr*o-dr*i)*a+(a=dr*r-fr*o)*a+(a=fr*i-pr*r)*a),fr*r+pr*i+dr*o);tr+=a,ir+=a*(fr+(fr=r)),or+=a*(pr+(pr=i)),ar+=a*(dr+(dr=o)),Or(fr,pr,dr)}function Tr(){Ir.point=Cr}function kr(){Ir.point=Dr}function Rr(){Fr(cr,hr),Ir.point=Cr}function Dr(t,e){cr=t,hr=e,t*=Je,e*=Je,Ir.point=Fr;var n=en(e);fr=n*en(t),pr=n*un(t),dr=un(e),Or(fr,pr,dr)}function Fr(t,e){t*=Je;var n=en(e*=Je),r=n*en(t),i=n*un(t),o=un(e),a=pr*o-dr*i,s=dr*r-fr*o,u=fr*i-pr*r,l=on(a,s,u),c=pn(l),h=l&&-c/l;sr.add(h*a),ur.add(h*s),lr.add(h*u),tr+=c,ir+=c*(fr+(fr=r)),or+=c*(pr+(pr=i)),ar+=c*(dr+(dr=o)),Or(fr,pr,dr)}function zr(t){Zn=tr=er=nr=rr=ir=or=ar=0,sr=new Yt,ur=new Yt,lr=new Yt,bn(t,Ir);var e=+sr,n=+ur,r=+lr,i=on(e,n,r);return i<We&&(e=ir,n=or,r=ar,tr<Ve&&(e=er,n=nr,r=rr),(i=on(e,n,r))<We)?[NaN,NaN]:[tn(n,e)*Qe,pn(r/i)*Qe]}function Gr(t){return function(){return t}}function qr(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function jr(t,e){return[Ke(t)>Ye?t+Math.round(-t/He)*He:t,e]}function Br(t,e,n){return(t%=He)?e||n?qr(Vr(t),Wr(e,n)):Vr(t):e||n?Wr(e,n):jr}function Ur(t){return function(e,n){return[(e+=t)>Ye?e-He:e<-Ye?e+He:e,n]}}function Vr(t){var e=Ur(t);return e.invert=Ur(-t),e}function Wr(t,e){var n=en(t),r=un(t),i=en(e),o=un(e);function a(t,e){var a=en(e),s=en(t)*a,u=un(t)*a,l=un(e),c=l*n+s*r;return[tn(u*i-c*o,s*n-l*r),pn(c*i+u*o)]}return a.invert=function(t,e){var a=en(e),s=en(t)*a,u=un(t)*a,l=un(e),c=l*i-u*o;return[tn(u*i+l*o,s*n+c*r),pn(c*n-s*r)]},a}function Yr(t){function e(e){return(e=t(e[0]*Je,e[1]*Je))[0]*=Qe,e[1]*=Qe,e}return t=Br(t[0]*Je,t[1]*Je,t.length>2?t[2]*Je:0),e.invert=function(e){return(e=t.invert(e[0]*Je,e[1]*Je))[0]*=Qe,e[1]*=Qe,e},e}function Xr(t,e,n,r,i,o){if(n){var a=en(e),s=un(e),u=r*n;null==i?(i=e+r*He,o=e-u/2):(i=$r(a,i),o=$r(a,o),(r>0?i<o:i>o)&&(i+=r*He));for(var l,c=i;r>0?c>o:c<o;c-=u)l=Yn([a,-s*en(c),-s*un(c)]),t.point(l[0],l[1])}}function $r(t,e){(e=Xn(e))[0]-=t,Kn(e);var n=fn(-e[1]);return((-e[2]<0?-n:n)+He-Ve)%He}function Hr(){var t,e,n=Gr([0,0]),r=Gr(90),i=Gr(6),o={point:function(n,r){t.push(n=e(n,r)),n[0]*=Qe,n[1]*=Qe}};function a(){var a=n.apply(this,arguments),s=r.apply(this,arguments)*Je,u=i.apply(this,arguments)*Je;return t=[],e=Br(-a[0]*Je,-a[1]*Je,0).invert,Xr(o,s,u,1),a={type:"Polygon",coordinates:[t]},t=e=null,a}return a.center=function(t){return arguments.length?(n="function"==typeof t?t:Gr([+t[0],+t[1]]),a):n},a.radius=function(t){return arguments.length?(r="function"==typeof t?t:Gr(+t),a):r},a.precision=function(t){return arguments.length?(i="function"==typeof t?t:Gr(+t),a):i},a}function Qr(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:gn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Jr(t,e){return Ke(t[0]-e[0])<Ve&&Ke(t[1]-e[1])<Ve}function Kr(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Zr(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(Jr(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}a[0]+=2e-6}s.push(n=new Kr(r,t,null,!0)),u.push(n.o=new Kr(r,null,n,!1)),s.push(n=new Kr(a,t,null,!1)),u.push(n.o=new Kr(a,null,n,!0))}})),s.length){for(u.sort(e),ti(s),ti(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var l,c,h=s[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;l=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,a=l.length;o<a;++o)i.point((c=l[o])[0],c[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(p)for(l=f.p.z,o=l.length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else r(f.x,f.p.x,-1,i);f=f.p}l=(f=f.o).z,p=!p}while(!f.v);i.lineEnd()}}}function ti(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function ei(t){return Ke(t[0])<=Ye?t[0]:ln(t[0])*((Ke(t[0])+Ye)%He-Ye)}function ni(t,e){var n=ei(e),r=e[1],i=un(r),o=[un(n),-en(n),0],a=0,s=0,u=new Yt;1===i?r=Xe+Ve:-1===i&&(r=-Xe-Ve);for(var l=0,c=t.length;l<c;++l)if(f=(h=t[l]).length)for(var h,f,p=h[f-1],d=ei(p),g=p[1]/2+$e,y=un(g),_=en(g),v=0;v<f;++v,d=x,y=M,_=w,p=m){var m=h[v],x=ei(m),b=m[1]/2+$e,M=un(b),w=en(b),E=x-d,N=E>=0?1:-1,S=N*E,I=S>Ye,C=y*M;if(u.add(tn(C*N*un(S),_*w+C*en(S))),a+=I?E+N*He:E,I^d>=n^x>=n){var O=Hn(Xn(p),Xn(m));Kn(O);var P=Hn(o,O);Kn(P);var L=(I^E>=0?-1:1)*pn(P[2]);(r>L||r===L&&(O[0]||O[1]))&&(s+=I^E>=0?1:-1)}}return(a<-1e-6||a<Ve&&u<-1e-12)^1&s}function ri(t,e,n,r){return function(i){var o,a,s,u=e(i),l=Qr(),c=e(l),h=!1,f={point:p,lineStart:g,lineEnd:y,polygonStart:function(){f.point=_,f.lineStart=v,f.lineEnd=m,a=[],o=[]},polygonEnd:function(){f.point=p,f.lineStart=g,f.lineEnd=y,a=Ae(a);var t=ni(o,r);a.length?(h||(i.polygonStart(),h=!0),Zr(a,oi,t,n,i)):t&&(h||(i.polygonStart(),h=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(e,n){t(e,n)&&i.point(e,n)}function d(t,e){u.point(t,e)}function g(){f.point=d,u.lineStart()}function y(){f.point=p,u.lineEnd()}function _(t,e){s.push([t,e]),c.point(t,e)}function v(){c.lineStart(),s=[]}function m(){_(s[0][0],s[0][1]),c.lineEnd();var t,e,n,r,u=c.clean(),f=l.result(),p=f.length;if(s.pop(),o.push(s),s=null,p)if(1&u){if((e=(n=f[0]).length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else p>1&&2&u&&f.push(f.pop().concat(f.shift())),a.push(f.filter(ii))}return f}}function ii(t){return t.length>1}function oi(t,e){return((t=t.x)[0]<0?t[1]-Xe-Ve:Xe-t[1])-((e=e.x)[0]<0?e[1]-Xe-Ve:Xe-e[1])}jr.invert=jr;var ai=ri((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Ye:-Ye,u=Ke(o-n);Ke(u-Ye)<Ve?(t.point(n,r=(r+a)/2>0?Xe:-Xe),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=Ye&&(Ke(n-i)<Ve&&(n-=i*Ve),Ke(o-s)<Ve&&(o-=s*Ve),r=function(t,e,n,r){var i,o,a=un(t-n);return Ke(a)>Ve?Ze((un(e)*(o=en(r))*un(n)-un(r)*(i=en(e))*un(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*Xe,r.point(-Ye,i),r.point(0,i),r.point(Ye,i),r.point(Ye,0),r.point(Ye,-i),r.point(0,-i),r.point(-Ye,-i),r.point(-Ye,0),r.point(-Ye,i);else if(Ke(t[0]-e[0])>Ve){var o=t[0]<e[0]?Ye:-Ye;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-Ye,-Xe]);function si(t){var e=en(t),n=6*Je,r=e>0,i=Ke(e)>Ve;function o(t,n){return en(t)*en(n)>e}function a(t,n,r){var i=[1,0,0],o=Hn(Xn(t),Xn(n)),a=$n(o,o),s=o[0],u=a-s*s;if(!u)return!r&&t;var l=e*a/u,c=-e*s/u,h=Hn(i,o),f=Jn(i,l);Qn(f,Jn(o,c));var p=h,d=$n(f,p),g=$n(p,p),y=d*d-g*($n(f,f)-1);if(!(y<0)){var _=cn(y),v=Jn(p,(-d-_)/g);if(Qn(v,f),v=Yn(v),!r)return v;var m,x=t[0],b=n[0],M=t[1],w=n[1];b<x&&(m=x,x=b,b=m);var E=b-x,N=Ke(E-Ye)<Ve;if(!N&&w<M&&(m=M,M=w,w=m),N||E<Ve?N?M+w>0^v[1]<(Ke(v[0]-x)<Ve?M:w):M<=v[1]&&v[1]<=w:E>Ye^(x<=v[0]&&v[0]<=b)){var S=Jn(p,(-d+_)/g);return Qn(S,f),[v,Yn(S)]}}}function s(e,n){var i=r?t:Ye-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return ri(o,(function(t){var e,n,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(h,f){var p,d=[h,f],g=o(h,f),y=r?g?0:s(h,f):g?s(h+(h<0?Ye:-Ye),f):0;if(!e&&(l=u=g)&&t.lineStart(),g!==u&&(!(p=a(e,d))||Jr(e,p)||Jr(d,p))&&(d[2]=1),g!==u)c=0,g?(t.lineStart(),p=a(d,e),t.point(p[0],p[1])):(p=a(e,d),t.point(p[0],p[1],2),t.lineEnd()),e=p;else if(i&&e&&r^g){var _;y&n||!(_=a(d,e,!0))||(c=0,r?(t.lineStart(),t.point(_[0][0],_[0][1]),t.point(_[1][0],_[1][1]),t.lineEnd()):(t.point(_[1][0],_[1][1]),t.lineEnd(),t.lineStart(),t.point(_[0][0],_[0][1],3)))}!g||e&&Jr(e,d)||t.point(d[0],d[1]),e=d,u=g,n=y},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(l&&u)<<1}}}),(function(e,r,i,o){Xr(o,t,n,i,e,r)}),r?[0,-t]:[-Ye,t-Ye])}var ui,li,ci,hi,fi=1e9,pi=-fi;function di(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,l){var c=0,h=0;if(null==i||(c=a(i,s))!==(h=a(o,s))||u(i,o)<0^s>0)do{l.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+s+4)%4)!==h);else l.point(o[0],o[1])}function a(r,i){return Ke(r[0]-t)<Ve?i>0?0:3:Ke(r[0]-n)<Ve?i>0?2:1:Ke(r[1]-e)<Ve?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var u,l,c,h,f,p,d,g,y,_,v,m=a,x=Qr(),b={point:M,lineStart:function(){b.point=w,l&&l.push(c=[]);_=!0,y=!1,d=g=NaN},lineEnd:function(){u&&(w(h,f),p&&y&&x.rejoin(),u.push(x.result()));b.point=M,y&&m.lineEnd()},polygonStart:function(){m=x,u=[],l=[],v=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=l.length;n<i;++n)for(var o,a,s=l[n],u=1,c=s.length,h=s[0],f=h[0],p=h[1];u<c;++u)o=f,a=p,f=(h=s[u])[0],p=h[1],a<=r?p>r&&(f-o)*(r-a)>(p-a)*(t-o)&&++e:p<=r&&(f-o)*(r-a)<(p-a)*(t-o)&&--e;return e}(),n=v&&e,i=(u=Ae(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&Zr(u,s,e,o,a),a.polygonEnd());m=a,u=l=c=null}};function M(t,e){i(t,e)&&m.point(t,e)}function w(o,a){var s=i(o,a);if(l&&c.push([o,a]),_)h=o,f=a,p=s,_=!1,s&&(m.lineStart(),m.point(o,a));else if(s&&y)m.point(o,a);else{var u=[d=Math.max(pi,Math.min(fi,d)),g=Math.max(pi,Math.min(fi,g))],x=[o=Math.max(pi,Math.min(fi,o)),a=Math.max(pi,Math.min(fi,a))];!function(t,e,n,r,i,o){var a,s=t[0],u=t[1],l=0,c=1,h=e[0]-s,f=e[1]-u;if(a=n-s,h||!(a>0)){if(a/=h,h<0){if(a<l)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>l&&(l=a)}if(a=i-s,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>l&&(l=a)}else if(h>0){if(a<l)return;a<c&&(c=a)}if(a=r-u,f||!(a>0)){if(a/=f,f<0){if(a<l)return;a<c&&(c=a)}else if(f>0){if(a>c)return;a>l&&(l=a)}if(a=o-u,f||!(a<0)){if(a/=f,f<0){if(a>c)return;a>l&&(l=a)}else if(f>0){if(a<l)return;a<c&&(c=a)}return l>0&&(t[0]=s+l*h,t[1]=u+l*f),c<1&&(e[0]=s+c*h,e[1]=u+c*f),!0}}}}}(u,x,t,e,n,r)?s&&(m.lineStart(),m.point(o,a),v=!1):(y||(m.lineStart(),m.point(u[0],u[1])),m.point(x[0],x[1]),s||m.lineEnd(),v=!1)}d=o,g=a,y=s}return b}}var gi={sphere:gn,point:gn,lineStart:function(){gi.point=_i,gi.lineEnd=yi},lineEnd:gn,polygonStart:gn,polygonEnd:gn};function yi(){gi.point=gi.lineEnd=gn}function _i(t,e){li=t*=Je,ci=un(e*=Je),hi=en(e),gi.point=vi}function vi(t,e){t*=Je;var n=un(e*=Je),r=en(e),i=Ke(t-li),o=en(i),a=r*un(i),s=hi*n-ci*r*o,u=ci*n+hi*r*o;ui.add(tn(cn(a*a+s*s),u)),li=t,ci=n,hi=r}function mi(t){return ui=new Yt,bn(t,gi),+ui}var xi=[null,null],bi={type:"LineString",coordinates:xi};function Mi(t,e){return xi[0]=t,xi[1]=e,mi(bi)}var wi={Feature:function(t,e){return Ni(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(Ni(n[r].geometry,e))return!0;return!1}},Ei={Sphere:function(){return!0},Point:function(t,e){return Si(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Si(n[r],e))return!0;return!1},LineString:function(t,e){return Ii(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Ii(n[r],e))return!0;return!1},Polygon:function(t,e){return Ci(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Ci(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(Ni(n[r],e))return!0;return!1}};function Ni(t,e){return!(!t||!Ei.hasOwnProperty(t.type))&&Ei[t.type](t,e)}function Si(t,e){return 0===Mi(t,e)}function Ii(t,e){for(var n,r,i,o=0,a=t.length;o<a;o++){if(0===(r=Mi(t[o],e)))return!0;if(o>0&&(i=Mi(t[o],t[o-1]))>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<We*i)return!0;n=r}return!1}function Ci(t,e){return!!ni(t.map(Oi),Pi(e))}function Oi(t){return(t=t.map(Pi)).pop(),t}function Pi(t){return[t[0]*Je,t[1]*Je]}function Li(t,e,n){var r=ke(t,e-Ve,n).concat(e);return function(t){return r.map((function(e){return[t,e]}))}}function Ai(t,e,n){var r=ke(t,e-Ve,n).concat(e);return function(t){return r.map((function(e){return[e,t]}))}}function Ti(){var t,e,n,r,i,o,a,s,u,l,c,h,f=10,p=f,d=90,g=360,y=2.5;function _(){return{type:"MultiLineString",coordinates:v()}}function v(){return ke(nn(r/d)*d,n,d).map(c).concat(ke(nn(s/g)*g,a,g).map(h)).concat(ke(nn(e/f)*f,t,f).filter((function(t){return Ke(t%d)>Ve})).map(u)).concat(ke(nn(o/p)*p,i,p).filter((function(t){return Ke(t%g)>Ve})).map(l))}return _.lines=function(){return v().map((function(t){return{type:"LineString",coordinates:t}}))},_.outline=function(){return{type:"Polygon",coordinates:[c(r).concat(h(a).slice(1),c(n).reverse().slice(1),h(s).reverse().slice(1))]}},_.extent=function(t){return arguments.length?_.extentMajor(t).extentMinor(t):_.extentMinor()},_.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],r>n&&(t=r,r=n,n=t),s>a&&(t=s,s=a,a=t),_.precision(y)):[[r,s],[n,a]]},_.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),o>i&&(n=o,o=i,i=n),_.precision(y)):[[e,o],[t,i]]},_.step=function(t){return arguments.length?_.stepMajor(t).stepMinor(t):_.stepMinor()},_.stepMajor=function(t){return arguments.length?(d=+t[0],g=+t[1],_):[d,g]},_.stepMinor=function(t){return arguments.length?(f=+t[0],p=+t[1],_):[f,p]},_.precision=function(f){return arguments.length?(y=+f,u=Li(o,i,90),l=Ai(e,t,y),c=Li(s,a,90),h=Ai(r,n,y),_):y},_.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function ki(t,e){var n=t[0]*Je,r=t[1]*Je,i=e[0]*Je,o=e[1]*Je,a=en(r),s=un(r),u=en(o),l=un(o),c=a*en(n),h=a*un(n),f=u*en(i),p=u*un(i),d=2*pn(cn(dn(o-r)+a*u*dn(i-n))),g=un(d),y=d?function(t){var e=un(t*=d)/g,n=un(d-t)/g,r=n*c+e*f,i=n*h+e*p,o=n*s+e*l;return[tn(i,r)*Qe,tn(o,cn(r*r+i*i))*Qe]}:function(){return[n*Qe,r*Qe]};return y.distance=d,y}var Ri,Di,Fi,zi,Gi=t=>t,qi=new Yt,ji=new Yt,Bi={point:gn,lineStart:gn,lineEnd:gn,polygonStart:function(){Bi.lineStart=Ui,Bi.lineEnd=Yi},polygonEnd:function(){Bi.lineStart=Bi.lineEnd=Bi.point=gn,qi.add(Ke(ji)),ji=new Yt},result:function(){var t=qi/2;return qi=new Yt,t}};function Ui(){Bi.point=Vi}function Vi(t,e){Bi.point=Wi,Ri=Fi=t,Di=zi=e}function Wi(t,e){ji.add(zi*t-Fi*e),Fi=t,zi=e}function Yi(){Wi(Ri,Di)}var Xi=Bi,$i=1/0,Hi=$i,Qi=-$i,Ji=Qi,Ki={point:function(t,e){t<$i&&($i=t);t>Qi&&(Qi=t);e<Hi&&(Hi=e);e>Ji&&(Ji=e)},lineStart:gn,lineEnd:gn,polygonStart:gn,polygonEnd:gn,result:function(){var t=[[$i,Hi],[Qi,Ji]];return Qi=Ji=-(Hi=$i=1/0),t}};var Zi,to,eo,no,ro=Ki,io=0,oo=0,ao=0,so=0,uo=0,lo=0,co=0,ho=0,fo=0,po={point:go,lineStart:yo,lineEnd:mo,polygonStart:function(){po.lineStart=xo,po.lineEnd=bo},polygonEnd:function(){po.point=go,po.lineStart=yo,po.lineEnd=mo},result:function(){var t=fo?[co/fo,ho/fo]:lo?[so/lo,uo/lo]:ao?[io/ao,oo/ao]:[NaN,NaN];return io=oo=ao=so=uo=lo=co=ho=fo=0,t}};function go(t,e){io+=t,oo+=e,++ao}function yo(){po.point=_o}function _o(t,e){po.point=vo,go(eo=t,no=e)}function vo(t,e){var n=t-eo,r=e-no,i=cn(n*n+r*r);so+=i*(eo+t)/2,uo+=i*(no+e)/2,lo+=i,go(eo=t,no=e)}function mo(){po.point=go}function xo(){po.point=Mo}function bo(){wo(Zi,to)}function Mo(t,e){po.point=wo,go(Zi=eo=t,to=no=e)}function wo(t,e){var n=t-eo,r=e-no,i=cn(n*n+r*r);so+=i*(eo+t)/2,uo+=i*(no+e)/2,lo+=i,co+=(i=no*t-eo*e)*(eo+t),ho+=i*(no+e),fo+=3*i,go(eo=t,no=e)}var Eo=po;function No(t){this._context=t}No.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,He)}},result:gn};var So,Io,Co,Oo,Po,Lo=new Yt,Ao={point:gn,lineStart:function(){Ao.point=To},lineEnd:function(){So&&ko(Io,Co),Ao.point=gn},polygonStart:function(){So=!0},polygonEnd:function(){So=null},result:function(){var t=+Lo;return Lo=new Yt,t}};function To(t,e){Ao.point=ko,Io=Oo=t,Co=Po=e}function ko(t,e){Oo-=t,Po-=e,Lo.add(cn(Oo*Oo+Po*Po)),Oo=t,Po=e}var Ro=Ao;function Do(){this._string=[]}function Fo(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function zo(t){return function(e){var n=new Go;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Go(){}function qo(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),bn(n,t.stream(ro)),e(ro.result()),null!=r&&t.clipExtent(r),t}function jo(t,e,n){return qo(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,s])}),n)}function Bo(t,e,n){return jo(t,[[0,0],e],n)}function Uo(t,e,n){return qo(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])}),n)}function Vo(t,e,n){return qo(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])}),n)}Do.prototype={_radius:4.5,_circle:Fo(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Fo(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},Go.prototype={constructor:Go,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Wo=en(30*Je);function Yo(t,e){return+e?function(t,e){function n(r,i,o,a,s,u,l,c,h,f,p,d,g,y){var _=l-r,v=c-i,m=_*_+v*v;if(m>4*e&&g--){var x=a+f,b=s+p,M=u+d,w=cn(x*x+b*b+M*M),E=pn(M/=w),N=Ke(Ke(M)-1)<Ve||Ke(o-h)<Ve?(o+h)/2:tn(b,x),S=t(N,E),I=S[0],C=S[1],O=I-r,P=C-i,L=v*O-_*P;(L*L/m>e||Ke((_*O+v*P)/m-.5)>.3||a*f+s*p+u*d<Wo)&&(n(r,i,o,a,s,u,I,C,N,x/=w,b/=w,M,g,y),y.point(I,C),n(I,C,N,x,b,M,l,c,h,f,p,d,g,y))}}return function(e){var r,i,o,a,s,u,l,c,h,f,p,d,g={point:y,lineStart:_,lineEnd:m,polygonStart:function(){e.polygonStart(),g.lineStart=x},polygonEnd:function(){e.polygonEnd(),g.lineStart=_}};function y(n,r){n=t(n,r),e.point(n[0],n[1])}function _(){c=NaN,g.point=v,e.lineStart()}function v(r,i){var o=Xn([r,i]),a=t(r,i);n(c,h,l,f,p,d,c=a[0],h=a[1],l=r,f=o[0],p=o[1],d=o[2],16,e),e.point(c,h)}function m(){g.point=y,e.lineEnd()}function x(){_(),g.point=b,g.lineEnd=M}function b(t,e){v(r=t,e),i=c,o=h,a=f,s=p,u=d,g.point=v}function M(){n(c,h,l,f,p,d,i,o,r,a,s,u,16,e),g.lineEnd=m,m()}return g}}(t,e):function(t){return zo({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var Xo=zo({point:function(t,e){this.stream.point(t*Je,e*Je)}});function $o(t,e,n,r,i,o){if(!o)return function(t,e,n,r,i){function o(o,a){return[e+t*(o*=r),n-t*(a*=i)]}return o.invert=function(o,a){return[(o-e)/t*r,(n-a)/t*i]},o}(t,e,n,r,i);var a=en(o),s=un(o),u=a*t,l=s*t,c=a/t,h=s/t,f=(s*n-a*e)/t,p=(s*e+a*n)/t;function d(t,o){return[u*(t*=r)-l*(o*=i)+e,n-l*t-u*o]}return d.invert=function(t,e){return[r*(c*t-h*e+f),i*(p-h*t-c*e)]},d}function Ho(t){return Qo((function(){return t}))()}function Qo(t){var e,n,r,i,o,a,s,u,l,c,h=150,f=480,p=250,d=0,g=0,y=0,_=0,v=0,m=0,x=1,b=1,M=null,w=ai,E=null,N=Gi,S=.5;function I(t){return u(t[0]*Je,t[1]*Je)}function C(t){return(t=u.invert(t[0],t[1]))&&[t[0]*Qe,t[1]*Qe]}function O(){var t=$o(h,0,0,x,b,m).apply(null,e(d,g)),r=$o(h,f-t[0],p-t[1],x,b,m);return n=Br(y,_,v),s=qr(e,r),u=qr(n,s),a=Yo(s,S),P()}function P(){return l=c=null,I}return I.stream=function(t){return l&&c===t?l:l=Xo(function(t){return zo({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(w(a(N(c=t)))))},I.preclip=function(t){return arguments.length?(w=t,M=void 0,P()):w},I.postclip=function(t){return arguments.length?(N=t,E=r=i=o=null,P()):N},I.clipAngle=function(t){return arguments.length?(w=+t?si(M=t*Je):(M=null,ai),P()):M*Qe},I.clipExtent=function(t){return arguments.length?(N=null==t?(E=r=i=o=null,Gi):di(E=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),P()):null==E?null:[[E,r],[i,o]]},I.scale=function(t){return arguments.length?(h=+t,O()):h},I.translate=function(t){return arguments.length?(f=+t[0],p=+t[1],O()):[f,p]},I.center=function(t){return arguments.length?(d=t[0]%360*Je,g=t[1]%360*Je,O()):[d*Qe,g*Qe]},I.rotate=function(t){return arguments.length?(y=t[0]%360*Je,_=t[1]%360*Je,v=t.length>2?t[2]%360*Je:0,O()):[y*Qe,_*Qe,v*Qe]},I.angle=function(t){return arguments.length?(m=t%360*Je,O()):m*Qe},I.reflectX=function(t){return arguments.length?(x=t?-1:1,O()):x<0},I.reflectY=function(t){return arguments.length?(b=t?-1:1,O()):b<0},I.precision=function(t){return arguments.length?(a=Yo(s,S=t*t),P()):cn(S)},I.fitExtent=function(t,e){return jo(I,t,e)},I.fitSize=function(t,e){return Bo(I,t,e)},I.fitWidth=function(t,e){return Uo(I,t,e)},I.fitHeight=function(t,e){return Vo(I,t,e)},function(){return e=t.apply(this,arguments),I.invert=e.invert&&C,O()}}function Jo(t){var e=0,n=Ye/3,r=Qo(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Je,n=t[1]*Je):[e*Qe,n*Qe]},i}function Ko(t,e){var n=un(t),r=(n+un(e))/2;if(Ke(r)<Ve)return function(t){var e=en(t);function n(t,n){return[t*e,un(n)/e]}return n.invert=function(t,n){return[t/e,pn(n*e)]},n}(t);var i=1+n*(2*r-n),o=cn(i)/r;function a(t,e){var n=cn(i-2*r*un(e))/r;return[n*un(t*=r),o-n*en(t)]}return a.invert=function(t,e){var n=o-e,a=tn(t,Ke(n))*ln(n);return n*r<0&&(a-=Ye*ln(t)*ln(n)),[a/r,pn((i-(t*t+n*n)*r*r)/(2*r))]},a}function Zo(){return Jo(Ko).scale(155.424).center([0,33.6442])}function ta(){return Zo().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function ea(t){return function(e,n){var r=en(e),i=en(n),o=t(r*i);return o===1/0?[2,0]:[o*i*un(e),o*un(n)]}}function na(t){return function(e,n){var r=cn(e*e+n*n),i=t(r),o=un(i),a=en(i);return[tn(e*o,r*a),pn(r&&n*o/r)]}}var ra=ea((function(t){return cn(2/(1+t))}));ra.invert=na((function(t){return 2*pn(t/2)}));var ia=ea((function(t){return(t=fn(t))&&t/un(t)}));function oa(t,e){return[t,an(hn((Xe+e)/2))]}function aa(t){var e,n,r,i=Ho(t),o=i.center,a=i.scale,s=i.translate,u=i.clipExtent,l=null;function c(){var o=Ye*a(),s=i(Yr(i.rotate()).invert([0,0]));return u(null==l?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:t===oa?[[Math.max(s[0]-o,l),e],[Math.min(s[0]+o,n),r]]:[[l,Math.max(s[1]-o,e)],[n,Math.min(s[1]+o,r)]])}return i.scale=function(t){return arguments.length?(a(t),c()):a()},i.translate=function(t){return arguments.length?(s(t),c()):s()},i.center=function(t){return arguments.length?(o(t),c()):o()},i.clipExtent=function(t){return arguments.length?(null==t?l=e=n=r=null:(l=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),c()):null==l?null:[[l,e],[n,r]]},c()}function sa(t){return hn((Xe+t)/2)}function ua(t,e){var n=en(t),r=t===e?un(t):an(n/en(e))/an(sa(e)/sa(t)),i=n*sn(sa(t),r)/r;if(!r)return oa;function o(t,e){i>0?e<-Xe+Ve&&(e=-Xe+Ve):e>Xe-Ve&&(e=Xe-Ve);var n=i/sn(sa(e),r);return[n*un(r*t),i-n*en(r*t)]}return o.invert=function(t,e){var n=i-e,o=ln(r)*cn(t*t+n*n),a=tn(t,Ke(n))*ln(n);return n*r<0&&(a-=Ye*ln(t)*ln(n)),[a/r,2*Ze(sn(i/o,1/r))-Xe]},o}function la(t,e){return[t,e]}function ca(){return Ho(la).scale(152.63)}function ha(t,e){var n=en(t),r=t===e?un(t):(n-en(e))/(e-t),i=n/r+t;if(Ke(r)<Ve)return la;function o(t,e){var n=i-e,o=r*t;return[n*un(o),i-n*en(o)]}return o.invert=function(t,e){var n=i-e,o=tn(t,Ke(n))*ln(n);return n*r<0&&(o-=Ye*ln(t)*ln(n)),[o/r,i-ln(r)*cn(t*t+n*n)]},o}ia.invert=na((function(t){return t})),oa.invert=function(t,e){return[t,2*Ze(rn(e))-Xe]},la.invert=la;var fa=1.340264,pa=-.081106,da=893e-6,ga=.003796,ya=cn(3)/2;function _a(t,e){var n=pn(ya*un(e)),r=n*n,i=r*r*r;return[t*en(n)/(ya*(fa+3*pa*r+i*(7*da+9*ga*r))),n*(fa+pa*r+i*(da+ga*r))]}function va(t,e){var n=en(e),r=en(t)*n;return[n*un(t)/r,un(e)/r]}function ma(){return Ho(va).scale(144.049).clipAngle(60)}function xa(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function ba(t,e){return[en(e)*un(t),un(e)]}function Ma(){return Ho(ba).scale(249.5).clipAngle(90.000001)}function wa(t,e){var n=en(e),r=1+en(t)*n;return[n*un(t)/r,un(e)/r]}function Ea(t,e){return[an(hn((Xe+e)/2)),-t]}_a.invert=function(t,e){for(var n,r=e,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=n=(r*(fa+pa*i+o*(da+ga*i))-e)/(fa+3*pa*i+o*(7*da+9*ga*i)))*r)*i*i,!(Ke(n)<We));++a);return[ya*t*(fa+3*pa*i+o*(7*da+9*ga*i))/en(r),pn(un(r)/ya)]},va.invert=na(Ze),xa.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(Ke(n)>Ve&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},ba.invert=na(pn),wa.invert=na((function(t){return 2*Ze(t)})),Ea.invert=function(t,e){return[-e,2*Ze(rn(t))-Xe]};var Na=Object.freeze({__proto__:null,geoArea:Wn,geoBounds:Sr,geoCentroid:zr,geoCircle:Hr,geoClipAntimeridian:ai,geoClipCircle:si,geoClipExtent:function(){var t,e,n,r=0,i=0,o=960,a=500;return n={stream:function(n){return t&&e===n?t:t=di(r,i,o,a)(e=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],o=+s[1][0],a=+s[1][1],t=e=null,n):[[r,i],[o,a]]}}},geoClipRectangle:di,geoContains:function(t,e){return(t&&wi.hasOwnProperty(t.type)?wi[t.type]:Ni)(t,e)},geoDistance:Mi,geoGraticule:Ti,geoGraticule10:function(){return Ti()()},geoInterpolate:ki,geoLength:mi,geoPath:function(t,e){var n,r,i=4.5;function o(t){return t&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),bn(t,n(r))),r.result()}return o.area=function(t){return bn(t,n(Xi)),Xi.result()},o.measure=function(t){return bn(t,n(Ro)),Ro.result()},o.bounds=function(t){return bn(t,n(ro)),ro.result()},o.centroid=function(t){return bn(t,n(Eo)),Eo.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,Gi):(t=e).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(e=null,new Do):new No(e=t),"function"!=typeof i&&r.pointRadius(i),o):e},o.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(e)},geoAlbers:ta,geoAlbersUsa:function(){var t,e,n,r,i,o,a=ta(),s=Zo().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=Zo().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,e){o=[t,e]}};function c(t){var e=t[0],a=t[1];return o=null,n.point(e,a),o||(r.point(e,a),o)||(i.point(e,a),o)}function h(){return t=e=null,c}return c.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:a).invert(t)},c.stream=function(n){return t&&e===n?t:(r=[a.stream(e=n),s.stream(n),u.stream(n)],i=r.length,t={point:function(t,e){for(var n=-1;++n<i;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},c.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),u.precision(t),h()):a.precision()},c.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),u.scale(t),c.translate(a.translate())):a.scale()},c.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),o=+t[0],c=+t[1];return n=a.translate(t).clipExtent([[o-.455*e,c-.238*e],[o+.455*e,c+.238*e]]).stream(l),r=s.translate([o-.307*e,c+.201*e]).clipExtent([[o-.425*e+Ve,c+.12*e+Ve],[o-.214*e-Ve,c+.234*e-Ve]]).stream(l),i=u.translate([o-.205*e,c+.212*e]).clipExtent([[o-.214*e+Ve,c+.166*e+Ve],[o-.115*e-Ve,c+.234*e-Ve]]).stream(l),h()},c.fitExtent=function(t,e){return jo(c,t,e)},c.fitSize=function(t,e){return Bo(c,t,e)},c.fitWidth=function(t,e){return Uo(c,t,e)},c.fitHeight=function(t,e){return Vo(c,t,e)},c.scale(1070)},geoAzimuthalEqualArea:function(){return Ho(ra).scale(124.75).clipAngle(179.999)},geoAzimuthalEqualAreaRaw:ra,geoAzimuthalEquidistant:function(){return Ho(ia).scale(79.4188).clipAngle(179.999)},geoAzimuthalEquidistantRaw:ia,geoConicConformal:function(){return Jo(ua).scale(109.5).parallels([30,30])},geoConicConformalRaw:ua,geoConicEqualArea:Zo,geoConicEqualAreaRaw:Ko,geoConicEquidistant:function(){return Jo(ha).scale(131.154).center([0,13.9389])},geoConicEquidistantRaw:ha,geoEqualEarth:function(){return Ho(_a).scale(177.158)},geoEqualEarthRaw:_a,geoEquirectangular:ca,geoEquirectangularRaw:la,geoGnomonic:ma,geoGnomonicRaw:va,geoIdentity:function(){var t,e,n,r,i,o,a,s=1,u=0,l=0,c=1,h=1,f=0,p=null,d=1,g=1,y=zo({point:function(t,e){var n=m([t,e]);this.stream.point(n[0],n[1])}}),_=Gi;function v(){return d=s*c,g=s*h,o=a=null,m}function m(n){var r=n[0]*d,i=n[1]*g;if(f){var o=i*t-r*e;r=r*t+i*e,i=o}return[r+u,i+l]}return m.invert=function(n){var r=n[0]-u,i=n[1]-l;if(f){var o=i*t+r*e;r=r*t-i*e,i=o}return[r/d,i/g]},m.stream=function(t){return o&&a===t?o:o=y(_(a=t))},m.postclip=function(t){return arguments.length?(_=t,p=n=r=i=null,v()):_},m.clipExtent=function(t){return arguments.length?(_=null==t?(p=n=r=i=null,Gi):di(p=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),v()):null==p?null:[[p,n],[r,i]]},m.scale=function(t){return arguments.length?(s=+t,v()):s},m.translate=function(t){return arguments.length?(u=+t[0],l=+t[1],v()):[u,l]},m.angle=function(n){return arguments.length?(e=un(f=n%360*Je),t=en(f),v()):f*Qe},m.reflectX=function(t){return arguments.length?(c=t?-1:1,v()):c<0},m.reflectY=function(t){return arguments.length?(h=t?-1:1,v()):h<0},m.fitExtent=function(t,e){return jo(m,t,e)},m.fitSize=function(t,e){return Bo(m,t,e)},m.fitWidth=function(t,e){return Uo(m,t,e)},m.fitHeight=function(t,e){return Vo(m,t,e)},m},geoProjection:Ho,geoProjectionMutator:Qo,geoMercator:function(){return aa(oa).scale(961/He)},geoMercatorRaw:oa,geoNaturalEarth1:function(){return Ho(xa).scale(175.295)},geoNaturalEarth1Raw:xa,geoOrthographic:Ma,geoOrthographicRaw:ba,geoStereographic:function(){return Ho(wa).scale(250).clipAngle(142)},geoStereographicRaw:wa,geoTransverseMercator:function(){var t=aa(Ea),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)},geoTransverseMercatorRaw:Ea,geoRotation:Yr,geoStream:bn,geoTransform:function(t){return{stream:zo(t)}}}),Sa=Math.abs,Ia=Math.atan,Ca=Math.atan2,Oa=Math.cos,Pa=Math.exp,La=Math.floor,Aa=Math.log,Ta=Math.max,ka=Math.min,Ra=Math.pow,Da=Math.round,Fa=Math.sign||function(t){return t>0?1:t<0?-1:0},za=Math.sin,Ga=Math.tan,qa=1e-6,ja=1e-12,Ba=Math.PI,Ua=Ba/2,Va=Ba/4,Wa=Math.SQRT1_2,Ya=Za(2),Xa=Za(Ba),$a=2*Ba,Ha=180/Ba,Qa=Ba/180;function Ja(t){return t>1?Ua:t<-1?-Ua:Math.asin(t)}function Ka(t){return t>1?0:t<-1?Ba:Math.acos(t)}function Za(t){return t>0?Math.sqrt(t):0}function ts(t){return(Pa(t)-Pa(-t))/2}function es(t){return(Pa(t)+Pa(-t))/2}function ns(t){var e=Ga(t/2),n=2*Aa(Oa(t/2))/(e*e);function r(t,e){var r=Oa(t),i=Oa(e),o=za(e),a=i*r,s=-((1-a?Aa((1+a)/2)/(1-a):-.5)+n/(1+a));return[s*i*za(t),s*o]}return r.invert=function(e,r){var i,o=Za(e*e+r*r),a=-t/2,s=50;if(!o)return[0,0];do{var u=a/2,l=Oa(u),c=za(u),h=c/l,f=-Aa(Sa(l));a-=i=(2/h*f-n*h-o)/(-f/(c*c)+1-n/(2*l*l))*(l<0?.7:1)}while(Sa(i)>qa&&--s>0);var p=za(a);return[Ca(e*p,o*Oa(a)),Ja(r*p/o)]},r}function rs(t,e){var n=Oa(e),r=function(t){return t?t/Math.sin(t):1}(Ka(n*Oa(t/=2)));return[2*n*za(t)*r,za(e)*r]}function is(t){var e=za(t),n=Oa(t),r=t>=0?1:-1,i=Ga(r*t),o=(1+e-n)/2;function a(t,a){var s=Oa(a),u=Oa(t/=2);return[(1+s)*za(t),(r*a>-Ca(u,i)-.001?0:10*-r)+o+za(a)*n-(1+s)*e*u]}return a.invert=function(t,a){var s=0,u=0,l=50;do{var c=Oa(s),h=za(s),f=Oa(u),p=za(u),d=1+f,g=d*h-t,y=o+p*n-d*e*c-a,_=d*c/2,v=-h*p,m=e*d*h/2,x=n*f+e*c*p,b=v*m-x*_,M=(y*v-g*x)/b/2,w=(g*m-y*_)/b;Sa(w)>2&&(w/=2),s-=M,u-=w}while((Sa(M)>qa||Sa(w)>qa)&&--l>0);return r*u>-Ca(Oa(s),i)-.001?[2*s,u]:null},a}function os(t,e){var n=Ga(e/2),r=Za(1-n*n),i=1+r*Oa(t/=2),o=za(t)*r/i,a=n/i,s=o*o,u=a*a;return[4/3*o*(3+s-3*u),4/3*a*(3+3*s-u)]}rs.invert=function(t,e){if(!(t*t+4*e*e>Ba*Ba+qa)){var n=t,r=e,i=25;do{var o,a=za(n),s=za(n/2),u=Oa(n/2),l=za(r),c=Oa(r),h=za(2*r),f=l*l,p=c*c,d=s*s,g=1-p*u*u,y=g?Ka(c*u)*Za(o=1/g):o=0,_=2*y*c*s-t,v=y*l-e,m=o*(p*d+y*c*u*f),x=o*(.5*a*h-2*y*l*s),b=.25*o*(h*s-y*l*p*a),M=o*(f*u+y*d*c),w=x*b-M*m;if(!w)break;var E=(v*x-_*M)/w,N=(_*b-v*m)/w;n-=E,r-=N}while((Sa(E)>qa||Sa(N)>qa)&&--i>0);return[n,r]}},os.invert=function(t,e){if(e*=3/8,!(t*=3/8)&&Sa(e)>1)return null;var n=1+t*t+e*e,r=Za((n-Za(n*n-4*e*e))/2),i=Ja(r)/3,o=r?function(t){return Aa(t+Za(t*t-1))}(Sa(e/r))/3:function(t){return Aa(t+Za(t*t+1))}(Sa(t))/3,a=Oa(i),s=es(o),u=s*s-a*a;return[2*Fa(t)*Ca(ts(o)*a,.25-u),2*Fa(e)*Ca(s*za(i),.25+u)]};var as=Za(8),ss=Aa(1+Ya);function us(t,e){var n=Sa(e);return n<Va?[t,Aa(Ga(Va+e/2))]:[t*Oa(n)*(2*Ya-1/za(n)),Fa(e)*(2*Ya*(n-Va)-Aa(Ga(n/2)))]}function ls(t){var e=2*Ba/t;function n(t,n){var r=ia(t,n);if(Sa(t)>Ua){var i=Ca(r[1],r[0]),o=Za(r[0]*r[0]+r[1]*r[1]),a=e*Da((i-Ua)/e)+Ua,s=Ca(za(i-=a),2-Oa(i));i=a+Ja(Ba/o*za(s))-s,r[0]=o*Oa(i),r[1]=o*za(i)}return r}return n.invert=function(t,n){var r=Za(t*t+n*n);if(r>Ua){var i=Ca(n,t),o=e*Da((i-Ua)/e)+Ua,a=i>o?-1:1,s=r*Oa(o-i),u=1/Ga(a*Ka((s-Ba)/Za(Ba*(Ba-2*s)+r*r)));i=o+2*Ia((u+a*Za(u*u-3))/3),t=r*Oa(i),n=r*za(i)}return ia.invert(t,n)},n}function cs(t,e){if(arguments.length<2&&(e=t),1===e)return ra;if(e===1/0)return hs;function n(n,r){var i=ra(n/e,r);return i[0]*=t,i}return n.invert=function(n,r){var i=ra.invert(n/t,r);return i[0]*=e,i},n}function hs(t,e){return[t*Oa(e)/Oa(e/=2),2*za(e)]}function fs(t,e,n){var r,i,o,a=100;n=void 0===n?0:+n,e=+e;do{(i=t(n))===(o=t(n+qa))&&(o=i+qa),n-=r=-1e-6*(i-e)/(i-o)}while(a-- >0&&Sa(r)>qa);return a<0?NaN:n}function ps(t,e,n){return void 0===e&&(e=40),void 0===n&&(n=ja),function(r,i,o,a){var s,u,l;o=void 0===o?0:+o,a=void 0===a?0:+a;for(var c=0;c<e;c++){var h=t(o,a),f=h[0]-r,p=h[1]-i;if(Sa(f)<n&&Sa(p)<n)break;var d=f*f+p*p;if(d>s)o-=u/=2,a-=l/=2;else{s=d;var g=(o>0?-1:1)*n,y=(a>0?-1:1)*n,_=t(o+g,a),v=t(o,a+y),m=(_[0]-h[0])/g,x=(_[1]-h[1])/g,b=(v[0]-h[0])/y,M=(v[1]-h[1])/y,w=M*m-x*b,E=(Sa(w)<.5?.5:1)/w;if(o+=u=(p*b-f*M)*E,a+=l=(f*x-p*m)*E,Sa(u)<n&&Sa(l)<n)break}}return[o,a]}}function ds(){var t=cs(1.68,2);function e(e,n){if(e+n<-1.4){var r=(e-n+1.6)*(e+n+1.4)/8;e+=r,n-=.8*r*za(n+Ba/2)}var i=t(e,n),o=(1-Oa(e*n))/12;return i[1]<0&&(i[0]*=1+o),i[1]>0&&(i[1]*=1+o/1.5*i[0]*i[0]),i}return e.invert=ps(e),e}function gs(t,e){var n,r=t*za(e),i=30;do{e-=n=(e+za(e)-r)/(1+Oa(e))}while(Sa(n)>qa&&--i>0);return e/2}function ys(t,e,n){function r(r,i){return[t*r*Oa(i=gs(n,i)),e*za(i)]}return r.invert=function(r,i){return i=Ja(i/e),[r/(t*Oa(i)),Ja((2*i+za(2*i))/n)]},r}us.invert=function(t,e){if((r=Sa(e))<ss)return[t,2*Ia(Pa(e))-Ua];var n,r,i=Va,o=25;do{var a=Oa(i/2),s=Ga(i/2);i-=n=(as*(i-Va)-Aa(s)-r)/(as-a*a/(2*s))}while(Sa(n)>ja&&--o>0);return[t/(Oa(i)*(as-1/za(i))),Fa(e)*i]},hs.invert=function(t,e){var n=2*Ja(e/2);return[t*Oa(n/2)/Oa(n),n]};var _s=ys(Ya/Ua,Ya,Ba);var vs=2.00276,ms=1.11072;function xs(t,e){var n=gs(Ba,e);return[vs*t/(1/Oa(e)+ms/Oa(n)),(e+Ya*za(n))/vs]}function bs(t){var e=0,n=Qo(t),r=n(e);return r.parallel=function(t){return arguments.length?n(e=t*Qa):e*Ha},r}function Ms(t,e){return[t*Oa(e),e]}function ws(t){if(!t)return Ms;var e=1/Ga(t);function n(n,r){var i=e+t-r,o=i?n*Oa(r)/i:i;return[i*za(o),e-i*Oa(o)]}return n.invert=function(n,r){var i=Za(n*n+(r=e-r)*r),o=e+t-i;return[i/Oa(o)*Ca(n,r),o]},n}function Es(t){function e(e,n){var r=Ua-n,i=r?e*t*za(r)/r:r;return[r*za(i)/t,Ua-r*Oa(i)]}return e.invert=function(e,n){var r=e*t,i=Ua-n,o=Za(r*r+i*i),a=Ca(r,i);return[(o?o/za(o):1)*a/t,Ua-o]},e}xs.invert=function(t,e){var n,r,i=vs*e,o=e<0?-Va:Va,a=25;do{r=i-Ya*za(o),o-=n=(za(2*o)+2*o-Ba*za(r))/(2*Oa(2*o)+2+Ba*Oa(r)*Ya*Oa(o))}while(Sa(n)>qa&&--a>0);return r=i-Ya*za(o),[t*(1/Oa(r)+ms/Oa(o))/vs,r]},Ms.invert=function(t,e){return[t/Oa(e),e]};var Ns=ys(1,4/Ba,Ba);function Ss(t,e,n,r,i,o){var a,s=Oa(o);if(Sa(t)>1||Sa(o)>1)a=Ka(n*i+e*r*s);else{var u=za(t/2),l=za(o/2);a=2*Ja(Za(u*u+e*r*l*l))}return Sa(a)>qa?[a,Ca(r*za(o),e*i-n*r*s)]:[0,0]}function Is(t,e,n){return Ka((t*t+e*e-n*n)/(2*t*e))}function Cs(t){return t-2*Ba*La((t+Ba)/(2*Ba))}function Os(t,e,n){for(var r,i=[[t[0],t[1],za(t[1]),Oa(t[1])],[e[0],e[1],za(e[1]),Oa(e[1])],[n[0],n[1],za(n[1]),Oa(n[1])]],o=i[2],a=0;a<3;++a,o=r)r=i[a],o.v=Ss(r[1]-o[1],o[3],o[2],r[3],r[2],r[0]-o[0]),o.point=[0,0];var s=Is(i[0].v[0],i[2].v[0],i[1].v[0]),u=Is(i[0].v[0],i[1].v[0],i[2].v[0]),l=Ba-s;i[2].point[1]=0,i[0].point[0]=-(i[1].point[0]=i[0].v[0]/2);var c=[i[2].point[0]=i[0].point[0]+i[2].v[0]*Oa(s),2*(i[0].point[1]=i[1].point[1]=i[2].v[0]*za(s))];return function(t,e){var n,r=za(e),o=Oa(e),a=new Array(3);for(n=0;n<3;++n){var s=i[n];if(a[n]=Ss(e-s[1],s[3],s[2],o,r,t-s[0]),!a[n][0])return s.point;a[n][1]=Cs(a[n][1]-s.v[1])}var h=c.slice();for(n=0;n<3;++n){var f=2==n?0:n+1,p=Is(i[n].v[0],a[n][0],a[f][0]);a[n][1]<0&&(p=-p),n?1==n?(p=u-p,h[0]-=a[n][0]*Oa(p),h[1]-=a[n][0]*za(p)):(p=l-p,h[0]+=a[n][0]*Oa(p),h[1]+=a[n][0]*za(p)):(h[0]+=a[n][0]*Oa(p),h[1]-=a[n][0]*za(p))}return h[0]/=3,h[1]/=3,h}}function Ps(t){return t[0]*=Qa,t[1]*=Qa,t}function Ls(t,e,n){var r=zr({type:"MultiPoint",coordinates:[t,e,n]}),i=[-r[0],-r[1]],o=Yr(i),a=Os(Ps(o(t)),Ps(o(e)),Ps(o(n)));a.invert=ps(a);var s=Ho(a).rotate(i),u=s.center;return delete s.rotate,s.center=function(t){return arguments.length?u(o(t)):o.invert(u())},s.clipAngle(90)}function As(t,e){var n=Za(1-za(e));return[2/Xa*t*n,Xa*(1-n)]}function Ts(t){var e=Ga(t);function n(t,n){return[t,(t?t/za(t):1)*(za(n)*Oa(t)-e*Oa(n))]}return n.invert=e?function(t,n){t&&(n*=za(t)/t);var r=Oa(t);return[t,2*Ca(Za(r*r+e*e-n*n)-r,e-n)]}:function(t,e){return[t,Ja(t?e*Ga(t)/t:e)]},n}As.invert=function(t,e){var n=(n=e/Xa-1)*n;return[n>0?t*Za(Ba/n)/2:0,Ja(1-n)]};var ks=Za(3);function Rs(t,e){return[ks*t*(2*Oa(2*e/3)-1)/Xa,ks*Xa*za(e/3)]}function Ds(t){var e=Oa(t);function n(t,n){return[t*e,za(n)/e]}return n.invert=function(t,n){return[t/e,Ja(n*e)]},n}function Fs(t){var e=Oa(t);function n(t,n){return[t*e,(1+e)*Ga(n/2)]}return n.invert=function(t,n){return[t/e,2*Ia(n/(1+e))]},n}function zs(t,e){var n=Za(8/(3*Ba));return[n*t*(1-Sa(e)/Ba),n*e]}function Gs(t,e){var n=Za(4-3*za(Sa(e)));return[2/Za(6*Ba)*t*n,Fa(e)*Za(2*Ba/3)*(2-n)]}function qs(t,e){var n=Za(Ba*(4+Ba));return[2/n*t*(1+Za(1-4*e*e/(Ba*Ba))),4/n*e]}function js(t,e){var n=(2+Ua)*za(e);e/=2;for(var r=0,i=1/0;r<10&&Sa(i)>qa;r++){var o=Oa(e);e-=i=(e+za(e)*(o+2)-n)/(2*o*(1+o))}return[2/Za(Ba*(4+Ba))*t*(1+Oa(e)),2*Za(Ba/(4+Ba))*za(e)]}function Bs(t,e){return[t*(1+Oa(e))/Za(2+Ba),2*e/Za(2+Ba)]}function Us(t,e){for(var n=(1+Ua)*za(e),r=0,i=1/0;r<10&&Sa(i)>qa;r++)e-=i=(e+za(e)-n)/(1+Oa(e));return n=Za(2+Ba),[t*(1+Oa(e))/n,2*e/n]}Rs.invert=function(t,e){var n=3*Ja(e/(ks*Xa));return[Xa*t/(ks*(2*Oa(2*n/3)-1)),n]},zs.invert=function(t,e){var n=Za(8/(3*Ba)),r=e/n;return[t/(n*(1-Sa(r)/Ba)),r]},Gs.invert=function(t,e){var n=2-Sa(e)/Za(2*Ba/3);return[t*Za(6*Ba)/(2*n),Fa(e)*Ja((4-n*n)/3)]},qs.invert=function(t,e){var n=Za(Ba*(4+Ba))/2;return[t*n/(1+Za(1-e*e*(4+Ba)/(4*Ba))),e*n/2]},js.invert=function(t,e){var n=e*Za((4+Ba)/Ba)/2,r=Ja(n),i=Oa(r);return[t/(2/Za(Ba*(4+Ba))*(1+i)),Ja((r+n*(i+2))/(2+Ua))]},Bs.invert=function(t,e){var n=Za(2+Ba),r=e*n/2;return[n*t/(1+Oa(r)),r]},Us.invert=function(t,e){var n=1+Ua,r=Za(n/2);return[2*t*r/(1+Oa(e*=r)),Ja((e+za(e))/n)]};var Vs=3+2*Ya;function Ws(t,e){var n=za(t/=2),r=Oa(t),i=Za(Oa(e)),o=Oa(e/=2),a=za(e)/(o+Ya*r*i),s=Za(2/(1+a*a)),u=Za((Ya*o+(r+n)*i)/(Ya*o+(r-n)*i));return[Vs*(s*(u-1/u)-2*Aa(u)),Vs*(s*a*(u+1/u)-2*Ia(a))]}Ws.invert=function(t,e){if(!(n=os.invert(t/1.2,1.065*e)))return null;var n,r=n[0],i=n[1],o=20;t/=Vs,e/=Vs;do{var a=r/2,s=i/2,u=za(a),l=Oa(a),c=za(s),h=Oa(s),f=Oa(i),p=Za(f),d=c/(h+Ya*l*p),g=d*d,y=Za(2/(1+g)),_=(Ya*h+(l+u)*p)/(Ya*h+(l-u)*p),v=Za(_),m=v-1/v,x=v+1/v,b=y*m-2*Aa(v)-t,M=y*d*x-2*Ia(d)-e,w=c&&Wa*p*u*g/c,E=(Ya*l*h+p)/(2*(h+Ya*l*p)*(h+Ya*l*p)*p),N=-.5*d*y*y*y,S=N*w,I=N*E,C=(C=2*h+Ya*p*(l-u))*C*v,O=(Ya*l*h*p+f)/C,P=-Ya*u*c/(p*C),L=m*S-2*O/v+y*(O+O/_),A=m*I-2*P/v+y*(P+P/_),T=d*x*S-2*w/(1+g)+y*x*w+y*d*(O-O/_),k=d*x*I-2*E/(1+g)+y*x*E+y*d*(P-P/_),R=A*T-k*L;if(!R)break;var D=(M*A-b*k)/R,F=(b*T-M*L)/R;r-=D,i=Ta(-Ua,ka(Ua,i-F))}while((Sa(D)>qa||Sa(F)>qa)&&--o>0);return Sa(Sa(i)-Ua)<qa?[0,i]:o&&[r,i]};var Ys=Oa(35*Qa);function Xs(t,e){var n=Ga(e/2);return[t*Ys*Za(1-n*n),(1+Ys)*n]}function $s(t,e){var n=e/2,r=Oa(n);return[2*t/Xa*Oa(e)*r*r,Xa*Ga(n)]}function Hs(t){var e=1-t,n=i(Ba,0)[0]-i(-Ba,0)[0],r=Za(2*(i(0,Ua)[1]-i(0,-Ua)[1])/n);function i(n,r){var i=Oa(r),o=za(r);return[i/(e+t*i)*n,e*r+t*o]}function o(t,e){var n=i(t,e);return[n[0]*r,n[1]/r]}function a(t){return o(0,t)[1]}return o.invert=function(n,i){var o=fs(a,i);return[n/r*(t+e/Oa(o)),o]},o}function Qs(t){return[t[0]/2,Ja(Ga(t[1]/2*Qa))*Ha]}function Js(t){return[2*t[0],2*Ia(za(t[1]*Qa))*Ha]}function Ks(t,e){var n=2*Ba/e,r=t*t;function i(e,i){var o=ia(e,i),a=o[0],s=o[1],u=a*a+s*s;if(u>r){var l=Za(u),c=Ca(s,a),h=n*Da(c/n),f=c-h,p=t*Oa(f),d=(t*za(f)-f*za(p))/(Ua-p),g=Zs(f,d),y=(Ba-t)/tu(g,p,Ba);a=l;var _,v=50;do{a-=_=(t+tu(g,p,a)*y-l)/(g(a)*y)}while(Sa(_)>qa&&--v>0);s=f*za(a),a<Ua&&(s-=d*(a-Ua));var m=za(h),x=Oa(h);o[0]=a*x-s*m,o[1]=a*m+s*x}return o}return i.invert=function(e,i){var o=e*e+i*i;if(o>r){var a=Za(o),s=Ca(i,e),u=n*Da(s/n),l=s-u;e=a*Oa(l),i=a*za(l);for(var c=e-Ua,h=za(e),f=i/h,p=e<Ua?1/0:0,d=10;;){var g=t*za(f),y=t*Oa(f),_=za(y),v=Ua-y,m=(g-f*_)/v,x=Zs(f,m);if(Sa(p)<ja||!--d)break;f-=p=(f*h-m*c-i)/(h-2*c*(v*(y+f*g*Oa(y)-_)-g*(g-f*_))/(v*v))}e=(a=t+tu(x,y,e)*(Ba-t)/tu(x,y,Ba))*Oa(s=u+f),i=a*za(s)}return ia.invert(e,i)},i}function Zs(t,e){return function(n){var r=t*Oa(n);return n<Ua&&(r-=e),Za(1+r*r)}}function tu(t,e,n){for(var r=(n-e)/50,i=t(e)+t(n),o=1,a=e;o<50;++o)i+=2*t(a+=r);return.5*i*r}function eu(t,e,n,r,i,o,a,s){function u(u,l){if(!l)return[t*u/Ba,0];var c=l*l,h=t+c*(e+c*(n+c*r)),f=l*(i-1+c*(o-s+c*a)),p=(h*h+f*f)/(2*f),d=u*Ja(h/p)/Ba;return[p*za(d),l*(1+c*s)+p*(1-Oa(d))]}return arguments.length<8&&(s=0),u.invert=function(u,l){var c,h,f=Ba*u/t,p=l,d=50;do{var g=p*p,y=t+g*(e+g*(n+g*r)),_=p*(i-1+g*(o-s+g*a)),v=y*y+_*_,m=2*_,x=v/m,b=x*x,M=Ja(y/x)/Ba,w=f*M,E=y*y,N=(2*e+g*(4*n+6*g*r))*p,S=i+g*(3*o+5*g*a),I=(2*(y*N+_*(S-1))*m-v*(2*(S-1)))/(m*m),C=Oa(w),O=za(w),P=x*C,L=x*O,A=f/Ba*(1/Za(1-E/b))*(N*x-y*I)/b,T=L-u,k=p*(1+g*s)+x-P-l,R=I*O+P*A,D=P*M,F=1+I-(I*C-L*A),z=L*M,G=R*z-F*D;if(!G)break;f-=c=(k*R-T*F)/G,p-=h=(T*z-k*D)/G}while((Sa(c)>qa||Sa(h)>qa)&&--d>0);return[f,p]},u}Xs.invert=function(t,e){var n=e/(1+Ys);return[t&&t/(Ys*Za(1-n*n)),2*Ia(n)]},$s.invert=function(t,e){var n=Ia(e/Xa),r=Oa(n),i=2*n;return[t*Xa/2/(Oa(i)*r*r),i]};var nu=eu(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);var ru=eu(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);var iu=eu(5/6*Ba,-.62636,-.0344,0,1.3493,-.05524,0,.045);function ou(t,e){var n=t*t,r=e*e;return[t*(1-.162388*r)*(.87-952426e-9*n*n),e*(1+r/12)]}ou.invert=function(t,e){var n,r=t,i=e,o=50;do{var a=i*i;i-=n=(i*(1+a/12)-e)/(1+a/4)}while(Sa(n)>qa&&--o>0);o=50,t/=1-.162388*a;do{var s=(s=r*r)*s;r-=n=(r*(.87-952426e-9*s)-t)/(.87-.00476213*s)}while(Sa(n)>qa&&--o>0);return[r,i]};var au=eu(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function su(t){var e=t(Ua,0)[0]-t(-Ua,0)[0];function n(n,r){var i=n>0?-.5:.5,o=t(n+i*Ba,r);return o[0]-=i*e,o}return t.invert&&(n.invert=function(n,r){var i=n>0?-.5:.5,o=t.invert(n+i*e,r),a=o[0]-i*Ba;return a<-Ba?a+=2*Ba:a>Ba&&(a-=2*Ba),o[0]=a,o}),n}function uu(t,e){var n=Fa(t),r=Fa(e),i=Oa(e),o=Oa(t)*i,a=za(t)*i,s=za(r*e);t=Sa(Ca(a,s)),e=Ja(o),Sa(t-Ua)>qa&&(t%=Ua);var u=function(t,e){if(e===Ua)return[0,0];var n,r,i=za(e),o=i*i,a=o*o,s=1+a,u=1+3*a,l=1-a,c=Ja(1/Za(s)),h=l+o*s*c,f=(1-i)/h,p=Za(f),d=f*s,g=Za(d),y=p*l;if(0===t)return[0,-(y+o*g)];var _,v=Oa(e),m=1/v,x=2*i*v,b=(-h*v-(-3*o+c*u)*x*(1-i))/(h*h),M=-m*x,w=-m*(o*s*b+f*u*x),E=-2*m*(l*(.5*b/p)-2*o*p*x),N=4*t/Ba;if(t>.222*Ba||e<Ba/4&&t>.175*Ba){if(n=(y+o*Za(d*(1+a)-y*y))/(1+a),t>Ba/4)return[n,n];var S=n,I=.5*n;n=.5*(I+S),r=50;do{var C=n*(E+M*Za(d-n*n))+w*Ja(n/g)-N;if(!C)break;C<0?I=n:S=n,n=.5*(I+S)}while(Sa(S-I)>qa&&--r>0)}else{n=qa,r=25;do{var O=n*n,P=Za(d-O),L=E+M*P,A=n*L+w*Ja(n/g)-N;n-=_=P?A/(L+(w-M*O)/P):0}while(Sa(_)>qa&&--r>0)}return[n,-y-o*Za(d-n*n)]}(t>Ba/4?Ua-t:t,e);return t>Ba/4&&(s=u[0],u[0]=-u[1],u[1]=-s),u[0]*=n,u[1]*=-r,u}function lu(t,e){var n,r,i,o,a;if(e<qa)return[(o=za(t))-(n=e*(t-o*(r=Oa(t)))/4)*r,r+n*o,1-e*o*o/2,t-n];if(e>=.999999)return n=(1-e)/4,r=es(t),o=function(t){return((t=Pa(2*t))-1)/(t+1)}(t),i=1/r,[o+n*((a=r*ts(t))-t)/(r*r),i-n*o*i*(a-t),i+n*o*i*(a+t),2*Ia(Pa(t))-Ua+n*(a-t)/r];var s=[1,0,0,0,0,0,0,0,0],u=[Za(e),0,0,0,0,0,0,0,0],l=0;for(r=Za(1-e),a=1;Sa(u[l]/s[l])>qa&&l<8;)n=s[l++],u[l]=(n-r)/2,s[l]=(n+r)/2,r=Za(n*r),a*=2;i=a*s[l]*t;do{i=(Ja(o=u[l]*za(r=i)/s[l])+i)/2}while(--l);return[za(i),o=Oa(i),o/Oa(i-r),i]}function cu(t,e){if(!e)return t;if(1===e)return Aa(Ga(t/2+Va));for(var n=1,r=Za(1-e),i=Za(e),o=0;Sa(i)>qa;o++){if(t%Ba){var a=Ia(r*Ga(t)/n);a<0&&(a+=Ba),t+=a+~~(t/Ba)*Ba}else t+=t;i=(n+r)/2,r=Za(n*r),i=((n=i)-r)/2}return t/(Ra(2,o)*n)}function hu(t,e){var n=(Ya-1)/(Ya+1),r=Za(1-n*n),i=cu(Ua,r*r),o=Aa(Ga(Ba/4+Sa(e)/2)),a=Pa(-1*o)/Za(n),s=function(t,e){var n=t*t,r=e+1,i=1-n-e*e;return[.5*((t>=0?Ua:-Ua)-Ca(i,2*t)),-.25*Aa(i*i+4*n)+.5*Aa(r*r+n)]}(a*Oa(-1*t),a*za(-1*t)),u=function(t,e,n){var r=Sa(t),i=ts(Sa(e));if(r){var o=1/za(r),a=1/(Ga(r)*Ga(r)),s=-(a+n*(i*i*o*o)-1+n),u=(-s+Za(s*s-(n-1)*a*4))/2;return[cu(Ia(1/Za(u)),n)*Fa(t),cu(Ia(Za((u/a-1)/n)),1-n)*Fa(e)]}return[0,cu(Ia(i),1-n)*Fa(e)]}(s[0],s[1],r*r);return[-u[1],(e>=0?1:-1)*(.5*i-u[0])]}function fu(t){var e=za(t),n=Oa(t),r=pu(t);function i(t,i){var o=r(t,i);t=o[0],i=o[1];var a=za(i),s=Oa(i),u=Oa(t),l=Ka(e*a+n*s*u),c=za(l),h=Sa(c)>qa?l/c:1;return[h*n*za(t),(Sa(t)>Ua?h:-h)*(e*s-n*a*u)]}return r.invert=pu(-t),i.invert=function(t,n){var i=Za(t*t+n*n),o=-za(i),a=Oa(i),s=i*a,u=-n*o,l=i*e,c=Za(s*s+u*u-l*l),h=Ca(s*l+u*c,u*l-s*c),f=(i>Ua?-1:1)*Ca(t*o,i*Oa(h)*a+n*za(h)*o);return r.invert(f,h)},i}function pu(t){var e=za(t),n=Oa(t);return function(t,r){var i=Oa(r),o=Oa(t)*i,a=za(t)*i,s=za(r);return[Ca(a,o*n-s*e),Ja(s*n+o*e)]}}uu.invert=function(t,e){Sa(t)>1&&(t=2*Fa(t)-t),Sa(e)>1&&(e=2*Fa(e)-e);var n=Fa(t),r=Fa(e),i=-n*t,o=-r*e,a=o/i<1,s=function(t,e){var n=0,r=1,i=.5,o=50;for(;;){var a=i*i,s=Za(i),u=Ja(1/Za(1+a)),l=1-a+i*(1+a)*u,c=(1-s)/l,h=Za(c),f=c*(1+a),p=h*(1-a),d=Za(f-t*t),g=e+p+i*d;if(Sa(r-n)<ja||0==--o||0===g)break;g>0?n=i:r=i,i=.5*(n+r)}if(!o)return null;var y=Ja(s),_=Oa(y),v=1/_,m=2*s*_,x=(-l*_-(-3*i+u*(1+3*a))*m*(1-s))/(l*l);return[Ba/4*(t*(-2*v*(.5*x/h*(1-a)-2*i*h*m)+-v*m*d)+-v*(i*(1+a)*x+c*(1+3*a)*m)*Ja(t/Za(f))),y]}(a?o:i,a?i:o),u=s[0],l=s[1],c=Oa(l);return a&&(u=-Ua-u),[n*(Ca(za(u)*c,-za(l))+Ba),r*Ja(Oa(u)*c)]},hu.invert=function(t,e){var n=(Ya-1)/(Ya+1),r=Za(1-n*n),i=function(t,e,n){var r,i,o;return t?(r=lu(t,n),e?(o=(i=lu(e,1-n))[1]*i[1]+n*r[0]*r[0]*i[0]*i[0],[[r[0]*i[2]/o,r[1]*r[2]*i[0]*i[1]/o],[r[1]*i[1]/o,-r[0]*r[2]*i[0]*i[2]/o],[r[2]*i[1]*i[2]/o,-n*r[0]*r[1]*i[0]/o]]):[[r[0],0],[r[1],0],[r[2],0]]):[[0,(i=lu(e,1-n))[0]/i[1]],[1/i[1],0],[i[2]/i[1],0]]}(.5*cu(Ua,r*r)-e,-t,r*r),o=function(t,e){var n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}(i[0],i[1]);return[Ca(o[1],o[0])/-1,2*Ia(Pa(-.5*Aa(n*o[0]*o[0]+n*o[1]*o[1])))-Ua]};var du=Ja(1-1/3)*Ha,gu=Ds(0);function yu(t){var e=du*Qa,n=As(Ba,e)[0]-As(-Ba,e)[0],r=gu(0,e)[1],i=As(0,e)[1],o=Xa-i,a=$a/t,s=4/$a,u=r+o*o*4/$a;function l(l,c){var h,f=Sa(c);if(f>e){var p=ka(t-1,Ta(0,La((l+Ba)/a)));(h=As(l+=Ba*(t-1)/t-p*a,f))[0]=h[0]*$a/n-$a*(t-1)/(2*t)+p*$a/t,h[1]=r+4*(h[1]-i)*o/$a,c<0&&(h[1]=-h[1])}else h=gu(l,c);return h[0]*=s,h[1]/=u,h}return l.invert=function(e,l){e/=s;var c=Sa(l*=u);if(c>r){var h=ka(t-1,Ta(0,La((e+Ba)/a)));e=(e+Ba*(t-1)/t-h*a)*n/$a;var f=As.invert(e,.25*(c-r)*$a/o+i);return f[0]-=Ba*(t-1)/t-h*a,l<0&&(f[1]=-f[1]),f}return gu.invert(e,l)},l}function _u(t,e){return[t,1&e?89.999999:du]}function vu(t,e){return[t,1&e?-89.999999:-du]}function mu(t){return[.999999*t[0],t[1]]}function xu(t){var e,n=1+t,r=Ja(za(1/n)),i=2*Za(Ba/(e=Ba+4*r*n)),o=.5*i*(n+Za(t*(2+t))),a=t*t,s=n*n;function u(u,l){var c,h,f=1-za(l);if(f&&f<2){var p,d=Ua-l,g=25;do{var y=za(d),_=Oa(d),v=r+Ca(y,n-_),m=1+s-2*n*_;d-=p=(d-a*r-n*y+m*v-.5*f*e)/(2*n*y*v)}while(Sa(p)>ja&&--g>0);c=i*Za(m),h=u*v/Ba}else c=i*(t+f),h=u*r/Ba;return[c*za(h),o-c*Oa(h)]}return u.invert=function(t,u){var l=t*t+(u-=o)*u,c=(1+s-l/(i*i))/(2*n),h=Ka(c),f=za(h),p=r+Ca(f,n-c);return[Ja(t/Za(l))*Ba/p,Ja(1-2*(h-a*r-n*f+(1+s-2*n*c)*p)/e)]},u}var bu=.7109889596207567,Mu=.0528035274542;function wu(t,e){return e>-bu?((t=_s(t,e))[1]+=Mu,t):Ms(t,e)}function Eu(t,e){return Sa(e)>bu?((t=_s(t,e))[1]-=e>0?Mu:-Mu,t):Ms(t,e)}function Nu(t,e,n,r){var i=Za(4*Ba/(2*n+(1+t-e/2)*za(2*n)+(t+e)/2*za(4*n)+e/2*za(6*n))),o=Za(r*za(n)*Za((1+t*Oa(2*n)+e*Oa(4*n))/(1+t+e))),a=n*u(1);function s(n){return Za(1+t*Oa(2*n)+e*Oa(4*n))}function u(r){var i=r*n;return(2*i+(1+t-e/2)*za(2*i)+(t+e)/2*za(4*i)+e/2*za(6*i))/n}function l(t){return s(t)*za(t)}var c=function(t,e){var r=n*fs(u,a*za(e)/n,e/Ba);isNaN(r)&&(r=n*Fa(e));var l=i*s(r);return[l*o*t/Ba*Oa(r),l/o*za(r)]};return c.invert=function(t,e){var r=fs(l,e*o/i);return[t*Ba/(Oa(r)*i*o*s(r)),Ja(n*u(r/n)/a)]},0===n&&(i=Za(r/Ba),(c=function(t,e){return[t*i,za(e)/i]}).invert=function(t,e){return[t/i,Ja(e*i)]}),c}function Su(t,e,n,r,i,o,a,s,u,l,c){if(c.nanEncountered)return NaN;var h,f,p,d,g,y,_,v,m,x;if(f=t(e+.25*(h=n-e)),p=t(n-.25*h),isNaN(f))c.nanEncountered=!0;else{if(!isNaN(p))return x=((y=(d=h*(r+4*f+i)/12)+(g=h*(i+4*p+o)/12))-a)/15,l>u?(c.maxDepthCount++,y+x):Math.abs(x)<s?y+x:(v=Su(t,e,_=e+.5*h,r,f,i,d,.5*s,u,l+1,c),isNaN(v)?(c.nanEncountered=!0,NaN):(m=Su(t,_,n,i,p,o,g,.5*s,u,l+1,c),isNaN(m)?(c.nanEncountered=!0,NaN):v+m));c.nanEncountered=!0}}function Iu(t,e,n,r,i){void 0===r&&(r=1e-8),void 0===i&&(i=20);var o=t(e),a=t(.5*(e+n)),s=t(n);return Su(t,e,n,o,a,s,(o+4*a+s)*(n-e)/6,r,i,1,{maxDepthCount:0,nanEncountered:!1})}function Cu(t,e,n){function r(n){return t+(1-t)*Ra(1-Ra(n,e),1/e)}function i(t){return Iu(r,0,t,1e-4)}for(var o=1/i(1),a=1e3,s=(1+1e-8)*o,u=[],l=0;l<=a;l++)u.push(i(l/a)*s);function c(t){var e=0,n=a,r=500;do{u[r]>t?n=r:e=r,r=e+n>>1}while(r>e);var i=u[r+1]-u[r];return i&&(i=(t-u[r+1])/i),(r+1+i)/a}var h=2*c(1)/Ba*o/n,f=function(t,e){var n=c(Sa(za(e))),i=r(n)*t;return n/=h,[i,e>=0?n:-n]};return f.invert=function(t,e){var n;return Sa(e*=h)<1&&(n=Fa(e)*Ja(i(Sa(e))*o)),[t/r(Sa(e)),n]},f}function Ou(t,e){return Sa(t[0]-e[0])<qa&&Sa(t[1]-e[1])<qa}function Pu(t,e){for(var n,r,i,o=-1,a=t.length,s=t[0],u=[];++o<a;){r=((n=t[o])[0]-s[0])/e,i=(n[1]-s[1])/e;for(var l=0;l<e;++l)u.push([s[0]+l*r,s[1]+l*i]);s=n}return u.push(n),u}function Lu(t){var e,n,r,i,o,a,s,u=[],l=t[0].length;for(s=0;s<l;++s)n=(e=t[0][s])[0][0],r=e[0][1],i=e[1][1],o=e[2][0],a=e[2][1],u.push(Pu([[n+qa,r+qa],[n+qa,i-qa],[o-qa,i-qa],[o-qa,a+qa]],30));for(s=t[1].length-1;s>=0;--s)n=(e=t[1][s])[0][0],r=e[0][1],i=e[1][1],o=e[2][0],a=e[2][1],u.push(Pu([[o-qa,a-qa],[o-qa,i+qa],[n+qa,i+qa],[n+qa,r-qa]],30));return{type:"Polygon",coordinates:[Ae(u)]}}function Au(t,e,n){var r,i;function o(n,r){for(var i=r<0?-1:1,o=e[+(r<0)],a=0,s=o.length-1;a<s&&n>o[a][2][0];++a);var u=t(n-o[a][1][0],r);return u[0]+=t(o[a][1][0],i*r>i*o[a][0][1]?o[a][0][1]:r)[0],u}n?o.invert=n(o):t.invert&&(o.invert=function(n,r){for(var a=i[+(r<0)],s=e[+(r<0)],u=0,l=a.length;u<l;++u){var c=a[u];if(c[0][0]<=n&&n<c[1][0]&&c[0][1]<=r&&r<c[1][1]){var h=t.invert(n-t(s[u][1][0],0)[0],r);return h[0]+=s[u][1][0],Ou(o(h[0],h[1]),[n,r])?h:null}}});var a=Ho(o),s=a.stream;return a.stream=function(t){var e=a.rotate(),n=s(t),i=(a.rotate([0,0]),s(t));return a.rotate(e),n.sphere=function(){bn(r,i)},n},a.lobes=function(n){return arguments.length?(r=Lu(n),e=n.map((function(t){return t.map((function(t){return[[t[0][0]*Qa,t[0][1]*Qa],[t[1][0]*Qa,t[1][1]*Qa],[t[2][0]*Qa,t[2][1]*Qa]]}))})),i=e.map((function(e){return e.map((function(e){var n,r=t(e[0][0],e[0][1])[0],i=t(e[2][0],e[2][1])[0],o=t(e[1][0],e[0][1])[1],a=t(e[1][0],e[1][1])[1];return o>a&&(n=o,o=a,a=n),[[r,o],[i,a]]}))})),a):e.map((function(t){return t.map((function(t){return[[t[0][0]*Ha,t[0][1]*Ha],[t[1][0]*Ha,t[1][1]*Ha],[t[2][0]*Ha,t[2][1]*Ha]]}))}))},null!=e&&a.lobes(e),a}wu.invert=function(t,e){return e>-bu?_s.invert(t,e-Mu):Ms.invert(t,e)},Eu.invert=function(t,e){return Sa(e)>bu?_s.invert(t,e+(e>0?Mu:-Mu)):Ms.invert(t,e)};var Tu=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];var ku=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];var Ru=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];var Du=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];var Fu=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];var zu=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Gu(t,e){return[3/$a*t*Za(Ba*Ba/3-e*e),e]}function qu(t){function e(e,n){if(Sa(Sa(n)-Ua)<qa)return[0,n<0?-2:2];var r=za(n),i=Ra((1+r)/(1-r),t/2),o=.5*(i+1/i)+Oa(e*=t);return[2*za(e)/o,(i-1/i)/o]}return e.invert=function(e,n){var r=Sa(n);if(Sa(r-2)<qa)return e?null:[0,Fa(n)*Ua];if(r>2)return null;var i=(e/=2)*e,o=(n/=2)*n,a=2*n/(1+i+o);return a=Ra((1+a)/(1-a),1/t),[Ca(2*e,1-i-o)/t,Ja((a-1)/(a+1))]},e}Gu.invert=function(t,e){return[$a/3*t/Za(Ba*Ba/3-e*e),e]};var ju=Ba/Ya;function Bu(t,e){return[t*(1+Za(Oa(e)))/2,e/(Oa(e/2)*Oa(t/6))]}function Uu(t,e){var n=t*t,r=e*e;return[t*(.975534+r*(-.0143059*n-.119161+-.0547009*r)),e*(1.00384+n*(.0802894+-.02855*r+199025e-9*n)+r*(.0998909+-.0491032*r))]}function Vu(t,e){return[za(t)/Oa(e),Ga(e)*Oa(t)]}function Wu(t){var e=Oa(t),n=Ga(Va+t/2);function r(r,i){var o=i-t,a=Sa(o)<qa?r*e:Sa(a=Va+i/2)<qa||Sa(Sa(a)-Ua)<qa?0:r*o/Aa(Ga(a)/n);return[a,o]}return r.invert=function(r,i){var o,a=i+t;return[Sa(i)<qa?r/e:Sa(o=Va+a/2)<qa||Sa(Sa(o)-Ua)<qa?0:r*Aa(Ga(o)/n)/i,a]},r}function Yu(t,e){return[t,1.25*Aa(Ga(Va+.4*e))]}function Xu(t){var e=t.length-1;function n(n,r){for(var i,o=Oa(r),a=2/(1+o*Oa(n)),s=a*o*za(n),u=a*za(r),l=e,c=t[l],h=c[0],f=c[1];--l>=0;)h=(c=t[l])[0]+s*(i=h)-u*f,f=c[1]+s*f+u*i;return[h=s*(i=h)-u*f,f=s*f+u*i]}return n.invert=function(n,r){var i=20,o=n,a=r;do{for(var s,u=e,l=t[u],c=l[0],h=l[1],f=0,p=0;--u>=0;)f=c+o*(s=f)-a*p,p=h+o*p+a*s,c=(l=t[u])[0]+o*(s=c)-a*h,h=l[1]+o*h+a*s;var d,g,y=(f=c+o*(s=f)-a*p)*f+(p=h+o*p+a*s)*p;o-=d=((c=o*(s=c)-a*h-n)*f+(h=o*h+a*s-r)*p)/y,a-=g=(h*f-c*p)/y}while(Sa(d)+Sa(g)>1e-12&&--i>0);if(i){var _=Za(o*o+a*a),v=2*Ia(.5*_),m=za(v);return[Ca(o*m,_*Oa(v)),_?Ja(a*m/_):0]}},n}Bu.invert=function(t,e){var n=Sa(t),r=Sa(e),i=qa,o=Ua;r<ju?o*=r/ju:i+=6*Ka(ju/r);for(var a=0;a<25;a++){var s=za(o),u=Za(Oa(o)),l=za(o/2),c=Oa(o/2),h=za(i/6),f=Oa(i/6),p=.5*i*(1+u)-n,d=o/(c*f)-r,g=u?-.25*i*s/u:0,y=.5*(1+u),_=(1+.5*o*l/c)/(c*f),v=o/c*(h/6)/(f*f),m=g*v-_*y,x=(p*v-d*y)/m,b=(d*g-p*_)/m;if(o-=x,i-=b,Sa(x)<qa&&Sa(b)<qa)break}return[t<0?-i:i,e<0?-o:o]},Uu.invert=function(t,e){var n=Fa(t)*Ba,r=e/2,i=50;do{var o=n*n,a=r*r,s=n*r,u=n*(.975534+a*(-.0143059*o-.119161+-.0547009*a))-t,l=r*(1.00384+o*(.0802894+-.02855*a+199025e-9*o)+a*(.0998909+-.0491032*a))-e,c=.975534-a*(.119161+3*o*.0143059+.0547009*a),h=-s*(.238322+.2188036*a+.0286118*o),f=s*(.1605788+7961e-7*o+-.0571*a),p=1.00384+o*(.0802894+199025e-9*o)+a*(3*(.0998909-.02855*o)-.245516*a),d=h*f-p*c,g=(l*h-u*p)/d,y=(u*f-l*c)/d;n-=g,r-=y}while((Sa(g)>qa||Sa(y)>qa)&&--i>0);return i&&[n,r]},Vu.invert=function(t,e){var n=t*t,r=e*e+1,i=n+r,o=t?Wa*Za((i-Za(i*i-4*n))/n):1/Za(r);return[Ja(t*o),Fa(e)*Ka(o)]},Yu.invert=function(t,e){return[t,2.5*Ia(Pa(.8*e))-.625*Ba]};var $u=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Hu=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Qu=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Ju=[[.9245,0],[0,0],[.01943,0]],Ku=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Zu(t,e){var n=Ho(Xu(t)).rotate(e).clipAngle(90),r=Yr(e),i=n.center;return delete n.rotate,n.center=function(t){return arguments.length?i(r(t)):r.invert(i())},n}var tl=Za(6),el=Za(7);function nl(t,e){var n=Ja(7*za(e)/(3*tl));return[tl*t*(2*Oa(2*n/3)-1)/el,9*za(n/3)/el]}function rl(t,e){for(var n,r=(1+Wa)*za(e),i=e,o=0;o<25&&(i-=n=(za(i/2)+za(i)-r)/(.5*Oa(i/2)+Oa(i)),!(Sa(n)<qa));o++);return[t*(1+2*Oa(i)/Oa(i/2))/(3*Ya),2*Za(3)*za(i/2)/Za(2+Ya)]}function il(t,e){for(var n,r=Za(6/(4+Ba)),i=(1+Ba/4)*za(e),o=e/2,a=0;a<25&&(o-=n=(o/2+za(o)-i)/(.5+Oa(o)),!(Sa(n)<qa));a++);return[r*(.5+Oa(o))*t/1.5,r*o]}function ol(t,e){var n=e*e,r=n*n,i=n*r;return[t*(.84719-.13063*n+i*i*(.05494*n-.04515-.02326*r+.00331*i)),e*(1.01183+r*r*(.01926*n-.02625-.00396*r))]}function al(t,e){return[t*(1+Oa(e))/2,2*(e-Ga(e/2))]}nl.invert=function(t,e){var n=3*Ja(e*el/9);return[t*el/(tl*(2*Oa(2*n/3)-1)),Ja(3*za(n)*tl/7)]},rl.invert=function(t,e){var n=e*Za(2+Ya)/(2*Za(3)),r=2*Ja(n);return[3*Ya*t/(1+2*Oa(r)/Oa(r/2)),Ja((n+za(r))/(1+Wa))]},il.invert=function(t,e){var n=Za(6/(4+Ba)),r=e/n;return Sa(Sa(r)-Ua)<qa&&(r=r<0?-Ua:Ua),[1.5*t/(n*(.5+Oa(r))),Ja((r/2+za(r))/(1+Ba/4))]},ol.invert=function(t,e){var n,r,i,o,a=e,s=25;do{a-=n=(a*(1.01183+(i=(r=a*a)*r)*i*(.01926*r-.02625-.00396*i))-e)/(1.01183+i*i*(.21186*r-.23625+-.05148*i))}while(Sa(n)>ja&&--s>0);return[t/(.84719-.13063*(r=a*a)+(o=r*(i=r*r))*o*(.05494*r-.04515-.02326*i+.00331*o)),a]},al.invert=function(t,e){for(var n=e/2,r=0,i=1/0;r<10&&Sa(i)>qa;++r){var o=Oa(e/2);e-=i=(e-Ga(e/2)-n)/(1-.5/(o*o))}return[2*t/(1+Oa(e)),e]};var sl=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function ul(t,e){var n=za(e),r=Oa(e),i=Fa(t);if(0===t||Sa(e)===Ua)return[0,e];if(0===e)return[t,0];if(Sa(t)===Ua)return[t*r,Ua*n];var o=Ba/(2*t)-2*t/Ba,a=2*e/Ba,s=(1-a*a)/(n-a),u=o*o,l=s*s,c=1+u/l,h=1+l/u,f=(o*n/s-o/2)/c,p=(l*n/u+s/2)/h,d=p*p-(l*n*n/u+s*n-1)/h;return[Ua*(f+Za(f*f+r*r/c)*i),Ua*(p+Za(d<0?0:d)*Fa(-e*o)*i)]}ul.invert=function(t,e){var n=(t/=Ua)*t,r=n+(e/=Ua)*e,i=Ba*Ba;return[t?(r-1+Za((1-r)*(1-r)+4*n))/(2*t)*Ua:0,fs((function(t){return r*(Ba*za(t)-2*t)*Ba+4*t*t*(e-za(t))+2*Ba*t-i*e}),0)]};var ll=1.0148,cl=.23185,hl=-.14499,fl=.02406,pl=1.790857183;function dl(t,e){var n=e*e;return[t,e*(ll+n*n*(cl+n*(hl+fl*n)))]}function gl(t,e){if(Sa(e)<qa)return[t,0];var n=Ga(e),r=t*za(e);return[za(r)/n,e+(1-Oa(r))/n]}function yl(t,e){var n=vl(t[1],t[0]),r=vl(e[1],e[0]),i=function(t,e){return Ca(t[0]*e[1]-t[1]*e[0],t[0]*e[0]+t[1]*e[1])}(n,r),o=ml(n)/ml(r);return _l([1,0,t[0][0],0,1,t[0][1]],_l([o,0,0,0,o,0],_l([Oa(i),za(i),0,-za(i),Oa(i),0],[1,0,-e[0][0],0,1,-e[0][1]])))}function _l(t,e){return[t[0]*e[0]+t[1]*e[3],t[0]*e[1]+t[1]*e[4],t[0]*e[2]+t[1]*e[5]+t[2],t[3]*e[0]+t[4]*e[3],t[3]*e[1]+t[4]*e[4],t[3]*e[2]+t[4]*e[5]+t[5]]}function vl(t,e){return[t[0]-e[0],t[1]-e[1]]}function ml(t){return Za(t[0]*t[0]+t[1]*t[1])}function xl(t,e){function n(t,n){var r,i=e(t,n),o=i.project([t*Ha,n*Ha]);return(r=i.transform)?[r[0]*o[0]+r[1]*o[1]+r[2],-(r[3]*o[0]+r[4]*o[1]+r[5])]:(o[1]=-o[1],o)}function r(t,n){var i=t.project.invert,o=t.transform,a=n;if(o&&(o=function(t){var e=1/(t[0]*t[4]-t[1]*t[3]);return[e*t[4],-e*t[1],e*(t[1]*t[5]-t[2]*t[4]),-e*t[3],e*t[0],e*(t[2]*t[3]-t[0]*t[5])]}(o),a=[o[0]*a[0]+o[1]*a[1]+o[2],o[3]*a[0]+o[4]*a[1]+o[5]]),i&&t===function(t){return e(t[0]*Qa,t[1]*Qa)}(s=i(a)))return s;for(var s,u=t.children,l=0,c=u&&u.length;l<c;++l)if(s=r(u[l],n))return s}!function t(e,n){if(e.edges=function(t){for(var e=t.length,n=[],r=t[e-1],i=0;i<e;++i)n.push([r,r=t[i]]);return n}(e.face),n.face){var r=e.shared=function(t,e){for(var n,r,i=t.length,o=null,a=0;a<i;++a){n=t[a];for(var s=e.length;--s>=0;)if(r=e[s],n[0]===r[0]&&n[1]===r[1]){if(o)return[o,n];o=n}}}(e.face,n.face),i=yl(r.map(n.project),r.map(e.project));e.transform=n.transform?_l(n.transform,i):i;for(var o=n.edges,a=0,s=o.length;a<s;++a)Ml(r[0],o[a][1])&&Ml(r[1],o[a][0])&&(o[a]=e),Ml(r[0],o[a][0])&&Ml(r[1],o[a][1])&&(o[a]=e);for(o=e.edges,a=0,s=o.length;a<s;++a)Ml(r[0],o[a][0])&&Ml(r[1],o[a][1])&&(o[a]=n),Ml(r[0],o[a][1])&&Ml(r[1],o[a][0])&&(o[a]=n)}else e.transform=n.transform;e.children&&e.children.forEach((function(n){t(n,e)}));return e}(t,{transform:null}),wl(t)&&(n.invert=function(e,n){var i=r(t,[e,-n]);return i&&(i[0]*=Qa,i[1]*=Qa,i)});var i=Ho(n),o=i.stream;return i.stream=function(e){var n=i.rotate(),r=o(e),a=(i.rotate([0,0]),o(e));return i.rotate(n),r.sphere=function(){a.polygonStart(),a.lineStart(),bl(a,t),a.lineEnd(),a.polygonEnd()},r},i.angle(-30)}function bl(t,e,n){var r,i,o=e.edges,a=o.length,s={type:"MultiPoint",coordinates:e.face},u=Sr({type:"MultiPoint",coordinates:e.face.filter((function(t){return 90!==Sa(t[1])}))}),l=!1,c=-1,h=u[1][0]-u[0][0],f=180===h||360===h?[(u[0][0]+u[1][0])/2,(u[0][1]+u[1][1])/2]:zr(s);if(n)for(;++c<a&&o[c]!==n;);++c;for(var p=0;p<a;++p)i=o[(p+c)%a],Array.isArray(i)?(l||(t.point((r=ki(i[0],f)(qa))[0],r[1]),l=!0),t.point((r=ki(i[1],f)(qa))[0],r[1])):(l=!1,i!==n&&bl(t,i,e))}function Ml(t,e){return t&&e&&t[0]===e[0]&&t[1]===e[1]}function wl(t){return t.project.invert||t.children&&t.children.some(wl)}dl.invert=function(t,e){e>pl?e=pl:e<-1.790857183&&(e=-1.790857183);var n,r=e;do{var i=r*r;r-=n=(r*(ll+i*i*(cl+i*(hl+fl*i)))-e)/(1.0148+i*i*(1.1592500000000001+i*(.21654*i-1.01493)))}while(Sa(n)>qa);return[t,r]},gl.invert=function(t,e){if(Sa(e)<qa)return[t,0];var n,r=t*t+e*e,i=.5*e,o=10;do{var a=Ga(i),s=1/Oa(i),u=r-2*e*i+i*i;i-=n=(a*u+2*(i-e))/(2+u*s*s+2*(i-e)*a)}while(Sa(n)>qa&&--o>0);return a=Ga(i),[(Sa(e)<Sa(i+1/a)?Ja(t*a):Fa(e)*Fa(t)*(Ka(Sa(t*a))+Ua))/za(i),i]};var El=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Nl=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map((function(t){return t.map((function(t){return El[t]}))}));var Sl=2/Za(3);function Il(t,e){var n=As(t,e);return[n[0]*Sl,n[1]]}function Cl(t,e){for(var n=0,r=t.length,i=0;n<r;++n)i+=t[n]*e[n];return i}function Ol(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Pl(t){return[Ca(t[1],t[0])*Ha,Ja(Ta(-1,ka(1,t[2])))*Ha]}function Ll(t){var e=t[0]*Qa,n=t[1]*Qa,r=Oa(n);return[r*Oa(e),r*za(e),za(n)]}Il.invert=function(t,e){return As.invert(t/Sl,e)};var Al=()=>{};function Tl(t,e){return{type:"FeatureCollection",features:t.features.map((function(t){return kl(t,e)}))}}function kl(t,e){return{type:"Feature",id:t.id,properties:t.properties,geometry:Rl(t.geometry,e)}}function Rl(t,e){if(!t)return null;if("GeometryCollection"===t.type)return function(t,e){return{type:"GeometryCollection",geometries:t.geometries.map((function(t){return Rl(t,e)}))}}(t,e);var n;switch(t.type){case"Point":case"MultiPoint":n=zl;break;case"LineString":case"MultiLineString":n=Gl;break;case"Polygon":case"MultiPolygon":case"Sphere":n=ql;break;default:return null}return bn(t,e(n)),n.result()}var Dl=[],Fl=[],zl={point:function(t,e){Dl.push([t,e])},result:function(){var t=Dl.length?Dl.length<2?{type:"Point",coordinates:Dl[0]}:{type:"MultiPoint",coordinates:Dl}:null;return Dl=[],t}},Gl={lineStart:Al,point:function(t,e){Dl.push([t,e])},lineEnd:function(){Dl.length&&(Fl.push(Dl),Dl=[])},result:function(){var t=Fl.length?Fl.length<2?{type:"LineString",coordinates:Fl[0]}:{type:"MultiLineString",coordinates:Fl}:null;return Fl=[],t}},ql={polygonStart:Al,lineStart:Al,point:function(t,e){Dl.push([t,e])},lineEnd:function(){var t=Dl.length;if(t){do{Dl.push(Dl[0].slice())}while(++t<4);Fl.push(Dl),Dl=[]}},polygonEnd:Al,result:function(){if(!Fl.length)return null;var t=[],e=[];return Fl.forEach((function(n){!function(t){if((e=t.length)<4)return!1;for(var e,n=0,r=t[e-1][1]*t[0][0]-t[e-1][0]*t[0][1];++n<e;)r+=t[n-1][1]*t[n][0]-t[n-1][0]*t[n][1];return r<=0}(n)?e.push(n):t.push([n])})),e.forEach((function(e){var n=e[0];t.some((function(t){if(function(t,e){for(var n=e[0],r=e[1],i=!1,o=0,a=t.length,s=a-1;o<a;s=o++){var u=t[o],l=u[0],c=u[1],h=t[s],f=h[0],p=h[1];c>r^p>r&&n<(f-l)*(r-c)/(p-c)+l&&(i=!i)}return i}(t[0],n))return t.push(e),!0}))||t.push([e])})),Fl=[],t.length?t.length>1?{type:"MultiPolygon",coordinates:t}:{type:"Polygon",coordinates:t[0]}:null}};function jl(t){var e=t(Ua,0)[0]-t(-Ua,0)[0];function n(n,r){var i=Sa(n)<Ua,o=t(i?n:n>0?n-Ba:n+Ba,r),a=(o[0]-o[1])*Wa,s=(o[0]+o[1])*Wa;if(i)return[a,s];var u=e*Wa,l=a>0^s>0?-1:1;return[l*a-Fa(s)*u,l*s-Fa(a)*u]}return t.invert&&(n.invert=function(n,r){var i=(n+r)*Wa,o=(r-n)*Wa,a=Sa(i)<.5*e&&Sa(o)<.5*e;if(!a){var s=e*Wa,u=i>0^o>0?-1:1,l=-u*n+(o>0?1:-1)*s,c=-u*r+(i>0?1:-1)*s;i=(-l-c)*Wa,o=(l-c)*Wa}var h=t.invert(i,o);return a||(h[0]+=i>0?Ba:-Ba),h}),Ho(n).rotate([-90,-90,45]).clipAngle(179.999)}function Bl(t){var e=za(t);function n(n,r){var i=e?Ga(n*e/2)/e:n/2;if(!r)return[2*i,-t];var o=2*Ia(i*za(r)),a=1/Ga(r);return[za(o)*a,r+(1-Oa(o))*a-t]}return n.invert=function(n,r){if(Sa(r+=t)<qa)return[e?2*Ia(e*n/2)/e:n,0];var i,o=n*n+r*r,a=0,s=10;do{var u=Ga(a),l=1/Oa(a),c=o-2*r*a+a*a;a-=i=(u*c+2*(a-r))/(2+c*l*l+2*(a-r)*u)}while(Sa(i)>qa&&--s>0);var h=n*(u=Ga(a)),f=Ga(Sa(r)<Sa(a+1/u)?.5*Ja(h):.5*Ka(h)+Ba/4)/za(a);return[e?2*Ia(e*f)/e:2*f,a]},n}var Ul=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function Vl(t,e){var n,r=ka(18,36*Sa(e)/Ba),i=La(r),o=r-i,a=(n=Ul[i])[0],s=n[1],u=(n=Ul[++i])[0],l=n[1],c=(n=Ul[ka(19,++i)])[0],h=n[1];return[t*(u+o*(c-a)/2+o*o*(c-2*u+a)/2),Fa(e)*(l+o*(h-s)/2+o*o*(h-2*l+s)/2)]}function Wl(t,e){var n=function(t){function e(e,n){var r=Oa(n),i=(t-1)/(t-r*Oa(e));return[i*r*za(e),i*za(n)]}return e.invert=function(e,n){var r=e*e+n*n,i=Za(r),o=(t-Za(1-r*(t+1)/(t-1)))/((t-1)/i+i/(t-1));return[Ca(e*o,i*Za(1-o*o)),i?Ja(n*o/i):0]},e}(t);if(!e)return n;var r=Oa(e),i=za(e);function o(e,o){var a=n(e,o),s=a[1],u=s*i/(t-1)+r;return[a[0]*r/u,s/u]}return o.invert=function(e,o){var a=(t-1)/(t-1-o*i);return n.invert(a*e,a*o*r)},o}Ul.forEach((function(t){t[1]*=1.593415793900743})),Vl.invert=function(t,e){var n=90*e,r=ka(18,Sa(n/5)),i=Ta(0,La(r));do{var o=Ul[i][1],a=Ul[i+1][1],s=Ul[ka(19,i+2)][1],u=s-o,l=s-2*a+o,c=2*(Sa(e)-a)/u,h=l/u,f=c*(1-h*c*(1-2*h*c));if(f>=0||1===i){n=(e>=0?5:-5)*(f+r);var p,d=50;do{f=(r=ka(18,Sa(n)/5))-(i=La(r)),o=Ul[i][1],a=Ul[i+1][1],s=Ul[ka(19,i+2)][1],n-=(p=Fa(e)*(a+f*(s-o)/2+f*f*(s-2*a+o)/2)-e)*Ha}while(Sa(p)>ja&&--d>0);break}}while(--i>=0);var g=Ul[i][0],y=Ul[i+1][0],_=Ul[ka(19,i+2)][0];return[t/(y+f*(_-g)/2+f*f*(_-2*y+g)/2),n*Qa]};var Yl=-180,Xl=-179.9999,$l=179.9999,Hl=-89.9999,Ql=89.9999;function Jl(t){return t.length>0}function Kl(t){return Math.floor(1e4*t)/1e4}function Zl(t){return-90===t||90===t?[0,t]:[Yl,Kl(t)]}function tc(t){var e=t[0],n=t[1],r=!1;return e<=Xl?(e=Yl,r=!0):e>=$l&&(e=180,r=!0),n<=Hl?(n=-90,r=!0):n>=Ql&&(n=90,r=!0),r?[e,n]:t}function ec(t){return t.map(tc)}function nc(t,e,n){for(var r=0,i=t.length;r<i;++r){var o=t[r].slice();n.push({index:-1,polygon:e,ring:o});for(var a=0,s=o.length;a<s;++a){var u=o[a],l=u[0],c=u[1];if(l<=Xl||l>=$l||c<=Hl||c>=Ql){o[a]=tc(u);for(var h=a+1;h<s;++h){var f=o[h],p=f[0],d=f[1];if(p>Xl&&p<$l&&d>Hl&&d<Ql)break}if(h===a+1)continue;if(a){var g={index:-1,polygon:e,ring:o.slice(0,a+1)};g.ring[g.ring.length-1]=Zl(c),n[n.length-1]=g}else n.pop();if(h>=s)break;n.push({index:-1,polygon:e,ring:o=o.slice(h-1)}),o[0]=Zl(o[0][1]),a=-1,s=o.length}}}}function rc(t){var e,n,r,i,o,a,s=t.length,u={},l={};for(e=0;e<s;++e)r=(n=t[e]).ring[0],o=n.ring[n.ring.length-1],r[0]!==o[0]||r[1]!==o[1]?(n.index=e,u[r]=l[o]=n):(n.polygon.push(n.ring),t[e]=null);for(e=0;e<s;++e)if(n=t[e]){if(r=n.ring[0],o=n.ring[n.ring.length-1],i=l[r],a=u[o],delete u[r],delete l[o],r[0]===o[0]&&r[1]===o[1]){n.polygon.push(n.ring);continue}i?(delete l[r],delete u[i.ring[0]],i.ring.pop(),t[i.index]=null,n={index:-1,polygon:i.polygon,ring:i.ring.concat(n.ring)},i===a?n.polygon.push(n.ring):(n.index=s++,t.push(u[n.ring[0]]=l[n.ring[n.ring.length-1]]=n))):a?(delete u[o],delete l[a.ring[a.ring.length-1]],n.ring.pop(),n={index:s++,polygon:a.polygon,ring:n.ring.concat(a.ring)},t[a.index]=null,t.push(u[n.ring[0]]=l[n.ring[n.ring.length-1]]=n)):(n.ring.push(n.ring[0]),n.polygon.push(n.ring))}}function ic(t){var e={type:"Feature",geometry:oc(t.geometry)};return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),null!=t.properties&&(e.properties=t.properties),e}function oc(t){if(null==t)return t;var e,n,r,i;switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(oc)};break;case"Point":e={type:"Point",coordinates:tc(t.coordinates)};break;case"MultiPoint":case"LineString":e={type:t.type,coordinates:ec(t.coordinates)};break;case"MultiLineString":e={type:"MultiLineString",coordinates:t.coordinates.map(ec)};break;case"Polygon":var o=[];nc(t.coordinates,o,n=[]),rc(n),e={type:"Polygon",coordinates:o};break;case"MultiPolygon":n=[],r=-1,i=t.coordinates.length;for(var a=new Array(i);++r<i;)nc(t.coordinates[r],a[r]=[],n);rc(n),e={type:"MultiPolygon",coordinates:a.filter(Jl)};break;default:return t}return null!=t.bbox&&(e.bbox=t.bbox),e}function ac(t,e){var n=Ga(e/2),r=za(Va*n);return[t*(.74482-.34588*r*r),1.70711*n]}function sc(t,e,n){var r=ki(e,n),i=r(.5),o=Yr([-i[0],-i[1]])(e),a=r.distance/2,s=-Ja(za(o[1]*Qa)/za(a)),u=[-i[0],-i[1],-(o[0]>0?Ba-s:s)*Ha],l=Ho(t(a)).rotate(u),c=Yr(u),h=l.center;return delete l.rotate,l.center=function(t){return arguments.length?h(c(t)):c.invert(h())},l.clipAngle(90)}function uc(t){var e=Oa(t);function n(t,n){var r=va(t,n);return r[0]*=e,r}return n.invert=function(t,n){return va.invert(t/e,n)},n}function lc(t,e){return sc(uc,t,e)}function cc(t){if(!(t*=2))return ia;var e=-t/2,n=-e,r=t*t,i=Ga(n),o=.5/za(n);function a(i,o){var a=Ka(Oa(o)*Oa(i-e)),s=Ka(Oa(o)*Oa(i-n));return[((a*=a)-(s*=s))/(2*t),(o<0?-1:1)*Za(4*r*s-(r-a+s)*(r-a+s))/(2*t)]}return a.invert=function(t,r){var a,s,u=r*r,l=Oa(Za(u+(a=t+e)*a)),c=Oa(Za(u+(a=t+n)*a));return[Ca(s=l-c,a=(l+c)*i),(r<0?-1:1)*Ka(Za(a*a+s*s)*o)]},a}function hc(t,e){return sc(cc,t,e)}function fc(t,e){if(Sa(e)<qa)return[t,0];var n=Sa(e/Ua),r=Ja(n);if(Sa(t)<qa||Sa(Sa(e)-Ua)<qa)return[0,Fa(e)*Ba*Ga(r/2)];var i=Oa(r),o=Sa(Ba/t-t/Ba)/2,a=o*o,s=i/(n+i-1),u=s*(2/n-1),l=u*u,c=l+a,h=s-l,f=a+s;return[Fa(t)*Ba*(o*h+Za(a*h*h-c*(s*s-l)))/c,Fa(e)*Ba*(u*f-o*Za((a+1)*c-f*f))/c]}function pc(t,e){if(Sa(e)<qa)return[t,0];var n=Sa(e/Ua),r=Ja(n);if(Sa(t)<qa||Sa(Sa(e)-Ua)<qa)return[0,Fa(e)*Ba*Ga(r/2)];var i=Oa(r),o=Sa(Ba/t-t/Ba)/2,a=o*o,s=i*(Za(1+a)-o*i)/(1+a*n*n);return[Fa(t)*Ba*s,Fa(e)*Ba*Za(1-s*(2*o+s))]}function dc(t,e){if(Sa(e)<qa)return[t,0];var n=e/Ua,r=Ja(n);if(Sa(t)<qa||Sa(Sa(e)-Ua)<qa)return[0,Ba*Ga(r/2)];var i=(Ba/t-t/Ba)/2,o=n/(1+Oa(r));return[Ba*(Fa(t)*Za(i*i+1-o*o)-i),Ba*o]}function gc(t,e){if(!e)return[t,0];var n=Sa(e);if(!t||n===Ua)return[0,e];var r=n/Ua,i=r*r,o=(8*r-i*(i+2)-5)/(2*i*(r-1)),a=o*o,s=r*o,u=i+a+2*s,l=r+3*o,c=t/Ua,h=c+1/c,f=Fa(Sa(t)-Ua)*Za(h*h-4),p=f*f,d=(f*(u+a-1)+2*Za(u*(i+a*p-1)+(1-i)*(i*(l*l+4*a)+12*s*a+4*a*a)))/(4*u+p);return[Fa(t)*Ua*d,Fa(e)*Ua*Za(1+f*Sa(d)-d*d)]}function yc(t,e,n,r){var i=Ba/3;t=Ta(t,qa),e=Ta(e,qa),t=ka(t,Ua),e=ka(e,Ba-qa),n=Ta(n,0),n=ka(n,99.999999);var o=(r=Ta(r,qa))/100,a=Ka((n/100+1)*Oa(i))/i,s=za(t)/za(a*Ua),u=e/Ba,l=Za(o*za(t/2)/za(e/2));return function(t,e,n,r,i){function o(o,a){var s=n*za(r*a),u=Za(1-s*s),l=Za(2/(1+u*Oa(o*=i)));return[t*u*l*za(o),e*s*l]}return o.invert=function(o,a){var s=o/t,u=a/e,l=Za(s*s+u*u),c=2*Ja(l/2);return[Ca(o*Ga(c),t*l)/i,l&&Ja(a*za(c)/(e*n*l))/r]},o}(l/Za(u*s*a),1/(l*Za(u*s*a)),s,a,u)}function _c(){var t=65*Qa,e=60*Qa,n=20,r=200,i=Qo(yc),o=i(t,e,n,r);return o.poleline=function(o){return arguments.length?i(t=+o*Qa,e,n,r):t*Ha},o.parallels=function(o){return arguments.length?i(t,e=+o*Qa,n,r):e*Ha},o.inflation=function(o){return arguments.length?i(t,e,n=+o,r):n},o.ratio=function(o){return arguments.length?i(t,e,n,r=+o):r},o.scale(163.775)}ac.invert=function(t,e){var n=e/1.70711,r=za(Va*n);return[t/(.74482-.34588*r*r),2*Ia(n)]},fc.invert=function(t,e){if(Sa(e)<qa)return[t,0];if(Sa(t)<qa)return[0,Ua*za(2*Ia(e/Ba))];var n=(t/=Ba)*t,r=(e/=Ba)*e,i=n+r,o=i*i,a=-Sa(e)*(1+i),s=a-2*r+n,u=-2*a+1+2*r+o,l=r/u+(2*s*s*s/(u*u*u)-9*a*s/(u*u))/27,c=(a-s*s/(3*u))/u,h=2*Za(-c/3),f=Ka(3*l/(c*h))/3;return[Ba*(i-1+Za(1+2*(n-r)+o))/(2*t),Fa(e)*Ba*(-h*Oa(f+Ba/3)-s/(3*u))]},pc.invert=function(t,e){if(!t)return[0,Ua*za(2*Ia(e/Ba))];var n=Sa(t/Ba),r=(1-n*n-(e/=Ba)*e)/(2*n),i=Za(r*r+1);return[Fa(t)*Ba*(i-r),Fa(e)*Ua*za(2*Ca(Za((1-2*r*n)*(r+i)-n),Za(i+r+n)))]},dc.invert=function(t,e){if(!e)return[t,0];var n=e/Ba,r=(Ba*Ba*(1-n*n)-t*t)/(2*Ba*t);return[t?Ba*(Fa(t)*Za(r*r+1)-r):0,Ua*za(2*Ia(n))]},gc.invert=function(t,e){var n;if(!t||!e)return[t,e];var r=Fa(e);e=Sa(e)/Ba;var i=Fa(t)*t/Ua,o=(i*i-1+4*e*e)/Sa(i),a=o*o,s=e*(2-(e>.5?ka(e,Sa(t)):0)),u=t*t+e*e,l=50;do{var c=s*s,h=(8*s-c*(c+2)-5)/(2*c*(s-1)),f=(3*s-c*s-10)/(2*c*s),p=h*h,d=s*h,g=s+h,y=g*g,_=s+3*h,v=-2*g*(4*d*p+(1-4*c+3*c*c)*(1+f)+p*(14*c-6-a+(8*c-8-2*a)*f)+d*(12*c-8+(10*c-10-a)*f)),m=Za(y*(c+p*a-1)+(1-c)*(c*(_*_+4*p)+p*(12*d+4*p)));s-=n=(o*(y+p-1)+2*m-i*(4*y+a))/(o*(2*h*f+2*g*(1+f))+v/m-8*g*(o*(-1+p+y)+2*m)*(1+f)/(a+4*y))}while(n*u*u>qa&&--l>0);return[Fa(t)*(Za(o*o+4)+o)*Ba/4,r*Ua*s]};var vc=4*Ba+3*Za(3),mc=2*Za(2*Ba*Za(3)/vc),xc=ys(mc*Za(3)/Ba,mc,vc/6);function bc(t,e){return[t*Za(1-3*e*e/(Ba*Ba)),e]}function Mc(t,e){var n=Oa(e),r=Oa(t)*n,i=1-r,o=Oa(t=Ca(za(t)*n,-za(e))),a=za(t);return[a*(n=Za(1-r*r))-o*i,-o*n-a*i]}function wc(t,e){var n=rs(t,e);return[(n[0]+t/Ua)/2,(n[1]+e)/2]}bc.invert=function(t,e){return[t/Za(1-3*e*e/(Ba*Ba)),e]},Mc.invert=function(t,e){var n=(t*t+e*e)/-2,r=Za(-n*(2+n)),i=e*n+t*r,o=t*n-e*r,a=Za(o*o+i*i);return[Ca(r*i,a*(1+n)),a?-Ja(r*o/a):0]},wc.invert=function(t,e){var n=t,r=e,i=25;do{var o,a=Oa(r),s=za(r),u=za(2*r),l=s*s,c=a*a,h=za(n),f=Oa(n/2),p=za(n/2),d=p*p,g=1-c*f*f,y=g?Ka(a*f)*Za(o=1/g):o=0,_=.5*(2*y*a*p+n/Ua)-t,v=.5*(y*s+r)-e,m=.5*o*(c*d+y*a*f*l)+.5/Ua,x=o*(h*u/4-y*s*p),b=.125*o*(u*p-y*s*c*h),M=.5*o*(l*f+y*d*a)+.5,w=x*b-M*m,E=(v*x-_*M)/w,N=(_*b-v*m)/w;n-=E,r-=N}while((Sa(E)>qa||Sa(N)>qa)&&--i>0);return[n,r]};var Ec=Object.freeze({__proto__:null,geoAiry:function(){var t=Ua,e=Qo(ns),n=e(t);return n.radius=function(n){return arguments.length?e(t=n*Qa):t*Ha},n.scale(179.976).clipAngle(147)},geoAiryRaw:ns,geoAitoff:function(){return Ho(rs).scale(152.63)},geoAitoffRaw:rs,geoArmadillo:function(){var t=20*Qa,e=t>=0?1:-1,n=Ga(e*t),r=Qo(is),i=r(t),o=i.stream;return i.parallel=function(i){return arguments.length?(n=Ga((e=(t=i*Qa)>=0?1:-1)*t),r(t)):t*Ha},i.stream=function(r){var a=i.rotate(),s=o(r),u=(i.rotate([0,0]),o(r)),l=i.precision();return i.rotate(a),s.sphere=function(){u.polygonStart(),u.lineStart();for(var r=-180*e;e*r<180;r+=90*e)u.point(r,90*e);if(t)for(;e*(r-=3*e*l)>=-180;)u.point(r,e*-Ca(Oa(r*Qa/2),n)*Ha);u.lineEnd(),u.polygonEnd()},s},i.scale(218.695).center([0,28.0974])},geoArmadilloRaw:is,geoAugust:function(){return Ho(os).scale(66.1603)},geoAugustRaw:os,geoBaker:function(){return Ho(us).scale(112.314)},geoBakerRaw:us,geoBerghaus:function(){var t=5,e=Qo(ls),n=e(t),r=n.stream,i=.01,o=-Oa(i*Qa),a=za(i*Qa);return n.lobes=function(n){return arguments.length?e(t=+n):t},n.stream=function(e){var s=n.rotate(),u=r(e),l=(n.rotate([0,0]),r(e));return n.rotate(s),u.sphere=function(){l.polygonStart(),l.lineStart();for(var e=0,n=360/t,r=2*Ba/t,s=90-180/t,u=Ua;e<t;++e,s-=n,u-=r)l.point(Ca(a*Oa(u),o)*Ha,Ja(a*za(u))*Ha),s<-90?(l.point(-90,-180-s-i),l.point(-90,-180-s+i)):(l.point(90,s+i),l.point(90,s-i));l.lineEnd(),l.polygonEnd()},u},n.scale(87.8076).center([0,17.1875]).clipAngle(179.999)},geoBerghausRaw:ls,geoBertin1953:function(){return Ho(ds()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])},geoBertin1953Raw:ds,geoBoggs:function(){return Ho(xs).scale(160.857)},geoBoggsRaw:xs,geoBonne:function(){return bs(ws).scale(123.082).center([0,26.1441]).parallel(45)},geoBonneRaw:ws,geoBottomley:function(){var t=.5,e=Qo(Es),n=e(t);return n.fraction=function(n){return arguments.length?e(t=+n):t},n.scale(158.837)},geoBottomleyRaw:Es,geoBromley:function(){return Ho(Ns).scale(152.63)},geoBromleyRaw:Ns,geoChamberlin:Ls,geoChamberlinRaw:Os,geoChamberlinAfrica:function(){return Ls([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])},geoCollignon:function(){return Ho(As).scale(95.6464).center([0,30])},geoCollignonRaw:As,geoCraig:function(){return bs(Ts).scale(249.828).clipAngle(90)},geoCraigRaw:Ts,geoCraster:function(){return Ho(Rs).scale(156.19)},geoCrasterRaw:Rs,geoCylindricalEqualArea:function(){return bs(Ds).parallel(38.58).scale(195.044)},geoCylindricalEqualAreaRaw:Ds,geoCylindricalStereographic:function(){return bs(Fs).scale(124.75)},geoCylindricalStereographicRaw:Fs,geoEckert1:function(){return Ho(zs).scale(165.664)},geoEckert1Raw:zs,geoEckert2:function(){return Ho(Gs).scale(165.664)},geoEckert2Raw:Gs,geoEckert3:function(){return Ho(qs).scale(180.739)},geoEckert3Raw:qs,geoEckert4:function(){return Ho(js).scale(180.739)},geoEckert4Raw:js,geoEckert5:function(){return Ho(Bs).scale(173.044)},geoEckert5Raw:Bs,geoEckert6:function(){return Ho(Us).scale(173.044)},geoEckert6Raw:Us,geoEisenlohr:function(){return Ho(Ws).scale(62.5271)},geoEisenlohrRaw:Ws,geoFahey:function(){return Ho(Xs).scale(137.152)},geoFaheyRaw:Xs,geoFoucaut:function(){return Ho($s).scale(135.264)},geoFoucautRaw:$s,geoFoucautSinusoidal:function(){var t=.5,e=Qo(Hs),n=e(t);return n.alpha=function(n){return arguments.length?e(t=+n):t},n.scale(168.725)},geoFoucautSinusoidalRaw:Hs,geoGilbert:function(t){null==t&&(t=Ma);var e=t(),n=ca().scale(Ha).precision(0).clipAngle(null).translate([0,0]);function r(t){return e(Qs(t))}function i(t){r[t]=function(){return arguments.length?(e[t].apply(e,arguments),r):e[t]()}}return e.invert&&(r.invert=function(t){return Js(e.invert(t))}),r.stream=function(t){var r=e.stream(t),i=n.stream({point:function(t,e){r.point(t/2,Ja(Ga(-e/2*Qa))*Ha)},lineStart:function(){r.lineStart()},lineEnd:function(){r.lineEnd()},polygonStart:function(){r.polygonStart()},polygonEnd:function(){r.polygonEnd()}});return i.sphere=r.sphere,i},r.rotate=function(t){return arguments.length?(n.rotate(t),r):n.rotate()},r.center=function(t){return arguments.length?(e.center(Qs(t)),r):Js(e.center())},i("angle"),i("clipAngle"),i("clipExtent"),i("fitExtent"),i("fitHeight"),i("fitSize"),i("fitWidth"),i("scale"),i("translate"),i("precision"),r.scale(249.5)},geoGingery:function(){var t=6,e=30*Qa,n=Oa(e),r=za(e),i=Qo(Ks),o=i(e,t),a=o.stream,s=-Oa(.01*Qa),u=za(.01*Qa);return o.radius=function(o){return arguments.length?(n=Oa(e=o*Qa),r=za(e),i(e,t)):e*Ha},o.lobes=function(n){return arguments.length?i(e,t=+n):t},o.stream=function(e){var i=o.rotate(),l=a(e),c=(o.rotate([0,0]),a(e));return o.rotate(i),l.sphere=function(){c.polygonStart(),c.lineStart();for(var e=0,i=2*Ba/t,o=0;e<t;++e,o-=i)c.point(Ca(u*Oa(o),s)*Ha,Ja(u*za(o))*Ha),c.point(Ca(r*Oa(o-i/2),n)*Ha,Ja(r*za(o-i/2))*Ha);c.lineEnd(),c.polygonEnd()},l},o.rotate([90,-40]).scale(91.7095).clipAngle(179.999)},geoGingeryRaw:Ks,geoGinzburg4:function(){return Ho(nu).scale(149.995)},geoGinzburg4Raw:nu,geoGinzburg5:function(){return Ho(ru).scale(153.93)},geoGinzburg5Raw:ru,geoGinzburg6:function(){return Ho(iu).scale(130.945)},geoGinzburg6Raw:iu,geoGinzburg8:function(){return Ho(ou).scale(131.747)},geoGinzburg8Raw:ou,geoGinzburg9:function(){return Ho(au).scale(131.087)},geoGinzburg9Raw:au,geoGringorten:function(){return Ho(su(uu)).scale(239.75)},geoGringortenRaw:uu,geoGuyou:function(){return Ho(su(hu)).scale(151.496)},geoGuyouRaw:hu,geoHammer:function(){var t=2,e=Qo(cs),n=e(t);return n.coefficient=function(n){return arguments.length?e(t=+n):t},n.scale(169.529)},geoHammerRaw:cs,geoHammerRetroazimuthal:function(){var t=0,e=Qo(fu),n=e(t),r=n.rotate,i=n.stream,o=Hr();return n.parallel=function(r){if(!arguments.length)return t*Ha;var i=n.rotate();return e(t=r*Qa).rotate(i)},n.rotate=function(e){return arguments.length?(r.call(n,[e[0],e[1]-t*Ha]),o.center([-e[0],-e[1]]),n):((e=r.call(n))[1]+=t*Ha,e)},n.stream=function(t){return(t=i(t)).sphere=function(){t.polygonStart();var e,n=o.radius(89.99)().coordinates[0],r=n.length-1,i=-1;for(t.lineStart();++i<r;)t.point((e=n[i])[0],e[1]);for(t.lineEnd(),r=(n=o.radius(90.01)().coordinates[0]).length-1,t.lineStart();--i>=0;)t.point((e=n[i])[0],e[1]);t.lineEnd(),t.polygonEnd()},t},n.scale(79.4187).parallel(45).clipAngle(179.999)},geoHammerRetroazimuthalRaw:fu,geoHealpix:function(){var t=4,e=Qo(yu),n=e(t),r=n.stream;return n.lobes=function(n){return arguments.length?e(t=+n):t},n.stream=function(e){var i=n.rotate(),o=r(e),a=(n.rotate([0,0]),r(e));return n.rotate(i),o.sphere=function(){bn(function(t){var e=[].concat(ke(-180,180+t/2,t).map(_u),ke(180,-180-t/2,-t).map(vu));return{type:"Polygon",coordinates:[180===t?e.map(mu):e]}}(180/t),a)},o},n.scale(239.75)},geoHealpixRaw:yu,geoHill:function(){var t=1,e=Qo(xu),n=e(t);return n.ratio=function(n){return arguments.length?e(t=+n):t},n.scale(167.774).center([0,18.67])},geoHillRaw:xu,geoHomolosine:function(){return Ho(Eu).scale(152.63)},geoHomolosineRaw:Eu,geoHufnagel:function(){var t=1,e=0,n=45*Qa,r=2,i=Qo(Nu),o=i(t,e,n,r);return o.a=function(o){return arguments.length?i(t=+o,e,n,r):t},o.b=function(o){return arguments.length?i(t,e=+o,n,r):e},o.psiMax=function(o){return arguments.length?i(t,e,n=+o*Qa,r):n*Ha},o.ratio=function(o){return arguments.length?i(t,e,n,r=+o):r},o.scale(180.739)},geoHufnagelRaw:Nu,geoHyperelliptical:function(){var t=0,e=2.5,n=1.183136,r=Qo(Cu),i=r(t,e,n);return i.alpha=function(i){return arguments.length?r(t=+i,e,n):t},i.k=function(i){return arguments.length?r(t,e=+i,n):e},i.gamma=function(i){return arguments.length?r(t,e,n=+i):n},i.scale(152.63)},geoHyperellipticalRaw:Cu,geoInterrupt:Au,geoInterruptedBoggs:function(){return Au(xs,Tu).scale(160.857)},geoInterruptedHomolosine:function(){return Au(Eu,ku).scale(152.63)},geoInterruptedMollweide:function(){return Au(_s,Ru).scale(169.529)},geoInterruptedMollweideHemispheres:function(){return Au(_s,Du).scale(169.529).rotate([20,0])},geoInterruptedSinuMollweide:function(){return Au(wu,Fu,ps).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},geoInterruptedSinusoidal:function(){return Au(Ms,zu).scale(152.63).rotate([-20,0])},geoKavrayskiy7:function(){return Ho(Gu).scale(158.837)},geoKavrayskiy7Raw:Gu,geoLagrange:function(){var t=.5,e=Qo(qu),n=e(t);return n.spacing=function(n){return arguments.length?e(t=+n):t},n.scale(124.75)},geoLagrangeRaw:qu,geoLarrivee:function(){return Ho(Bu).scale(97.2672)},geoLarriveeRaw:Bu,geoLaskowski:function(){return Ho(Uu).scale(139.98)},geoLaskowskiRaw:Uu,geoLittrow:function(){return Ho(Vu).scale(144.049).clipAngle(89.999)},geoLittrowRaw:Vu,geoLoximuthal:function(){return bs(Wu).parallel(40).scale(158.837)},geoLoximuthalRaw:Wu,geoMiller:function(){return Ho(Yu).scale(108.318)},geoMillerRaw:Yu,geoModifiedStereographic:Zu,geoModifiedStereographicRaw:Xu,geoModifiedStereographicAlaska:function(){return Zu($u,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)},geoModifiedStereographicGs48:function(){return Zu(Hu,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])},geoModifiedStereographicGs50:function(){return Zu(Qu,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])},geoModifiedStereographicMiller:function(){return Zu(Ju,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)},geoModifiedStereographicLee:function(){return Zu(Ku,[165,10]).scale(250).clipAngle(130).center([-165,-10])},geoMollweide:function(){return Ho(_s).scale(169.529)},geoMollweideRaw:_s,geoMtFlatPolarParabolic:function(){return Ho(nl).scale(164.859)},geoMtFlatPolarParabolicRaw:nl,geoMtFlatPolarQuartic:function(){return Ho(rl).scale(188.209)},geoMtFlatPolarQuarticRaw:rl,geoMtFlatPolarSinusoidal:function(){return Ho(il).scale(166.518)},geoMtFlatPolarSinusoidalRaw:il,geoNaturalEarth2:function(){return Ho(ol).scale(175.295)},geoNaturalEarth2Raw:ol,geoNellHammer:function(){return Ho(al).scale(152.63)},geoNellHammerRaw:al,geoInterruptedQuarticAuthalic:function(){return Au(cs(1/0),sl).rotate([20,0]).scale(152.63)},geoNicolosi:function(){return Ho(ul).scale(127.267)},geoNicolosiRaw:ul,geoPatterson:function(){return Ho(dl).scale(139.319)},geoPattersonRaw:dl,geoPolyconic:function(){return Ho(gl).scale(103.74)},geoPolyconicRaw:gl,geoPolyhedral:xl,geoPolyhedralButterfly:function(t){t=t||function(t){var e=zr({type:"MultiPoint",coordinates:t});return ma().scale(1).translate([0,0]).rotate([-e[0],-e[1]])};var e=Nl.map((function(e){return{face:e,project:t(e)}}));return[-1,0,0,1,0,1,4,5].forEach((function(t,n){var r=e[t];r&&(r.children||(r.children=[])).push(e[n])})),xl(e[0],(function(t,n){return e[t<-Ba/2?n<0?6:4:t<0?n<0?2:0:t<Ba/2?n<0?3:1:n<0?7:5]})).angle(-30).scale(101.858).center([0,45])},geoPolyhedralCollignon:function(t){t=t||function(t){var e=zr({type:"MultiPoint",coordinates:t});return Ho(Il).translate([0,0]).scale(1).rotate(e[1]>0?[-e[0],0]:[180-e[0],180])};var e=Nl.map((function(e){return{face:e,project:t(e)}}));return[-1,0,0,1,0,1,4,5].forEach((function(t,n){var r=e[t];r&&(r.children||(r.children=[])).push(e[n])})),xl(e[0],(function(t,n){return e[t<-Ba/2?n<0?6:4:t<0?n<0?2:0:t<Ba/2?n<0?3:1:n<0?7:5]})).angle(-30).scale(121.906).center([0,48.5904])},geoPolyhedralWaterman:function(t){t=t||function(t){var e=6===t.length?zr({type:"MultiPoint",coordinates:t}):t[0];return ma().scale(1).translate([0,0]).rotate([-e[0],-e[1]])};var e=Nl.map((function(t){for(var e,n=t.map(Ll),r=n.length,i=n[r-1],o=[],a=0;a<r;++a)e=n[a],o.push(Pl([.9486832980505138*i[0]+.31622776601683794*e[0],.9486832980505138*i[1]+.31622776601683794*e[1],.9486832980505138*i[2]+.31622776601683794*e[2]]),Pl([.9486832980505138*e[0]+.31622776601683794*i[0],.9486832980505138*e[1]+.31622776601683794*i[1],.9486832980505138*e[2]+.31622776601683794*i[2]])),i=e;return o})),n=[],r=[-1,0,0,1,0,1,4,5];e.forEach((function(t,i){for(var o=Nl[i],a=o.length,s=n[i]=[],u=0;u<a;++u)e.push([o[u],t[(2*u+2)%(2*a)],t[(2*u+1)%(2*a)]]),r.push(i),s.push(Ol(Ll(t[(2*u+2)%(2*a)]),Ll(t[(2*u+1)%(2*a)])))}));var i=e.map((function(e){return{project:t(e),face:e}}));return r.forEach((function(t,e){var n=i[t];n&&(n.children||(n.children=[])).push(i[e])})),xl(i[0],(function(t,e){var r=Oa(e),o=[r*Oa(t),r*za(t),za(e)],a=t<-Ba/2?e<0?6:4:t<0?e<0?2:0:t<Ba/2?e<0?3:1:e<0?7:5,s=n[a];return i[Cl(s[0],o)<0?8+3*a:Cl(s[1],o)<0?8+3*a+1:Cl(s[2],o)<0?8+3*a+2:a]})).angle(-30).scale(110.625).center([0,45])},geoProject:function(t,e){var n,r=e.stream;if(!r)throw new Error("invalid projection");switch(t&&t.type){case"Feature":n=kl;break;case"FeatureCollection":n=Tl;break;default:n=Rl}return n(t,r)},geoGringortenQuincuncial:function(){return jl(uu).scale(176.423)},geoPeirceQuincuncial:function(){return jl(hu).scale(111.48)},geoQuantize:function(t,e){if(!(0<=(e=+e)&&e<=20))throw new Error("invalid digits");function n(t){var n=t.length,r=2,i=new Array(n);for(i[0]=+t[0].toFixed(e),i[1]=+t[1].toFixed(e);r<n;)i[r]=t[r],++r;return i}function r(t){return t.map(n)}function i(t){for(var e=n(t[0]),r=[e],i=1;i<t.length;i++){var o=n(t[i]);(o.length>2||o[0]!=e[0]||o[1]!=e[1])&&(r.push(o),e=o)}return 1===r.length&&t.length>1&&r.push(n(t[t.length-1])),r}function o(t){return t.map(i)}function a(t){if(null==t)return t;var e;switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(a)};break;case"Point":e={type:"Point",coordinates:n(t.coordinates)};break;case"MultiPoint":e={type:t.type,coordinates:r(t.coordinates)};break;case"LineString":e={type:t.type,coordinates:i(t.coordinates)};break;case"MultiLineString":case"Polygon":e={type:t.type,coordinates:o(t.coordinates)};break;case"MultiPolygon":e={type:"MultiPolygon",coordinates:t.coordinates.map(o)};break;default:return t}return null!=t.bbox&&(e.bbox=t.bbox),e}function s(t){var e={type:"Feature",properties:t.properties,geometry:a(t.geometry)};return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),e}if(null!=t)switch(t.type){case"Feature":return s(t);case"FeatureCollection":var u={type:"FeatureCollection",features:t.features.map(s)};return null!=t.bbox&&(u.bbox=t.bbox),u;default:return a(t)}return t},geoQuincuncial:jl,geoRectangularPolyconic:function(){return bs(Bl).scale(131.215)},geoRectangularPolyconicRaw:Bl,geoRobinson:function(){return Ho(Vl).scale(152.63)},geoRobinsonRaw:Vl,geoSatellite:function(){var t=2,e=0,n=Qo(Wl),r=n(t,e);return r.distance=function(r){return arguments.length?n(t=+r,e):t},r.tilt=function(r){return arguments.length?n(t,e=r*Qa):e*Ha},r.scale(432.147).clipAngle(Ka(1/t)*Ha-1e-6)},geoSatelliteRaw:Wl,geoSinuMollweide:function(){return Ho(wu).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},geoSinuMollweideRaw:wu,geoSinusoidal:function(){return Ho(Ms).scale(152.63)},geoSinusoidalRaw:Ms,geoStitch:function(t){if(null==t)return t;switch(t.type){case"Feature":return ic(t);case"FeatureCollection":var e={type:"FeatureCollection",features:t.features.map(ic)};return null!=t.bbox&&(e.bbox=t.bbox),e;default:return oc(t)}},geoTimes:function(){return Ho(ac).scale(146.153)},geoTimesRaw:ac,geoTwoPointAzimuthal:lc,geoTwoPointAzimuthalRaw:uc,geoTwoPointAzimuthalUsa:function(){return lc([-158,21.5],[-77,39]).clipAngle(60).scale(400)},geoTwoPointEquidistant:hc,geoTwoPointEquidistantRaw:cc,geoTwoPointEquidistantUsa:function(){return hc([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)},geoVanDerGrinten:function(){return Ho(fc).scale(79.4183)},geoVanDerGrintenRaw:fc,geoVanDerGrinten2:function(){return Ho(pc).scale(79.4183)},geoVanDerGrinten2Raw:pc,geoVanDerGrinten3:function(){return Ho(dc).scale(79.4183)},geoVanDerGrinten3Raw:dc,geoVanDerGrinten4:function(){return Ho(gc).scale(127.16)},geoVanDerGrinten4Raw:gc,geoWagner:_c,geoWagner7:function(){return _c().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)},geoWagnerRaw:yc,geoWagner4:function(){return Ho(xc).scale(176.84)},geoWagner4Raw:xc,geoWagner6:function(){return Ho(bc).scale(152.63)},geoWagner6Raw:bc,geoWiechel:function(){return Ho(Mc).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)},geoWiechelRaw:Mc,geoWinkel3:function(){return Ho(wc).scale(158.837)},geoWinkel3Raw:wc}),Nc=Object.prototype.hasOwnProperty;function Sc(t,e,n,r,i,o){3===arguments.length&&(r=o=Array,i=null);for(var a=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=new o(t),u=t-1,l=0;l<t;++l)a[l]=i;function c(r,o){for(var l=e(r)&u,c=a[l],h=0;c!=i;){if(n(c,r))return s[l]=o;if(++h>=t)throw new Error("full hashmap");c=a[l=l+1&u]}return a[l]=r,s[l]=o,o}function h(r,o){for(var l=e(r)&u,c=a[l],h=0;c!=i;){if(n(c,r))return s[l];if(++h>=t)throw new Error("full hashmap");c=a[l=l+1&u]}return a[l]=r,s[l]=o,o}function f(r,o){for(var l=e(r)&u,c=a[l],h=0;c!=i;){if(n(c,r))return s[l];if(++h>=t)break;c=a[l=l+1&u]}return o}function p(){for(var t=[],e=0,n=a.length;e<n;++e){var r=a[e];r!=i&&t.push(r)}return t}return{set:c,maybeSet:h,get:f,keys:p}}function Ic(t,e){return t[0]===e[0]&&t[1]===e[1]}var Cc=new ArrayBuffer(16),Oc=new Float64Array(Cc),Pc=new Uint32Array(Cc);function Lc(t){Oc[0]=t[0],Oc[1]=t[1];var e=Pc[0]^Pc[1];return 2147483647&(e=e<<5^e>>7^Pc[2]^Pc[3])}function Ac(t){var e,n,r,i,o=t.coordinates,a=t.lines,s=t.rings,u=function(){for(var t=Sc(1.4*o.length,b,M,Int32Array,-1,Int32Array),e=new Int32Array(o.length),n=0,r=o.length;n<r;++n)e[n]=t.maybeSet(n,n);return e}(),l=new Int32Array(o.length),c=new Int32Array(o.length),h=new Int32Array(o.length),f=new Int8Array(o.length),p=0;for(e=0,n=o.length;e<n;++e)l[e]=c[e]=h[e]=-1;for(e=0,n=a.length;e<n;++e){var d=a[e],g=d[0],y=d[1];for(r=u[g],i=u[++g],++p,f[r]=1;++g<=y;)x(e,r,r=i,i=u[g]);++p,f[i]=1}for(e=0,n=o.length;e<n;++e)l[e]=-1;for(e=0,n=s.length;e<n;++e){var _=s[e],v=_[0]+1,m=_[1];for(x(e,u[m-1],r=u[v-1],i=u[v]);++v<=m;)x(e,r,r=i,i=u[v])}function x(t,e,n,r){if(l[n]!==t){l[n]=t;var i=c[n];if(i>=0){var o=h[n];i===e&&o===r||i===r&&o===e||(++p,f[n]=1)}else c[n]=e,h[n]=r}}function b(t){return Lc(o[t])}function M(t,e){return Ic(o[t],o[e])}l=c=h=null;var w,E=function(t,e,n,r,i){3===arguments.length&&(r=Array,i=null);for(var o=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=t-1,s=0;s<t;++s)o[s]=i;function u(r){for(var s=e(r)&a,u=o[s],l=0;u!=i;){if(n(u,r))return!0;if(++l>=t)throw new Error("full hashset");u=o[s=s+1&a]}return o[s]=r,!0}function l(r){for(var s=e(r)&a,u=o[s],l=0;u!=i;){if(n(u,r))return!0;if(++l>=t)break;u=o[s=s+1&a]}return!1}function c(){for(var t=[],e=0,n=o.length;e<n;++e){var r=o[e];r!=i&&t.push(r)}return t}return{add:u,has:l,values:c}}(1.4*p,Lc,Ic);for(e=0,n=o.length;e<n;++e)f[w=u[e]]&&E.add(o[w]);return E}function Tc(t,e,n,r){kc(t,e,n),kc(t,e,e+r),kc(t,e+r,n)}function kc(t,e,n){for(var r,i=e+(n---e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function Rc(t){var e,n,r={};for(e in t)r[e]=null==(n=t[e])?{type:null}:("FeatureCollection"===n.type?Dc:"Feature"===n.type?Fc:zc)(n);return r}function Dc(t){var e={type:"GeometryCollection",geometries:t.features.map(Fc)};return null!=t.bbox&&(e.bbox=t.bbox),e}function Fc(t){var e,n=zc(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function zc(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(zc)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Gc(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function qc(t,e){var n,r=t[0],i=t[1],o=e[0],a=e[1];return i<r&&(n=r,r=i,i=n),a<o&&(n=o,o=a,a=n),r===o&&i===a}var jc=Object.freeze({__proto__:null,topology:function(t,e){var n=function(t){var e=1/0,n=1/0,r=-1/0,i=-1/0;function o(t){null!=t&&Nc.call(a,t.type)&&a[t.type](t)}var a={GeometryCollection:function(t){t.geometries.forEach(o)},Point:function(t){s(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(s)},LineString:function(t){u(t.arcs)},MultiLineString:function(t){t.arcs.forEach(u)},Polygon:function(t){t.arcs.forEach(u)},MultiPolygon:function(t){t.arcs.forEach(l)}};function s(t){var o=t[0],a=t[1];o<e&&(e=o),o>r&&(r=o),a<n&&(n=a),a>i&&(i=a)}function u(t){t.forEach(s)}function l(t){t.forEach(u)}for(var c in t)o(t[c]);return r>=e&&i>=n?[e,n,r,i]:void 0}(t=Rc(t)),r=e>0&&n&&function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=o-r?(n-1)/(o-r):1,u=a-i?(n-1)/(a-i):1;function l(t){return[Math.round((t[0]-r)*s),Math.round((t[1]-i)*u)]}function c(t,e){for(var n,o,a,l,c,h=-1,f=0,p=t.length,d=new Array(p);++h<p;)n=t[h],l=Math.round((n[0]-r)*s),c=Math.round((n[1]-i)*u),l===o&&c===a||(d[f++]=[o=l,a=c]);for(d.length=f;f<e;)f=d.push([d[0][0],d[0][1]]);return d}function h(t){return c(t,2)}function f(t){return c(t,4)}function p(t){return t.map(f)}function d(t){null!=t&&Nc.call(g,t.type)&&g[t.type](t)}var g={GeometryCollection:function(t){t.geometries.forEach(d)},Point:function(t){t.coordinates=l(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(l)},LineString:function(t){t.arcs=h(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(h)},Polygon:function(t){t.arcs=p(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(p)}};for(var y in t)d(t[y]);return{scale:[1/s,1/u],translate:[r,i]}}(t,n,e),i=function(t){var e,n,r,i,o=t.coordinates,a=t.lines,s=t.rings,u=a.length+s.length;for(delete t.lines,delete t.rings,r=0,i=a.length;r<i;++r)for(e=a[r];e=e.next;)++u;for(r=0,i=s.length;r<i;++r)for(n=s[r];n=n.next;)++u;var l=Sc(2*u*1.4,Lc,Ic),c=t.arcs=[];for(r=0,i=a.length;r<i;++r){e=a[r];do{h(e)}while(e=e.next)}for(r=0,i=s.length;r<i;++r)if((n=s[r]).next)do{h(n)}while(n=n.next);else f(n);function h(t){var e,n,r,i,a,s,u,h;if(r=l.get(e=o[t[0]]))for(u=0,h=r.length;u<h;++u)if(p(i=r[u],t))return t[0]=i[0],void(t[1]=i[1]);if(a=l.get(n=o[t[1]]))for(u=0,h=a.length;u<h;++u)if(d(s=a[u],t))return t[1]=s[0],void(t[0]=s[1]);r?r.push(t):l.set(e,[t]),a?a.push(t):l.set(n,[t]),c.push(t)}function f(t){var e,n,r,i,a;if(n=l.get(o[t[0]]))for(i=0,a=n.length;i<a;++i){if(g(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(y(r,t))return t[0]=r[1],void(t[1]=r[0])}if(n=l.get(e=o[t[0]+_(t)]))for(i=0,a=n.length;i<a;++i){if(g(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(y(r,t))return t[0]=r[1],void(t[1]=r[0])}n?n.push(t):l.set(e,[t]),c.push(t)}function p(t,e){var n=t[0],r=e[0],i=t[1];if(n-i!=r-e[1])return!1;for(;n<=i;++n,++r)if(!Ic(o[n],o[r]))return!1;return!0}function d(t,e){var n=t[0],r=e[0],i=t[1],a=e[1];if(n-i!=r-a)return!1;for(;n<=i;++n,--a)if(!Ic(o[n],o[a]))return!1;return!0}function g(t,e){var n=t[0],r=e[0],i=t[1]-n;if(i!==e[1]-r)return!1;for(var a=_(t),s=_(e),u=0;u<i;++u)if(!Ic(o[n+(u+a)%i],o[r+(u+s)%i]))return!1;return!0}function y(t,e){var n=t[0],r=e[0],i=t[1],a=e[1],s=i-n;if(s!==a-r)return!1;for(var u=_(t),l=s-_(e),c=0;c<s;++c)if(!Ic(o[n+(c+u)%s],o[a-(c+l)%s]))return!1;return!0}function _(t){for(var e=t[0],n=t[1],r=e,i=r,a=o[r];++r<n;){var s=o[r];(s[0]<a[0]||s[0]===a[0]&&s[1]<a[1])&&(i=r,a=s)}return i-e}return t}(function(t){var e,n,r,i=Ac(t),o=t.coordinates,a=t.lines,s=t.rings;for(n=0,r=a.length;n<r;++n)for(var u=a[n],l=u[0],c=u[1];++l<c;)i.has(o[l])&&(e={0:l,1:u[1]},u[1]=l,u=u.next=e);for(n=0,r=s.length;n<r;++n)for(var h=s[n],f=h[0],p=f,d=h[1],g=i.has(o[f]);++p<d;)i.has(o[p])&&(g?(e={0:p,1:h[1]},h[1]=p,h=h.next=e):(Tc(o,f,d,d-p),o[d]=o[f],g=!0,p=f));return t}(function(t){var e=-1,n=[],r=[],i=[];function o(t){t&&Nc.call(a,t.type)&&a[t.type](t)}var a={GeometryCollection:function(t){t.geometries.forEach(o)},LineString:function(t){t.arcs=s(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(s)},Polygon:function(t){t.arcs=t.arcs.map(u)},MultiPolygon:function(t){t.arcs=t.arcs.map(l)}};function s(t){for(var r=0,o=t.length;r<o;++r)i[++e]=t[r];var a={0:e-o+1,1:e};return n.push(a),a}function u(t){for(var n=0,o=t.length;n<o;++n)i[++e]=t[n];var a={0:e-o+1,1:e};return r.push(a),a}function l(t){return t.map(u)}for(var c in t)o(t[c]);return{type:"Topology",coordinates:i,lines:n,rings:r,objects:t}}(t))),o=i.coordinates,a=Sc(1.4*i.arcs.length,Gc,qc);function s(t){t&&Nc.call(u,t.type)&&u[t.type](t)}t=i.objects,i.bbox=n,i.arcs=i.arcs.map((function(t,e){return a.set(t,e),o.slice(t[0],t[1]+1)})),delete i.coordinates,o=null;var u={GeometryCollection:function(t){t.geometries.forEach(s)},LineString:function(t){t.arcs=l(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(l)},Polygon:function(t){t.arcs=t.arcs.map(l)},MultiPolygon:function(t){t.arcs=t.arcs.map(c)}};function l(t){var e=[];do{var n=a.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function c(t){return t.map(l)}for(var h in t)s(t[h]);return r&&(i.transform=r,i.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var r,i,o=t[e],a=0,s=1,u=o.length,l=o[0],c=l[0],h=l[1];++a<u;)r=(l=o[a])[0],i=l[1],r===c&&i===h||(o[s++]=[r-c,i-h],c=r,h=i);1===s&&(o[s++]=[0,0]),o.length=s}return t}(i.arcs)),i}});function Bc(t){return t}function Uc(t){if(null==t)return Bc;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0);var u=2,l=t.length,c=new Array(l);for(c[0]=(e+=t[0])*r+o,c[1]=(n+=t[1])*i+a;u<l;)c[u]=t[u],++u;return c}}function Vc(t){var e,n=Uc(t.transform),r=1/0,i=r,o=-r,a=-r;function s(t){(t=n(t))[0]<r&&(r=t[0]),t[0]>o&&(o=t[0]),t[1]<i&&(i=t[1]),t[1]>a&&(a=t[1])}function u(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(u);break;case"Point":s(t.coordinates);break;case"MultiPoint":t.coordinates.forEach(s)}}for(e in t.arcs.forEach((function(t){for(var e,s=-1,u=t.length;++s<u;)(e=n(t[s],s))[0]<r&&(r=e[0]),e[0]>o&&(o=e[0]),e[1]<i&&(i=e[1]),e[1]>a&&(a=e[1])})),t.objects)u(t.objects[e]);return[r,i,o,a]}function Wc(t,e){var n=e.id,r=e.bbox,i=null==e.properties?{}:e.properties,o=Yc(t,e);return null==n&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function Yc(t,e){var n=Uc(t.transform),r=t.arcs;function i(t,e){e.length&&e.pop();for(var i=r[t<0?~t:t],o=0,a=i.length;o<a;++o)e.push(n(i[o],o));t<0&&function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}(e,a)}function o(t){return n(t)}function a(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function s(t){for(var e=a(t);e.length<4;)e.push(e[0]);return e}function u(t){return t.map(s)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=o(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(o);break;case"LineString":n=a(e.arcs);break;case"MultiLineString":n=e.arcs.map(a);break;case"Polygon":n=u(e.arcs);break;case"MultiPolygon":n=e.arcs.map(u);break;default:return null}return{type:r,coordinates:n}}(e)}function Xc(t,e){var n={},r={},i={},o=[],a=-1;function s(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach((function(t){n[t<0?~t:t]=1})),o.push(i)}}return e.forEach((function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++a],e[a]=n,e[r]=i)})),e.forEach((function(e){var n,o,a=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];t.transform?(n=[0,0],r.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=r[r.length-1];return e<0?[n,i]:[i,n]}(e),s=a[0],u=a[1];if(n=i[s])if(delete i[n.end],n.push(e),n.end=u,o=r[u]){delete r[o.start];var l=o===n?n:n.concat(o);r[l.start=n.start]=i[l.end=o.end]=l}else r[n.start]=i[n.end]=n;else if(n=r[u])if(delete r[n.start],n.unshift(e),n.start=s,o=i[s]){delete i[o.end];var c=o===n?n:o.concat(n);r[c.start=o.start]=i[c.end=n.end]=c}else r[n.start]=i[n.end]=n;else r[(n=[e]).start=s]=i[n.end=u]=n})),s(i,r),s(r,i),e.forEach((function(t){n[t<0?~t:t]||o.push([t])})),o}function $c(t,e,n){var r,i,o;if(arguments.length>1)r=Hc(t,e,n);else for(i=0,r=new Array(o=t.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:Xc(t,r)}}function Hc(t,e,n){var r,i=[],o=[];function a(t){var e=t<0?~t:t;(o[e]||(o[e]=[])).push({i:t,g:r})}function s(t){t.forEach(a)}function u(t){t.forEach(s)}return function t(e){switch(r=e,e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"LineString":s(e.arcs);break;case"MultiLineString":case"Polygon":u(e.arcs);break;case"MultiPolygon":!function(t){t.forEach(u)}(e.arcs)}}(e),o.forEach(null==n?function(t){i.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&i.push(t[0].i)}),i}function Qc(t,e){var n={},r=[],i=[];function o(t){t.forEach((function(e){e.forEach((function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)}))})),r.push(t)}function a(e){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(Yc(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":o(e.arcs);break;case"MultiPolygon":e.arcs.forEach(o)}})),r.forEach((function(t){if(!t._){var e=[],r=[t];for(t._=1,i.push(e);t=r.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].forEach((function(t){t._||(t._=1,r.push(t))}))}))}))}})),r.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:i.map((function(e){var r,i=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].length<2&&i.push(t)}))}))})),(r=(i=Xc(t,i)).length)>1)for(var o,s,u=1,l=a(i[0]);u<r;++u)(o=a(i[u]))>l&&(s=i[0],i[0]=i[u],i[u]=s,l=o);return i})).filter((function(t){return t.length>0}))}}function Jc(t,e){for(var n=0,r=t.length;n<r;){var i=n+r>>>1;t[i]<e?n=i+1:r=i}return n}function Kc(t){if(null==t)return Bc;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0);var u=2,l=t.length,c=new Array(l),h=Math.round((t[0]-o)/r),f=Math.round((t[1]-a)/i);for(c[0]=h-e,e=h,c[1]=f-n,n=f;u<l;)c[u]=t[u],++u;return c}}var Zc=Object.freeze({__proto__:null,bbox:Vc,feature:function(t,e){return"string"==typeof e&&(e=t.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map((function(e){return Wc(t,e)}))}:Wc(t,e)},mesh:function(t){return Yc(t,$c.apply(this,arguments))},meshArcs:$c,merge:function(t){return Yc(t,Qc.apply(this,arguments))},mergeArcs:Qc,neighbors:function(t){var e={},n=t.map((function(){return[]}));function r(t,n){t.forEach((function(t){t<0&&(t=~t);var r=e[t];r?r.push(n):e[t]=[n]}))}function i(t,e){t.forEach((function(t){r(t,e)}))}var o={LineString:r,MultiLineString:i,Polygon:i,MultiPolygon:function(t,e){t.forEach((function(t){i(t,e)}))}};for(var a in t.forEach((function t(e,n){"GeometryCollection"===e.type?e.geometries.forEach((function(e){t(e,n)})):e.type in o&&o[e.type](e.arcs,n)})),e)for(var s=e[a],u=s.length,l=0;l<u;++l)for(var c=l+1;c<u;++c){var h,f=s[l],p=s[c];(h=n[f])[a=Jc(h,p)]!==p&&h.splice(a,0,p),(h=n[p])[a=Jc(h,f)]!==f&&h.splice(a,0,f)}return n},quantize:function(t,e){if(t.transform)throw new Error("already quantized");if(e&&e.scale)s=t.bbox;else{if(!((n=Math.floor(e))>=2))throw new Error("n must be ≥2");var n,r=(s=t.bbox||Vc(t))[0],i=s[1],o=s[2],a=s[3];e={scale:[o-r?(o-r)/(n-1):1,a-i?(a-i)/(n-1):1],translate:[r,i]}}var s,u,l=Kc(e),c=t.objects,h={};function f(t){return l(t)}function p(t){var e;switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(p)};break;case"Point":e={type:"Point",coordinates:f(t.coordinates)};break;case"MultiPoint":e={type:"MultiPoint",coordinates:t.coordinates.map(f)};break;default:return t}return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),null!=t.properties&&(e.properties=t.properties),e}for(u in c)h[u]=p(c[u]);return{type:"Topology",bbox:s,transform:e,objects:h,arcs:t.arcs.map((function(t){var e,n=0,r=1,i=t.length,o=new Array(i);for(o[0]=l(t[0],0);++n<i;)((e=l(t[n],n))[0]||e[1])&&(o[r++]=e);return 1===r&&(o[r++]=[0,0]),o.length=r,o}))}},transform:Uc,untransform:Kc});const th=Object.assign({},jc,Zc);function eh(t){return"Topology"==t.type?th.feature(t,Object.keys(t.objects)[0]):t}const nh=Object.assign({},bt,Na,Ec);function rh(t){let e=["z","l","p"],n=t.features.map((t=>t.geometry.type));n=Array.from(new Set(n));let r=(-1!==n.indexOf("Polygon")||-1!==n.indexOf("MultiPolygon")?e[0]:"")+(-1!==n.indexOf("LineString")||-1!==n.indexOf("MultiLineString")?e[1]:"")+(-1!==n.indexOf("Point")||-1!==n.indexOf("MultiPoint")?e[2]:"");return 1==r.length?r:"composite"}Object.assign({},bt,Na,Ec);const ih=Object.assign({},Na);function oh(t){let e=t[0][0],n=t[0][1],r=t[1][0],i=t[1][1];const o={type:"FeatureCollection",features:[{type:"Feature",properties:{id:1},geometry:{type:"Polygon",coordinates:-90===n?[[[e,i],[r,i]]]:[[[e,n],[e,i],[r+=360*(r<e),i],[r,n],[e,n]]]}}]};return ah(ih.geoEquirectangularRaw,.02)(o)}const ah=(t,e)=>{const n=Math.PI/180,r=Math.tan(n*e/2)**2,i=function(e,n,o,a,s,u,l){if(u--){var c=uh(e,o),h=t.invert(...c),f=ch(h),p=hh(f,n),d=hh(f,a);sh(f,n,a)*(1+.25*s)*(1+.25*s)/(r*s)+(p-d)/s*2*((p-d)/s)>1&p+d>r|p+d>.25&&(i(e,n,c,f,p,u,l),l.push(h),i(c,f,o,a,d,u,l))}},o=e=>{let n=[],r=e[0],o=t.invert(...r),a=ch(o);n.push(o);for(var s=1,u=e.length;s<u;s++){let o=e[s],u=t.invert(...o),l=ch(u);i(r,a,o,l,hh(a,l),16,n),n.push(u),r=o,a=l}return n};let a,s=e=>t.invert(...e),u=t=>e=>e.forEach(((n,r)=>e[r]=t(n))),l={Point:t=>t.coordinates=s(t.coordinates),MultiPoint:t=>u(s)(t.coordinates),LineString:t=>t.coordinates=o(t.coordinates),Polygon:t=>u(o)(t.coordinates),MultiLineString:t=>u(o)(t.coordinates),MultiPolygon:t=>t.coordinates.forEach(u(o)),Feature:t=>a(t.geometry),GeometryCollection:t=>t.geometries.forEach(a),FeatureCollection:t=>t.features.forEach(a)};return a=t=>(l?.[t?.type]?.(t),t),function(t){return t=JSON.parse(JSON.stringify(t)),a(t)}},sh=([t,e,n],[r,i,o],[a,s,u])=>{var l=t*((i-e)*(u-n)-(s-e)*(o-n))+e*((o-n)*(a-t)-(u-n)*(r-t))+n*((r-t)*(s-e)-(a-t)*(i-e)),c=(t+a)*(t+r)+(e+s)*(e+i)+(n+u)*(n+o);return(l*l+!(c*c))/(c*c)},uh=([t,e],[n,r])=>[.5*(t+n),.5*(e+r)],lh=Math.PI/180,ch=([t,e])=>[Math.cos(lh*e)*Math.cos(lh*t),Math.cos(lh*e)*Math.sin(lh*t),Math.sin(lh*e)],hh=([t,e,n],[r,i,o])=>{var a=t*(i-e)-(r-t)*e,s=e*(o-n)-(i-e)*n,u=n*(r-t)-(o-n)*t,l=t*(r+t)+e*(i+e)+n*(o+n);return(a*a+s*s+u*u+!(l*l))/(l*l)},fh=Object.assign({},Na,Ec);const ph=Object.assign({},Na);const dh=Object.assign({},Ec);const gh=Object.assign({},Na,Ec);function yh(t,e){const{abs:n,atan:r,ln:i,PI:o,sin:a,sqrt:s}=Math,u=1e-5,l=a(t);let c=s(1-e),h=l*l;if(h>=1||n(t)===o/2){if(c<=u)return l<0?-1/0:1/0;for(h=e=1,e+=c;n(h-c)>.001*e;)c=s(h*c),h=e/=2,e+=c;return l<0?-o/e:o/e}{if(c<=u)return i((1+l)/(1-l))/2;let t,a,f,p,d;for(a=0,t=e=1,f=e*c,e+=c,d=s((1-h)/h),n(d-=f/d)<=0&&(d=1e-9*s(f));n(t-c)>.001*t;)c=2*s(f),a+=a,d<0&&(a+=1),f=e*c,t=e,e+=c,n(d-=f/d)<=0&&(d=1e-9*s(f));return d<0&&(a+=1),p=(r(e/d)+o*a)/e,l<0?-p:p}}const{abs:_h,max:vh,min:mh,sin:xh,cos:bh,asin:Mh,acos:wh,tan:Eh}=Math;function Nh(t,e){let n,r,i,o;const a=Eh(.5*e);return n=bh(Mh(a))*xh(.5*t),i=a+n<0,o=a-n<0,r=wh(a),n=wh(n),function(t,e,n,r){let i=Math.asin(Math.sqrt(1+Math.min(0,Math.cos(t+e))));n&&(i=-i);let o=Math.asin(Math.sqrt(Math.abs(1-Math.max(0,Math.cos(t-e)))));return r&&(o=-o),[yh(i,.5),yh(o,.5)]}(n,r,i,o)}var Sh=6378137,Ih=.0066943799901413165,Ch=484813681109536e-20,Oh=Math.PI/2,Ph=1e-10,Lh=.017453292519943295,Ah=57.29577951308232,Th=Math.PI/4,kh=2*Math.PI,Rh=3.14159265359,Dh={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},Fh={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},zh=/[\s_\-\/\(\)]/g;function Gh(t,e){if(t[e])return t[e];for(var n,r=Object.keys(t),i=e.toLowerCase().replace(zh,""),o=-1;++o<r.length;)if((n=r[o]).toLowerCase().replace(zh,"")===i)return t[n]}function qh(t){var e,n,r,i={},o=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t}),{}),a={proj:"projName",datum:"datumCode",rf:function(t){i.rf=parseFloat(t)},lat_0:function(t){i.lat0=t*Lh},lat_1:function(t){i.lat1=t*Lh},lat_2:function(t){i.lat2=t*Lh},lat_ts:function(t){i.lat_ts=t*Lh},lon_0:function(t){i.long0=t*Lh},lon_1:function(t){i.long1=t*Lh},lon_2:function(t){i.long2=t*Lh},alpha:function(t){i.alpha=parseFloat(t)*Lh},gamma:function(t){i.rectified_grid_angle=parseFloat(t)},lonc:function(t){i.longc=t*Lh},x_0:function(t){i.x0=parseFloat(t)},y_0:function(t){i.y0=parseFloat(t)},k_0:function(t){i.k0=parseFloat(t)},k:function(t){i.k0=parseFloat(t)},a:function(t){i.a=parseFloat(t)},b:function(t){i.b=parseFloat(t)},r_a:function(){i.R_A=!0},zone:function(t){i.zone=parseInt(t,10)},south:function(){i.utmSouth=!0},towgs84:function(t){i.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){i.to_meter=parseFloat(t)},units:function(t){i.units=t;var e=Gh(Fh,t);e&&(i.to_meter=e.to_meter)},from_greenwich:function(t){i.from_greenwich=t*Lh},pm:function(t){var e=Gh(Dh,t);i.from_greenwich=(e||parseFloat(t))*Lh},nadgrids:function(t){"@null"===t?i.datumCode="none":i.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(i.axis=t)},approx:function(){i.approx=!0}};for(e in o)n=o[e],e in a?"function"==typeof(r=a[e])?r(n):i[r]=n:i[e]=n;return"string"==typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i}var jh=/\s/,Bh=/[A-Za-z]/,Uh=/[A-Za-z84_]/,Vh=/[,\]]/,Wh=/[\d\.E\-\+]/;function Yh(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function Xh(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,i=n.reduce((function(t,e){return $h(e,t),t}),r);e&&(t[e]=i)}function $h(t,e){if(Array.isArray(t)){var n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void $h(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n){if("AXIS"===n)return n in e||(e[n]=[]),void e[n].push(t);var r;switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&$h(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&$h(t[3],e[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void Xh(e,n,t);default:for(r=-1;++r<t.length;)if(!Array.isArray(t[r]))return $h(t,e[n]);return Xh(e,n,t)}}else e[n]=t;else e[n]=!0}else e[t]=!0}Yh.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;jh.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},Yh.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(Vh.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},Yh.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},Yh.prototype.number=function(t){if(!Wh.test(t)){if(Vh.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},Yh.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},Yh.prototype.keyword=function(t){if(Uh.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=1)}if(!Vh.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},Yh.prototype.neutral=function(t){if(Bh.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(Wh.test(t))return this.word=t,void(this.state=3);if(!Vh.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},Yh.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function Hh(t){return.017453292519943295*t}function Qh(t){var e=new Yh(t).output(),n=e.shift(),r=e.shift();e.unshift(["name",r]),e.unshift(["type",n]);var i={};return $h(e,i),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",n=0,r=t.AXIS.length;n<r;++n){var i=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];-1!==i[0].indexOf("north")||("y"===i[0]||"lat"===i[0])&&"north"===i[1]?e+="n":-1!==i[0].indexOf("south")||("y"===i[0]||"lat"===i[0])&&"south"===i[1]?e+="s":-1!==i[0].indexOf("east")||("x"===i[0]||"lon"===i[0])&&"east"===i[1]?e+="e":-1===i[0].indexOf("west")&&("x"!==i[0]&&"lon"!==i[0]||"west"!==i[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;function a(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Hh],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Hh],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",Hh],["lat0","latitude_of_origin",Hh],["lat0","standard_parallel_1",Hh],["lat1","standard_parallel_1",Hh],["lat2","standard_parallel_2",Hh],["azimuth","Azimuth"],["alpha","azimuth",Hh],["srsCode","name"]].forEach((function(e){return function(t,e){var n=e[0],r=e[1];!(n in t)&&r in t&&(t[n]=t[r],3===e.length&&(t[n]=e[2](t[n])))}(t,e)})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=Hh(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(i),i}function Jh(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?Jh[t]=qh(arguments[1]):Jh[t]=Qh(arguments[1]):Jh[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?Jh.apply(e,t):Jh(t)}));if("string"==typeof t){if(t in Jh)return Jh[t]}else"EPSG"in t?Jh["EPSG:"+t.EPSG]=t:"ESRI"in t?Jh["ESRI:"+t.ESRI]=t:"IAU2000"in t?Jh["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(Jh);var Kh=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var Zh=["3857","900913","3785","102113"];function tf(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in Jh}(t))return Jh[t];if(function(t){return Kh.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=Qh(t);if(function(t){var e=Gh(t,"authority");if(e){var n=Gh(e,"epsg");return n&&Zh.indexOf(n)>-1}}(e))return Jh["EPSG:3857"];var n=function(t){var e=Gh(t,"extension");if(e)return Gh(e,"proj4")}(e);return n?qh(n):e}return function(t){return"+"===t[0]}(t)?qh(t):void 0}function ef(t,e){var n,r;if(t=t||{},!e)return t;for(r in e)void 0!==(n=e[r])&&(t[r]=n);return t}function nf(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)}function rf(t){return t<0?-1:1}function of(t){return Math.abs(t)<=Rh?t:t-rf(t)*kh}function af(t,e,n){var r=t*n,i=.5*t;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(Oh-e))/r}function sf(t,e){for(var n,r,i=.5*t,o=Oh-2*Math.atan(e),a=0;a<=15;a++)if(n=t*Math.sin(o),o+=r=Oh-2*Math.atan(e*Math.pow((1-n)/(1+n),i))-o,Math.abs(r)<=1e-10)return o;return-9999}var uf={init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=nf(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,n,r=t.x,i=t.y;if(i*Ah>90&&i*Ah<-90&&r*Ah>180&&r*Ah<-180)return null;if(Math.abs(Math.abs(i)-Oh)<=Ph)return null;if(this.sphere)e=this.x0+this.a*this.k0*of(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(Th+.5*i));else{var o=Math.sin(i),a=af(this.e,i,o);e=this.x0+this.a*this.k0*of(r-this.long0),n=this.y0-this.a*this.k0*Math.log(a)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r=t.x-this.x0,i=t.y-this.y0;if(this.sphere)n=Oh-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var o=Math.exp(-i/(this.a*this.k0));if(-9999===(n=sf(this.e,o)))return null}return e=of(this.long0+r/(this.a*this.k0)),t.x=e,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]};function lf(t){return t}var cf=[uf,{init:function(){},forward:lf,inverse:lf,names:["longlat","identity"]}],hf={},ff=[];function pf(t,e){var n=ff.length;return t.names?(ff[n]=t,t.names.forEach((function(t){hf[t.toLowerCase()]=n})),this):(console.log(e),!0)}var df={start:function(){cf.forEach(pf)},add:pf,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==hf[e]&&ff[hf[e]]?ff[hf[e]]:void 0}},gf={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},yf=gf.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};gf.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var _f={};_f.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},_f.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},_f.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},_f.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},_f.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},_f.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},_f.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},_f.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},_f.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},_f.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},_f.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},_f.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},_f.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},_f.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},_f.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},_f.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},_f.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var vf={};function mf(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:vf[t]||null,isNull:!1}}function xf(t){return t/3600*Math.PI/180}function bf(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function Mf(t){return t.map((function(t){return[xf(t.longitudeShift),xf(t.latitudeShift)]}))}function wf(t,e,n){return{name:bf(t,e+8,e+16).trim(),parent:bf(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function Ef(t,e,n,r){for(var i=e+176,o=[],a=0;a<n.gridNodeCount;a++){var s={latitudeShift:t.getFloat32(i+16*a,r),longitudeShift:t.getFloat32(i+16*a+4,r),latitudeAccuracy:t.getFloat32(i+16*a+8,r),longitudeAccuracy:t.getFloat32(i+16*a+12,r)};o.push(s)}return o}function Nf(t,e){if(!(this instanceof Nf))return new Nf(t);e=e||function(t){if(t)throw t};var n=tf(t);if("object"==typeof n){var r=Nf.projections.get(n.projName);if(r){if(n.datumCode&&"none"!==n.datumCode){var i=Gh(_f,n.datumCode);i&&(n.datum_params=n.datum_params||(i.towgs84?i.towgs84.split(","):null),n.ellps=i.ellipse,n.datumName=i.datumName?i.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var o=function(t,e,n,r,i){if(!t){var o=Gh(gf,r);o||(o=yf),t=o.a,e=o.b,n=o.rf}return n&&!e&&(e=(1-1/n)*t),(0===n||Math.abs(t-e)<Ph)&&(i=!0,e=t),{a:t,b:e,rf:n,sphere:i}}(n.a,n.b,n.rf,n.ellps,n.sphere),a=function(t,e,n,r){var i=t*t,o=e*e,a=(i-o)/i,s=0;return r?(i=(t*=1-a*(.16666666666666666+a*(.04722222222222222+.022156084656084655*a)))*t,a=0):s=Math.sqrt(a),{es:a,e:s,ep2:(i-o)/o}}(o.a,o.b,o.rf,n.R_A),s=function(t){return void 0===t?null:t.split(",").map(mf)}(n.nadgrids),u=n.datum||function(t,e,n,r,i,o,a){var s={};return s.datum_type=void 0===t||"none"===t?5:4,e&&(s.datum_params=e.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=1),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=2,s.datum_params[3]*=Ch,s.datum_params[4]*=Ch,s.datum_params[5]*=Ch,s.datum_params[6]=s.datum_params[6]/1e6+1))),a&&(s.datum_type=3,s.grids=a),s.a=n,s.b=r,s.es=i,s.ep2=o,s}(n.datumCode,n.datum_params,o.a,o.b,a.es,a.ep2,s);ef(this,n),ef(this,r),this.a=o.a,this.b=o.b,this.rf=o.rf,this.sphere=o.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=u,this.init(),e(null,this)}else e(t)}else e(t)}function Sf(t,e,n){var r,i,o,a,s=t.x,u=t.y,l=t.z?t.z:0;if(u<-Oh&&u>-1.001*Oh)u=-Oh;else if(u>Oh&&u<1.001*Oh)u=Oh;else{if(u<-Oh)return{x:-1/0,y:-1/0,z:t.z};if(u>Oh)return{x:1/0,y:1/0,z:t.z}}return s>Math.PI&&(s-=2*Math.PI),i=Math.sin(u),a=Math.cos(u),o=i*i,{x:((r=n/Math.sqrt(1-e*o))+l)*a*Math.cos(s),y:(r+l)*a*Math.sin(s),z:(r*(1-e)+l)*i}}function If(t,e,n,r){var i,o,a,s,u,l,c,h,f,p,d,g,y,_,v,m=1e-12,x=t.x,b=t.y,M=t.z?t.z:0;if(i=Math.sqrt(x*x+b*b),o=Math.sqrt(x*x+b*b+M*M),i/n<m){if(_=0,o/n<m)return Oh,v=-r,{x:t.x,y:t.y,z:t.z}}else _=Math.atan2(b,x);a=M/o,h=(s=i/o)*(1-e)*(u=1/Math.sqrt(1-e*(2-e)*s*s)),f=a*u,y=0;do{y++,l=e*(c=n/Math.sqrt(1-e*f*f))/(c+(v=i*h+M*f-c*(1-e*f*f))),g=(d=a*(u=1/Math.sqrt(1-l*(2-l)*s*s)))*h-(p=s*(1-l)*u)*f,h=p,f=d}while(g*g>1e-24&&y<30);return{x:_,y:Math.atan(d/Math.abs(p)),z:v}}function Cf(t){return 1===t||2===t}function Of(t,e,n){if(function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(1===t.datum_type?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:2!==t.datum_type||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e))return n;if(5===t.datum_type||5===e.datum_type)return n;var r=t.a,i=t.es;if(3===t.datum_type){if(0!==Pf(t,!1,n))return;r=Sh,i=Ih}var o=e.a,a=e.b,s=e.es;if(3===e.datum_type&&(o=Sh,a=6356752.314,s=Ih),i===s&&r===o&&!Cf(t.datum_type)&&!Cf(e.datum_type))return n;if((n=Sf(n,i,r),Cf(t.datum_type)&&(n=function(t,e,n){if(1===e)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(2===e){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6];return{x:l*(t.x-u*t.y+s*t.z)+r,y:l*(u*t.x+t.y-a*t.z)+i,z:l*(-s*t.x+a*t.y+t.z)+o}}}(n,t.datum_type,t.datum_params)),Cf(e.datum_type)&&(n=function(t,e,n){if(1===e)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(2===e){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=(t.x-r)/l,h=(t.y-i)/l,f=(t.z-o)/l;return{x:c+u*h-s*f,y:-u*c+h+a*f,z:s*c-a*h+f}}}(n,e.datum_type,e.datum_params)),n=If(n,s,o,a),3===e.datum_type)&&0!==Pf(e,!0,n))return;return n}function Pf(t,e,n){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;for(var r={x:-n.x,y:n.y},i={x:Number.NaN,y:Number.NaN},o=[],a=0;a<t.grids.length;a++){var s=t.grids[a];if(o.push(s.name),s.isNull){i=r;break}if(s.mandatory,null!==s.grid){var u=s.grid.subgrids[0],l=(Math.abs(u.del[1])+Math.abs(u.del[0]))/1e4,c=u.ll[0]-l,h=u.ll[1]-l,f=u.ll[0]+(u.lim[0]-1)*u.del[0]+l,p=u.ll[1]+(u.lim[1]-1)*u.del[1]+l;if(!(h>r.y||c>r.x||p<r.y||f<r.x||(i=Lf(r,e,u),isNaN(i.x))))break}else if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*Ah+" "+r.y*Ah+" tried: '"+o+"'"),-1):(n.x=-i.x,n.y=i.y,0)}function Lf(t,e,n){var r={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return r;var i={x:t.x,y:t.y};i.x-=n.ll[0],i.y-=n.ll[1],i.x=of(i.x-Math.PI)+Math.PI;var o=Af(i,n);if(e){if(isNaN(o.x))return r;o.x=i.x-o.x,o.y=i.y-o.y;var a,s,u=9;do{if(s=Af(o,n),isNaN(s.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}a={x:i.x-(s.x+o.x),y:i.y-(s.y+o.y)},o.x+=a.x,o.y+=a.y}while(u--&&Math.abs(a.x)>1e-12&&Math.abs(a.y)>1e-12);if(u<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=of(o.x+n.ll[0]),r.y=o.y+n.ll[1]}else isNaN(o.x)||(r.x=t.x+o.x,r.y=t.y+o.y);return r}function Af(t,e){var n,r={x:t.x/e.del[0],y:t.y/e.del[1]},i=Math.floor(r.x),o=Math.floor(r.y),a=r.x-1*i,s=r.y-1*o,u={x:Number.NaN,y:Number.NaN};if(i<0||i>=e.lim[0])return u;if(o<0||o>=e.lim[1])return u;n=o*e.lim[0]+i;var l=e.cvs[n][0],c=e.cvs[n][1];n++;var h=e.cvs[n][0],f=e.cvs[n][1];n+=e.lim[0];var p=e.cvs[n][0],d=e.cvs[n][1];n--;var g=e.cvs[n][0],y=e.cvs[n][1],_=a*s,v=a*(1-s),m=(1-a)*(1-s),x=(1-a)*s;return u.x=m*l+v*h+x*g+_*p,u.y=m*c+v*f+x*y+_*d,u}function Tf(t,e,n){var r,i,o,a=n.x,s=n.y,u=n.z||0,l={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==n.z)switch(0===o?(r=a,i=-1!=="ew".indexOf(t.axis[o])?"x":"y"):1===o?(r=s,i=-1!=="ns".indexOf(t.axis[o])?"y":"x"):(r=u,i="z"),t.axis[o]){case"e":case"n":l[i]=r;break;case"w":case"s":l[i]=-r;break;case"u":void 0!==n[i]&&(l.z=r);break;case"d":void 0!==n[i]&&(l.z=-r);break;default:return null}return l}function kf(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function Rf(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function Df(t,e,n,r){var i;if(Array.isArray(n)&&(n=kf(n)),function(t){Rf(t.x),Rf(t.y)}(n),t.datum&&e.datum&&function(t,e){return(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==e.datumCode||(1===e.datum.datum_type||2===e.datum.datum_type)&&"WGS84"!==t.datumCode}(t,e)&&(n=Df(t,i=new Nf("WGS84"),n,r),t=i),r&&"enu"!==t.axis&&(n=Tf(t,!1,n)),"longlat"===t.projName)n={x:n.x*Lh,y:n.y*Lh,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),!(n=t.inverse(n)))return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=Of(t.datum,e.datum,n))return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),"longlat"===e.projName?n={x:n.x*Ah,y:n.y*Ah,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),r&&"enu"!==e.axis?Tf(e,!0,n):n}Nf.projections=df,Nf.projections.start();var Ff=Nf("WGS84");function zf(t,e,n,r){var i,o,a;return Array.isArray(n)?(i=Df(t,e,n,r)||{x:NaN,y:NaN},n.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof i.z?[i.x,i.y,i.z].concat(n.splice(3)):[i.x,i.y,n[2]].concat(n.splice(3)):[i.x,i.y].concat(n.splice(2)):[i.x,i.y]):(o=Df(t,e,n,r),2===(a=Object.keys(n)).length||a.forEach((function(r){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===r||"y"===r||"z"===r)return}else if("x"===r||"y"===r)return;o[r]=n[r]})),o)}function Gf(t){return t instanceof Nf?t:t.oProj?t.oProj:Nf(t)}function qf(t,e,n){t=Gf(t);var r,i=!1;return void 0===e?(e=t,t=Ff,i=!0):(void 0!==e.x||Array.isArray(e))&&(n=e,e=t,t=Ff,i=!0),e=Gf(e),n?zf(t,e,n):(r={forward:function(n,r){return zf(t,e,n,r)},inverse:function(n,r){return zf(e,t,n,r)}},i&&(r.oProj=e),r)}var jf="AJSAJS",Bf="AFAFAF",Uf=65,Vf=73,Wf=79,Yf=86,Xf=90,$f={forward:Hf,inverse:function(t){var e=Zf(np(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:Qf};function Hf(t,e){return e=e||5,function(t,e){var n="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(i=t.easting,o=t.northing,a=t.zoneNumber,s=ep(a),u=Math.floor(i/1e5),l=Math.floor(o/1e5)%20,function(t,e,n){var r=n-1,i=jf.charCodeAt(r),o=Bf.charCodeAt(r),a=i+t-1,s=o+e,u=!1;return a>Xf&&(a=a-Xf+Uf-1,u=!0),(a===Vf||i<Vf&&a>Vf||(a>Vf||i<Vf)&&u)&&a++,(a===Wf||i<Wf&&a>Wf||(a>Wf||i<Wf)&&u)&&++a===Vf&&a++,a>Xf&&(a=a-Xf+Uf-1),s>Yf?(s=s-Yf+Uf-1,u=!0):u=!1,(s===Vf||o<Vf&&s>Vf||(s>Vf||o<Vf)&&u)&&s++,(s===Wf||o<Wf&&s>Wf||(s>Wf||o<Wf)&&u)&&++s===Vf&&s++,s>Yf&&(s=s-Yf+Uf-1),String.fromCharCode(a)+String.fromCharCode(s)}(u,l,s))+n.substr(n.length-5,e)+r.substr(r.length-5,e);var i,o,a,s,u,l}(function(t){var e,n,r,i,o,a,s,u,l=t.lat,c=t.lon,h=6378137,f=.00669438,p=.9996,d=Jf(l),g=Jf(c);u=Math.floor((c+180)/6)+1,180===c&&(u=60);l>=56&&l<64&&c>=3&&c<12&&(u=32);l>=72&&l<84&&(c>=0&&c<9?u=31:c>=9&&c<21?u=33:c>=21&&c<33?u=35:c>=33&&c<42&&(u=37));s=Jf(6*(u-1)-180+3),e=f/(1-f),n=h/Math.sqrt(1-f*Math.sin(d)*Math.sin(d)),r=Math.tan(d)*Math.tan(d),i=e*Math.cos(d)*Math.cos(d),o=Math.cos(d)*(g-s),a=h*((1-f/4-3*f*f/64-5*f*f*f/256)*d-(3*f/8+3*f*f/32+45*f*f*f/1024)*Math.sin(2*d)+(15*f*f/256+45*f*f*f/1024)*Math.sin(4*d)-35*f*f*f/3072*Math.sin(6*d));var y=p*n*(o+(1-r+i)*o*o*o/6+(5-18*r+r*r+72*i-58*e)*o*o*o*o*o/120)+5e5,_=p*(a+n*Math.tan(d)*(o*o/2+(5-r+9*i+4*i*i)*o*o*o*o/24+(61-58*r+r*r+600*i-330*e)*o*o*o*o*o*o/720));l<0&&(_+=1e7);return{northing:Math.round(_),easting:Math.round(y),zoneNumber:u,zoneLetter:tp(l)}}({lat:t[1],lon:t[0]}),e)}function Qf(t){var e=Zf(np(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Jf(t){return t*(Math.PI/180)}function Kf(t){return t/Math.PI*180}function Zf(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var o,a,s,u,l,c,h,f,p,d=.9996,g=6378137,y=.00669438,_=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),v=n-5e5,m=e;r<"N"&&(m-=1e7),h=6*(i-1)-180+3,o=.006739496752268451,p=(f=m/d/6367449.145945056)+(3*_/2-27*_*_*_/32)*Math.sin(2*f)+(21*_*_/16-55*_*_*_*_/32)*Math.sin(4*f)+151*_*_*_/96*Math.sin(6*f),a=g/Math.sqrt(1-y*Math.sin(p)*Math.sin(p)),s=Math.tan(p)*Math.tan(p),u=o*Math.cos(p)*Math.cos(p),l=.99330562*g/Math.pow(1-y*Math.sin(p)*Math.sin(p),1.5),c=v/(a*d);var x=p-a*Math.tan(p)/l*(c*c/2-(5+3*s+10*u-4*u*u-9*o)*c*c*c*c/24+(61+90*s+298*u+45*s*s-1.6983531815716497-3*u*u)*c*c*c*c*c*c/720);x=Kf(x);var b,M=(c-(1+2*s+u)*c*c*c/6+(5-2*u+28*s-3*u*u+8*o+24*s*s)*c*c*c*c*c/120)/Math.cos(p);if(M=h+Kf(M),t.accuracy){var w=Zf({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});b={top:w.lat,right:w.lon,bottom:x,left:M}}else b={lat:x,lon:M};return b}function tp(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function ep(t){var e=t%6;return 0===e&&(e=6),e}function np(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,r=null,i="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;i+=e,o++}var a=parseInt(i,10);if(0===o||o+3>n)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(o++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;r=t.substring(o,o+=2);for(var u=ep(a),l=function(t,e){var n=jf.charCodeAt(e-1),r=1e5,i=!1;for(;n!==t.charCodeAt(0);){if(++n===Vf&&n++,n===Wf&&n++,n>Xf){if(i)throw"Bad character: "+t;n=Uf,i=!0}r+=1e5}return r}(r.charAt(0),u),c=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var n=Bf.charCodeAt(e-1),r=0,i=!1;for(;n!==t.charCodeAt(0);){if(++n===Vf&&n++,n===Wf&&n++,n>Yf){if(i)throw"Bad character: "+t;n=Uf,i=!0}r+=1e5}return r}(r.charAt(1),u);c<rp(s);)c+=2e6;var h=n-o;if(h%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var f,p,d,g=h/2,y=0,_=0;return g>0&&(f=1e5/Math.pow(10,g),p=t.substring(o,o+g),y=parseFloat(p)*f,d=t.substring(o+g),_=parseFloat(d)*f),{easting:y+l,northing:_+c,zoneLetter:s,zoneNumber:a,accuracy:f}}function rp(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function ip(t,e,n){if(!(this instanceof ip))return new ip(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}ip.fromMGRS=function(t){return new ip(Qf(t))},ip.prototype.toMGRS=function(t){return Hf([this.x,this.y],t)};var op=.046875,ap=.01953125,sp=.01068115234375;function up(t){var e=[];e[0]=1-t*(.25+t*(op+t*(ap+t*sp))),e[1]=t*(.75-t*(op+t*(ap+t*sp)));var n=t*t;return e[2]=n*(.46875-t*(.013020833333333334+.007120768229166667*t)),n*=t,e[3]=n*(.3645833333333333-.005696614583333333*t),e[4]=n*t*.3076171875,e}function lp(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}function cp(t,e,n){for(var r=1/(1-e),i=t,o=20;o;--o){var a=Math.sin(i),s=1-e*a*a;if(i-=s=(lp(i,a,Math.cos(i),n)-t)*(s*Math.sqrt(s))*r,Math.abs(s)<Ph)return i}return i}var hp={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=up(this.es),this.ml0=lp(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,n,r,i=t.x,o=t.y,a=of(i-this.long0),s=Math.sin(o),u=Math.cos(o);if(this.es){var l=u*a,c=Math.pow(l,2),h=this.ep2*Math.pow(u,2),f=Math.pow(h,2),p=Math.abs(u)>Ph?Math.tan(o):0,d=Math.pow(p,2),g=Math.pow(d,2);e=1-this.es*Math.pow(s,2),l/=Math.sqrt(e);var y=lp(o,s,u,this.en);n=this.a*(this.k0*l*(1+c/6*(1-d+h+c/20*(5-18*d+g+14*h-58*d*h+c/42*(61+179*g-g*d-479*d)))))+this.x0,r=this.a*(this.k0*(y-this.ml0+s*a*l/2*(1+c/12*(5-d+9*h+4*f+c/30*(61+g-58*d+270*h-330*d*h+c/56*(1385+543*g-g*d-3111*d))))))+this.y0}else{var _=u*Math.sin(a);if(Math.abs(Math.abs(_)-1)<Ph)return 93;if(n=.5*this.a*this.k0*Math.log((1+_)/(1-_))+this.x0,r=u*Math.cos(a)/Math.sqrt(1-Math.pow(_,2)),(_=Math.abs(r))>=1){if(_-1>Ph)return 93;r=0}else r=Math.acos(r);o<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return t.x=n,t.y=r,t},inverse:function(t){var e,n,r,i,o=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(n=cp(e=this.ml0+a/this.k0,this.es,this.en),Math.abs(n)<Oh){var s=Math.sin(n),u=Math.cos(n),l=Math.abs(u)>Ph?Math.tan(n):0,c=this.ep2*Math.pow(u,2),h=Math.pow(c,2),f=Math.pow(l,2),p=Math.pow(f,2);e=1-this.es*Math.pow(s,2);var d=o*Math.sqrt(e)/this.k0,g=Math.pow(d,2);r=n-(e*=l)*g/(1-this.es)*.5*(1-g/12*(5+3*f-9*c*f+c-4*h-g/30*(61+90*f-252*c*f+45*p+46*c-g/56*(1385+3633*f+4095*p+1574*p*f)))),i=of(this.long0+d*(1-g/6*(1+2*f+c-g/20*(5+28*f+24*p+8*c*f+6*c-g/42*(61+662*f+1320*p+720*p*f))))/u)}else r=Oh*rf(a),i=0;else{var y=Math.exp(o/this.k0),_=.5*(y-1/y),v=this.lat0+a/this.k0,m=Math.cos(v);e=Math.sqrt((1-Math.pow(m,2))/(1+Math.pow(_,2))),r=Math.asin(e),a<0&&(r=-r),i=0===_&&0===m?0:of(Math.atan2(_,m)+this.long0)}return t.x=i,t.y=r,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function fp(t){var e=Math.exp(t);return e=(e-1/e)/2}function pp(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))}function dp(t){var e=Math.abs(t);return e=function(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n}(e*(1+e/(pp(1,e)+1))),t<0?-e:e}function gp(t,e){for(var n,r=2*Math.cos(2*e),i=t.length-1,o=t[i],a=0;--i>=0;)n=r*o-a+t[i],a=o,o=n;return e+n*Math.sin(2*e)}function yp(t,e,n){for(var r,i,o=Math.sin(e),a=Math.cos(e),s=fp(n),u=function(t){var e=Math.exp(t);return(e+1/e)/2}(n),l=2*a*u,c=-2*o*s,h=t.length-1,f=t[h],p=0,d=0,g=0;--h>=0;)r=d,i=p,f=l*(d=f)-r-c*(p=g)+t[h],g=c*d-i+l*p;return[(l=o*u)*f-(c=a*s)*g,l*g+c*f]}var _p={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(hp.init.apply(this),this.forward=hp.forward,this.inverse=hp.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=.6650675310896665*n;var r=gp(this.cbg,this.lat0);this.Zb=-this.Qn*(r+function(t,e){for(var n,r=2*Math.cos(e),i=t.length-1,o=t[i],a=0;--i>=0;)n=r*o-a+t[i],a=o,o=n;return Math.sin(e)*n}(this.gtu,2*r))},forward:function(t){var e=of(t.x-this.long0),n=t.y;n=gp(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),o=Math.sin(e),a=Math.cos(e);n=Math.atan2(r,a*i),e=Math.atan2(o*i,pp(r,i*a)),e=dp(Math.tan(e));var s,u,l=yp(this.gtu,2*n,2*e);return n+=l[0],e+=l[1],Math.abs(e)<=2.623395162778?(s=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*n+this.Zb)+this.y0):(s=1/0,u=1/0),t.x=s,t.y=u,t},inverse:function(t){var e,n,r=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,r/=this.Qn,Math.abs(r)<=2.623395162778){var o=yp(this.utg,2*i,2*r);i+=o[0],r+=o[1],r=Math.atan(fp(r));var a=Math.sin(i),s=Math.cos(i),u=Math.sin(r),l=Math.cos(r);i=Math.atan2(a*l,pp(u,l*s)),e=of((r=Math.atan2(u,l*s))+this.long0),n=gp(this.cgb,i)}else e=1/0,n=1/0;return t.x=e,t.y=n,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]};var vp={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(of(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*Lh,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,_p.init.apply(this),this.forward=_p.forward,this.inverse=_p.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function mp(t,e){return Math.pow((1-t)/(1+t),e)}var xp={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Th)/(Math.pow(Math.tan(.5*this.lat0+Th),this.C)*mp(this.e*t,this.ratexp))},forward:function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+Th),this.C)*mp(this.e*Math.sin(n),this.ratexp))-Oh,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,n=t.y,r=Math.pow(Math.tan(.5*n+Th)/this.K,1/this.C),i=20;i>0&&(n=2*Math.atan(r*mp(this.e*Math.sin(t.y),-.5*this.e))-Oh,!(Math.abs(n-t.y)<1e-14));--i)t.y=n;return i?(t.x=e,t.y=n,t):null},names:["gauss"]};var bp={init:function(){xp.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,n,r,i;return t.x=of(t.x-this.long0),xp.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*r),t.x=i*n*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*n*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,n,r,i,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var a=2*Math.atan2(o,this.R2);e=Math.sin(a),n=Math.cos(a),i=Math.asin(n*this.sinc0+t.y*e*this.cosc0/o),r=Math.atan2(t.x*e,o*this.cosc0*n-t.y*this.sinc0*e)}else i=this.phic0,r=0;return t.x=r,t.y=i,xp.inverse.apply(this,[t]),t.x=of(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var Mp={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ph&&(this.k0=.5*(1+rf(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Ph&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ph&&(this.k0=.5*this.cons*nf(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/af(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=nf(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Oh,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,n,r,i,o,a,s=t.x,u=t.y,l=Math.sin(u),c=Math.cos(u),h=of(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=Ph&&Math.abs(u+this.lat0)<=Ph?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*l+this.coslat0*c*Math.cos(h)),t.x=this.a*e*c*Math.sin(h)+this.x0,t.y=this.a*e*(this.coslat0*l-this.sinlat0*c*Math.cos(h))+this.y0,t):(n=2*Math.atan(this.ssfn_(u,l,this.e))-Oh,i=Math.cos(n),r=Math.sin(n),Math.abs(this.coslat0)<=Ph?(o=af(this.e,u*this.con,this.con*l),a=2*this.a*this.k0*o/this.cons,t.x=this.x0+a*Math.sin(s-this.long0),t.y=this.y0-this.con*a*Math.cos(s-this.long0),t):(Math.abs(this.sinlat0)<Ph?(e=2*this.a*this.k0/(1+i*Math.cos(h)),t.y=e*r):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*i*Math.cos(h))),t.y=e*(this.cosX0*r-this.sinX0*i*Math.cos(h))+this.y0),t.x=e*i*Math.sin(h)+this.x0,t))},inverse:function(t){var e,n,r,i,o;t.x-=this.x0,t.y-=this.y0;var a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,n=this.lat0,a<=Ph?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/a),e=Math.abs(this.coslat0)<Ph?this.lat0>0?of(this.long0+Math.atan2(t.x,-1*t.y)):of(this.long0+Math.atan2(t.x,t.y)):of(this.long0+Math.atan2(t.x*Math.sin(s),a*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=Ph){if(a<=Ph)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=a*this.cons/(2*this.a*this.k0),n=this.con*sf(this.e,r),e=this.con*of(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=Ph?o=this.X0:(o=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/a),e=of(this.long0+Math.atan2(t.x*Math.sin(i),a*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)))),n=-1*sf(this.e,Math.tan(.5*(Oh+o)));return t.x=e,t.y=n,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,n){return e*=n,Math.tan(.5*(Oh+t))*Math.pow((1-e)/(1+e),.5*n)}};var wp={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=1/this.rf,i=2*r-Math.pow(r,2),o=this.e=Math.sqrt(i);this.R=this.k0*n*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*s+this.alpha*o/2*u},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+a/this.alpha,u=0,l=o,c=-1e3,h=0;Math.abs(l-c)>1e-7;){if(++h>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),c=l,l=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=s,t.y=l,t},names:["somerc"]},Ep=1e-7;var Np={init:function(){var t,e,n,r,i,o,a,s,u,l,c,h,f,p=0,d=0,g=0,y=0,_=0,v=0,m=0;this.no_off=(f="object"==typeof(h=this).PROJECTION?Object.keys(h.PROJECTION)[0]:h.PROJECTION,"no_uoff"in h||"no_off"in h||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(f)),this.no_rot="no_rot"in this;var x=!1;"alpha"in this&&(x=!0);var b=!1;if("rectified_grid_angle"in this&&(b=!0),x&&(m=this.alpha),b&&(p=this.rectified_grid_angle*Lh),x||b)d=this.longc;else if(g=this.long1,_=this.lat1,y=this.long2,v=this.lat2,Math.abs(_-v)<=Ep||(t=Math.abs(_))<=Ep||Math.abs(t-Oh)<=Ep||Math.abs(Math.abs(this.lat0)-Oh)<=Ep||Math.abs(Math.abs(v)-Oh)<=Ep)throw new Error;var M=1-this.es;e=Math.sqrt(M),Math.abs(this.lat0)>Ph?(s=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*s*s,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/M),this.A=this.B*this.k0*e/t,(i=(r=this.B*e/(n*Math.sqrt(t)))*r-1)<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=r,this.E*=Math.pow(af(this.e,this.lat0,s),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=i=1),x||b?(x?(c=Math.asin(Math.sin(m)/r),b||(p=m)):(c=p,m=Math.asin(r*Math.sin(c))),this.lam0=d-Math.asin(.5*(i-1/i)*Math.tan(c))/this.B):(o=Math.pow(af(this.e,_,Math.sin(_)),this.B),a=Math.pow(af(this.e,v,Math.sin(v)),this.B),i=this.E/o,u=(a-o)/(a+o),l=((l=this.E*this.E)-a*o)/(l+a*o),(t=g-y)<-Math.pi?y-=kh:t>Math.pi&&(y+=kh),this.lam0=of(.5*(g+y)-Math.atan(l*Math.tan(.5*this.B*(g-y))/u)/this.B),c=Math.atan(2*Math.sin(this.B*of(g-this.lam0))/(i-1/i)),p=m=Math.asin(r*Math.sin(c))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(p),this.cosrot=Math.cos(p),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(m))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(Th-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(Th+i))},forward:function(t){var e,n,r,i,o,a,s,u,l={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-Oh)>Ph){if(e=.5*((o=this.E/Math.pow(af(this.e,t.y,Math.sin(t.y)),this.B))-(a=1/o)),n=.5*(o+a),i=Math.sin(this.B*t.x),r=(e*this.singam-i*this.cosgam)/n,Math.abs(Math.abs(r)-1)<Ph)throw new Error;u=.5*this.ArB*Math.log((1-r)/(1+r)),a=Math.cos(this.B*t.x),s=Math.abs(a)<Ep?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+i*this.singam,a)}else u=t.y>0?this.v_pole_n:this.v_pole_s,s=this.ArB*t.y;return this.no_rot?(l.x=s,l.y=u):(s-=this.u_0,l.x=u*this.cosrot+s*this.sinrot,l.y=s*this.cosrot-u*this.sinrot),l.x=this.a*l.x+this.x0,l.y=this.a*l.y+this.y0,l},inverse:function(t){var e,n,r,i,o,a,s,u={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),i=.5*((r=Math.exp(-this.BrA*n))-1/r),o=.5*(r+1/r),s=((a=Math.sin(this.BrA*e))*this.cosgam+i*this.singam)/o,Math.abs(Math.abs(s)-1)<Ph)u.x=0,u.y=s<0?-Oh:Oh;else{if(u.y=this.E/Math.sqrt((1+s)/(1-s)),u.y=sf(this.e,Math.pow(u.y,1/this.B)),u.y===1/0)throw new Error;u.x=-this.rB*Math.atan2(i*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return u.x+=this.lam0,u},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]};var Sp={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Ph)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),r=nf(this.e,e,n),i=af(this.e,this.lat1,e),o=Math.sin(this.lat2),a=Math.cos(this.lat2),s=nf(this.e,o,a),u=af(this.e,this.lat2,o),l=af(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Ph?this.ns=Math.log(r/s)/Math.log(i/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=Ph&&(n=rf(n)*(Oh-2e-10));var r,i,o=Math.abs(Math.abs(n)-Oh);if(o>Ph)r=af(this.e,n,Math.sin(n)),i=this.a*this.f0*Math.pow(r,this.ns);else{if((o=n*this.ns)<=0)return null;i=0}var a=this.ns*of(e-this.long0);return t.x=this.k0*(i*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-i*Math.cos(a))+this.y0,t},inverse:function(t){var e,n,r,i,o,a=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+s*s),n=1):(e=-Math.sqrt(a*a+s*s),n=-1);var u=0;if(0!==e&&(u=Math.atan2(n*a,n*s)),0!==e||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),-9999===(i=sf(this.e,r)))return null}else i=-Oh;return o=of(u/this.ns+this.long0),t.x=o,t.y=i,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]};var Ip={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,n,r,i,o,a,s,u=t.x,l=t.y,c=of(u-this.long0);return e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45),r=-c*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),o=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),a=this.n*o,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=s*Math.cos(a)/1,t.x=s*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,n,r,i,o,a,s,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,a=e,s=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(s=1),a=t.y,l+=1}while(0===s&&l<15);return l>=15?null:t},names:["Krovak","krovak"]};function Cp(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)}function Op(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function Pp(t){return.375*t*(1+.25*t*(1+.46875*t))}function Lp(t){return.05859375*t*t*(1+.75*t)}function Ap(t){return t*t*t*(35/3072)}function Tp(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)}function kp(t){return Math.abs(t)<Oh?t:t-rf(t)*Math.PI}function Rp(t,e,n,r,i){var o,a;o=t/e;for(var s=0;s<15;s++)if(o+=a=(t-(e*o-n*Math.sin(2*o)+r*Math.sin(4*o)-i*Math.sin(6*o)))/(e-2*n*Math.cos(2*o)+4*r*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN}var Dp={init:function(){this.sphere||(this.e0=Op(this.es),this.e1=Pp(this.es),this.e2=Lp(this.es),this.e3=Ap(this.es),this.ml0=this.a*Cp(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,n,r=t.x,i=t.y;if(r=of(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var o=Math.sin(i),a=Math.cos(i),s=Tp(this.a,this.e,o),u=Math.tan(i)*Math.tan(i),l=r*Math.cos(i),c=l*l,h=this.es*a*a/(1-this.es);e=s*l*(1-c*u*(1/6-(8-u+8*h)*c/120)),n=this.a*Cp(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*o/a*c*(.5+(5-u+6*h)*c/24)}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r=t.x/this.a,i=t.y/this.a;if(this.sphere){var o=i+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(o))}else{var a=Rp(this.ml0/this.a+i,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-Oh)<=Ph)return t.x=this.long0,t.y=Oh,i<0&&(t.y*=-1),t;var s=Tp(this.a,this.e,Math.sin(a)),u=s*s*s/this.a/this.a*(1-this.es),l=Math.pow(Math.tan(a),2),c=r*this.a/s,h=c*c;e=a-s*Math.tan(a)/u*c*c*(.5-(1+3*l)*c*c/24),n=c*(1-h*(l/3+(1+3*l)*l*h/15))/Math.cos(a)}return t.x=of(n+this.long0),t.y=kp(e),t},names:["Cassini","Cassini_Soldner","cass"]};function Fp(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e}var zp=.3333333333333333,Gp=.17222222222222222,qp=.10257936507936508,jp=.06388888888888888,Bp=.0664021164021164,Up=.016415012942191543;var Vp={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-Oh)<Ph?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<Ph?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=Fp(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,n=[];return n[0]=t*zp,e=t*t,n[0]+=e*Gp,n[1]=e*jp,e*=t,n[0]+=e*qp,n[1]+=e*Bp,n[2]=e*Up,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Fp(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,n,r,i,o,a,s,u,l,c,h=t.x,f=t.y;if(h=of(h-this.long0),this.sphere){if(o=Math.sin(f),c=Math.cos(f),r=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+c*r:1+this.sinph0*o+this.cosph0*c*r)<=Ph)return null;e=(n=Math.sqrt(2/n))*c*Math.sin(h),n*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*c*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(f+this.lat0)<Ph)return null;n=Th-.5*f,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(h),n*=r}}else{switch(s=0,u=0,l=0,r=Math.cos(h),i=Math.sin(h),o=Math.sin(f),a=Fp(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,u=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:l=1+this.sinb1*s+this.cosb1*u*r;break;case this.EQUIT:l=1+u*r;break;case this.N_POLE:l=Oh+f,a=this.qp-a;break;case this.S_POLE:l=f-Oh,a=this.qp+a}if(Math.abs(l)<Ph)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l),n=this.mode===this.OBLIQ?this.ymf*l*(this.cosb1*s-this.sinb1*u*r):(l=Math.sqrt(2/(1+u*r)))*s*this.ymf,e=this.xmf*l*u*i;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(l=Math.sqrt(a))*i,n=r*(this.mode===this.S_POLE?l:-l)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,o,a,s,u,l,c,h=t.x/this.a,f=t.y/this.a;if(this.sphere){var p,d=0,g=0;if((n=.5*(p=Math.sqrt(h*h+f*f)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(g=Math.sin(n),d=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(p)<=Ph?0:Math.asin(f*g/p),h*=g,f=d*p;break;case this.OBLIQ:n=Math.abs(p)<=Ph?this.lat0:Math.asin(d*this.sinph0+f*g*this.cosph0/p),h*=g*this.cosph0,f=(d-Math.sin(n)*this.sinph0)*p;break;case this.N_POLE:f=-f,n=Oh-n;break;case this.S_POLE:n-=Oh}e=0!==f||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(h,f):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(h/=this.dd,f*=this.dd,(a=Math.sqrt(h*h+f*f))<Ph)return t.x=this.long0,t.y=this.lat0,t;i=2*Math.asin(.5*a/this.rq),r=Math.cos(i),h*=i=Math.sin(i),this.mode===this.OBLIQ?(s=r*this.sinb1+f*i*this.cosb1/a,o=this.qp*s,f=a*this.cosb1*r-f*this.sinb1*i):(s=f*i/a,o=this.qp*s,f=a*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(f=-f),!(o=h*h+f*f))return t.x=this.long0,t.y=this.lat0,t;s=1-o/this.qp,this.mode===this.S_POLE&&(s=-s)}e=Math.atan2(h,f),u=Math.asin(s),l=this.apa,c=u+u,n=u+l[0]*Math.sin(c)+l[1]*Math.sin(c+c)+l[2]*Math.sin(c+c+c)}return t.x=of(this.long0+e),t.y=n,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function Wp(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}var Yp={init:function(){Math.abs(this.lat1+this.lat2)<Ph||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=nf(this.e3,this.sin_po,this.cos_po),this.qs1=Fp(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=nf(this.e3,this.sin_po,this.cos_po),this.qs2=Fp(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Fp(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>Ph?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=Fp(this.e3,this.sin_phi,this.cos_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,o=this.ns0*of(e-this.long0),a=i*Math.sin(o)+this.x0,s=this.rh-i*Math.cos(o)+this.y0;return t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i,o,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),i=0,0!==e&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,a=this.phi1z(this.e3,n)),o=of(i/this.ns0+this.long0),t.x=o,t.y=a,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var n,r,i,o,a=Wp(.5*e);if(t<Ph)return a;for(var s=t*t,u=1;u<=25;u++)if(a+=o=.5*(i=1-(r=t*(n=Math.sin(a)))*r)*i/Math.cos(a)*(e/(1-s)-n/i+.5/t*Math.log((1-r)/(1+r))),Math.abs(o)<=1e-7)return a;return null}};var Xp={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,n,r,i,o,a,s,u=t.x,l=t.y;return r=of(u-this.long0),e=Math.sin(l),n=Math.cos(l),i=Math.cos(r),1,(o=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(o)<=Ph?(a=this.x0+1*this.a*n*Math.sin(r)/o,s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)/o):(a=this.x0+this.infinity_dist*n*Math.sin(r),s=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i,o,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),n=Math.sin(i),a=Wp((r=Math.cos(i))*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),o=of(this.long0+o)):(a=this.phic0,o=0),t.x=o,t.y=a,t},names:["gnom"]};var $p={init:function(){this.sphere||(this.k0=nf(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,n,r=t.x,i=t.y,o=of(r-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var a=Fp(this.e,Math.sin(i));e=this.x0+this.a*this.k0*o,n=this.y0+this.a*a*.5/this.k0}return t.x=e,t.y=n,t},inverse:function(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=of(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*Oh:Oh;for(var r,i,o,a,s=Math.asin(.5*e),u=0;u<30;u++)if(i=Math.sin(s),o=Math.cos(s),a=t*i,s+=r=Math.pow(1-a*a,2)/(2*o)*(e/(1-t*t)-i/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),Math.abs(r)<=1e-10)return s;return NaN}(this.e,2*t.y*this.k0/this.a),e=of(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},names:["cea"]};var Hp={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,n=t.y,r=of(e-this.long0),i=kp(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*i,t},inverse:function(t){var e=t.x,n=t.y;return t.x=of(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=kp(this.lat0+(n-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]};var Qp={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Op(this.es),this.e1=Pp(this.es),this.e2=Lp(this.es),this.e3=Ap(this.es),this.ml0=this.a*Cp(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,n,r,i=t.x,o=t.y,a=of(i-this.long0);if(r=a*Math.sin(o),this.sphere)Math.abs(o)<=Ph?(e=this.a*a,n=-1*this.a*this.lat0):(e=this.a*Math.sin(r)/Math.tan(o),n=this.a*(kp(o-this.lat0)+(1-Math.cos(r))/Math.tan(o)));else if(Math.abs(o)<=Ph)e=this.a*a,n=-1*this.ml0;else{var s=Tp(this.a,this.e,Math.sin(o))/Math.tan(o);e=s*Math.sin(r),n=this.a*Cp(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*(1-Math.cos(r))}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){var e,n,r,i,o,a,s,u,l;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=Ph)e=of(r/this.a+this.long0),n=0;else{var c;for(a=this.lat0+i/this.a,s=r*r/this.a/this.a+a*a,u=a,o=20;o;--o)if(u+=l=-1*(a*(u*(c=Math.tan(u))+1)-u-.5*(u*u+s)*c)/((u-a)/c-1),Math.abs(l)<=Ph){n=u;break}e=of(this.long0+Math.asin(r*Math.tan(u)/this.a)/Math.sin(n))}else if(Math.abs(i+this.ml0)<=Ph)n=0,e=of(this.long0+r/this.a);else{var h,f,p,d,g;for(a=(this.ml0+i)/this.a,s=r*r/this.a/this.a+a*a,u=a,o=20;o;--o)if(g=this.e*Math.sin(u),h=Math.sqrt(1-g*g)*Math.tan(u),f=this.a*Cp(this.e0,this.e1,this.e2,this.e3,u),p=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),u-=l=(a*(h*(d=f/this.a)+1)-d-.5*h*(d*d+s))/(this.es*Math.sin(2*u)*(d*d+s-2*a*d)/(4*h)+(a-d)*(h*p-2/Math.sin(2*u))-p),Math.abs(l)<=Ph){n=u;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=of(this.long0+Math.asin(r*h/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},names:["Polyconic","poly"]};var Jp={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,n=t.x,r=t.y-this.lat0,i=n-this.long0,o=r/Ch*1e-5,a=i,s=1,u=0;for(e=1;e<=10;e++)s*=o,u+=this.A[e]*s;var l,c=u,h=a,f=1,p=0,d=0,g=0;for(e=1;e<=6;e++)l=p*c+f*h,f=f*c-p*h,p=l,d=d+this.B_re[e]*f-this.B_im[e]*p,g=g+this.B_im[e]*f+this.B_re[e]*p;return t.x=g*this.a+this.x0,t.y=d*this.a+this.y0,t},inverse:function(t){var e,n,r=t.x,i=t.y,o=r-this.x0,a=(i-this.y0)/this.a,s=o/this.a,u=1,l=0,c=0,h=0;for(e=1;e<=6;e++)n=l*a+u*s,u=u*a-l*s,l=n,c=c+this.C_re[e]*u-this.C_im[e]*l,h=h+this.C_im[e]*u+this.C_re[e]*l;for(var f=0;f<this.iterations;f++){var p,d=c,g=h,y=a,_=s;for(e=2;e<=6;e++)p=g*c+d*h,d=d*c-g*h,g=p,y+=(e-1)*(this.B_re[e]*d-this.B_im[e]*g),_+=(e-1)*(this.B_im[e]*d+this.B_re[e]*g);d=1,g=0;var v=this.B_re[1],m=this.B_im[1];for(e=2;e<=6;e++)p=g*c+d*h,d=d*c-g*h,g=p,v+=e*(this.B_re[e]*d-this.B_im[e]*g),m+=e*(this.B_im[e]*d+this.B_re[e]*g);var x=v*v+m*m;c=(y*v+_*m)/x,h=(_*v-y*m)/x}var b=c,M=h,w=1,E=0;for(e=1;e<=9;e++)w*=b,E+=this.D[e]*w;var N=this.lat0+E*Ch*1e5,S=this.long0+M;return t.x=S,t.y=N,t},names:["New_Zealand_Map_Grid","nzmg"]};var Kp={init:function(){},forward:function(t){var e=t.x,n=t.y,r=of(e-this.long0),i=this.x0+this.a*r,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=i,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=of(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},names:["Miller_Cylindrical","mill"]};var Zp={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=up(this.es)},forward:function(t){var e,n,r=t.x,i=t.y;if(r=of(r-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(i),a=20;a;--a){var s=(this.m*i+Math.sin(i)-o)/(this.m+Math.cos(i));if(i-=s,Math.abs(s)<Ph)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;e=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var u=Math.sin(i),l=Math.cos(i);n=this.a*lp(i,u,l,this.en),e=this.a*r*l/Math.sqrt(1-this.es*u*u)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r;return t.x-=this.x0,n=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,n/=this.C_x*(this.m+Math.cos(e)),this.m?e=Wp((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=Wp(Math.sin(e)/this.n)),n=of(n+this.long0),e=kp(e)):(e=cp(t.y/this.a,this.es,this.en),(r=Math.abs(e))<Oh?(r=Math.sin(e),n=of(this.long0+t.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(e)))):r-Ph<Oh&&(n=this.long0)),t.x=n,t.y=e,t},names:["Sinusoidal","sinu"]};var td={init:function(){},forward:function(t){for(var e=t.x,n=t.y,r=of(e-this.long0),i=n,o=Math.PI*Math.sin(n);;){var a=-(i+Math.sin(i)-o)/(1+Math.cos(i));if(i+=a,Math.abs(a)<Ph)break}i/=2,Math.PI/2-Math.abs(n)<Ph&&(r=0);var s=.900316316158*this.a*r*Math.cos(i)+this.x0,u=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=s,t.y=u,t},inverse:function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=of(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var i=Math.asin(n);return t.x=r,t.y=i,t},names:["Mollweide","moll"]};var ed={init:function(){Math.abs(this.lat1+this.lat2)<Ph||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Op(this.es),this.e1=Pp(this.es),this.e2=Lp(this.es),this.e3=Ap(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=nf(this.e,this.sinphi,this.cosphi),this.ml1=Cp(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Ph?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=nf(this.e,this.sinphi,this.cosphi),this.ml2=Cp(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Cp(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,n=t.x,r=t.y;if(this.sphere)e=this.a*(this.g-r);else{var i=Cp(this.e0,this.e1,this.e2,this.e3,r);e=this.a*(this.g-i)}var o=this.ns*of(n-this.long0),a=this.x0+e*Math.sin(o),s=this.y0+this.rh-e*Math.cos(o);return t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;return 0!==n&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere?(i=of(this.long0+o/this.ns),r=kp(this.g-n/this.a),t.x=i,t.y=r,t):(r=Rp(this.g-n/this.a,this.e0,this.e1,this.e2,this.e3),i=of(this.long0+o/this.ns),t.x=i,t.y=r,t)},names:["Equidistant_Conic","eqdc"]};var nd={init:function(){this.R=this.a},forward:function(t){var e,n,r=t.x,i=t.y,o=of(r-this.long0);Math.abs(i)<=Ph&&(e=this.x0+this.R*o,n=this.y0);var a=Wp(2*Math.abs(i/Math.PI));(Math.abs(o)<=Ph||Math.abs(Math.abs(i)-Oh)<=Ph)&&(e=this.x0,n=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/o-o/Math.PI),u=s*s,l=Math.sin(a),c=Math.cos(a),h=c/(l+c-1),f=h*h,p=h*(2/l-1),d=p*p,g=Math.PI*this.R*(s*(h-d)+Math.sqrt(u*(h-d)*(h-d)-(d+u)*(f-d)))/(d+u);o<0&&(g=-g),e=this.x0+g;var y=u+h;return g=Math.PI*this.R*(p*y-s*Math.sqrt((d+u)*(u+1)-y*y))/(d+u),n=i>=0?this.y0+g:this.y0-g,t.x=e,t.y=n,t},inverse:function(t){var e,n,r,i,o,a,s,u,l,c,h,f;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,o=(r=t.x/h)*r+(i=t.y/h)*i,h=3*(i*i/(u=-2*(a=-Math.abs(i)*(1+o))+1+2*i*i+o*o)+(2*(s=a-2*i*i+r*r)*s*s/u/u/u-9*a*s/u/u)/27)/(l=(a-s*s/3/u)/u)/(c=2*Math.sqrt(-l/3)),Math.abs(h)>1&&(h=h>=0?1:-1),f=Math.acos(h)/3,n=t.y>=0?(-c*Math.cos(f+Math.PI/3)-s/3/u)*Math.PI:-(-c*Math.cos(f+Math.PI/3)-s/3/u)*Math.PI,e=Math.abs(r)<Ph?this.long0:of(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(r*r-i*i)+o*o))/2/r),t.x=e,t.y=n,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var rd={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,o,a,s,u,l,c,h,f,p,d,g,y,_,v,m,x,b,M,w=t.x,E=t.y,N=Math.sin(t.y),S=Math.cos(t.y),I=of(w-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=Ph?(t.x=this.x0+this.a*(Oh-E)*Math.sin(I),t.y=this.y0-this.a*(Oh-E)*Math.cos(I),t):Math.abs(this.sin_p12+1)<=Ph?(t.x=this.x0+this.a*(Oh+E)*Math.sin(I),t.y=this.y0+this.a*(Oh+E)*Math.cos(I),t):(v=this.sin_p12*N+this.cos_p12*S*Math.cos(I),_=(y=Math.acos(v))?y/Math.sin(y):1,t.x=this.x0+this.a*_*S*Math.sin(I),t.y=this.y0+this.a*_*(this.cos_p12*N-this.sin_p12*S*Math.cos(I)),t):(e=Op(this.es),n=Pp(this.es),r=Lp(this.es),i=Ap(this.es),Math.abs(this.sin_p12-1)<=Ph?(o=this.a*Cp(e,n,r,i,Oh),a=this.a*Cp(e,n,r,i,E),t.x=this.x0+(o-a)*Math.sin(I),t.y=this.y0-(o-a)*Math.cos(I),t):Math.abs(this.sin_p12+1)<=Ph?(o=this.a*Cp(e,n,r,i,Oh),a=this.a*Cp(e,n,r,i,E),t.x=this.x0+(o+a)*Math.sin(I),t.y=this.y0+(o+a)*Math.cos(I),t):(s=N/S,u=Tp(this.a,this.e,this.sin_p12),l=Tp(this.a,this.e,N),c=Math.atan((1-this.es)*s+this.es*u*this.sin_p12/(l*S)),m=0===(h=Math.atan2(Math.sin(I),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(I)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(h)-Math.PI)<=Ph?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(I)*Math.cos(c)/Math.sin(h)),f=this.e*this.sin_p12/Math.sqrt(1-this.es),y=u*m*(1-(x=m*m)*(g=(p=this.e*this.cos_p12*Math.cos(h)/Math.sqrt(1-this.es))*p)*(1-g)/6+(b=x*m)/8*(d=f*p)*(1-2*g)+(M=b*m)/120*(g*(4-7*g)-3*f*f*(1-7*g))-M*m/48*d),t.x=this.x0+y*Math.sin(h),t.y=this.y0+y*Math.cos(h),t))},inverse:function(t){var e,n,r,i,o,a,s,u,l,c,h,f,p,d,g,y,_,v,m,x,b,M,w;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*Oh*this.a)return;return n=e/this.a,r=Math.sin(n),i=Math.cos(n),o=this.long0,Math.abs(e)<=Ph?a=this.lat0:(a=Wp(i*this.sin_p12+t.y*r*this.cos_p12/e),s=Math.abs(this.lat0)-Oh,o=Math.abs(s)<=Ph?this.lat0>=0?of(this.long0+Math.atan2(t.x,-t.y)):of(this.long0-Math.atan2(-t.x,t.y)):of(this.long0+Math.atan2(t.x*r,e*this.cos_p12*i-t.y*this.sin_p12*r))),t.x=o,t.y=a,t}return u=Op(this.es),l=Pp(this.es),c=Lp(this.es),h=Ap(this.es),Math.abs(this.sin_p12-1)<=Ph?(a=Rp(((f=this.a*Cp(u,l,c,h,Oh))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,u,l,c,h),o=of(this.long0+Math.atan2(t.x,-1*t.y)),t.x=o,t.y=a,t):Math.abs(this.sin_p12+1)<=Ph?(f=this.a*Cp(u,l,c,h,Oh),a=Rp(((e=Math.sqrt(t.x*t.x+t.y*t.y))-f)/this.a,u,l,c,h),o=of(this.long0+Math.atan2(t.x,t.y)),t.x=o,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),g=Math.atan2(t.x,t.y),p=Tp(this.a,this.e,this.sin_p12),y=Math.cos(g),v=-(_=this.e*this.cos_p12*y)*_/(1-this.es),m=3*this.es*(1-v)*this.sin_p12*this.cos_p12*y/(1-this.es),M=1-v*(b=(x=e/p)-v*(1+v)*Math.pow(x,3)/6-m*(1+3*v)*Math.pow(x,4)/24)*b/2-x*b*b*b/6,d=Math.asin(this.sin_p12*Math.cos(b)+this.cos_p12*Math.sin(b)*y),o=of(this.long0+Math.asin(Math.sin(g)*Math.sin(b)/Math.cos(d))),w=Math.sin(d),a=Math.atan2((w-this.es*M*this.sin_p12)*Math.tan(d),w*(1-this.es)),t.x=o,t.y=a,t)},names:["Azimuthal_Equidistant","aeqd"]};var od={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,o,a,s,u=t.x,l=t.y;return r=of(u-this.long0),e=Math.sin(l),n=Math.cos(l),i=Math.cos(r),1,((o=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(o)<=Ph)&&(a=1*this.a*n*Math.sin(r),s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i,o,a,s;return t.x-=this.x0,t.y-=this.y0,n=Wp((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),r=Math.sin(n),i=Math.cos(n),a=this.long0,Math.abs(e)<=Ph?(s=this.lat0,t.x=a,t.y=s,t):(s=Wp(i*this.sin_p14+t.y*r*this.cos_p14/e),o=Math.abs(this.lat0)-Oh,Math.abs(o)<=Ph?(a=this.lat0>=0?of(this.long0+Math.atan2(t.x,-t.y)):of(this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=s,t):(a=of(this.long0+Math.atan2(t.x*r,e*this.cos_p14*i-t.y*this.sin_p14*r)),t.x=a,t.y=s,t))},names:["ortho"]},ad=1,sd=2,ud=3,ld=4,cd=5,hd=6,fd=1,pd=2,dd=3,gd=4;function yd(t,e,n,r){var i;return t<Ph?(r.value=fd,i=0):(i=Math.atan2(e,n),Math.abs(i)<=Th?r.value=fd:i>Th&&i<=Oh+Th?(r.value=pd,i-=Oh):i>Oh+Th||i<=-(Oh+Th)?(r.value=dd,i=i>=0?i-Rh:i+Rh):(r.value=gd,i+=Oh)),i}function _d(t,e){var n=t+e;return n<-Rh?n+=kh:n>+Rh&&(n-=kh),n}var vd={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Oh-Th/2?this.face=cd:this.lat0<=-(Oh-Th/2)?this.face=hd:Math.abs(this.long0)<=Th?this.face=ad:Math.abs(this.long0)<=Oh+Th?this.face=this.long0>0?sd:ld:this.face=ud,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,n,r,i,o,a,s={x:0,y:0},u={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,this.face===cd)i=Oh-e,n>=Th&&n<=Oh+Th?(u.value=fd,r=n-Oh):n>Oh+Th||n<=-(Oh+Th)?(u.value=pd,r=n>0?n-Rh:n+Rh):n>-(Oh+Th)&&n<=-Th?(u.value=dd,r=n+Oh):(u.value=gd,r=n);else if(this.face===hd)i=Oh+e,n>=Th&&n<=Oh+Th?(u.value=fd,r=-n+Oh):n<Th&&n>=-Th?(u.value=pd,r=-n):n<-Th&&n>=-(Oh+Th)?(u.value=dd,r=-n-Oh):(u.value=gd,r=n>0?-n+Rh:-n-Rh);else{var l,c,h,f,p,d;this.face===sd?n=_d(n,+Oh):this.face===ud?n=_d(n,+Rh):this.face===ld&&(n=_d(n,-Oh)),f=Math.sin(e),p=Math.cos(e),d=Math.sin(n),l=p*Math.cos(n),c=p*d,h=f,this.face===ad?r=yd(i=Math.acos(l),h,c,u):this.face===sd?r=yd(i=Math.acos(c),h,-l,u):this.face===ud?r=yd(i=Math.acos(-l),h,-c,u):this.face===ld?r=yd(i=Math.acos(-c),h,l,u):(i=r=0,u.value=fd)}return a=Math.atan(12/Rh*(r+Math.acos(Math.sin(r)*Math.cos(Th))-Oh)),o=Math.sqrt((1-Math.cos(i))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(r))))),u.value===pd?a+=Oh:u.value===dd?a+=Rh:u.value===gd&&(a+=1.5*Rh),s.x=o*Math.cos(a),s.y=o*Math.sin(a),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,t.x=s.x,t.y=s.y,t},inverse:function(t){var e,n,r,i,o,a,s,u,l,c,h,f,p={lam:0,phi:0},d={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?d.value=fd:t.y>=0&&t.y>=Math.abs(t.x)?(d.value=pd,e-=Oh):t.x<0&&-t.x>=Math.abs(t.y)?(d.value=dd,e=e<0?e+Rh:e-Rh):(d.value=gd,e+=Oh),l=Rh/12*Math.tan(e),o=Math.sin(l)/(Math.cos(l)-1/Math.sqrt(2)),a=Math.atan(o),(s=1-(r=Math.cos(e))*r*(i=Math.tan(n))*i*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?s=-1:s>1&&(s=1),this.face===cd)u=Math.acos(s),p.phi=Oh-u,d.value===fd?p.lam=a+Oh:d.value===pd?p.lam=a<0?a+Rh:a-Rh:d.value===dd?p.lam=a-Oh:p.lam=a;else if(this.face===hd)u=Math.acos(s),p.phi=u-Oh,d.value===fd?p.lam=-a+Oh:d.value===pd?p.lam=-a:d.value===dd?p.lam=-a-Oh:p.lam=a<0?-a-Rh:-a+Rh;else{var g,y,_;l=(g=s)*g,y=(l+=(_=l>=1?0:Math.sqrt(1-l)*Math.sin(a))*_)>=1?0:Math.sqrt(1-l),d.value===pd?(l=y,y=-_,_=l):d.value===dd?(y=-y,_=-_):d.value===gd&&(l=y,y=_,_=-l),this.face===sd?(l=g,g=-y,y=l):this.face===ud?(g=-g,y=-y):this.face===ld&&(l=g,g=y,y=-l),p.phi=Math.acos(-_)-Oh,p.lam=Math.atan2(y,g),this.face===sd?p.lam=_d(p.lam,-Oh):this.face===ud?p.lam=_d(p.lam,-Rh):this.face===ld&&(p.lam=_d(p.lam,+Oh))}return 0!==this.es&&(c=p.phi<0?1:0,h=Math.tan(p.phi),f=this.b/Math.sqrt(h*h+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-f*f)/(this.one_minus_f*f)),c&&(p.phi=-p.phi)),p.lam+=this.long0,t.x=p.lam,t.y=p.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},md=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],xd=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],bd=.8487,Md=1.3523,wd=Ah/5,Ed=18,Nd=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};var Sd={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=of(t.x-this.long0),n=Math.abs(t.y),r=Math.floor(n*wd);r<0?r=0:r>=Ed&&(r=17);var i={x:Nd(md[r],n=Ah*(n-.08726646259971647*r))*e,y:Nd(xd[r],n)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*bd+this.x0,i.y=i.y*this.a*Md+this.y0,i},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*bd),y:Math.abs(t.y-this.y0)/(this.a*Md)};if(e.y>=1)e.x/=md[18][0],e.y=t.y<0?-Oh:Oh;else{var n=Math.floor(e.y*Ed);for(n<0?n=0:n>=Ed&&(n=17);;)if(xd[n][0]>e.y)--n;else{if(!(xd[n+1][0]<=e.y))break;++n}var r=xd[n],i=5*(e.y-r[0])/(xd[n+1][0]-r[0]);i=function(t,e,n,r){for(var i=e;r;--r){var o=t(i);if(i-=o,Math.abs(o)<n)break}return i}((function(t){return(Nd(r,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(r,t)}),i,Ph,100),e.x/=Nd(md[n],i),e.y=(5*n+i)*Lh,t.y<0&&(e.y=-e.y)}return e.x=of(e.x+this.long0),e},names:["Robinson","robin"]};var Id={init:function(){this.name="geocent"},forward:function(t){return Sf(t,this.es,this.a)},inverse:function(t){return If(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},Cd=0,Od=1,Pd=2,Ld=3,Ad={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};var Td={init:function(){if(Object.keys(Ad).forEach(function(t){if(void 0===this[t])this[t]=Ad[t].def;else{if(Ad[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);Ad[t].num&&(this[t]=parseFloat(this[t]))}Ad[t].degrees&&(this[t]=this[t]*Lh)}.bind(this)),Math.abs(Math.abs(this.lat0)-Oh)<Ph?this.mode=this.lat0<0?Od:Cd:Math.abs(this.lat0)<Ph?this.mode=Pd:(this.mode=Ld,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,n,r,i,o=Math.sin(t.y),a=Math.cos(t.y),s=Math.cos(t.x);switch(this.mode){case Ld:n=this.sinph0*o+this.cosph0*a*s;break;case Pd:n=a*s;break;case Od:n=-o;break;case Cd:n=o}switch(e=(n=this.pn1/(this.p-n))*a*Math.sin(t.x),this.mode){case Ld:n*=this.cosph0*o-this.sinph0*a*s;break;case Pd:n*=o;break;case Cd:n*=-a*s;break;case Od:n*=a*s}return i=1/((r=n*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-n*this.sg)*this.cw*i,n=r*i,t.x=e*this.a,t.y=n*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,n,r,i={x:t.x,y:t.y};r=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*r,n=this.pn1*t.y*this.cw*r,t.x=e*this.cg+n*this.sg,t.y=n*this.cg-e*this.sg;var o=pp(t.x,t.y);if(Math.abs(o)<Ph)i.x=0,i.y=t.y;else{var a,s;switch(s=1-o*o*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/o+o/this.pn1),a=Math.sqrt(1-s*s),this.mode){case Ld:i.y=Math.asin(a*this.sinph0+t.y*s*this.cosph0/o),t.y=(a-this.sinph0*Math.sin(i.y))*o,t.x*=s*this.cosph0;break;case Pd:i.y=Math.asin(t.y*s/o),t.y=a*o,t.x*=s;break;case Cd:i.y=Math.asin(a),t.y=-t.y;break;case Od:i.y=-Math.asin(a)}i.x=Math.atan2(t.x,t.y)}return t.x=i.x+this.long0,t.y=i.y,t},names:["Tilted_Perspective","tpers"]};var kd={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,n,r,i,o=t.x,a=t.y;if(o-=this.long0,"ellipse"===this.shape){a=Math.atan(this.radius_p2*Math.tan(a));var s=this.radius_p/pp(this.radius_p*Math.cos(a),Math.sin(a));if(n=s*Math.cos(o)*Math.cos(a),r=s*Math.sin(o)*Math.cos(a),i=s*Math.sin(a),(this.radius_g-n)*n-r*r-i*i*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(r/pp(i,e)),t.y=this.radius_g_1*Math.atan(i/e)):(t.x=this.radius_g_1*Math.atan(r/e),t.y=this.radius_g_1*Math.atan(i/pp(r,e)))}else"sphere"===this.shape&&(e=Math.cos(a),n=Math.cos(o)*e,r=Math.sin(o)*e,i=Math.sin(a),e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(r/pp(i,e)),t.y=this.radius_g_1*Math.atan(i/e)):(t.x=this.radius_g_1*Math.atan(r/e),t.y=this.radius_g_1*Math.atan(i/pp(r,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,n,r,i,o=-1,a=0,s=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*pp(1,s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*pp(1,a));var u=s/this.radius_p;if(e=a*a+u*u+o*o,(r=(n=2*this.radius_g*o)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=(-n-Math.sqrt(r))/(2*e),o=this.radius_g+i*o,a*=i,s*=i,t.x=Math.atan2(a,o),t.y=Math.atan(s*Math.cos(t.x)/o),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+s*s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+a*a)),e=a*a+s*s+o*o,(r=(n=2*this.radius_g*o)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=(-n-Math.sqrt(r))/(2*e),o=this.radius_g+i*o,a*=i,s*=i,t.x=Math.atan2(a,o),t.y=Math.atan(s*Math.cos(t.x)/o)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};qf.defaultDatum="WGS84",qf.Proj=Nf,qf.WGS84=new qf.Proj("WGS84"),qf.Point=ip,qf.toPoint=kf,qf.defs=Jh,qf.nadgrid=function(t,e){var n=new DataView(e),r=function(t){var e=t.getInt32(8,!1);if(11===e)return!1;11!==(e=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian");return!0}(n),i=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:bf(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(n,r);i.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var o=function(t,e,n){for(var r=176,i=[],o=0;o<e.nSubgrids;o++){var a=wf(t,r,n),s=Ef(t,r,a,n),u=Math.round(1+(a.upperLongitude-a.lowerLongitude)/a.longitudeInterval),l=Math.round(1+(a.upperLatitude-a.lowerLatitude)/a.latitudeInterval);i.push({ll:[xf(a.lowerLongitude),xf(a.lowerLatitude)],del:[xf(a.longitudeInterval),xf(a.latitudeInterval)],lim:[u,l],count:a.gridNodeCount,cvs:Mf(s)})}return i}(n,i,r),a={header:i,subgrids:o};return vf[t]=a,a},qf.transform=Df,qf.mgrs=$f,qf.version="__VERSION__",function(t){t.Proj.projections.add(hp),t.Proj.projections.add(_p),t.Proj.projections.add(vp),t.Proj.projections.add(bp),t.Proj.projections.add(Mp),t.Proj.projections.add(wp),t.Proj.projections.add(Np),t.Proj.projections.add(Sp),t.Proj.projections.add(Ip),t.Proj.projections.add(Dp),t.Proj.projections.add(Vp),t.Proj.projections.add(Yp),t.Proj.projections.add(Xp),t.Proj.projections.add($p),t.Proj.projections.add(Hp),t.Proj.projections.add(Qp),t.Proj.projections.add(Jp),t.Proj.projections.add(Kp),t.Proj.projections.add(Zp),t.Proj.projections.add(td),t.Proj.projections.add(ed),t.Proj.projections.add(nd),t.Proj.projections.add(rd),t.Proj.projections.add(od),t.Proj.projections.add(vd),t.Proj.projections.add(Sd),t.Proj.projections.add(Id),t.Proj.projections.add(Td),t.Proj.projections.add(kd)}(qf);const Rd=Object.assign({},Na);qf.defs([["epsg:2154","+title=France Lambert93 +proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"]]),qf.defs([["epsg:3035","+title=Europa (ETRS89/LAEA) +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs"]]),qf.defs([["epsg:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs"]]),qf.defs([["epsg:27700","+title=British National Grid -- United Kingdom +proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +towgs84=446.448,-125.157,542.06,0.15,0.247,0.842,-20.489 +units=m +no_defs"]]),qf.defs([["epsg:42304","+title=NAD83 / NRCan LCC Canada +proj=lcc +lat_1=49 +lat_2=77 +lat_0=49 +lon_0=-95 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs "]]);const Dd=Object.assign({},Na);function Fd(t){if(null==t||""===t)return Dd.geoEquirectangular();if("function"==typeof t)return t;if("string"==typeof t){if("Polar"==(t=t.replace(/\s/g,"")))return ph.geoAzimuthalEquidistant().scale(190).rotate([0,-90]).clipAngle(150);if("HoaXiaoguang"==t)return dh.geoHufnagel().a(.8).b(.35).psiMax(50).ratio(1.6).angle(90).rotate([110,-200,90]);if("Spilhaus"==t)return gh.geoProjection(Nh).rotate([-66.94970198,49.56371678,40.17823482]);if("user"===t)return Dd.geoIdentity().reflectY(!0);if("+proj"===t.substring(0,5)||"epsg:"===t.substring(0,5))return function(t){let e;+t==t&&(e=qf("epsg:"+t)),e||(e=qf(t));const n=180/Math.PI,r=1/n,i=function(t,r){return e.forward([t*n,r*n])};i.invert=function(t,n){return e.inverse([t,n]).map((function(t){return t*r}))};const o=Rd.geoProjection(i).scale(1);return o.raw=e,o}(t);if("user"!==t&&"+proj"!==t.substring(0,5)&&"epsg:"!==t.substring(0,5))return function(t){let e=t;return e=e.replace(/\s/g,""),"d3.geo"!==e.substring(0,6)&&(-1===e.indexOf(".")?e+="()":e=e.replace(".","()."),e="d3.geo"+e),new Function("d3",`return (${e})`)(fh)}(t)}}const zd=Object.assign({},bt,Na,Ec);function Gd(t,e,n={},r){let i=n.stroke?n.stroke:"white",o=n.strokeWidth?n.strokeWidth:.8,a=n.strokeOpacity?n.strokeOpacity:.5,s=n.strokeDasharray?n.strokeDasharray:2,u=n.strokeLinecap??"round",l=n.strokeLinejoin??"round",c=n.step?n.step:[10,10];c=Array.isArray(c)?c:[c,c],t.append("g").attr("clip-path",null==r?"none":`url(#clip_${r}`).append("path").datum(zd.geoGraticule().step(c)).attr("d",zd.geoPath(e)).style("fill","none").style("stroke",i).style("stroke-width",o).style("stroke-opacity",a).style("stroke-linecap",u).style("stroke-linejoin",l).style("stroke-dasharray",s)}const qd=Object.assign({},bt,Na,Ec);function jd(t,e,n={}){let r=n.fill?n.fill:"#add8f7",i=n.fillOpacity?n.fillOpacity:1,o=n.stroke?n.stroke:"none",a=n.strokeWidth?n.strokeWidth:1;t.append("g").append("path").attr("d",qd.geoPath(e)({type:"Sphere"})).attr("fill",r).attr("fill-opacity",i).attr("stroke",o).attr("stroke-width",a)}Object.assign({},bt),Object.assign({},bt);const Bd=Math.PI,Ud=2*Bd,Vd=1e-6,Wd=Ud-Vd;function Yd(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Xd(){return new Yd}function $d(t){return function(){return t}}Yd.prototype=Xd.prototype={constructor:Yd,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-t,u=r-e,l=o-t,c=a-e,h=l*l+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>Vd)if(Math.abs(c*s-u*l)>Vd&&i){var f=n-o,p=r-a,d=s*s+u*u,g=f*f+p*p,y=Math.sqrt(d),_=Math.sqrt(h),v=i*Math.tan((Bd-Math.acos((d+h-g)/(2*y*_)))/2),m=v/_,x=v/y;Math.abs(m-1)>Vd&&(this._+="L"+(t+m*l)+","+(e+m*c)),this._+="A"+i+","+i+",0,0,"+ +(c*f>l*p)+","+(this._x1=t+x*s)+","+(this._y1=e+x*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,o){t=+t,e=+e,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=t+a,l=e+s,c=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+l:(Math.abs(this._x1-u)>Vd||Math.abs(this._y1-l)>Vd)&&(this._+="L"+u+","+l),n&&(h<0&&(h=h%Ud+Ud),h>Wd?this._+="A"+n+","+n+",0,1,"+c+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):h>Vd&&(this._+="A"+n+","+n+",0,"+ +(h>=Bd)+","+c+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};const Hd=Math.abs,Qd=Math.atan2,Jd=Math.cos,Kd=Math.max,Zd=Math.min,tg=Math.sin,eg=Math.sqrt,ng=1e-12,rg=Math.PI,ig=rg/2,og=2*rg;function ag(t){return t>1?0:t<-1?rg:Math.acos(t)}function sg(t){return t>=1?ig:t<=-1?-ig:Math.asin(t)}function ug(t){return t.innerRadius}function lg(t){return t.outerRadius}function cg(t){return t.startAngle}function hg(t){return t.endAngle}function fg(t){return t&&t.padAngle}function pg(t,e,n,r,i,o,a,s){var u=n-t,l=r-e,c=a-i,h=s-o,f=h*u-c*l;if(!(f*f<ng))return[t+(f=(c*(e-o)-h*(t-i))/f)*u,e+f*l]}function dg(t,e,n,r,i,o,a){var s=t-n,u=e-r,l=(a?o:-o)/eg(s*s+u*u),c=l*u,h=-l*s,f=t+c,p=e+h,d=n+c,g=r+h,y=(f+d)/2,_=(p+g)/2,v=d-f,m=g-p,x=v*v+m*m,b=i-o,M=f*g-d*p,w=(m<0?-1:1)*eg(Kd(0,b*b*x-M*M)),E=(M*m-v*w)/x,N=(-M*v-m*w)/x,S=(M*m+v*w)/x,I=(-M*v+m*w)/x,C=E-y,O=N-_,P=S-y,L=I-_;return C*C+O*O>P*P+L*L&&(E=S,N=I),{cx:E,cy:N,x01:-c,y01:-h,x11:E*(i/b-1),y11:N*(i/b-1)}}var gg=Array.prototype.slice;function yg(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function _g(t){this._context=t}function vg(t){return new _g(t)}function mg(t){return t[0]}function xg(t){return t[1]}function bg(t,e){var n=$d(!0),r=null,i=vg,o=null;function a(a){var s,u,l,c=(a=yg(a)).length,h=!1;for(null==r&&(o=i(l=Xd())),s=0;s<=c;++s)!(s<c&&n(u=a[s],s,a))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(u,s,a),+e(u,s,a));if(l)return o=null,l+""||null}return t="function"==typeof t?t:void 0===t?mg:$d(t),e="function"==typeof e?e:void 0===e?xg:$d(e),a.x=function(e){return arguments.length?(t="function"==typeof e?e:$d(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:$d(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:$d(!!t),a):n},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a}function Mg(t,e,n){var r=null,i=$d(!0),o=null,a=vg,s=null;function u(u){var l,c,h,f,p,d=(u=yg(u)).length,g=!1,y=new Array(d),_=new Array(d);for(null==o&&(s=a(p=Xd())),l=0;l<=d;++l){if(!(l<d&&i(f=u[l],l,u))===g)if(g=!g)c=l,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=l-1;h>=c;--h)s.point(y[h],_[h]);s.lineEnd(),s.areaEnd()}g&&(y[l]=+t(f,l,u),_[l]=+e(f,l,u),s.point(r?+r(f,l,u):y[l],n?+n(f,l,u):_[l]))}if(p)return s=null,p+""||null}function l(){return bg().defined(i).curve(a).context(o)}return t="function"==typeof t?t:void 0===t?mg:$d(+t),e="function"==typeof e?e:$d(void 0===e?0:+e),n="function"==typeof n?n:void 0===n?xg:$d(+n),u.x=function(e){return arguments.length?(t="function"==typeof e?e:$d(+e),r=null,u):t},u.x0=function(e){return arguments.length?(t="function"==typeof e?e:$d(+e),u):t},u.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:$d(+t),u):r},u.y=function(t){return arguments.length?(e="function"==typeof t?t:$d(+t),n=null,u):e},u.y0=function(t){return arguments.length?(e="function"==typeof t?t:$d(+t),u):e},u.y1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:$d(+t),u):n},u.lineX0=u.lineY0=function(){return l().x(t).y(e)},u.lineY1=function(){return l().x(t).y(n)},u.lineX1=function(){return l().x(r).y(e)},u.defined=function(t){return arguments.length?(i="function"==typeof t?t:$d(!!t),u):i},u.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),u):a},u.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),u):o},u}function wg(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function Eg(t){return t}_g.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Ng=Ig(vg);function Sg(t){this._curve=t}function Ig(t){function e(e){return new Sg(t(e))}return e._curve=t,e}function Cg(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(Ig(t)):e()._curve},t}function Og(){return Cg(bg().curve(Ng))}function Pg(){var t=Mg().curve(Ng),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Cg(n())},delete t.lineX0,t.lineEndAngle=function(){return Cg(r())},delete t.lineX1,t.lineInnerRadius=function(){return Cg(i())},delete t.lineY0,t.lineOuterRadius=function(){return Cg(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(Ig(t)):e()._curve},t}function Lg(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}Sg.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};class Ag{constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e)}this._x0=t,this._y0=e}}class Tg{constructor(t){this._context=t}lineStart(){this._point=0}lineEnd(){}point(t,e){if(t=+t,e=+e,0==this._point++)this._x0=t,this._y0=e;else{const n=Lg(this._x0,this._y0),r=Lg(this._x0,this._y0=(this._y0+e)/2),i=Lg(t,this._y0),o=Lg(t,e);this._context.moveTo(...n),this._context.bezierCurveTo(...r,...i,...o)}}}function kg(t){return new Ag(t,!0)}function Rg(t){return new Ag(t,!1)}function Dg(t){return new Tg(t)}function Fg(t){return t.source}function zg(t){return t.target}function Gg(t){let e=Fg,n=zg,r=mg,i=xg,o=null,a=null;function s(){let s;const u=gg.call(arguments),l=e.apply(this,u),c=n.apply(this,u);if(null==o&&(a=t(s=Xd())),a.lineStart(),u[0]=l,a.point(+r.apply(this,u),+i.apply(this,u)),u[0]=c,a.point(+r.apply(this,u),+i.apply(this,u)),a.lineEnd(),s)return a=null,s+""||null}return s.source=function(t){return arguments.length?(e=t,s):e},s.target=function(t){return arguments.length?(n=t,s):n},s.x=function(t){return arguments.length?(r="function"==typeof t?t:$d(+t),s):r},s.y=function(t){return arguments.length?(i="function"==typeof t?t:$d(+t),s):i},s.context=function(e){return arguments.length?(null==e?o=a=null:a=t(o=e),s):o},s}const qg=eg(3);var jg={draw(t,e){const n=.59436*eg(e+Zd(e/28,.75)),r=n/2,i=r*qg;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-i,-r),t.lineTo(i,r),t.moveTo(-i,r),t.lineTo(i,-r)}},Bg={draw(t,e){const n=eg(e/rg);t.moveTo(n,0),t.arc(0,0,n,0,og)}},Ug={draw(t,e){const n=eg(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}};const Vg=eg(1/3),Wg=2*Vg;var Yg={draw(t,e){const n=eg(e/Wg),r=n*Vg;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Xg={draw(t,e){const n=.62625*eg(e);t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},$g={draw(t,e){const n=.87559*eg(e-Zd(e/7,2));t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},Hg={draw(t,e){const n=eg(e),r=-n/2;t.rect(r,r,n,n)}},Qg={draw(t,e){const n=.4431*eg(e);t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}};const Jg=tg(rg/10)/tg(7*rg/10),Kg=tg(og/10)*Jg,Zg=-Jd(og/10)*Jg;var ty={draw(t,e){const n=eg(.8908130915292852*e),r=Kg*n,i=Zg*n;t.moveTo(0,-n),t.lineTo(r,i);for(let e=1;e<5;++e){const o=og*e/5,a=Jd(o),s=tg(o);t.lineTo(s*n,-a*n),t.lineTo(a*r-s*i,s*r+a*i)}t.closePath()}};const ey=eg(3);var ny={draw(t,e){const n=-eg(e/(3*ey));t.moveTo(0,2*n),t.lineTo(-ey*n,-n),t.lineTo(ey*n,-n),t.closePath()}};const ry=eg(3);var iy={draw(t,e){const n=.6824*eg(e),r=n/2,i=n*ry/2;t.moveTo(0,-n),t.lineTo(i,r),t.lineTo(-i,r),t.closePath()}};const oy=-.5,ay=eg(3)/2,sy=1/eg(12),uy=3*(sy/2+1);var ly={draw(t,e){const n=eg(e/uy),r=n/2,i=n*sy,o=r,a=n*sy+n,s=-o,u=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,u),t.lineTo(oy*r-ay*i,ay*r+oy*i),t.lineTo(oy*o-ay*a,ay*o+oy*a),t.lineTo(oy*s-ay*u,ay*s+oy*u),t.lineTo(oy*r+ay*i,oy*i-ay*r),t.lineTo(oy*o+ay*a,oy*a-ay*o),t.lineTo(oy*s+ay*u,oy*u-ay*s),t.closePath()}},cy={draw(t,e){const n=.6189*eg(e-Zd(e/6,1.7));t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}};const hy=[Bg,Ug,Yg,Hg,ty,ny,ly],fy=[Bg,$g,cy,iy,jg,Qg,Xg];function py(){}function dy(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function gy(t){this._context=t}function yy(t){this._context=t}function _y(t){this._context=t}function vy(t,e){this._basis=new gy(t),this._beta=e}gy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:dy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:dy(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},yy.prototype={areaStart:py,areaEnd:py,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:dy(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},_y.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:dy(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},vy.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*a),this._beta*e[u]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var my=function t(e){function n(t){return 1===e?new gy(t):new vy(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function xy(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function by(t,e){this._context=t,this._k=(1-e)/6}by.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:xy(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:xy(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var My=function t(e){function n(t){return new by(t,e)}return n.tension=function(e){return t(+e)},n}(0);function wy(t,e){this._context=t,this._k=(1-e)/6}wy.prototype={areaStart:py,areaEnd:py,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:xy(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ey=function t(e){function n(t){return new wy(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Ny(t,e){this._context=t,this._k=(1-e)/6}Ny.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:xy(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Sy=function t(e){function n(t){return new Ny(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Iy(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>ng){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>ng){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*l+t._x1*t._l23_2a-e*t._l12_2a)/c,a=(a*l+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function Cy(t,e){this._context=t,this._alpha=e}Cy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Iy(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Oy=function t(e){function n(t){return e?new Cy(t,e):new by(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Py(t,e){this._context=t,this._alpha=e}Py.prototype={areaStart:py,areaEnd:py,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Iy(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ly=function t(e){function n(t){return e?new Py(t,e):new wy(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Ay(t,e){this._context=t,this._alpha=e}Ay.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Iy(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ty=function t(e){function n(t){return e?new Ay(t,e):new Ny(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function ky(t){this._context=t}function Ry(t){return t<0?-1:1}function Dy(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(Ry(o)+Ry(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Fy(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function zy(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function Gy(t){this._context=t}function qy(t){this._context=new jy(t)}function jy(t){this._context=t}function By(t){this._context=t}function Uy(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function Vy(t,e){this._context=t,this._t=e}function Wy(t,e){if((i=t.length)>1)for(var n,r,i,o=1,a=t[e[0]],s=a.length;o<i;++o)for(r=a,a=t[e[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function Yy(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Xy(t,e){return t[e]}function $y(t){const e=[];return e.key=t,e}function Hy(t){var e=t.map(Qy);return Yy(t).sort((function(t,n){return e[t]-e[n]}))}function Qy(t){for(var e,n=-1,r=0,i=t.length,o=-1/0;++n<i;)(e=+t[n][1])>o&&(o=e,r=n);return r}function Jy(t){var e=t.map(Ky);return Yy(t).sort((function(t,n){return e[t]-e[n]}))}function Ky(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}ky.prototype={areaStart:py,areaEnd:py,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},Gy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:zy(this,this._t0,Fy(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,zy(this,Fy(this,n=Dy(this,t,e)),n);break;default:zy(this,this._t0,n=Dy(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(qy.prototype=Object.create(Gy.prototype)).point=function(t,e){Gy.prototype.point.call(this,e,t)},jy.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},By.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=Uy(t),i=Uy(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},Vy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var Zy=Object.freeze({__proto__:null,arc:function(){var t=ug,e=lg,n=$d(0),r=null,i=cg,o=hg,a=fg,s=null;function u(){var u,l,c=+t.apply(this,arguments),h=+e.apply(this,arguments),f=i.apply(this,arguments)-ig,p=o.apply(this,arguments)-ig,d=Hd(p-f),g=p>f;if(s||(s=u=Xd()),h<c&&(l=h,h=c,c=l),h>ng)if(d>og-ng)s.moveTo(h*Jd(f),h*tg(f)),s.arc(0,0,h,f,p,!g),c>ng&&(s.moveTo(c*Jd(p),c*tg(p)),s.arc(0,0,c,p,f,g));else{var y,_,v=f,m=p,x=f,b=p,M=d,w=d,E=a.apply(this,arguments)/2,N=E>ng&&(r?+r.apply(this,arguments):eg(c*c+h*h)),S=Zd(Hd(h-c)/2,+n.apply(this,arguments)),I=S,C=S;if(N>ng){var O=sg(N/c*tg(E)),P=sg(N/h*tg(E));(M-=2*O)>ng?(x+=O*=g?1:-1,b-=O):(M=0,x=b=(f+p)/2),(w-=2*P)>ng?(v+=P*=g?1:-1,m-=P):(w=0,v=m=(f+p)/2)}var L=h*Jd(v),A=h*tg(v),T=c*Jd(b),k=c*tg(b);if(S>ng){var R,D=h*Jd(m),F=h*tg(m),z=c*Jd(x),G=c*tg(x);if(d<rg&&(R=pg(L,A,z,G,D,F,T,k))){var q=L-R[0],j=A-R[1],B=D-R[0],U=F-R[1],V=1/tg(ag((q*B+j*U)/(eg(q*q+j*j)*eg(B*B+U*U)))/2),W=eg(R[0]*R[0]+R[1]*R[1]);I=Zd(S,(c-W)/(V-1)),C=Zd(S,(h-W)/(V+1))}}w>ng?C>ng?(y=dg(z,G,L,A,h,C,g),_=dg(D,F,T,k,h,C,g),s.moveTo(y.cx+y.x01,y.cy+y.y01),C<S?s.arc(y.cx,y.cy,C,Qd(y.y01,y.x01),Qd(_.y01,_.x01),!g):(s.arc(y.cx,y.cy,C,Qd(y.y01,y.x01),Qd(y.y11,y.x11),!g),s.arc(0,0,h,Qd(y.cy+y.y11,y.cx+y.x11),Qd(_.cy+_.y11,_.cx+_.x11),!g),s.arc(_.cx,_.cy,C,Qd(_.y11,_.x11),Qd(_.y01,_.x01),!g))):(s.moveTo(L,A),s.arc(0,0,h,v,m,!g)):s.moveTo(L,A),c>ng&&M>ng?I>ng?(y=dg(T,k,D,F,c,-I,g),_=dg(L,A,z,G,c,-I,g),s.lineTo(y.cx+y.x01,y.cy+y.y01),I<S?s.arc(y.cx,y.cy,I,Qd(y.y01,y.x01),Qd(_.y01,_.x01),!g):(s.arc(y.cx,y.cy,I,Qd(y.y01,y.x01),Qd(y.y11,y.x11),!g),s.arc(0,0,c,Qd(y.cy+y.y11,y.cx+y.x11),Qd(_.cy+_.y11,_.cx+_.x11),g),s.arc(_.cx,_.cy,I,Qd(_.y11,_.x11),Qd(_.y01,_.x01),!g))):s.arc(0,0,c,b,x,g):s.lineTo(T,k)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-rg/2;return[Jd(r)*n,tg(r)*n]},u.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:$d(+e),u):t},u.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:$d(+t),u):e},u.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:$d(+t),u):n},u.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:$d(+t),u):r},u.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:$d(+t),u):i},u.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:$d(+t),u):o},u.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:$d(+t),u):a},u.context=function(t){return arguments.length?(s=null==t?null:t,u):s},u},area:Mg,line:bg,pie:function(){var t=Eg,e=wg,n=null,r=$d(0),i=$d(og),o=$d(0);function a(a){var s,u,l,c,h,f=(a=yg(a)).length,p=0,d=new Array(f),g=new Array(f),y=+r.apply(this,arguments),_=Math.min(og,Math.max(-og,i.apply(this,arguments)-y)),v=Math.min(Math.abs(_)/f,o.apply(this,arguments)),m=v*(_<0?-1:1);for(s=0;s<f;++s)(h=g[d[s]=s]=+t(a[s],s,a))>0&&(p+=h);for(null!=e?d.sort((function(t,n){return e(g[t],g[n])})):null!=n&&d.sort((function(t,e){return n(a[t],a[e])})),s=0,l=p?(_-f*m)/p:0;s<f;++s,y=c)u=d[s],c=y+((h=g[u])>0?h*l:0)+m,g[u]={data:a[u],index:s,value:h,startAngle:y,endAngle:c,padAngle:v};return g}return a.value=function(e){return arguments.length?(t="function"==typeof e?e:$d(+e),a):t},a.sortValues=function(t){return arguments.length?(e=t,n=null,a):e},a.sort=function(t){return arguments.length?(n=t,e=null,a):n},a.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:$d(+t),a):r},a.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:$d(+t),a):i},a.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:$d(+t),a):o},a},areaRadial:Pg,radialArea:Pg,lineRadial:Og,radialLine:Og,pointRadial:Lg,link:Gg,linkHorizontal:function(){return Gg(kg)},linkVertical:function(){return Gg(Rg)},linkRadial:function(){const t=Gg(Dg);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},symbol:function(t,e){let n=null;function r(){let r;if(n||(n=r=Xd()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return t="function"==typeof t?t:$d(t||Bg),e="function"==typeof e?e:$d(void 0===e?64:+e),r.type=function(e){return arguments.length?(t="function"==typeof e?e:$d(e),r):t},r.size=function(t){return arguments.length?(e="function"==typeof t?t:$d(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r},symbolsStroke:fy,symbolsFill:hy,symbols:hy,symbolAsterisk:jg,symbolCircle:Bg,symbolCross:Ug,symbolDiamond:Yg,symbolDiamond2:Xg,symbolPlus:$g,symbolSquare:Hg,symbolSquare2:Qg,symbolStar:ty,symbolTriangle:ny,symbolTriangle2:iy,symbolWye:ly,symbolX:cy,curveBasisClosed:function(t){return new yy(t)},curveBasisOpen:function(t){return new _y(t)},curveBasis:function(t){return new gy(t)},curveBumpX:kg,curveBumpY:Rg,curveBundle:my,curveCardinalClosed:Ey,curveCardinalOpen:Sy,curveCardinal:My,curveCatmullRomClosed:Ly,curveCatmullRomOpen:Ty,curveCatmullRom:Oy,curveLinearClosed:function(t){return new ky(t)},curveLinear:vg,curveMonotoneX:function(t){return new Gy(t)},curveMonotoneY:function(t){return new qy(t)},curveNatural:function(t){return new By(t)},curveStep:function(t){return new Vy(t,.5)},curveStepAfter:function(t){return new Vy(t,1)},curveStepBefore:function(t){return new Vy(t,0)},stack:function(){var t=$d([]),e=Yy,n=Wy,r=Xy;function i(i){var o,a,s=Array.from(t.apply(this,arguments),$y),u=s.length,l=-1;for(const t of i)for(o=0,++l;o<u;++o)(s[o][l]=[0,+r(t,s[o].key,l,i)]).data=t;for(o=0,a=yg(e(s));o<u;++o)s[a[o]].index=o;return n(s,a),s}return i.keys=function(e){return arguments.length?(t="function"==typeof e?e:$d(Array.from(e)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:$d(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?Yy:"function"==typeof t?t:$d(Array.from(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?Wy:t,i):n},i},stackOffsetExpand:function(t,e){if((r=t.length)>0){for(var n,r,i,o=0,a=t[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}Wy(t,e)}},stackOffsetDiverging:function(t,e){if((s=t.length)>0)for(var n,r,i,o,a,s,u=0,l=t[e[0]].length;u<l;++u)for(o=a=0,n=0;n<s;++n)(i=(r=t[e[n]][u])[1]-r[0])>0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):(r[0]=0,r[1]=i)},stackOffsetNone:Wy,stackOffsetSilhouette:function(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=t[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}Wy(t,e)}},stackOffsetWiggle:function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,u=0,l=0;s<i;++s){for(var c=t[e[s]],h=c[a][1]||0,f=(h-(c[a-1][1]||0))/2,p=0;p<s;++p){var d=t[e[p]];f+=(d[a][1]||0)-(d[a-1][1]||0)}u+=h,l+=f*h}n[a-1][1]+=n[a-1][0]=o,u&&(o-=l/u)}n[a-1][1]+=n[a-1][0]=o,Wy(t,e)}},stackOrderAppearance:Hy,stackOrderAscending:Jy,stackOrderDescending:function(t){return Jy(t).reverse()},stackOrderInsideOut:function(t){var e,n,r=t.length,i=t.map(Ky),o=Hy(t),a=0,s=0,u=[],l=[];for(e=0;e<r;++e)n=o[e],a<s?(a+=i[n],u.push(n)):(s+=i[n],l.push(n));return l.reverse().concat(u)},stackOrderNone:Yy,stackOrderReverse:function(t){return Yy(t).reverse()}});function t_(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}var e_=t_("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),n_=t_("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),r_=t_("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),i_=t_("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),o_=t_("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),a_=t_("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),s_=t_("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),u_=t_("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),l_=t_("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),c_=t_("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function h_(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function f_(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function p_(){}var d_=.7,g_=1/d_,y_="\\s*([+-]?\\d+)\\s*",__="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",v_="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",m_=/^#([0-9a-f]{3,8})$/,x_=new RegExp(`^rgb\\(${y_},${y_},${y_}\\)$`),b_=new RegExp(`^rgb\\(${v_},${v_},${v_}\\)$`),M_=new RegExp(`^rgba\\(${y_},${y_},${y_},${__}\\)$`),w_=new RegExp(`^rgba\\(${v_},${v_},${v_},${__}\\)$`),E_=new RegExp(`^hsl\\(${__},${v_},${v_}\\)$`),N_=new RegExp(`^hsla\\(${__},${v_},${v_},${__}\\)$`),S_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function I_(){return this.rgb().formatHex()}function C_(){return this.rgb().formatRgb()}function O_(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=m_.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?P_(e):3===n?new k_(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?L_(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?L_(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=x_.exec(t))?new k_(e[1],e[2],e[3],1):(e=b_.exec(t))?new k_(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=M_.exec(t))?L_(e[1],e[2],e[3],e[4]):(e=w_.exec(t))?L_(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=E_.exec(t))?q_(e[1],e[2]/100,e[3]/100,1):(e=N_.exec(t))?q_(e[1],e[2]/100,e[3]/100,e[4]):S_.hasOwnProperty(t)?P_(S_[t]):"transparent"===t?new k_(NaN,NaN,NaN,0):null}function P_(t){return new k_(t>>16&255,t>>8&255,255&t,1)}function L_(t,e,n,r){return r<=0&&(t=e=n=NaN),new k_(t,e,n,r)}function A_(t){return t instanceof p_||(t=O_(t)),t?new k_((t=t.rgb()).r,t.g,t.b,t.opacity):new k_}function T_(t,e,n,r){return 1===arguments.length?A_(t):new k_(t,e,n,null==r?1:r)}function k_(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function R_(){return`#${G_(this.r)}${G_(this.g)}${G_(this.b)}`}function D_(){const t=F_(this.opacity);return`${1===t?"rgb(":"rgba("}${z_(this.r)}, ${z_(this.g)}, ${z_(this.b)}${1===t?")":`, ${t})`}`}function F_(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function z_(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function G_(t){return((t=z_(t))<16?"0":"")+t.toString(16)}function q_(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new U_(t,e,n,r)}function j_(t){if(t instanceof U_)return new U_(t.h,t.s,t.l,t.opacity);if(t instanceof p_||(t=O_(t)),!t)return new U_;if(t instanceof U_)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new U_(a,s,u,t.opacity)}function B_(t,e,n,r){return 1===arguments.length?j_(t):new U_(t,e,n,null==r?1:r)}function U_(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function V_(t){return(t=(t||0)%360)<0?t+360:t}function W_(t){return Math.max(0,Math.min(1,t||0))}function Y_(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}h_(p_,O_,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:I_,formatHex:I_,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return j_(this).formatHsl()},formatRgb:C_,toString:C_}),h_(k_,T_,f_(p_,{brighter(t){return t=null==t?g_:Math.pow(g_,t),new k_(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?d_:Math.pow(d_,t),new k_(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new k_(z_(this.r),z_(this.g),z_(this.b),F_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:R_,formatHex:R_,formatHex8:function(){return`#${G_(this.r)}${G_(this.g)}${G_(this.b)}${G_(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:D_,toString:D_})),h_(U_,B_,f_(p_,{brighter(t){return t=null==t?g_:Math.pow(g_,t),new U_(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?d_:Math.pow(d_,t),new U_(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new k_(Y_(t>=240?t-240:t+120,i,r),Y_(t,i,r),Y_(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new U_(V_(this.h),W_(this.s),W_(this.l),F_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=F_(this.opacity);return`${1===t?"hsl(":"hsla("}${V_(this.h)}, ${100*W_(this.s)}%, ${100*W_(this.l)}%${1===t?")":`, ${t})`}`}}));const X_=Math.PI/180,$_=180/Math.PI,H_=.96422,Q_=.82521,J_=4/29,K_=6/29,Z_=3*K_*K_;function tv(t){if(t instanceof nv)return new nv(t.l,t.a,t.b,t.opacity);if(t instanceof lv)return cv(t);t instanceof k_||(t=A_(t));var e,n,r=av(t.r),i=av(t.g),o=av(t.b),a=rv((.2225045*r+.7168786*i+.0606169*o)/1);return r===i&&i===o?e=n=a:(e=rv((.4360747*r+.3850649*i+.1430804*o)/H_),n=rv((.0139322*r+.0971045*i+.7141733*o)/Q_)),new nv(116*a-16,500*(e-a),200*(a-n),t.opacity)}function ev(t,e,n,r){return 1===arguments.length?tv(t):new nv(t,e,n,null==r?1:r)}function nv(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function rv(t){return t>.008856451679035631?Math.pow(t,1/3):t/Z_+J_}function iv(t){return t>K_?t*t*t:Z_*(t-J_)}function ov(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function av(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function sv(t){if(t instanceof lv)return new lv(t.h,t.c,t.l,t.opacity);if(t instanceof nv||(t=tv(t)),0===t.a&&0===t.b)return new lv(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*$_;return new lv(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function uv(t,e,n,r){return 1===arguments.length?sv(t):new lv(t,e,n,null==r?1:r)}function lv(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function cv(t){if(isNaN(t.h))return new nv(t.l,0,0,t.opacity);var e=t.h*X_;return new nv(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}h_(nv,ev,f_(p_,{brighter(t){return new nv(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker(t){return new nv(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new k_(ov(3.1338561*(e=H_*iv(e))-1.6168667*(t=1*iv(t))-.4906146*(n=Q_*iv(n))),ov(-.9787684*e+1.9161415*t+.033454*n),ov(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),h_(lv,uv,f_(p_,{brighter(t){return new lv(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker(t){return new lv(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb(){return cv(this).rgb()}}));var hv=-.14861,fv=1.78277,pv=-.29227,dv=-.90649,gv=1.97294,yv=gv*dv,_v=gv*fv,vv=fv*pv-dv*hv;function mv(t){if(t instanceof bv)return new bv(t.h,t.s,t.l,t.opacity);t instanceof k_||(t=A_(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(vv*r+yv*e-_v*n)/(vv+yv-_v),o=r-i,a=(gv*(n-i)-pv*o)/dv,s=Math.sqrt(a*a+o*o)/(gv*i*(1-i)),u=s?Math.atan2(a,o)*$_-120:NaN;return new bv(u<0?u+360:u,s,i,t.opacity)}function xv(t,e,n,r){return 1===arguments.length?mv(t):new bv(t,e,n,null==r?1:r)}function bv(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Mv(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}function wv(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return Mv((n-r/e)*e,a,i,o,s)}}function Ev(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return Mv((n-r/e)*e,i,o,a,s)}}h_(bv,xv,f_(p_,{brighter(t){return t=null==t?g_:Math.pow(g_,t),new bv(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?d_:Math.pow(d_,t),new bv(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*X_,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new k_(255*(e+n*(hv*r+fv*i)),255*(e+n*(pv*r+dv*i)),255*(e+n*(gv*r)),this.opacity)}}));var Nv=t=>()=>t;function Sv(t,e){return function(n){return t+n*e}}function Iv(t,e){var n=e-t;return n?Sv(t,n>180||n<-180?n-360*Math.round(n/360):n):Nv(isNaN(t)?e:t)}function Cv(t){return 1==(t=+t)?Ov:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Nv(isNaN(e)?n:e)}}function Ov(t,e){var n=e-t;return n?Sv(t,n):Nv(isNaN(t)?e:t)}var Pv=function t(e){var n=Cv(e);function r(t,e){var r=n((t=T_(t)).r,(e=T_(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=Ov(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function Lv(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=T_(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}var Av=Lv(wv),Tv=Lv(Ev);function kv(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function Rv(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Dv(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=Uv(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}function Fv(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function zv(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Gv(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Uv(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var qv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jv=new RegExp(qv.source,"g");function Bv(t,e){var n,r,i,o=qv.lastIndex=jv.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=qv.exec(t))&&(r=jv.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:zv(n,r)})),o=jv.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})}function Uv(t,e){var n,r=typeof e;return null==e||"boolean"===r?Nv(e):("number"===r?zv:"string"===r?(n=O_(e))?(e=n,Pv):Bv:e instanceof O_?Pv:e instanceof Date?Fv:Rv(e)?kv:Array.isArray(e)?Dv:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Gv:zv)(t,e)}function Vv(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Wv,Yv=180/Math.PI,Xv={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function $v(t,e,n,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Yv,skewX:Math.atan(u)*Yv,scaleX:a,scaleY:s}}function Hv(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],u=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var u=a.push("translate(",null,e,null,n);s.push({i:u-4,x:zv(t,i)},{i:u-2,x:zv(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,u),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:zv(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,s,u),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:zv(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,s,u),function(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:zv(t,n)},{i:s-2,x:zv(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,u),o=a=null,function(t){for(var e,n=-1,r=u.length;++n<r;)s[(e=u[n]).i]=e.x(t);return s.join("")}}}var Qv=Hv((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Xv:$v(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),Jv=Hv((function(t){return null==t?Xv:(Wv||(Wv=document.createElementNS("http://www.w3.org/2000/svg","g")),Wv.setAttribute("transform",t),(t=Wv.transform.baseVal.consolidate())?$v((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Xv)}),", ",")",")");function Kv(t){return((t=Math.exp(t))+1/t)/2}var Zv=function t(e,n,r){function i(t,i){var o,a,s=t[0],u=t[1],l=t[2],c=i[0],h=i[1],f=i[2],p=c-s,d=h-u,g=p*p+d*d;if(g<1e-12)a=Math.log(f/l)/e,o=function(t){return[s+t*p,u+t*d,l*Math.exp(e*t*a)]};else{var y=Math.sqrt(g),_=(f*f-l*l+r*g)/(2*l*n*y),v=(f*f-l*l-r*g)/(2*f*n*y),m=Math.log(Math.sqrt(_*_+1)-_),x=Math.log(Math.sqrt(v*v+1)-v);a=(x-m)/e,o=function(t){var r=t*a,i=Kv(m),o=l/(n*y)*(i*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(e*r+m)-function(t){return((t=Math.exp(t))-1/t)/2}(m));return[s+o*p,u+o*d,l*i/Kv(e*r+m)]}}return o.duration=1e3*a*e/Math.SQRT2,o}return i.rho=function(e){var n=Math.max(.001,+e),r=n*n;return t(n,r,r*r)},i}(Math.SQRT2,2,4);function tm(t){return function(e,n){var r=t((e=B_(e)).h,(n=B_(n)).h),i=Ov(e.s,n.s),o=Ov(e.l,n.l),a=Ov(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=o(t),e.opacity=a(t),e+""}}}var em=tm(Iv),nm=tm(Ov);function rm(t){return function(e,n){var r=t((e=uv(e)).h,(n=uv(n)).h),i=Ov(e.c,n.c),o=Ov(e.l,n.l),a=Ov(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=o(t),e.opacity=a(t),e+""}}}var im=rm(Iv),om=rm(Ov);function am(t){return function e(n){function r(e,r){var i=t((e=xv(e)).h,(r=xv(r)).h),o=Ov(e.s,r.s),a=Ov(e.l,r.l),s=Ov(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}var sm=am(Iv),um=am(Ov);function lm(t,e){void 0===e&&(e=t,t=Uv);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[e](t-e)}}var cm=Object.freeze({__proto__:null,interpolate:Uv,interpolateArray:function(t,e){return(Rv(e)?kv:Dv)(t,e)},interpolateBasis:wv,interpolateBasisClosed:Ev,interpolateDate:Fv,interpolateDiscrete:function(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}},interpolateHue:function(t,e){var n=Iv(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}},interpolateNumber:zv,interpolateNumberArray:kv,interpolateObject:Gv,interpolateRound:Vv,interpolateString:Bv,interpolateTransformCss:Qv,interpolateTransformSvg:Jv,interpolateZoom:Zv,interpolateRgb:Pv,interpolateRgbBasis:Av,interpolateRgbBasisClosed:Tv,interpolateHsl:em,interpolateHslLong:nm,interpolateLab:function(t,e){var n=Ov((t=ev(t)).l,(e=ev(e)).l),r=Ov(t.a,e.a),i=Ov(t.b,e.b),o=Ov(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=o(e),t+""}},interpolateHcl:im,interpolateHclLong:om,interpolateCubehelix:sm,interpolateCubehelixLong:um,piecewise:lm,quantize:function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}}),hm=t=>Av(t[t.length-1]),fm=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(t_),pm=hm(fm),dm=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(t_),gm=hm(dm),ym=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(t_),_m=hm(ym),vm=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(t_),mm=hm(vm),xm=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(t_),bm=hm(xm),Mm=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(t_),wm=hm(Mm),Em=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(t_),Nm=hm(Em),Sm=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(t_),Im=hm(Sm),Cm=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(t_),Om=hm(Cm),Pm=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(t_),Lm=hm(Pm),Am=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(t_),Tm=hm(Am),km=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(t_),Rm=hm(km),Dm=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(t_),Fm=hm(Dm),zm=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(t_),Gm=hm(zm),qm=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(t_),jm=hm(qm),Bm=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(t_),Um=hm(Bm),Vm=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(t_),Wm=hm(Vm),Ym=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(t_),Xm=hm(Ym),$m=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(t_),Hm=hm($m),Qm=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(t_),Jm=hm(Qm),Km=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(t_),Zm=hm(Km),tx=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(t_),ex=hm(tx),nx=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(t_),rx=hm(nx),ix=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(t_),ox=hm(ix),ax=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(t_),sx=hm(ax),ux=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(t_),lx=hm(ux),cx=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(t_),hx=hm(cx);var fx=um(xv(300,.5,0),xv(-240,.5,1)),px=um(xv(-100,.75,.35),xv(80,1.5,.8)),dx=um(xv(260,.75,.35),xv(80,1.5,.8)),gx=xv();var yx=T_(),_x=Math.PI/3,vx=2*Math.PI/3;function mx(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var xx=mx(t_("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),bx=mx(t_("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Mx=mx(t_("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),wx=mx(t_("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),Ex=Object.freeze({__proto__:null,schemeCategory10:e_,schemeAccent:n_,schemeDark2:r_,schemePaired:i_,schemePastel1:o_,schemePastel2:a_,schemeSet1:s_,schemeSet2:u_,schemeSet3:l_,schemeTableau10:c_,interpolateBrBG:pm,schemeBrBG:fm,interpolatePRGn:gm,schemePRGn:dm,interpolatePiYG:_m,schemePiYG:ym,interpolatePuOr:mm,schemePuOr:vm,interpolateRdBu:bm,schemeRdBu:xm,interpolateRdGy:wm,schemeRdGy:Mm,interpolateRdYlBu:Nm,schemeRdYlBu:Em,interpolateRdYlGn:Im,schemeRdYlGn:Sm,interpolateSpectral:Om,schemeSpectral:Cm,interpolateBuGn:Lm,schemeBuGn:Pm,interpolateBuPu:Tm,schemeBuPu:Am,interpolateGnBu:Rm,schemeGnBu:km,interpolateOrRd:Fm,schemeOrRd:Dm,interpolatePuBuGn:Gm,schemePuBuGn:zm,interpolatePuBu:jm,schemePuBu:qm,interpolatePuRd:Um,schemePuRd:Bm,interpolateRdPu:Wm,schemeRdPu:Vm,interpolateYlGnBu:Xm,schemeYlGnBu:Ym,interpolateYlGn:Hm,schemeYlGn:$m,interpolateYlOrBr:Jm,schemeYlOrBr:Qm,interpolateYlOrRd:Zm,schemeYlOrRd:Km,interpolateBlues:ex,schemeBlues:tx,interpolateGreens:rx,schemeGreens:nx,interpolateGreys:ox,schemeGreys:ix,interpolatePurples:sx,schemePurples:ax,interpolateReds:lx,schemeReds:ux,interpolateOranges:hx,schemeOranges:cx,interpolateCividis:function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},interpolateCubehelixDefault:fx,interpolateRainbow:function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return gx.h=360*t-100,gx.s=1.5-1.5*e,gx.l=.8-.9*e,gx+""},interpolateWarm:px,interpolateCool:dx,interpolateSinebow:function(t){var e;return t=(.5-t)*Math.PI,yx.r=255*(e=Math.sin(t))*e,yx.g=255*(e=Math.sin(t+_x))*e,yx.b=255*(e=Math.sin(t+vx))*e,yx+""},interpolateTurbo:function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"},interpolateViridis:xx,interpolateMagma:bx,interpolateInferno:Mx,interpolatePlasma:wx});function Nx(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Sx(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}const Ix=Symbol("implicit");function Cx(){var t=new Xt,e=[],n=[],r=Ix;function i(i){let o=t.get(i);if(void 0===o){if(r!==Ix)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Xt;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Cx(e,n).unknown(r)},Nx.apply(i,arguments),i}function Ox(){var t,e,n=Cx().unknown(void 0),r=n.domain,i=n.range,o=0,a=1,s=!1,u=0,l=0,c=.5;function h(){var n=r().length,h=a<o,f=h?a:o,p=h?o:a;t=(p-f)/Math.max(1,n-u+2*l),s&&(t=Math.floor(t)),f+=(p-f-t*(n-u))*c,e=t*(1-u),s&&(f=Math.round(f),e=Math.round(e));var d=ke(n).map((function(e){return f+t*e}));return i(h?d.reverse():d)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),h()):r()},n.range=function(t){return arguments.length?([o,a]=t,o=+o,a=+a,h()):[o,a]},n.rangeRound=function(t){return[o,a]=t,o=+o,a=+a,s=!0,h()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(s=!!t,h()):s},n.padding=function(t){return arguments.length?(u=Math.min(1,l=+t),h()):u},n.paddingInner=function(t){return arguments.length?(u=Math.min(1,t),h()):u},n.paddingOuter=function(t){return arguments.length?(l=+t,h()):l},n.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),h()):c},n.copy=function(){return Ox(r(),[o,a]).round(s).paddingInner(u).paddingOuter(l).align(c)},Nx.apply(h(),arguments)}function Px(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Px(e())},t}function Lx(t){return+t}var Ax=[0,1];function Tx(t){return t}function kx(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function Rx(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=kx(i,r),o=n(a,o)):(r=kx(r,i),o=n(o,a)),function(t){return o(r(t))}}function Dx(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=kx(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=At(t,e,1,r)-1;return o[n](i[n](e))}}function Fx(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function zx(){var t,e,n,r,i,o,a=Ax,s=Ax,u=Uv,l=Tx;function c(){var t=Math.min(a.length,s.length);return l!==Tx&&(l=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(a[0],a[t-1])),r=t>2?Dx:Rx,i=o=null,h}function h(e){return null==e||isNaN(e=+e)?n:(i||(i=r(a.map(t),s,u)))(t(l(e)))}return h.invert=function(n){return l(e((o||(o=r(s,a.map(t),zv)))(n)))},h.domain=function(t){return arguments.length?(a=Array.from(t,Lx),c()):a.slice()},h.range=function(t){return arguments.length?(s=Array.from(t),c()):s.slice()},h.rangeRound=function(t){return s=Array.from(t),u=Vv,c()},h.clamp=function(t){return arguments.length?(l=!!t||Tx,c()):l!==Tx},h.interpolate=function(t){return arguments.length?(u=t,c()):u},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,c()}}function Gx(){return zx()(Tx,Tx)}function qx(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function jx(t){return(t=qx(Math.abs(t)))?t[1]:NaN}var Bx,Ux=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Vx(t){if(!(e=Ux.exec(t)))throw new Error("invalid format: "+t);var e;return new Wx({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Wx(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Yx(t,e){var n=qx(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Vx.prototype=Wx.prototype,Wx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Xx={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Yx(100*t,e),r:Yx,s:function(t,e){var n=qx(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Bx=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+qx(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function $x(t){return t}var Hx,Qx,Jx,Kx=Array.prototype.map,Zx=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function tb(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?$x:(e=Kx.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(t.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?$x:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Kx.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"−":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=Vx(t)).fill,n=t.align,h=t.sign,f=t.symbol,p=t.zero,d=t.width,g=t.comma,y=t.precision,_=t.trim,v=t.type;"n"===v?(g=!0,v="g"):Xx[v]||(void 0===y&&(y=12),_=!0,v="g"),(p||"0"===e&&"="===n)&&(p=!0,e="0",n="=");var m="$"===f?i:"#"===f&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",x="$"===f?o:/[%p]/.test(v)?u:"",b=Xx[v],M=/[defgprs%]/.test(v);function w(t){var i,o,u,f=m,w=x;if("c"===v)w=b(t)+w,t="";else{var E=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:b(Math.abs(t),y),_&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),E&&0==+t&&"+"!==h&&(E=!1),f=(E?"("===h?h:l:"-"===h||"("===h?"":h)+f,w=("s"===v?Zx[8+Bx/3]:"")+w+(E&&"("===h?")":""),M)for(i=-1,o=t.length;++i<o;)if(48>(u=t.charCodeAt(i))||u>57){w=(46===u?a+t.slice(i+1):t.slice(i))+w,t=t.slice(0,i);break}}g&&!p&&(t=r(t,1/0));var N=f.length+t.length+w.length,S=N<d?new Array(d-N+1).join(e):"";switch(g&&p&&(t=r(S+t,S.length?d-w.length:1/0),S=""),n){case"<":t=f+t+w+S;break;case"=":t=f+S+t+w;break;case"^":t=S.slice(0,N=S.length>>1)+f+t+w+S.slice(N);break;default:t=S+f+t+w}return s(t)}return y=void 0===y?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),w.toString=function(){return t+""},w}return{format:h,formatPrefix:function(t,e){var n=h(((t=Vx(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(jx(e)/3))),i=Math.pow(10,-r),o=Zx[8+r/3];return function(t){return n(i*t)+o}}}}function eb(t,e,n,r){var i,o=ve(t,e,n);switch((r=Vx(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(jx(e)/3)))-jx(Math.abs(t)))}(o,a))||(r.precision=i),Jx(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,jx(e)-jx(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-jx(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return Qx(r)}function nb(t){var e=t.domain;return t.ticks=function(t){var n=e();return ye(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return eb(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,o=e(),a=0,s=o.length-1,u=o[a],l=o[s],c=10;for(l<u&&(i=u,u=l,l=i,i=a,a=s,s=i);c-- >0;){if((i=_e(u,l,n))===r)return o[a]=u,o[s]=l,e(o);if(i>0)u=Math.floor(u/i)*i,l=Math.ceil(l/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,l=Math.floor(l*i)/i}r=i}return t},t}function rb(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}function ib(t){return Math.log(t)}function ob(t){return Math.exp(t)}function ab(t){return-Math.log(-t)}function sb(t){return-Math.exp(-t)}function ub(t){return isFinite(t)?+("1e"+t):t<0?0:t}function lb(t){return(e,n)=>-t(-e,n)}function cb(t){const e=t(ib,ob),n=e.domain;let r,i,o=10;function a(){return r=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}(o),i=function(t){return 10===t?ub:t===Math.E?Math.exp:e=>Math.pow(t,e)}(o),n()[0]<0?(r=lb(r),i=lb(i),t(ab,sb)):t(ib,ob),e}return e.base=function(t){return arguments.length?(o=+t,a()):o},e.domain=function(t){return arguments.length?(n(t),a()):n()},e.ticks=t=>{const e=n();let a=e[0],s=e[e.length-1];const u=s<a;u&&([a,s]=[s,a]);let l,c,h=r(a),f=r(s);const p=null==t?10:+t;let d=[];if(!(o%1)&&f-h<p){if(h=Math.floor(h),f=Math.ceil(f),a>0){for(;h<=f;++h)for(l=1;l<o;++l)if(c=h<0?l/i(-h):l*i(h),!(c<a)){if(c>s)break;d.push(c)}}else for(;h<=f;++h)for(l=o-1;l>=1;--l)if(c=h>0?l/i(-h):l*i(h),!(c<a)){if(c>s)break;d.push(c)}2*d.length<p&&(d=ye(a,s,p))}else d=ye(h,f,Math.min(f-h,p)).map(i);return u?d.reverse():d},e.tickFormat=(t,n)=>{if(null==t&&(t=10),null==n&&(n=10===o?"s":","),"function"!=typeof n&&(o%1||null!=(n=Vx(n)).precision||(n.trim=!0),n=Qx(n)),t===1/0)return n;const a=Math.max(1,o*t/e.ticks().length);return t=>{let e=t/i(Math.round(r(t)));return e*o<o-.5&&(e*=o),e<=a?n(t):""}},e.nice=()=>n(rb(n(),{floor:t=>i(Math.floor(r(t))),ceil:t=>i(Math.ceil(r(t)))})),e}function hb(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function fb(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function pb(t){var e=1,n=t(hb(e),fb(e));return n.constant=function(n){return arguments.length?t(hb(e=+n),fb(e)):e},nb(n)}function db(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function gb(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function yb(t){return t<0?-t*t:t*t}function _b(t){var e=t(Tx,Tx),n=1;function r(){return 1===n?t(Tx,Tx):.5===n?t(gb,yb):t(db(n),db(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,r()):n},nb(e)}function vb(){var t=_b(zx());return t.copy=function(){return Fx(t,vb()).exponent(t.exponent())},Nx.apply(t,arguments),t}function mb(t){return Math.sign(t)*t*t}function xb(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}Hx=tb({thousands:",",grouping:[3],currency:["$",""]}),Qx=Hx.format,Jx=Hx.formatPrefix;var bb=new Date,Mb=new Date;function wb(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return s;do{s.push(a=new Date(+n)),e(n,o),t(n)}while(a<n&&n<r);return s},i.filter=function(n){return wb((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return bb.setTime(+e),Mb.setTime(+r),t(bb),t(Mb),Math.floor(n(bb,Mb))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var Eb=wb((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));Eb.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?wb((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):Eb:null};var Nb=Eb;Eb.range;const Sb=1e3,Ib=6e4,Cb=36e5,Ob=864e5,Pb=6048e5,Lb=2592e6,Ab=31536e6;var Tb=wb((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*Sb)}),(function(t,e){return(e-t)/Sb}),(function(t){return t.getUTCSeconds()})),kb=Tb;Tb.range;var Rb=wb((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Sb)}),(function(t,e){t.setTime(+t+e*Ib)}),(function(t,e){return(e-t)/Ib}),(function(t){return t.getMinutes()})),Db=Rb;Rb.range;var Fb=wb((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Sb-t.getMinutes()*Ib)}),(function(t,e){t.setTime(+t+e*Cb)}),(function(t,e){return(e-t)/Cb}),(function(t){return t.getHours()})),zb=Fb;Fb.range;var Gb=wb((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ib)/Ob),(t=>t.getDate()-1)),qb=Gb;function jb(t){return wb((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ib)/Pb}))}Gb.range;var Bb=jb(0),Ub=jb(1),Vb=jb(2),Wb=jb(3),Yb=jb(4),Xb=jb(5),$b=jb(6);Bb.range,Ub.range,Vb.range,Wb.range,Yb.range,Xb.range,$b.range;var Hb=wb((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),Qb=Hb;Hb.range;var Jb=wb((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Jb.every=function(t){return isFinite(t=Math.floor(t))&&t>0?wb((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var Kb=Jb;Jb.range;var Zb=wb((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*Ib)}),(function(t,e){return(e-t)/Ib}),(function(t){return t.getUTCMinutes()})),tM=Zb;Zb.range;var eM=wb((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*Cb)}),(function(t,e){return(e-t)/Cb}),(function(t){return t.getUTCHours()})),nM=eM;eM.range;var rM=wb((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/Ob}),(function(t){return t.getUTCDate()-1})),iM=rM;function oM(t){return wb((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/Pb}))}rM.range;var aM=oM(0),sM=oM(1),uM=oM(2),lM=oM(3),cM=oM(4),hM=oM(5),fM=oM(6);aM.range,sM.range,uM.range,lM.range,cM.range,hM.range,fM.range;var pM=wb((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),dM=pM;pM.range;var gM=wb((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));gM.every=function(t){return isFinite(t=Math.floor(t))&&t>0?wb((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var yM=gM;function _M(t,e,n,r,i,o){const a=[[kb,1,Sb],[kb,5,5e3],[kb,15,15e3],[kb,30,3e4],[o,1,Ib],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,Cb],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,Ob],[r,2,1728e5],[n,1,Pb],[e,1,Lb],[e,3,7776e6],[t,1,Ab]];function s(e,n,r){const i=Math.abs(n-e)/r,o=Et((([,,t])=>t)).right(a,i);if(o===a.length)return t.every(ve(e/Ab,n/Ab,r));if(0===o)return Nb.every(Math.max(ve(e,n,r),1));const[s,u]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return s.every(u)}return[function(t,e,n){const r=e<t;r&&([t,e]=[e,t]);const i=n&&"function"==typeof n.range?n:s(t,e,n),o=i?i.range(t,+e+1):[];return r?o.reverse():o},s]}gM.range;const[vM,mM]=_M(yM,dM,aM,iM,nM,tM),[xM,bM]=_M(Kb,Qb,Bb,qb,zb,Db);function MM(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function wM(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function EM(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var NM,SM,IM,CM={"-":"",_:" ",0:"0"},OM=/^\s*\d+/,PM=/^%/,LM=/[\\^$*+?|[\]().{}]/g;function AM(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function TM(t){return t.replace(LM,"\\$&")}function kM(t){return new RegExp("^(?:"+t.map(TM).join("|")+")","i")}function RM(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function DM(t,e,n){var r=OM.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function FM(t,e,n){var r=OM.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function zM(t,e,n){var r=OM.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function GM(t,e,n){var r=OM.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function qM(t,e,n){var r=OM.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function jM(t,e,n){var r=OM.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function BM(t,e,n){var r=OM.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function UM(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function VM(t,e,n){var r=OM.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function WM(t,e,n){var r=OM.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function YM(t,e,n){var r=OM.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function XM(t,e,n){var r=OM.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function $M(t,e,n){var r=OM.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function HM(t,e,n){var r=OM.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function QM(t,e,n){var r=OM.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function JM(t,e,n){var r=OM.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function KM(t,e,n){var r=OM.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function ZM(t,e,n){var r=PM.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function tw(t,e,n){var r=OM.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function ew(t,e,n){var r=OM.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function nw(t,e){return AM(t.getDate(),e,2)}function rw(t,e){return AM(t.getHours(),e,2)}function iw(t,e){return AM(t.getHours()%12||12,e,2)}function ow(t,e){return AM(1+qb.count(Kb(t),t),e,3)}function aw(t,e){return AM(t.getMilliseconds(),e,3)}function sw(t,e){return aw(t,e)+"000"}function uw(t,e){return AM(t.getMonth()+1,e,2)}function lw(t,e){return AM(t.getMinutes(),e,2)}function cw(t,e){return AM(t.getSeconds(),e,2)}function hw(t){var e=t.getDay();return 0===e?7:e}function fw(t,e){return AM(Bb.count(Kb(t)-1,t),e,2)}function pw(t){var e=t.getDay();return e>=4||0===e?Yb(t):Yb.ceil(t)}function dw(t,e){return t=pw(t),AM(Yb.count(Kb(t),t)+(4===Kb(t).getDay()),e,2)}function gw(t){return t.getDay()}function yw(t,e){return AM(Ub.count(Kb(t)-1,t),e,2)}function _w(t,e){return AM(t.getFullYear()%100,e,2)}function vw(t,e){return AM((t=pw(t)).getFullYear()%100,e,2)}function mw(t,e){return AM(t.getFullYear()%1e4,e,4)}function xw(t,e){var n=t.getDay();return AM((t=n>=4||0===n?Yb(t):Yb.ceil(t)).getFullYear()%1e4,e,4)}function bw(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+AM(e/60|0,"0",2)+AM(e%60,"0",2)}function Mw(t,e){return AM(t.getUTCDate(),e,2)}function ww(t,e){return AM(t.getUTCHours(),e,2)}function Ew(t,e){return AM(t.getUTCHours()%12||12,e,2)}function Nw(t,e){return AM(1+iM.count(yM(t),t),e,3)}function Sw(t,e){return AM(t.getUTCMilliseconds(),e,3)}function Iw(t,e){return Sw(t,e)+"000"}function Cw(t,e){return AM(t.getUTCMonth()+1,e,2)}function Ow(t,e){return AM(t.getUTCMinutes(),e,2)}function Pw(t,e){return AM(t.getUTCSeconds(),e,2)}function Lw(t){var e=t.getUTCDay();return 0===e?7:e}function Aw(t,e){return AM(aM.count(yM(t)-1,t),e,2)}function Tw(t){var e=t.getUTCDay();return e>=4||0===e?cM(t):cM.ceil(t)}function kw(t,e){return t=Tw(t),AM(cM.count(yM(t),t)+(4===yM(t).getUTCDay()),e,2)}function Rw(t){return t.getUTCDay()}function Dw(t,e){return AM(sM.count(yM(t)-1,t),e,2)}function Fw(t,e){return AM(t.getUTCFullYear()%100,e,2)}function zw(t,e){return AM((t=Tw(t)).getUTCFullYear()%100,e,2)}function Gw(t,e){return AM(t.getUTCFullYear()%1e4,e,4)}function qw(t,e){var n=t.getUTCDay();return AM((t=n>=4||0===n?cM(t):cM.ceil(t)).getUTCFullYear()%1e4,e,4)}function jw(){return"+0000"}function Bw(){return"%"}function Uw(t){return+t}function Vw(t){return Math.floor(+t/1e3)}function Ww(t){return new Date(t)}function Yw(t){return t instanceof Date?+t:+new Date(+t)}function Xw(t,e,n,r,i,o,a,s,u,l){var c=Gx(),h=c.invert,f=c.domain,p=l(".%L"),d=l(":%S"),g=l("%I:%M"),y=l("%I %p"),_=l("%a %d"),v=l("%b %d"),m=l("%B"),x=l("%Y");function b(t){return(u(t)<t?p:s(t)<t?d:a(t)<t?g:o(t)<t?y:r(t)<t?i(t)<t?_:v:n(t)<t?m:x)(t)}return c.invert=function(t){return new Date(h(t))},c.domain=function(t){return arguments.length?f(Array.from(t,Yw)):f().map(Ww)},c.ticks=function(e){var n=f();return t(n[0],n[n.length-1],null==e?10:e)},c.tickFormat=function(t,e){return null==e?b:l(e)},c.nice=function(t){var n=f();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?f(rb(n,t)):c},c.copy=function(){return Fx(c,Xw(t,e,n,r,i,o,a,s,u,l))},c}function $w(){var t,e,n,r,i,o=0,a=1,s=Tx,u=!1;function l(e){return null==e||isNaN(e=+e)?i:s(0===n?.5:(e=(r(e)-t)*n,u?Math.max(0,Math.min(1,e)):e))}function c(t){return function(e){var n,r;return arguments.length?([n,r]=e,s=t(n,r),l):[s(0),s(1)]}}return l.domain=function(i){return arguments.length?([o,a]=i,t=r(o=+o),e=r(a=+a),n=t===e?0:1/(e-t),l):[o,a]},l.clamp=function(t){return arguments.length?(u=!!t,l):u},l.interpolator=function(t){return arguments.length?(s=t,l):s},l.range=c(Uv),l.rangeRound=c(Vv),l.unknown=function(t){return arguments.length?(i=t,l):i},function(i){return r=i,t=i(o),e=i(a),n=t===e?0:1/(e-t),l}}function Hw(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Qw(){var t=_b($w());return t.copy=function(){return Hw(t,Qw()).exponent(t.exponent())},Sx.apply(t,arguments)}function Jw(){var t,e,n,r,i,o,a,s=0,u=.5,l=1,c=1,h=Tx,f=!1;function p(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-e)*(c*t<c*e?r:i),h(f?Math.max(0,Math.min(1,t)):t))}function d(t){return function(e){var n,r,i;return arguments.length?([n,r,i]=e,h=lm(t,[n,r,i]),p):[h(0),h(.5),h(1)]}}return p.domain=function(a){return arguments.length?([s,u,l]=a,t=o(s=+s),e=o(u=+u),n=o(l=+l),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),c=e<t?-1:1,p):[s,u,l]},p.clamp=function(t){return arguments.length?(f=!!t,p):f},p.interpolator=function(t){return arguments.length?(h=t,p):h},p.range=d(Uv),p.rangeRound=d(Vv),p.unknown=function(t){return arguments.length?(a=t,p):a},function(a){return o=a,t=a(s),e=a(u),n=a(l),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),c=e<t?-1:1,p}}function Kw(){var t=_b(Jw());return t.copy=function(){return Hw(t,Kw()).exponent(t.exponent())},Sx.apply(t,arguments)}!function(t){NM=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,l=kM(i),c=RM(i),h=kM(o),f=RM(o),p=kM(a),d=RM(a),g=kM(s),y=RM(s),_=kM(u),v=RM(u),m={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:nw,e:nw,f:sw,g:vw,G:xw,H:rw,I:iw,j:ow,L:aw,m:uw,M:lw,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Uw,s:Vw,S:cw,u:hw,U:fw,V:dw,w:gw,W:yw,x:null,X:null,y:_w,Y:mw,Z:bw,"%":Bw},x={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Mw,e:Mw,f:Iw,g:zw,G:qw,H:ww,I:Ew,j:Nw,L:Sw,m:Cw,M:Ow,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Uw,s:Vw,S:Pw,u:Lw,U:Aw,V:kw,w:Rw,W:Dw,x:null,X:null,y:Fw,Y:Gw,Z:jw,"%":Bw},b={a:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=f.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=_.exec(e.slice(n));return r?(t.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return E(t,e,n,r)},d:YM,e:YM,f:KM,g:BM,G:jM,H:$M,I:$M,j:XM,L:JM,m:WM,M:HM,p:function(t,e,n){var r=l.exec(e.slice(n));return r?(t.p=c.get(r[0].toLowerCase()),n+r[0].length):-1},q:VM,Q:tw,s:ew,S:QM,u:FM,U:zM,V:GM,w:DM,W:qM,x:function(t,e,r){return E(t,n,e,r)},X:function(t,e,n){return E(t,r,e,n)},y:BM,Y:jM,Z:UM,"%":ZM};function M(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=CM[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function w(t,e){return function(n){var r,i,o=EM(1900,void 0,1);if(E(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=wM(EM(o.y,0,1))).getUTCDay(),r=i>4||0===i?sM.ceil(r):sM(r),r=iM.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=MM(EM(o.y,0,1))).getDay(),r=i>4||0===i?Ub.ceil(r):Ub(r),r=qb.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?wM(EM(o.y,0,1)).getUTCDay():MM(EM(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,wM(o)):MM(o)}}function E(t,e,n,r){for(var i,o,a=0,s=e.length,u=n.length;a<s;){if(r>=u)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=b[i in CM?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return m.x=M(n,m),m.X=M(r,m),m.c=M(e,m),x.x=M(n,x),x.X=M(r,x),x.c=M(e,x),{format:function(t){var e=M(t+="",m);return e.toString=function(){return t},e},parse:function(t){var e=w(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=M(t+="",x);return e.toString=function(){return t},e},utcParse:function(t){var e=w(t+="",!0);return e.toString=function(){return t},e}}}(t),SM=NM.format,NM.parse,IM=NM.utcFormat,NM.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Zw=Object.freeze({__proto__:null,scaleBand:Ox,scalePoint:function(){return Px(Ox.apply(null,arguments).paddingInner(1))},scaleIdentity:function t(e){var n;function r(t){return null==t||isNaN(t=+t)?n:t}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(e=Array.from(t,Lx),r):e.slice()},r.unknown=function(t){return arguments.length?(n=t,r):n},r.copy=function(){return t(e).unknown(n)},e=arguments.length?Array.from(e,Lx):[0,1],nb(r)},scaleLinear:function t(){var e=Gx();return e.copy=function(){return Fx(e,t())},Nx.apply(e,arguments),nb(e)},scaleLog:function t(){const e=cb(zx()).domain([1,10]);return e.copy=()=>Fx(e,t()).base(e.base()),Nx.apply(e,arguments),e},scaleSymlog:function t(){var e=pb(zx());return e.copy=function(){return Fx(e,t()).constant(e.constant())},Nx.apply(e,arguments)},scaleOrdinal:Cx,scaleImplicit:Ix,scalePow:vb,scaleSqrt:function(){return vb.apply(null,arguments).exponent(.5)},scaleRadial:function t(){var e,n=Gx(),r=[0,1],i=!1;function o(t){var r=xb(n(t));return isNaN(r)?e:i?Math.round(r):r}return o.invert=function(t){return n.invert(mb(t))},o.domain=function(t){return arguments.length?(n.domain(t),o):n.domain()},o.range=function(t){return arguments.length?(n.range((r=Array.from(t,Lx)).map(mb)),o):r.slice()},o.rangeRound=function(t){return o.range(t).round(!0)},o.round=function(t){return arguments.length?(i=!!t,o):i},o.clamp=function(t){return arguments.length?(n.clamp(t),o):n.clamp()},o.unknown=function(t){return arguments.length?(e=t,o):e},o.copy=function(){return t(n.domain(),r).round(i).clamp(n.clamp()).unknown(e)},Nx.apply(o,arguments),nb(o)},scaleQuantile:function t(){var e,n=[],r=[],i=[];function o(){var t=0,e=Math.max(1,r.length);for(i=new Array(e-1);++t<e;)i[t-1]=Pe(n,t/e);return a}function a(t){return null==t||isNaN(t=+t)?e:r[At(i,t)]}return a.invertExtent=function(t){var e=r.indexOf(t);return e<0?[NaN,NaN]:[e>0?i[e-1]:n[0],e<i.length?i[e]:n[n.length-1]]},a.domain=function(t){if(!arguments.length)return n.slice();n=[];for(let e of t)null==e||isNaN(e=+e)||n.push(e);return n.sort(Mt),o()},a.range=function(t){return arguments.length?(r=Array.from(t),o()):r.slice()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.quantiles=function(){return i.slice()},a.copy=function(){return t().domain(n).range(r).unknown(e)},Nx.apply(a,arguments)},scaleQuantize:function t(){var e,n=0,r=1,i=1,o=[.5],a=[0,1];function s(t){return null!=t&&t<=t?a[At(o,t,0,i)]:e}function u(){var t=-1;for(o=new Array(i);++t<i;)o[t]=((t+1)*r-(t-i)*n)/(i+1);return s}return s.domain=function(t){return arguments.length?([n,r]=t,n=+n,r=+r,u()):[n,r]},s.range=function(t){return arguments.length?(i=(a=Array.from(t)).length-1,u()):a.slice()},s.invertExtent=function(t){var e=a.indexOf(t);return e<0?[NaN,NaN]:e<1?[n,o[0]]:e>=i?[o[i-1],r]:[o[e-1],o[e]]},s.unknown=function(t){return arguments.length?(e=t,s):s},s.thresholds=function(){return o.slice()},s.copy=function(){return t().domain([n,r]).range(a).unknown(e)},Nx.apply(nb(s),arguments)},scaleThreshold:function t(){var e,n=[.5],r=[0,1],i=1;function o(t){return null!=t&&t<=t?r[At(n,t,0,i)]:e}return o.domain=function(t){return arguments.length?(n=Array.from(t),i=Math.min(n.length,r.length-1),o):n.slice()},o.range=function(t){return arguments.length?(r=Array.from(t),i=Math.min(n.length,r.length-1),o):r.slice()},o.invertExtent=function(t){var e=r.indexOf(t);return[n[e-1],n[e]]},o.unknown=function(t){return arguments.length?(e=t,o):e},o.copy=function(){return t().domain(n).range(r).unknown(e)},Nx.apply(o,arguments)},scaleTime:function(){return Nx.apply(Xw(xM,bM,Kb,Qb,Bb,qb,zb,Db,kb,SM).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},scaleUtc:function(){return Nx.apply(Xw(vM,mM,yM,dM,aM,iM,nM,tM,kb,IM).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},scaleSequential:function t(){var e=nb($w()(Tx));return e.copy=function(){return Hw(e,t())},Sx.apply(e,arguments)},scaleSequentialLog:function t(){var e=cb($w()).domain([1,10]);return e.copy=function(){return Hw(e,t()).base(e.base())},Sx.apply(e,arguments)},scaleSequentialPow:Qw,scaleSequentialSqrt:function(){return Qw.apply(null,arguments).exponent(.5)},scaleSequentialSymlog:function t(){var e=pb($w());return e.copy=function(){return Hw(e,t()).constant(e.constant())},Sx.apply(e,arguments)},scaleSequentialQuantile:function t(){var e=[],n=Tx;function r(t){if(null!=t&&!isNaN(t=+t))return n((At(e,t,1)-1)/(e.length-1))}return r.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(Mt),r},r.interpolator=function(t){return arguments.length?(n=t,r):n},r.range=function(){return e.map(((t,r)=>n(r/(e.length-1))))},r.quantiles=function(t){return Array.from({length:t+1},((n,r)=>Oe(e,r/t)))},r.copy=function(){return t(n).domain(e)},Sx.apply(r,arguments)},scaleDiverging:function t(){var e=nb(Jw()(Tx));return e.copy=function(){return Hw(e,t())},Sx.apply(e,arguments)},scaleDivergingLog:function t(){var e=cb(Jw()).domain([.1,1,10]);return e.copy=function(){return Hw(e,t()).base(e.base())},Sx.apply(e,arguments)},scaleDivergingPow:Kw,scaleDivergingSqrt:function(){return Kw.apply(null,arguments).exponent(.5)},scaleDivergingSymlog:function t(){var e=pb(Jw());return e.copy=function(){return Hw(e,t()).constant(e.constant())},Sx.apply(e,arguments)},tickFormat:eb});function tE(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,u,l,c,h,f,p=t._root,d={data:r},g=t._x0,y=t._y0,_=t._x1,v=t._y1;if(!p)return t._root=d,t;for(;p.length;)if((l=e>=(o=(g+_)/2))?g=o:_=o,(c=n>=(a=(y+v)/2))?y=a:v=a,i=p,!(p=p[h=c<<1|l]))return i[h]=d,t;if(s=+t._x.call(null,p.data),u=+t._y.call(null,p.data),e===s&&n===u)return d.next=p,i?i[h]=d:t._root=d,t;do{i=i?i[h]=new Array(4):t._root=new Array(4),(l=e>=(o=(g+_)/2))?g=o:_=o,(c=n>=(a=(y+v)/2))?y=a:v=a}while((h=c<<1|l)==(f=(u>=a)<<1|s>=o));return i[f]=p,i[h]=d,t}function eE(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function nE(t){return t[0]}function rE(t){return t[1]}function iE(t,e,n){var r=new oE(null==e?nE:e,null==n?rE:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function oE(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function aE(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var sE=iE.prototype=oE.prototype;function uE(t){return function(){return t}}function lE(t){return 1e-6*(t()-.5)}function cE(t){return t.x+t.vx}function hE(t){return t.y+t.vy}function fE(t){return t.index}function pE(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}sE.copy=function(){var t,e,n=new oE(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=aE(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=aE(e));return n},sE.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return tE(this.cover(e,n),e,n,t)},sE.addAll=function(t){var e,n,r,i,o=t.length,a=new Array(o),s=new Array(o),u=1/0,l=1/0,c=-1/0,h=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(a[n]=r,s[n]=i,r<u&&(u=r),r>c&&(c=r),i<l&&(l=i),i>h&&(h=i));if(u>c||l>h)return this;for(this.cover(u,l).cover(c,h),n=0;n<o;++n)tE(this,a[n],s[n],t[n]);return this},sE.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a,s,u=i-n||1,l=this._root;n>t||t>=i||r>e||e>=o;)switch(s=(e<r)<<1|t<n,(a=new Array(4))[s]=l,l=a,u*=2,s){case 0:i=n+u,o=r+u;break;case 1:n=i-u,o=r+u;break;case 2:i=n+u,r=o-u;break;case 3:n=i-u,r=o-u}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},sE.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},sE.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},sE.find=function(t,e,n){var r,i,o,a,s,u,l,c=this._x0,h=this._y0,f=this._x1,p=this._y1,d=[],g=this._root;for(g&&d.push(new eE(g,c,h,f,p)),null==n?n=1/0:(c=t-n,h=e-n,f=t+n,p=e+n,n*=n);u=d.pop();)if(!(!(g=u.node)||(i=u.x0)>f||(o=u.y0)>p||(a=u.x1)<c||(s=u.y1)<h))if(g.length){var y=(i+a)/2,_=(o+s)/2;d.push(new eE(g[3],y,_,a,s),new eE(g[2],i,_,y,s),new eE(g[1],y,o,a,_),new eE(g[0],i,o,y,_)),(l=(e>=_)<<1|t>=y)&&(u=d[d.length-1],d[d.length-1]=d[d.length-1-l],d[d.length-1-l]=u)}else{var v=t-+this._x.call(null,g.data),m=e-+this._y.call(null,g.data),x=v*v+m*m;if(x<n){var b=Math.sqrt(n=x);c=t-b,h=e-b,f=t+b,p=e+b,r=g.data}}return r},sE.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,u,l,c,h,f,p=this._root,d=this._x0,g=this._y0,y=this._x1,_=this._y1;if(!p)return this;if(p.length)for(;;){if((l=o>=(s=(d+y)/2))?d=s:y=s,(c=a>=(u=(g+_)/2))?g=u:_=u,e=p,!(p=p[h=c<<1|l]))return this;if(!p.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,f=h)}for(;p.data!==t;)if(r=p,!(p=p.next))return this;return(i=p.next)&&delete p.next,r?(i?r.next=i:delete r.next,this):e?(i?e[h]=i:delete e[h],(p=e[0]||e[1]||e[2]||e[3])&&p===(e[3]||e[2]||e[1]||e[0])&&!p.length&&(n?n[f]=p:this._root=p),this):(this._root=i,this)},sE.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},sE.root=function(){return this._root},sE.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},sE.visit=function(t){var e,n,r,i,o,a,s=[],u=this._root;for(u&&s.push(new eE(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&u.length){var l=(r+o)/2,c=(i+a)/2;(n=u[3])&&s.push(new eE(n,l,c,o,a)),(n=u[2])&&s.push(new eE(n,r,c,l,a)),(n=u[1])&&s.push(new eE(n,l,i,o,c)),(n=u[0])&&s.push(new eE(n,r,i,l,c))}return this},sE.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new eE(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,u=e.x1,l=e.y1,c=(a+u)/2,h=(s+l)/2;(o=i[0])&&n.push(new eE(o,a,s,c,h)),(o=i[1])&&n.push(new eE(o,c,s,u,h)),(o=i[2])&&n.push(new eE(o,a,h,c,l)),(o=i[3])&&n.push(new eE(o,c,h,u,l))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},sE.x=function(t){return arguments.length?(this._x=t,this):this._x},sE.y=function(t){return arguments.length?(this._y=t,this):this._y};var dE={value:()=>{}};function gE(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new yE(r)}function yE(t){this._=t}function _E(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function vE(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function mE(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=dE,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}yE.prototype=gE.prototype={constructor:yE,on:function(t,e){var n,r=this._,i=_E(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=mE(r[n],t.name,e);else if(null==e)for(n in r)r[n]=mE(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=vE(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new yE(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var xE,bE,ME=0,wE=0,EE=0,NE=0,SE=0,IE=0,CE="object"==typeof performance&&performance.now?performance:Date,OE="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function PE(){return SE||(OE(LE),SE=CE.now()+IE)}function LE(){SE=0}function AE(){this._call=this._time=this._next=null}function TE(t,e,n){var r=new AE;return r.restart(t,e,n),r}function kE(){SE=(NE=CE.now())+IE,ME=wE=0;try{!function(){PE(),++ME;for(var t,e=xE;e;)(t=SE-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ME}()}finally{ME=0,function(){var t,e,n=xE,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:xE=e);bE=t,DE(r)}(),SE=0}}function RE(){var t=CE.now(),e=t-NE;e>1e3&&(IE-=e,NE=t)}function DE(t){ME||(wE&&(wE=clearTimeout(wE)),t-SE>24?(t<1/0&&(wE=setTimeout(kE,t-CE.now()-IE)),EE&&(EE=clearInterval(EE))):(EE||(NE=CE.now(),EE=setInterval(RE,1e3)),ME=1,OE(kE)))}AE.prototype=TE.prototype={constructor:AE,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?PE():+n)+(null==e?0:+e),this._next||bE===this||(bE?bE._next=this:xE=this,bE=this),this._call=t,this._time=n,DE()},stop:function(){this._call&&(this._call=null,this._time=1/0,DE())}};const FE=4294967296;function zE(t){return t.x}function GE(t){return t.y}var qE=Math.PI*(3-Math.sqrt(5));var jE=Object.freeze({__proto__:null,forceCenter:function(t,e){var n,r=1;function i(){var i,o,a=n.length,s=0,u=0;for(i=0;i<a;++i)s+=(o=n[i]).x,u+=o.y;for(s=(s/a-t)*r,u=(u/a-e)*r,i=0;i<a;++i)(o=n[i]).x-=s,o.y-=u}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i.strength=function(t){return arguments.length?(r=+t,i):r},i},forceCollide:function(t){var e,n,r,i=1,o=1;function a(){for(var t,a,u,l,c,h,f,p=e.length,d=0;d<o;++d)for(a=iE(e,cE,hE).visitAfter(s),t=0;t<p;++t)u=e[t],h=n[u.index],f=h*h,l=u.x+u.vx,c=u.y+u.vy,a.visit(g);function g(t,e,n,o,a){var s=t.data,p=t.r,d=h+p;if(!s)return e>l+d||o<l-d||n>c+d||a<c-d;if(s.index>u.index){var g=l-s.x-s.vx,y=c-s.y-s.vy,_=g*g+y*y;_<d*d&&(0===g&&(_+=(g=lE(r))*g),0===y&&(_+=(y=lE(r))*y),_=(d-(_=Math.sqrt(_)))/_*i,u.vx+=(g*=_)*(d=(p*=p)/(f+p)),u.vy+=(y*=_)*d,s.vx-=g*(d=1-d),s.vy-=y*d)}}}function s(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function u(){if(e){var r,i,o=e.length;for(n=new Array(o),r=0;r<o;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!=typeof t&&(t=uE(null==t?1:+t)),a.initialize=function(t,n){e=t,r=n,u()},a.iterations=function(t){return arguments.length?(o=+t,a):o},a.strength=function(t){return arguments.length?(i=+t,a):i},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:uE(+e),u(),a):t},a},forceLink:function(t){var e,n,r,i,o,a,s=fE,u=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},l=uE(30),c=1;function h(r){for(var i=0,s=t.length;i<c;++i)for(var u,l,h,f,p,d,g,y=0;y<s;++y)l=(u=t[y]).source,f=(h=u.target).x+h.vx-l.x-l.vx||lE(a),p=h.y+h.vy-l.y-l.vy||lE(a),f*=d=((d=Math.sqrt(f*f+p*p))-n[y])/d*r*e[y],p*=d,h.vx-=f*(g=o[y]),h.vy-=p*g,l.vx+=f*(g=1-g),l.vy+=p*g}function f(){if(r){var a,u,l=r.length,c=t.length,h=new Map(r.map(((t,e)=>[s(t,e,r),t])));for(a=0,i=new Array(l);a<c;++a)(u=t[a]).index=a,"object"!=typeof u.source&&(u.source=pE(h,u.source)),"object"!=typeof u.target&&(u.target=pE(h,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(a=0,o=new Array(c);a<c;++a)u=t[a],o[a]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);e=new Array(c),p(),n=new Array(c),d()}}function p(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+u(t[n],n,t)}function d(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+l(t[e],e,t)}return null==t&&(t=[]),h.initialize=function(t,e){r=t,a=e,f()},h.links=function(e){return arguments.length?(t=e,f(),h):t},h.id=function(t){return arguments.length?(s=t,h):s},h.iterations=function(t){return arguments.length?(c=+t,h):c},h.strength=function(t){return arguments.length?(u="function"==typeof t?t:uE(+t),p(),h):u},h.distance=function(t){return arguments.length?(l="function"==typeof t?t:uE(+t),d(),h):l},h},forceManyBody:function(){var t,e,n,r,i,o=uE(-30),a=1,s=1/0,u=.81;function l(n){var i,o=t.length,a=iE(t,zE,GE).visitAfter(h);for(r=n,i=0;i<o;++i)e=t[i],a.visit(f)}function c(){if(t){var e,n,r=t.length;for(i=new Array(r),e=0;e<r;++e)n=t[e],i[n.index]=+o(n,e,t)}}function h(t){var e,n,r,o,a,s=0,u=0;if(t.length){for(r=o=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(s+=e.value,u+=n,r+=n*e.x,o+=n*e.y);t.x=r/u,t.y=o/u}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=i[e.data.index]}while(e=e.next)}t.value=s}function f(t,o,l,c){if(!t.value)return!0;var h=t.x-e.x,f=t.y-e.y,p=c-o,d=h*h+f*f;if(p*p/u<d)return d<s&&(0===h&&(d+=(h=lE(n))*h),0===f&&(d+=(f=lE(n))*f),d<a&&(d=Math.sqrt(a*d)),e.vx+=h*t.value*r/d,e.vy+=f*t.value*r/d),!0;if(!(t.length||d>=s)){(t.data!==e||t.next)&&(0===h&&(d+=(h=lE(n))*h),0===f&&(d+=(f=lE(n))*f),d<a&&(d=Math.sqrt(a*d)));do{t.data!==e&&(p=i[t.data.index]*r/d,e.vx+=h*p,e.vy+=f*p)}while(t=t.next)}}return l.initialize=function(e,r){t=e,n=r,c()},l.strength=function(t){return arguments.length?(o="function"==typeof t?t:uE(+t),c(),l):o},l.distanceMin=function(t){return arguments.length?(a=t*t,l):Math.sqrt(a)},l.distanceMax=function(t){return arguments.length?(s=t*t,l):Math.sqrt(s)},l.theta=function(t){return arguments.length?(u=t*t,l):Math.sqrt(u)},l},forceRadial:function(t,e,n){var r,i,o,a=uE(.1);function s(t){for(var a=0,s=r.length;a<s;++a){var u=r[a],l=u.x-e||1e-6,c=u.y-n||1e-6,h=Math.sqrt(l*l+c*c),f=(o[a]-h)*i[a]*t/h;u.vx+=l*f,u.vy+=c*f}}function u(){if(r){var e,n=r.length;for(i=new Array(n),o=new Array(n),e=0;e<n;++e)o[e]=+t(r[e],e,r),i[e]=isNaN(o[e])?0:+a(r[e],e,r)}}return"function"!=typeof t&&(t=uE(+t)),null==e&&(e=0),null==n&&(n=0),s.initialize=function(t){r=t,u()},s.strength=function(t){return arguments.length?(a="function"==typeof t?t:uE(+t),u(),s):a},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:uE(+e),u(),s):t},s.x=function(t){return arguments.length?(e=+t,s):e},s.y=function(t){return arguments.length?(n=+t,s):n},s},forceSimulation:function(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,u=TE(h),l=gE("tick","end"),c=function(){let t=1;return()=>(t=(1664525*t+1013904223)%FE)/FE}();function h(){f(),l.call("tick",e),n<r&&(u.stop(),l.call("end",e))}function f(r){var u,l,c=t.length;void 0===r&&(r=1);for(var h=0;h<r;++h)for(n+=(o-n)*i,s.forEach((function(t){t(n)})),u=0;u<c;++u)null==(l=t[u]).fx?l.x+=l.vx*=a:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=a:(l.y=l.fy,l.vy=0);return e}function p(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=10*Math.sqrt(.5+n),o=n*qE;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function d(e){return e.initialize&&e.initialize(t,c),e}return null==t&&(t=[]),p(),e={tick:f,restart:function(){return u.restart(h),e},stop:function(){return u.stop(),e},nodes:function(n){return arguments.length?(t=n,p(),s.forEach(d),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},randomSource:function(t){return arguments.length?(c=t,s.forEach(d),e):c},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,d(n)),e):s.get(t)},find:function(e,n,r){var i,o,a,s,u,l=0,c=t.length;for(null==r?r=1/0:r*=r,l=0;l<c;++l)(a=(i=e-(s=t[l]).x)*i+(o=n-s.y)*o)<r&&(u=s,r=a);return u},on:function(t,n){return arguments.length>1?(l.on(t,n),e):l.on(t)}}},forceX:function(t){var e,n,r,i=uE(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vx+=(r[o]-i.x)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=uE(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:uE(+t),a(),o):i},o.x=function(e){return arguments.length?(t="function"==typeof e?e:uE(+e),a(),o):t},o},forceY:function(t){var e,n,r,i=uE(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vy+=(r[o]-i.y)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=uE(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:uE(+t),a(),o):i},o.y=function(e){return arguments.length?(t="function"==typeof e?e:uE(+e),a(),o):t},o}});const BE=Object.assign({},Zw,bt,Zy);function UE(t,e={}){let n=e.type??"box",r=e.x?e.x:null,i=e.y?e.y:null,o=e.w??30,a=e.h??20,s=e.title?e.title:null,u=e.text?e.text:"leg_text",l=e.fontSize?e.fontSize:14,c=e.fontSize2?e.fontSize2:10,h=e.stroke?e.stroke:"black",f=e.fill?e.fill:"#CCCCCC",p=e.fillOpacity?e.fillOpacity:1,d=e.strokeWidth?e.strokeWidth:.5,g=e.txtcol?e.txtcol:"#363636";if(null!=r&&null!=i){let y=t.append("g").attr("class","bertinlegend"),_=0;null!=s&&(_=(s.split("\n").length+1)*l,y.append("g").selectAll("text").data(s.split("\n")).join("text").attr("x",r).attr("y",i).attr("font-size",`${l}px`).attr("dy",((t,e)=>e*l)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",g).text((t=>t))),"box"==n&&(y.append("rect").attr("x",r).attr("y",i+_).attr("height",a).attr("width",o).attr("fill",f).attr("stroke",h).attr("stroke-width",d).attr("fill-opacity",p),y.append("g").selectAll("text").data(u.split("\n")).join("text").attr("x",r+o+c/2).attr("y",i+a/2-c*u.split("\n").length/2+_).attr("font-size",`${c}px`).attr("dy",((t,e)=>e*c)).attr("fill",g).attr("text-anchor","start").attr("dominant-baseline","hanging").text((t=>t)));const v=["circle","cross","diamond","square","star","triangle","wye"];if(v.includes(n)){const t=e.symbol_size;y.append("path").attr("x",r).attr("y",i+_).attr("d",BE.symbol().size(t).type(BE.symbols[v.indexOf(n)])).attr("transform",`translate(${r+Math.sqrt(t)},${i+_})`).attr("fill",f).attr("stroke",h).attr("stroke-width",d).attr("fill-opacity",p),y.append("g").selectAll("text").data(u.split("\n")).join("text").attr("x",r+2*Math.sqrt(t)+c/2).attr("y",i+_).attr("font-size",`${c}px`).attr("dy",((t,e)=>e*c)).attr("fill",g).attr("text-anchor","start").attr("dominant-baseline","middle").text((t=>t))}}}const VE=Object.assign({},Ue,Zw,bt);function WE(t,e={}){let n=e.x?e.x:null,r=e.y?e.y:null,i=e.w?e.w:30,o=e.h?e.h:20,a=e.title?e.title:null,s=e.fontSize?e.fontSize:14,u=e.fontSize2?e.fontSize2:10,l=e.stroke?e.stroke:"black",c=e.fillOpacity?e.fillOpacity:1,h=e.strokeWidth?e.strokeWidth:.5,f=e.txtcol?e.txtcol:"#363636",p=e.breaks,d=e.colors,g=e.missing;const y=null!=g?d.length:-1,_=null==g?VE.reverse(p):[VE.reverse(p),g[0]].flat(),v=null==g?VE.reverse(d):[VE.reverse(d),g[1]].flat();if(null!=n&&null!=r){let e=t.append("g").attr("class","bertinlegend"),p=0;null!=a&&(p=(a.split("\n").length+1)*s,e.append("g").selectAll("text").data(a.split("\n")).join("text").attr("x",n).attr("y",r).attr("font-size",`${s}px`).attr("dy",((t,e)=>e*s)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",f).text((t=>t))),e.selectAll("rect").data(v).join("rect").attr("x",n).attr("y",((t,e)=>r+p+(o+0)*e+(e===y?o/2:0))).attr("height",o).attr("width",i).attr("fill",(t=>t)).attr("stroke",l).attr("stroke-width",h).attr("fill-opacity",c),e.append("g").selectAll("text").data(_).join("text").attr("x",n+i+u/2).attr("y",r+p).attr("font-size",`${u}px`).attr("fill",f).attr("dy",((t,e)=>(o+0)*e)).attr("text-anchor","start").attr("dominant-baseline","central").text((t=>t))}}const YE=Object.assign({},Ue,Zw,bt);function XE(t,e={}){let n=e.x?e.x:null,r=e.y?e.y:null,i=e.w?e.w:30,o=e.h?e.h:20,a=e.title?e.title:null,s=e.fontSize?e.fontSize:14,u=e.fontSize2?e.fontSize2:10,l=e.stroke?e.stroke:"black",c=e.fillOpacity?e.fillOpacity:1,h=e.strokeWidth?e.strokeWidth:.5,f=e.txtcol?e.txtcol:"#363636",p=e.types,d=e.colors,g=YE.scaleOrdinal().domain(p).range(d);if(null!=n&&null!=r){let e=t.append("g").attr("class","bertinlegend"),d=0;null!=a&&(d=(a.split("\n").length+1)*s,e.append("g").selectAll("text").data(a.split("\n")).join("text").attr("x",n).attr("y",r).attr("font-size",`${s}px`).attr("dy",((t,e)=>e*s)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",f).text((t=>t))),e.selectAll("rect").data(p).join("rect").attr("x",n).attr("y",((t,e)=>r+d+(o+3)*e)).attr("height",o).attr("width",i).attr("fill",(t=>g(t))).attr("stroke",l).attr("stroke-width",h).attr("fill-opacity",c),e.append("g").selectAll("text").data(p).join("text").attr("x",n+i+u/2).attr("y",r+d+o/2).attr("font-size",`${u}px`).attr("fill",f).attr("dy",((t,e)=>(o+3)*e)).attr("text-anchor","start").attr("dominant-baseline","central").text((t=>t))}}function $E(t,e){let n;return e>=0&&(n=+t.toFixed(e)),e<0&&(n=Math.round(t/+(1+"0".repeat(Math.abs(e))))*+(1+"0".repeat(Math.abs(e)))),null==e&&(n=t),n}Object.assign({},Ue,Zw,bt);const HE=Object.assign({},Ue,Zw,bt);const QE=Object.assign({},Ue,Zw,bt);const JE=Object.assign({},Ue);const KE=Object.assign({},Ue);const ZE=Object.assign({},Ue);const tN=Object.assign({},Ue);function eN({values:t,method:e,nb:n,precision:r,k:i,middle:o}){let a;switch(e){case"q6":s=(s=t).filter((t=>""!=t)).map((t=>+t)),a=6>s.length?null:[JE.quantile(s,0),JE.quantile(s,.05),JE.quantile(s,.25),JE.quantile(s,.5),JE.quantile(s,.75),JE.quantile(s,.95),JE.quantile(s,1)];break;case"quantile":a=function(t,e){if(t=t.filter((t=>""!=t)).map((t=>+t)),e>t.length)return null;const n=[],r=1/e;for(let i=0;i<=e;i++)n.push(KE.quantile(t,r*i));return n}(t,n);break;case"equal":a=function(t,e){if(t=t.filter((t=>""!=t)).map((t=>+t)),e>t.length)return null;const n=[ZE.min(t),ZE.max(t)],r=(n[1]-n[0])/e;let i=n[0];for(let t=0;t<e-1;t++)n.push(i+r),i+=r;return n.sort(ZE.ascending)}(t,n);break;case"jenks":a=function(t,e){if(t=t.filter((t=>""!=t)).map((t=>+t)).sort((function(t,e){return t-e})),e>t.length)return null;let n=function(t,e){let n,r,i=[],o=[],a=0;for(n=0;n<t.length+1;n++){let t=[],n=[];for(r=0;r<e+1;r++)t.push(0),n.push(0);i.push(t),o.push(n)}for(n=1;n<e+1;n++)for(i[1][n]=1,o[1][n]=0,r=2;r<t.length+1;r++)o[r][n]=1/0;for(let n=2;n<t.length+1;n++){let s=0,u=0,l=0,c=0;for(let h=1;h<n+1;h++){let f=n-h+1,p=t[f-1];if(l++,s+=p,u+=p*p,a=u-s*s/l,c=f-1,0!==c)for(r=2;r<e+1;r++)o[n][r]>=a+o[c][r-1]&&(i[n][r]=f,o[n][r]=a+o[c][r-1])}i[n][1]=1,o[n][1]=a}return{lower_class_limits:i,variance_combinations:o}}(t,e);return function(t,e,n){let r=t.length-1,i=[],o=n;for(i[n]=t[t.length-1],i[0]=t[0];o>1;)i[o-1]=t[e[r][o]-2],r=e[r][o]-1,o--;return i}(t,n.lower_class_limits,e)}(t,n);break;case"msd":a=function(t,e=1,n=!1){t=t.filter((t=>""!=t)).map((t=>+t));const r=tN.min(t),i=tN.max(t),o=tN.mean(t),a=tN.deviation(t),s=[r,i];if(1==n){let t=o+e/2*a;for(;t<i;)s.push(t),t+=a*e;for(t=o-e/2*a;t>r;)s.push(t),t-=a*e}else{s.push(o);let t=o+a*e;for(;t<i;)s.push(t),t+=a*e;for(t=o-a*e;t>r;)s.push(t),t-=a*e}return s.sort(tN.ascending)}(t,i,o)}var s;return Number.isInteger(+r)?a.map((t=>function(t,e){let n;return e>=0&&(n=+t.toFixed(e)),e<0&&(n=Math.round(t/+(1+"0".repeat(Math.abs(e))))*+(1+"0".repeat(Math.abs(e)))),n}(t,r))):a}Object.assign({},Ue,bt,Zw,Zy),Object.assign({},Ue,bt,Zw,Zy);const nN=Object.assign({},Ex,Zw,Ue);function rN(t,e){if("string"==typeof e)return{getcol:t=>e};if("object"==typeof e&&"choro"==e.type){let n=e.values,r=e.colors??"Blues",i=e.nbreaks?e.nbreaks:5,o=e.breaks?e.breaks:null,a=e.k?e.k:1,s=!!e.middle&&e.middle,u=e.method?e.method:"quantile",l=e.col_missing?e.col_missing:"#f5f5f5",c=e.txt_missing?e.txt_missing:"No data",h=void 0!==e.leg_round?e.leg_round:void 0;"q6"==u&&(i=6);const f=t.map((t=>+t.properties[n])),p=f.filter((t=>null!=t&null!=t&&""!=t)),d=f.length==p.length?null:[c,l];o=null==o?eN({values:p,method:u,nb:i,k:a,middle:s,precision:h}):nN.sort(o),Array.isArray(r)||(r=nN[`scheme${r}`][o.length-1]);let g=[...o];return g.pop(),g.shift(),{getcol:nN.scaleThreshold(g,r).unknown(l),breaks:o,colors:r,missing:d}}if("object"==typeof e&&"typo"==e.type){let n=e.values,r=e.colors??"Tableau10",i=e.col_missing?e.col_missing:"#f5f5f5",o=e.txt_missing?e.txt_missing:"No data";const a=e.order??Array.from(new Set(t.map((t=>t.properties[n]))));let s=e.types??a.filter((t=>""!=t&&null!=t&&null!=t));return Array.isArray(r)?r.slice(0,s.length):r=nN[`scheme${r}`].slice(0,s.length),{getcol:nN.scaleOrdinal().domain(s).range(r).unknown(i),types:s.length==a.length?s:[s,o].flat(),colors:s.length==a.length?r:[r,i].flat()}}if("object"==typeof e&&"split"==e.type){let n=e.values,r=e.split??0,i=e.colors?e.colors:["#F25842","#4a7cd9"],o=e.col_missing?e.col_missing:"#f5f5f5",a=e.txt_missing?e.txt_missing:"No data";const s=t.map((t=>t.properties[n])),u=s.filter((t=>""!=t&&null!=t&&null!=t));return{getcol:t=>t>=r?i[0]:t<r?i[1]:null==t||""==t?o:void 0,types:s.length==u.length?[`>= ${r}`,`< ${r}`]:[[`>= ${r}`,`< ${r}`],a].flat(),colors:s.length==u.length?i:[i,o].flat()}}}const iN=Object.assign({},cm,Zw,Ue);function oN(t,e){const n=e.type??"linear";if("number"==typeof e||"string"==typeof e)return{getthickness:()=>+e};if(0==t.length)return{getthickness:()=>0,valmax:0,sizemax:0};if("number"!=typeof e&&"string"!=typeof e&&"linear"==n){let r=e.k??10,i=e.values,o=e.fixmax??void 0,a=e.fixmin??0;if("geometry"in t[0]&&"properties"in t[0]&&(t=t.map((t=>t.properties))),"string"==typeof e||"number"==typeof e)return{getcol:t=>e};1==a&&(a=iN.min(t.map((t=>Math.abs(+t[i])))));const s=null==o?iN.max(t.map((t=>Math.abs(+t[i])))):o,u=iN.max(t.map((t=>Math.abs(+t[i]))));return{type:n,getthickness:iN.scaleLinear().domain([a,s]).range([0,r]),valmax:u,valmin:a,sizemax:iN.scaleLinear().domain([a,s]).range([0,r])(u)}}if("number"!=typeof e&&"string"!=typeof e&&"quali"==n){const t=e.categories,r=e.k??10,i=e.sizes??iN.quantize(iN.interpolate(1,r),t.length);return{type:n,categories:t,sizes:i,getthickness:iN.scaleOrdinal().domain(t).range(i).unknown(0)}}if("number"!=typeof e&&"string"!=typeof e&&"discr"==n){const r=e.values;let i=e.sizes,o=e.nbreaks??5,a=e.breaks??null,s=e.k??10,u=e.nbsd??1,l=e.middle??!1,c=e.method??"quantile";"q6"==c&&(o=6);const h=t.map((t=>+t.properties[r])).filter((t=>null!=t&&null!=t&&""!=t));a=null==a?eN({values:h,method:c,nb:o,k:u,middle:l}):iN.sort(a),null==i&&(i=iN.quantize(iN.interpolate(1,s),a.length-1));let f=[...a];return f.pop(),f.shift(),{type:n,breaks:a,sizes:i,getthickness:iN.scaleThreshold(f,i).unknown(0)}}}function aN(t,e,n,r,i){"object"==typeof n&&"choro"==n.type&&WE(e,{x:n.leg_x,y:n.leg_y,w:n.leg_w,h:n.leg_h,stroke:n.leg_stroke,fillOpacity:n.leg_fillOpacity,strokeWidth:n.leg_strokeWidth,txtcol:n.leg_txtcol,title:n.leg_title?n.leg_title:n.values,fontSize:n.leg_fontSize,fontSize2:n.leg_fontSize2,breaks:rN(t.features,n).breaks,colors:rN(t.features,n).colors,missing:rN(t.features,n).missing}),"object"==typeof r&&"choro"==r.type&&WE(e,{x:r.leg_x,y:r.leg_y,w:r.leg_w,h:r.leg_h,stroke:r.leg_stroke,fillOpacity:r.leg_fillOpacity,strokeWidth:r.leg_strokeWidth,txtcol:r.leg_txtcol,title:r.leg_title?r.leg_title:r.values,fontSize:r.leg_fontSize,fontSize2:r.leg_fontSize2,breaks:rN(t.features,r).breaks,colors:rN(t.features,r).colors,missing:rN(t.features,r).missing}),"object"!=typeof n||"typo"!=n.type&&"split"!=n.type||XE(e,{x:n.leg_x,y:n.leg_y,w:n.leg_w,h:n.leg_h,stroke:n.leg_stroke,fillOpacity:n.leg_fillOpacity,strokeWidth:n.leg_strokeWidth,txtcol:n.leg_txtcol,title:n.leg_title?n.leg_title:n.values,fontSize:n.leg_fontSize,fontSize2:n.leg_fontSize2,types:rN(t.features,n).types,colors:rN(t.features,n).colors}),"object"!=typeof r||"typo"!=r.type&&"split"!=r.type||XE(e,{x:r.leg_x,y:r.leg_y,w:r.leg_w,h:r.leg_h,stroke:r.leg_stroke,fillOpacity:r.leg_fillOpacity,strokeWidth:r.leg_strokeWidth,txtcol:r.leg_txtcol,title:r.leg_title?r.leg_title:r.values,fontSize:r.leg_fontSize,fontSize2:r.leg_fontSize2,types:rN(t.features,r).types,colors:rN(t.features,r).colors}),"object"!=typeof i||null==i.values||"linear"!=i.type&&null!=i.type||function(t,e={}){let n=e.x??null,r=e.y??null,i=e.valmax,o=e.valmin,a=e.sizemax,s=e.title??null,u=e.fontSize??14,l=e.fontSize2??10,c=e.fill??"none",h=e.stroke??"black",f=e.strokeWidth??.4,p=e.fillOpacity??1,d=e.txtcol??"#363636",g=e.w??75,y=e.round??void 0;if(null!=n&&null!=r){let e=t.append("g").attr("class","bertinlegend"),_=0;null!=s&&(_=(s.split("\n").length+1)*u,e.append("g").selectAll("text").data(s.split("\n")).join("text").attr("x",n).attr("y",r).attr("font-size",`${u}px`).attr("dy",((t,e)=>e*u)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",d).text((t=>t))),e.append("path").attr("d",`M ${n},${r+_+a/2} ${n+g},${r+_} ${n+g},${r+_+a} Z `).attr("stroke",h).attr("fill",c).attr("stroke-width",f).attr("fill-opacity",p),e.append("text").attr("font-size",`${l}px`).attr("fill",d).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("x",n).attr("y",r+_+a/2+l/2).text($E(o,y)),e.append("text").attr("font-size",`${l}px`).attr("fill",d).attr("text-anchor","end").attr("dominant-baseline","hanging").attr("x",n+g).attr("y",r+_+a+l/2).text($E(i,y))}}(e,{x:i.leg_x,y:i.leg_y,valmax:oN(t.features,i).valmax,valmin:oN(t.features,i).valmin,sizemax:oN(t.features,i).sizemax,title:i.leg_title??i.values,fontSize:i.leg_fontSize,fontSize2:i.leg_fontSize2,fill:i.stroke,fillOpacity:i.fillOpacity,txtcol:i.leg_txtcol,w:i.leg_w,round:i.leg_round}),"object"==typeof i&&null!=i.values&&"discr"==i.type&&function(t,e={}){let n=e.x?e.x:null,r=e.y?e.y:null,i=e.w?e.w:30,o=e.title??null,a=e.fontSize?e.fontSize:14,s=e.fontSize2?e.fontSize2:10,u=e.stroke?e.stroke:"black",l=e.strokeOpacity?e.strokeOpacity:1,c=e.txtcol?e.txtcol:"#363636",h=e.breaks,f=e.sizes,p=void 0!==e.round?e.round:void 0;if(f=HE.reverse(f),h=HE.reverse(h),null!=n&&null!=r){let e=t.append("g").attr("class","bertinlegend"),d=0;null!=o&&(d=(o.split("\n").length+1)*a,e.append("g").selectAll("text").data(o.split("\n")).join("text").attr("x",n).attr("y",r).attr("font-size",`${a}px`).attr("dy",((t,e)=>e*a)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",c).text((t=>t)));const g=10;let y=[],_=0;for(let t=0;t<f.length;t++)y.push(r+d+_+f[t]/2+t*g),_+=f[t];let v=[];_=0;for(let t=0;t<h.length;t++)v.push(r+d+_-g/2),_+=f[t]+g;e.selectAll("line").data(f).join("line").attr("x1",n).attr("y1",((t,e)=>y[e])).attr("x2",n+i).attr("y2",((t,e)=>y[e])).attr("stroke",u).attr("stroke-opacity",l).attr("stroke-width",(t=>t)),e.append("g").selectAll("text").data(h).join("text").attr("x",n+i+s/2).attr("y",((t,e)=>v[e])).attr("font-size",`${s}px`).attr("fill",c).attr("text-anchor","start").attr("dominant-baseline","central").text((t=>$E(t,p)))}}(e,{x:i.leg_x,y:i.leg_y,breaks:oN(t.features,i).breaks,sizes:oN(t.features,i).sizes,w:i.leg_w,title:i.leg_title??i.values,fontSize:i.leg_fontSize,fontSize2:i.leg_fontSize2,stroke:i.stroke,strokeOpacity:i.strokeOpacity,txtcol:i.leg_txtcol,round:i.leg_round}),"object"==typeof i&&null!=i.values&&"quali"==i.type&&function(t,e={}){let n=e.x?e.x:null,r=e.y?e.y:null,i=e.w?e.w:30,o=e.title?e.title:null,a=e.fontSize?e.fontSize:14,s=e.fontSize2?e.fontSize2:10,u=e.stroke?e.stroke:"black",l=e.strokeOpacity?e.strokeOpacity:1,c=e.txtcol?e.txtcol:"#363636",h=e.categories,f=e.sizes;if(f=QE.reverse(f),h=QE.reverse(h),null!=n&&null!=r){let e=t.append("g").attr("class","bertinlegend"),p=0;null!=o&&(p=(o.split("\n").length+1)*a,e.append("g").selectAll("text").data(o.split("\n")).join("text").attr("x",n).attr("y",r).attr("font-size",`${a}px`).attr("dy",((t,e)=>e*a)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",c).text((t=>t)));const d=10;let g=[],y=0;for(let t=0;t<f.length;t++)g.push(r+p+y+f[t]/2+t*d),y+=f[t];e.selectAll("line").data(f).join("line").attr("x1",n).attr("y1",((t,e)=>g[e])).attr("x2",n+i).attr("y2",((t,e)=>g[e])).attr("stroke",u).attr("stroke-opacity",l).attr("stroke-width",(t=>t)),e.append("g").selectAll("text").data(h).join("text").attr("x",n+i+s/2).attr("y",((t,e)=>g[e])).attr("font-size",`${s}px`).attr("fill",c).attr("text-anchor","start").attr("dominant-baseline","central").text((t=>t))}}(e,{x:i.leg_x,y:i.leg_y,categories:oN(t.features,i).categories,sizes:oN(t.features,i).sizes,w:i.leg_w,title:i.leg_title??"Catégories",fontSize:i.leg_fontSize,fontSize2:i.leg_fontSize2,stroke:i.stroke,strokeOpacity:i.strokeOpacity,txtcol:i.leg_txtcol})}function sN(t,e,n){const r=.33*e,i=.25*n;return t[0]<r&&t[1]<i?"bottomright":t[0]>e-r&&t[1]<i?"bottomleft":t[0]<r&&t[1]>n-i?"topright":t[0]>e-r&&t[1]>n-i?"topleft":t[1]>n-i?"top":t[0]<r?"right":t[0]>e-r?"left":"bottom"}function uN(t,e){if(!e)return t.style("display","none");const n=1==Array.isArray(e.fields)?e.fields:[e.fields],r=e.fill??"#fcf7e6",i=e.strokeWidth??1,o=e.fillOpacity??1,a=e.strokeOpacity??1,s=e.stroke??"#4a4d4b",u=e.type??"bottom",l=n.length;let c=e.col??"#4d4545";Array.isArray(c)||(c=Array(l).fill(c));let h=e.fontWeight;null==h&&1==l&&(h=["bold"]),null==h&&l>1&&(h=["bold"].concat(Array(l-1).fill("normal"))),"string"==typeof h&&(h=Array(l).fill(h));let f=e.fontSize;null==f&&1==l&&(f=[18]),null==f&&l>1&&(f=[18].concat(Array(l-1).fill(12))),"number"==typeof f&&(f=Array(l).fill(f));let p=e.fontStyle;null==p&&(p=Array(l).fill("normal")),"string"==typeof p&&(p=Array(l).fill(p)),t.style("display",null).style("pointer-events","none").style("font","8px sans-serif");const d=t.selectAll("path").data([null]).join("path").attr("fill",r).attr("stroke",s).attr("stroke-width",i).attr("fill-opacity",o).attr("stroke-opacity",a),g=t.selectAll("text").data([null]).join("text").call((t=>t.selectAll("tspan").data(n).join("tspan").attr("x",0).attr("y",((t,e)=>`${f.slice(0,e+1).reduce(((t,e)=>t+e),0)+3*e}px`)).style("font-weight",((t,e)=>h[e])).style("font-size",((t,e)=>`${f[e]}px`)).style("font-style",((t,e)=>p[e])).style("fill",((t,e)=>c[e])).text((t=>t)))),{x:y,y:_,width:v,height:m}=g.node().getBBox();switch(u){case"bottom":g.attr("transform",`translate(${-v/2},${15-_})`),d.attr("d",`M${-v/2-10},5H-5l5,-5l5,5H${v/2+10}v${m+20}h-${v+20}z`);break;case"top":g.attr("transform",`translate(${-v/2},${-15-_-m})`),d.attr("d",`M${-v/2-10},-5H-5l5,5l5,-5H${v/2+10}v${-m-20}h-${v+20}z`);break;case"left":g.attr("transform",`translate(${-v-15},${-_-m/2})`),d.attr("d",`M0,0l-5,5v${m/2+5}h${-v-20}v${-m-20}h${v+20}v${m/2+5}z`);break;case"right":g.attr("transform",`translate(15,${-_-m/2})`),d.attr("d",`M0,0l5,5v${m/2+5}h${v+20}v${-m-20}h${-v-20}v${m/2+5}z`);break;case"topleft":g.attr("transform",`translate(${-v-10},${-15-_-m})`),d.attr("d",`M0,0v${-m-5-20}h${-v-20}v${m+20}h${v+15}z`);break;case"topright":g.attr("transform",`translate(10,${-15-_-m})`),d.attr("d",`M0,0v${-m-5-20}h${v+20}v${m+20}h${-v-15}z`);break;case"bottomleft":g.attr("transform",`translate(${-v-10},${15-_})`),d.attr("d",`M0,0v${+m+5+20}h${-v-20}v${-m-20}h${+v+15}z`);break;case"bottomright":g.attr("transform",`translate(10,${15-_})`),d.attr("d",`M0,0v${+m+5+20}h${v+20}v${-m-20}h${-v-15}z`)}}Object.assign({},bt);const lN=Object.assign({},Na);function cN(t,e=!0){t=JSON.parse(JSON.stringify(eh(t)));let n=t.features.map((t=>(t.geometry.coordinates=lN.geoCentroid(1==e?"Polygon"==t.geometry.type?t:function(t){var e={},n=0;return t.geometry.coordinates.forEach((function(t){var r={type:"Polygon",coordinates:t},i=lN.geoArea(r);i>n&&(n=i,e=r)})),e}(t):t),t.geometry.type="Point",t)));return n}const hN=Object.assign({},bt,Na,Zy,Zw,Ex,jE);function fN(t,e,n={},r,i,o){let a=["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],s=eh(n.geojson),u=n.fill??a[Math.floor(Math.random()*a.length)],l=n.strokeLinecap??"round",c=n.strokeLinejoin??"round",h=n.strokeDasharray??"none",f=n.stroke??"white",p=n.strokeWidth??.5,d=n.fillOpacity??1,g=n.strokeOpacity??1,y=!!n.tooltip&&n.tooltip;Array.isArray(y)&&(y={fields:y}),"string"==typeof y&&(y={fields:[y]});let _=n.symbol??"circle",v=n.symbol_size??40,m=n.symbol_iteration??200,x=n.symbol_shift??0;if("l"==rh(s)&&(f=n.stroke?n.stroke:a[Math.floor(Math.random()*a.length)],u=n.fill?n.fill:"none",p=n.strokeWidth?n.strokeWidth:1),"l"!=rh(s)&&"z"!=rh(s)||t.append("g").attr("clip-path",null==r?"none":`url(#clip_${r}`).selectAll("path").data(s.features).join("path").attr("d",hN.geoPath(e)).attr("fill",(t=>rN(s.features,u).getcol(t.properties[u.values]||void 0))).attr("stroke",(t=>rN(s.features,f).getcol(t.properties[f.values]||void 0))).attr("stroke-width",(t=>oN(s.features,p).getthickness(t.properties[p.values]||void 0))).attr("fill-opacity",d).attr("stroke-opacity",g).attr("stroke-linecap",l).attr("stroke-linejoin",c).attr("stroke-dasharray",h).on("touchmove mousemove",(function(e,n){y&&t.select("#info").call(uN,{fields:function(){const t=Array.isArray(y.fields)?y.fields:[y.fields];let e=[];return t.forEach((t=>{e.push("$"==t[0]?`${n.properties[t.substr(1,t.length)]}`:t)})),e}(),fontWeight:y.fontWeight,fontSize:y.fontSize,fontStyle:y.fontStyle,fill:y.fill,stroke:y.stroke,strokeWidth:y.strokeWidth,fillOpacity:y.fillOpacity,strokeOpacity:y.strokeOpacity,col:y.col,type:sN(hN.pointer(e,this),i,o)}),y&&(t.select("#info").attr("transform",`translate(${hN.pointer(e,this)})`),hN.select(this).attr("stroke-opacity",g-.3).attr("fill-opacity",d-.3).raise())})).on("touchend mouseleave",(function(){t.select("#info").call(uN,null),hN.select(this).attr("stroke-opacity",g).attr("fill-opacity",d).lower()})),"p"==rh(s)){n.leg_type=n.symbol?n.symbol:"circle";const r=hN.forceSimulation(s.features).force("x",hN.forceX((t=>e(t.geometry.coordinates)[0]))).force("y",hN.forceY((t=>e(t.geometry.coordinates)[1]))).force("collide",hN.forceCollide(Math.sqrt(v)/2+x/2));for(let t=0;t<m;t++)r.tick();const a=["circle","cross","diamond","square","star","triangle","wye"];t.append("g").selectAll("path").data(s.features).join("path").attr("d",hN.symbol().size(v).type(hN.symbols[a.indexOf(_)])).attr("transform",(t=>`translate(\n       ${x?t.x:e(t.geometry.coordinates)[0]},\n       ${x?t.y:e(t.geometry.coordinates)[1]})`)).attr("fill",(t=>rN(s.features,u).getcol(t.properties[u.values]||void 0))).attr("stroke",(t=>rN(s.features,f).getcol(t.properties[f.values]||void 0))).attr("stroke-width",(t=>oN(s.features,p).getthickness(t.properties[p.values]||void 0))).attr("fill-opacity",d).attr("stroke-opacity",g).attr("stroke-linecap",l).attr("stroke-linejoin",c).attr("stroke-dasharray",h).on("touchmove mousemove",(function(n,r){y&&t.select("#info").call(uN,{fields:function(){const t=Array.isArray(y.fields)?y.fields:[y.fields];let e=[];return t.forEach((t=>{e.push("$"==t[0]?`${r.properties[t.substr(1,t.length)]}`:t)})),e}(),fontWeight:y.fontWeight,fontSize:y.fontSize,fontStyle:y.fontStyle,fill:y.fill,stroke:y.stroke,strokeWidth:y.strokeWidth,fillOpacity:y.fillOpacity,strokeOpacity:y.strokeOpacity,col:y.col,type:sN(x?[r.x,r.y]:e(r.geometry.coordinates),i,o)}),y&&(t.select("#info").attr("transform",`translate(\n         ${x?r.x:e(r.geometry.coordinates)[0]},\n         ${x?r.y:e(r.geometry.coordinates)[1]})`),hN.select(this).attr("stroke-opacity",g-.3).attr("fill-opacity",d-.3))})).on("touchend mouseleave",(function(){t.select("#info").call(uN,null),hN.select(this).attr("stroke-opacity",g).attr("fill-opacity",d)}))}aN(s,t,u,f,p),UE(t,{x:n.leg_x,y:n.leg_y,w:n.leg_w,h:n.leg_h,symbol_size:v,type:n.leg_type,title:n.leg_title,text:n.leg_text,fontSize:n.leg_fontSize,fontSize2:n.leg_fontSize2,stroke:n.leg_stroke,fillOpacity:n.leg_fillOpacity?n.leg_fillOpacity:d,fill:n.leg_fill?n.leg_fill:u,strokeWidth:n.leg_strokeWidth,txtcol:n.leg_txtcol})}const pN=Object.assign({},Ue,Zw,bt);const dN=Object.assign({},bt,Ex,Ue,Na,Zw,jE);function gN(t,e,n={},r,i,o){let a,s=["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],u=n.planar??!1,l=eh(n.geojson),c=n.values,h=n.fixmax??void 0,f=n.k?n.k:50,p=n.fill?n.fill:s[Math.floor(Math.random()*s.length)],d=n.stroke?n.stroke:"white",g=n.strokeWidth?n.strokeWidth:.5,y=n.strokeDasharray??"none",_=n.strokeOpacity??1,v=n.fillOpacity?n.fillOpacity:1,m=!!n.dorling&&n.dorling,x=n.iteration?n.iteration:200,b=!!n.tooltip&&n.tooltip;Array.isArray(b)&&(b={fields:b}),"string"==typeof b&&(b={fields:[b]}),a="p"==rh(l)?l.features:cN(l);const M=null!=h?h:dN.max(a,(t=>Math.abs(+t.properties[c])));let w=dN.scaleSqrt([0,M],[0,f]);if(1==m){const t=dN.forceSimulation(a).force("x",dN.forceX((t=>u?t.geometry.coordinates[0]:e(t.geometry.coordinates)[0]))).force("y",dN.forceY((t=>u?t.geometry.coordinates[1]:e(t.geometry.coordinates)[1]))).force("collide",dN.forceCollide((t=>w(Math.abs(t.properties[c]))+oN(a,g).getthickness(t.properties[g.values]||0)/2)));for(let e=0;e<x;e++)t.tick()}t.append("g").selectAll("circle").data(a.filter((t=>null!=t.geometry.coordinates)).filter((t=>null!=t.properties[c])).sort(((t,e)=>dN.descending(Math.abs(+t.properties[c]),Math.abs(+e.properties[c]))))).join("circle").attr("fill",(t=>rN(a,p).getcol(t.properties[p.values]||void 0))).attr("stroke",(t=>rN(a,d).getcol(t.properties[d.values]||void 0))).attr("stroke-width",(t=>oN(a,g).getthickness(t.properties[g.values]||void 0))).attr("fill-opacity",v).attr("stroke-dasharray",y).attr("stroke-opacity",_).attr("cx",(t=>m?t.x:u?t.geometry.coordinates[0]:e(t.geometry.coordinates)[0])).attr("cy",(t=>m?t.y:u?t.geometry.coordinates[1]:e(t.geometry.coordinates)[1])).attr("r",(t=>w(Math.abs(t.properties[c])))).on("touchmove mousemove",(function(e,n){b&&t.select("#info").call(uN,{fields:function(){const t=Array.isArray(b.fields)?b.fields:[b.fields];let e=[];return t.forEach((t=>{e.push("$"==t[0]?`${n.properties[t.substr(1,t.length)]}`:t)})),e}(),fontWeight:b.fontWeight,fontSize:b.fontSize,fontStyle:b.fontStyle,fill:b.fill,stroke:b.stroke,strokeWidth:b.strokeWidth,fillOpacity:b.fillOpacity,strokeOpacity:b.strokeOpacity,col:b.col,type:sN(dN.pointer(e,this),i,o)}),b&&(t.select("#info").attr("transform",`translate(${dN.pointer(e,this)})`),dN.select(this).attr("stroke-opacity",_-.3).attr("fill-opacity",v-.3))})).on("touchend mouseleave",(function(){t.select("#info").call(uN,null),dN.select(this).attr("stroke-opacity",_).attr("fill-opacity",v)})),aN(l,t,p,d,g);let E=a.map((t=>Math.abs(+t.properties[c]))),N=[dN.min(E),w.invert(w(dN.max(E))/3),w.invert(w(dN.max(E))/1.5),dN.max(E)];!function(t,e={}){let n=e.values,r=e.k?e.k:50,i=e.stroke?e.stroke:"black",o=e.fill?e.fill:"none",a=e.strokeWidth?e.strokeWidth:.8,s=e.txtcol?e.txtcol:"#363636",u=e.x?e.x:null,l=e.y?e.y:null,c=e.title?e.title:"Title, year\n(units)",h=e.fontSize?e.fontSize:14,f=e.fontSize2?e.fontSize2:10,p=e.round??void 0,d=e.fixmax;const g=null!=d?d:pN.max(n);let y=pN.scaleSqrt([0,g],[0,r]),_=y(pN.max(n));if(null!=u&&null!=l){let e=t.append("g").attr("class","bertinlegend");e.selectAll("circle").data(n.sort(pN.descending)).join("circle").attr("r",(t=>y(t))).attr("fill",o).attr("stroke",i).attr("stroke-width",a).attr("transform",(t=>`translate(${u+_},${l-y(t)+2*_+(c.split("\n").length+1)*h})`)),e.selectAll("line").data(n).join("line").attr("x1",u+_).attr("y1",(t=>l+2*_-2*y(t)+(c.split("\n").length+1)*h)).attr("x2",u+2*_+h).attr("y2",(t=>l+2*_-2*y(t)+(c.split("\n").length+1)*h)).attr("stroke",i).attr("stroke-width",a).attr("stroke-dasharray",2),e.append("g").selectAll("text").data(c.split("\n")).join("text").attr("x",u).attr("y",l).attr("font-size",`${h}px`).attr("dy",((t,e)=>e*h)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",s).text((t=>t)),e.append("g").selectAll("text").data(n).join("text").attr("x",u+2*_+h+f/2).attr("y",(t=>l+2*_-2*y(t)+(c.split("\n").length+1)*h)).attr("font-size",f).attr("dominant-baseline","central").attr("fill",s).text((t=>$E(t,p)))}}(t,{x:n.leg_x,y:n.leg_y,round:void 0!==n.leg_round?n.leg_round:void 0,k:f,fixmax:h,stroke:n.leg_stroke,fill:n.leg_fill,strokeWidth:n.leg_strokeWidth,txtcol:n.leg_txtcol,title:n.leg_title,fontSize:n.leg_fontSize,fontSize2:n.leg_fontSize2,title:n.leg_title?n.leg_title:c,values:N})}var yN=6371008.8,_N={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*yN,kilometers:6371.0088,kilometres:6371.0088,meters:yN,metres:yN,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:yN/1852,radians:1,yards:6967335.223679999};function vN(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function mN(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function xN(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function bN(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(t),i=function(t){return"Feature"===t.type?t.geometry:t}(e),o=i.type,a=e.bbox,s=i.coordinates;if(a&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(r,a))return!1;"Polygon"===o&&(s=[s]);for(var u=!1,l=0;l<s.length&&!u;l++)if(MN(r,s[l][0],n.ignoreBoundary)){for(var c=!1,h=1;h<s[l].length&&!c;)MN(r,s[l][h],!n.ignoreBoundary)&&(c=!0),h++;c||(u=!0)}return u}function MN(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var a=e[i][0],s=e[i][1],u=e[o][0],l=e[o][1];if(t[1]*(a-u)+s*(u-t[0])+l*(t[0]-a)==0&&(a-t[0])*(u-t[0])<=0&&(s-t[1])*(l-t[1])<=0)return!n;s>t[1]!=l>t[1]&&t[0]<(u-a)*(t[1]-s)/(l-s)+a&&(r=!r)}return r}const wN=Object.assign({},Ue,Na,Ec),EN=Object.assign({},jc,Zc);function NN(t,e,n={},r,i,o){n.geojson=function(t,e,n,r,i,o){let a=wN.range(0+i/2,r,i).reverse(),s=wN.range(0+i/2,n,i).map(((t,e)=>a.map((e=>[t,e])))).flat();const u=wN.geoProject(t,e),l=EN.topology({foo:u}),c=EN.merge(l,l.objects.foo.geometries);let h=[];s.forEach(((t,e)=>{bN(t,c)&&h.push(t)}));let f=[];u.features.forEach(((t,e)=>{h.forEach(((n,r)=>{bN(n,t)&&f.push([e,t.properties[o],n])}))}));const p=wN.rollup(f,(t=>t.length),(t=>t[0])),d=new Map(t.features.map(((t,e)=>[e,t.properties])));let g=[];return f.forEach((t=>{g.push({type:"Feature",properties:Object.assign(d.get(t[0]),{___value:+t[1]/p.get(t[0]),___count:p.get(t[0])}),geometry:{type:"Point",coordinates:t[2]}})})),{type:"FeatureCollection",features:g.sort(((t,e)=>wN.ascending(t.properties.dot_value,e.properties.dot_value)))}}(n.geojson,e,i,o,n.step??20,n.values),n.values="___value",n.planar=!0,gN(t,e,n,0,i,o)}const SN=Object.assign({},bt,Ue,Zw,Na,Ec);function IN(t,e,n={},r,i,o){let a=eh(n.geojson),s=n.top_values,u=n.bottom_values,l=n.top_fill?n.top_fill:"#d64f4f",c=n.bottom_fill?n.bottom_fill:"#4fabd6",h=n.k?n.k:50,f=n.stroke?n.stroke:"white",p=n.strokeWidth?n.strokeWidth:.5,d=n.fillOpacity?n.fillOpacity:1,g=!!n.top_tooltip&&n.top_tooltip;Array.isArray(g)&&(g={fields:g}),"string"==typeof g&&(g={fields:[g]});let y=!!n.bottom_tooltip&&n.bottom_tooltip;Array.isArray(y)&&(y={fields:y}),"string"==typeof y&&(y={fields:[y]});let _=n.leg_x?n.leg_x:null,v=n.leg_y?n.leg_y:null,m=n.leg_fontSize?n.leg_fontSize:14,x=n.leg_fontSize2?n.leg_fontSize2:10,b=n.leg_round?n.leg_round:void 0,M=n.leg_txtcol?n.leg_txtcol:"#363636",w=n.leg_title?n.leg_title:"Title, year",E=n.leg_top_txt?n.leg_top_txt:s,N=n.leg_bottom_txt?n.leg_bottom_txt:u,S=n.leg_top_fill?n.leg_top_fill:l,I=n.leg_bottom_fill?n.leg_bottom_fill:c,C=n.leg_stroke?n.leg_stroke:M,O=n.leg_strokeWidth?n.leg_strokeWidth:.8;const P=cN(a).sort(((t,e)=>SN.descending(+t.properties[s],+e.properties[s]))).filter((t=>null!=t.geometry.coordinates)),L=SN.max(P,(t=>+t.properties[s])),A=SN.max(P,(t=>+t.properties[u]));let T=SN.scaleSqrt([0,Math.max(L,A)],[0,h]);for(let n=0;n<P.length;n++){const a=e(P[n].geometry.coordinates)[0],h=e(P[n].geometry.coordinates)[1],_=T(P[n].properties[s]),v=T(P[n].properties[u]),m=Math.max(_,v);t.append("circle").attr("cx",a).attr("cy",h).attr("r",_).style("fill",l).attr("stroke",f).attr("stroke-width",p).attr("clip-path","url(#top-clip_"+r+n+")").on("touchmove mousemove",(function(e,r){g&&t.select("#info").call(uN,{fields:function(){const t=Array.isArray(g.fields)?g.fields:[g.fields];let e=[];return t.forEach((t=>{e.push("$"==t[0]?`${P[n].properties[t.substr(1,t.length)]}`:t)})),e}(),fontWeight:g.fontWeight,fontSize:g.fontSize,fontStyle:g.fontStyle,fill:g.fill,stroke:g.stroke,strokeWidth:g.strokeWidth,fillOpacity:g.fillOpacity,strokeOpacity:g.strokeOpacity,col:g.col,type:sN(SN.pointer(e,this),i,o)}),g&&(t.select("#info").attr("transform",`translate(${SN.pointer(e,this)})`),SN.select(this).attr("stroke-opacity",strokeOpacity-.3).attr("fill-opacity",d-.3))})).on("touchend mouseleave",(function(){t.select("#info").call(uN,null),SN.select(this).attr("stroke-opacity",strokeOpacity).attr("fill-opacity",d)})),t.append("clipPath").attr("id","top-clip_"+r+n).append("rect").attr("x",a-_-p).attr("y",h+-_-p).attr("height",_+p).attr("width",2*_+2*p),t.append("circle").attr("cx",a).attr("cy",h).attr("r",v).style("fill",c).attr("stroke",f).attr("stroke-width",p).attr("clip-path","url(#bottom-clip_"+r+n+")").on("touchmove mousemove",(function(e,r){y&&t.select("#info").call(uN,{fields:function(){const t=Array.isArray(y.fields)?y.fields:[y.fields];let e=[];return t.forEach((t=>{e.push("$"==t[0]?`${P[n].properties[t.substr(1,t.length)]}`:t)})),e}(),fontWeight:y.fontWeight,fontSize:y.fontSize,fontStyle:y.fontStyle,fill:y.fill,stroke:y.stroke,strokeWidth:y.strokeWidth,fillOpacity:y.fillOpacity,strokeOpacity:y.strokeOpacity,col:y.col,type:sN(SN.pointer(e,this),i,o)}),y&&(t.select("#info").attr("transform",`translate(${SN.pointer(e,this)})`),SN.select(this).attr("stroke-opacity",strokeOpacity-.3).attr("fill-opacity",d-.3))})).on("touchend mouseleave",(function(){t.select("#info").call(uN,null),SN.select(this).attr("stroke-opacity",strokeOpacity).attr("fill-opacity",d)})),t.append("clipPath").attr("id","bottom-clip_"+r+n).append("rect").attr("x",a-v-p).attr("y",h).attr("height",v+p).attr("width",2*v+2*p).attr("fill","none").attr("stroke","red"),t.append("line").attr("x1",a-m).attr("x2",a+m).attr("y1",h).attr("y2",h).attr("stroke",f).attr("stroke-width",p)}if(null!=_&&null!=v){const e=30,n=3,i=T(Math.max(+L,+A));let o=t.append("g");const l=T(SN.max(P,(t=>+t.properties[s])));let c=P.map((t=>+t.properties[s])),h=[T.invert(l/3),T.invert(l/1.5),SN.max(c)];o.selectAll("circle").data(h.sort(SN.descending)).join("circle").attr("cx",_+i).attr("cy",v+l+(w.split("\n").length+1)*m).attr("r",(t=>T(t))).attr("fill",S).attr("stroke",C).attr("stroke-width",O).attr("clip-path","url(#legtop-clip_"+r+")"),o.append("clipPath").attr("id","legtop-clip_"+r).append("rect").attr("x",_-O+i-l).attr("y",v+(w.split("\n").length+1)*m-O).attr("height",l+O).attr("width",2*l+2*O),o.selectAll("line").data(h).join("line").attr("x1",_+i).attr("y1",(t=>v+(w.split("\n").length+1)*m+l-T(t))).attr("x2",_+2*i+m).attr("y2",(t=>v+(w.split("\n").length+1)*m+l-T(t))).attr("stroke",C).attr("stroke-width",O).attr("stroke-dasharray",2),o.selectAll("text").data(h).join("text").attr("x",_+2*i+m+x/2).attr("y",(t=>v+(w.split("\n").length+1)*m+l-T(t))).attr("font-size",x).attr("dominant-baseline","central").attr("fill",M).text((t=>void 0!==b||0!==b?t.toFixed(b):t));let f=t.append("g");const p=T(SN.max(P,(t=>+t.properties[u])));let d=a.features.map((t=>+t.properties[u])),g=[T.invert(p/3),T.invert(p/1.5),SN.max(d)];f.selectAll("circle").data(g.sort(SN.descending)).join("circle").attr("cx",_+i).attr("cy",v+l+(w.split("\n").length+1)*m+e).attr("r",(t=>T(t))).attr("fill",I).attr("stroke",C).attr("stroke-width",O).attr("clip-path","url(#legbottom-clip_"+r+")"),f.append("clipPath").attr("id","legbottom-clip_"+r).append("rect").attr("x",_-O+i-p).attr("y",v+(w.split("\n").length+1)*m+e+l).attr("height",p+O).attr("width",2*p+2*O),f.selectAll("line").data(g).join("line").attr("x1",_+i).attr("y1",(t=>v+(w.split("\n").length+1)*m+l+e+T(t))).attr("x2",_+2*i+m).attr("y2",(t=>v+(w.split("\n").length+1)*m+l+e+T(t))).attr("stroke",C).attr("stroke-width",O).attr("stroke-dasharray",2),f.selectAll("text").data(g).join("text").attr("x",_+2*i+m+x/2).attr("y",(t=>v+(w.split("\n").length+1)*m+l+e+T(t))).attr("font-size",x).attr("dominant-baseline","central").attr("fill",M).text((t=>void 0!==b||0!==b?t.toFixed(b):t));let y=t.append("g").attr("class","bertinlegend");y.append("line").attr("x1",_+i-l).attr("x2",_+i+l).attr("y1",v+(w.split("\n").length+1)*m+l).attr("y2",v+(w.split("\n").length+1)*m+l).attr("stroke",M).attr("stroke-width",O),y.append("line").attr("x1",_+i-p).attr("x2",_+i+p).attr("y1",v+(w.split("\n").length+1)*m+l+e).attr("y2",v+(w.split("\n").length+1)*m+l+e).attr("stroke",M).attr("stroke-width",O),y.append("g").selectAll("text").data(w.split("\n")).join("text").attr("x",_).attr("y",v).attr("font-size",`${m}px`).attr("dy",((t,e)=>e*m)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",M).text((t=>t)),y.append("text").attr("x",_+i).attr("y",v+(w.split("\n").length+1)*m+l+n).text(E).attr("fill",M).attr("font-size",`${x}px`).attr("text-anchor","middle").attr("dominant-baseline","hanging"),y.append("text").attr("x",_+i).attr("y",v+(w.split("\n").length+1)*m+l+e-n).text(N).attr("fill",M).attr("font-size",`${x}px`).attr("text-anchor","middle").attr("dominant-baseline","baseline")}}const CN=Object.assign({},bt,Na,Ec);function ON(t,e,n={},r){let i=eh(n.geojson),o=n.values,a=n.fill?n.fill:"white",s=n.stroke?n.stroke:"white",u=n.strokeWidth?n.strokeWidth:.5,l=n.fillOpacity?n.fillOpacity:1,c=i.features.filter((t=>null==t.properties[o]));"l"==rh(i)&&(s=n.stroke?n.stroke:"white",a=n.fill?n.fill:"none",u=n.strokeWidth?n.strokeWidth:1),t.append("g").attr("clip-path",null==r?"none":`url(#clip_${r}`).selectAll("path").data(c).join("path").attr("d",CN.geoPath(e)).attr("fill",a).attr("stroke",s).attr("stroke-width",u).attr("fill-opacity",l),UE(t,{x:n.leg_x,y:n.leg_y,w:n.leg_w,h:n.leg_h,text:n.leg_text?n.leg_text:"Missing data",fontSize:n.leg_fontSize2,stroke:n.leg_stroke,fillOpacity:n.leg_fillOpacity?n.leg_fillOpacity:l,fill:a,strokeWidth:n.leg_strokeWidth,txtcol:n.leg_txtcol})}const PN=Object.assign({},bt,Na,Ec),LN=Object.assign({},jc,Zc);function AN(t,e,n){if(null!==t)for(var r,i,o,a,s,u,l,c,h=0,f=0,p=t.type,d="FeatureCollection"===p,g="Feature"===p,y=d?t.features.length:1,_=0;_<y;_++){s=(c=!!(l=d?t.features[_].geometry:g?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var v=0;v<s;v++){var m=0,x=0;if(null!==(a=c?l.geometries[v]:l)){u=a.coordinates;var b=a.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(u,f,_,m,x))return!1;f++,m++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],f,_,m,x))return!1;f++,"MultiPoint"===b&&m++}"LineString"===b&&m++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-h;i++){if(!1===e(u[r][i],f,_,m,x))return!1;f++}"MultiLineString"===b&&m++,"Polygon"===b&&x++}"Polygon"===b&&m++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(x=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-h;o++){if(!1===e(u[r][i][o],f,_,m,x))return!1;f++}x++}m++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===AN(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function TN(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function kN(t,e){var n,r,i,o,a,s,u,l,c,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,g=p?t.features.length:1;for(n=0;n<g;n++){for(s=p?t.features[n].geometry:d?t.geometry:t,l=p?t.features[n].properties:d?t.properties:{},c=p?t.features[n].bbox:d?t.bbox:void 0,h=p?t.features[n].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,l,c,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],f,l,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,l,c,h))return!1;f++}}function RN(t){var e=[1/0,1/0,-1/0,-1/0];return AN(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function DN(t,e){void 0===e&&(e={});var n=RN(t);return function(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!xN(t[0])||!xN(t[1]))throw new Error("coordinates must contain numbers");return vN({type:"Point",coordinates:t},e,n)}([(n[0]+n[2])/2,(n[1]+n[3])/2],e.properties,e)}RN.default=RN,"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var FN=function(){};FN.prototype.interfaces_=function(){return[]},FN.prototype.getClass=function(){return FN},FN.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var zN=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),GN=function(){},qN={MAX_VALUE:{configurable:!0}};GN.isNaN=function(t){return Number.isNaN(t)},GN.doubleToLongBits=function(t){return t},GN.longBitsToDouble=function(t){return t},GN.isInfinite=function(t){return!Number.isFinite(t)},qN.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(GN,qN);var jN=function(){},BN=function(){},UN=function(){};function VN(){}var WN=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},YN={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};WN.prototype.setOrdinate=function(t,e){switch(t){case WN.X:this.x=e;break;case WN.Y:this.y=e;break;case WN.Z:this.z=e;break;default:throw new zN("Invalid ordinate index: "+t)}},WN.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!FN.equalsWithTolerance(this.x,e.x,n)&&!!FN.equalsWithTolerance(this.y,e.y,n)}},WN.prototype.getOrdinate=function(t){switch(t){case WN.X:return this.x;case WN.Y:return this.y;case WN.Z:return this.z}throw new zN("Invalid ordinate index: "+t)},WN.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||GN.isNaN(this.z))&&GN.isNaN(t.z)},WN.prototype.equals=function(t){return t instanceof WN&&this.equals2D(t)},WN.prototype.equalInZ=function(t,e){return FN.equalsWithTolerance(this.z,t.z,e)},WN.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},WN.prototype.clone=function(){},WN.prototype.copy=function(){return new WN(this)},WN.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},WN.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},WN.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},WN.prototype.hashCode=function(){var t=17;return t=37*(t=37*t+WN.hashCode(this.x))+WN.hashCode(this.y)},WN.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},WN.prototype.interfaces_=function(){return[jN,BN,VN]},WN.prototype.getClass=function(){return WN},WN.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=GN.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},YN.DimensionalComparator.get=function(){return XN},YN.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},YN.NULL_ORDINATE.get=function(){return GN.NaN},YN.X.get=function(){return 0},YN.Y.get=function(){return 1},YN.Z.get=function(){return 2},Object.defineProperties(WN,YN);var XN=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new zN("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};XN.prototype.compare=function(t,e){var n=t,r=e,i=XN.compare(n.x,r.x);if(0!==i)return i;var o=XN.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:XN.compare(n.z,r.z)},XN.prototype.interfaces_=function(){return[UN]},XN.prototype.getClass=function(){return XN},XN.compare=function(t,e){return t<e?-1:t>e?1:GN.isNaN(t)?GN.isNaN(e)?0:-1:GN.isNaN(e)?1:0};var $N=function(){};$N.prototype.create=function(){},$N.prototype.interfaces_=function(){return[]},$N.prototype.getClass=function(){return $N};var HN=function(){},QN={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};HN.prototype.interfaces_=function(){return[]},HN.prototype.getClass=function(){return HN},HN.toLocationSymbol=function(t){switch(t){case HN.EXTERIOR:return"e";case HN.BOUNDARY:return"b";case HN.INTERIOR:return"i";case HN.NONE:return"-"}throw new zN("Unknown location value: "+t)},QN.INTERIOR.get=function(){return 0},QN.BOUNDARY.get=function(){return 1},QN.EXTERIOR.get=function(){return 2},QN.NONE.get=function(){return-1},Object.defineProperties(HN,QN);var JN=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},KN=function(){},ZN={LOG_10:{configurable:!0}};KN.prototype.interfaces_=function(){return[]},KN.prototype.getClass=function(){return KN},KN.log10=function(t){var e=Math.log(t);return GN.isInfinite(e)||GN.isNaN(e)?e:e/KN.LOG_10},KN.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},KN.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},KN.wrap=function(t,e){return t<0?e- -t%e:t%e},KN.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=t;return e>r&&(r=e),n>r&&(r=n),r}if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=i;return o>u&&(u=o),a>u&&(u=a),s>u&&(u=s),u}},KN.average=function(t,e){return(t+e)/2},ZN.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(KN,ZN);var tS=function(t){this.str=t};tS.prototype.append=function(t){this.str+=t},tS.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},tS.prototype.toString=function(t){return this.str};var eS=function(t){this.value=t};eS.prototype.intValue=function(){return this.value},eS.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},eS.isNaN=function(t){return Number.isNaN(t)};var nS=function(){};nS.isWhitespace=function(t){return t<=32&&t>=0||127===t},nS.toUpperCase=function(t){return t.toUpperCase()};var rS=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var r=arguments[0];t.call(this,t.parse(r))}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.init(i,o)}},iS={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};rS.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},rS.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=rS.magnitude(n._hi),i=rS.TEN.pow(r);(n=n.divide(i)).gt(rS.TEN)?(n=n.divide(rS.TEN),r+=1):n.lt(rS.ONE)&&(n=n.multiply(rS.TEN),r-=1);for(var o=r+1,a=new tS,s=rS.MAX_PRINT_DIGITS-1,u=0;u<=s;u++){t&&u===o&&a.append(".");var l=Math.trunc(n._hi);if(l<0)break;var c=!1,h=0;l>9?(c=!0,h="9"):h="0"+l,a.append(h),n=n.subtract(rS.valueOf(l)).multiply(rS.TEN),c&&n.selfAdd(rS.TEN);var f=!0,p=rS.magnitude(n._hi);if(p<0&&Math.abs(p)>=s-u&&(f=!1),!f)break}return e[0]=r,a.toString()},rS.prototype.sqr=function(){return this.multiply(this)},rS.prototype.doubleValue=function(){return this._hi+this._lo},rS.prototype.subtract=function(){if(arguments[0]instanceof rS){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},rS.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},rS.prototype.isZero=function(){return 0===this._hi&&0===this._lo},rS.prototype.selfSubtract=function(){if(arguments[0]instanceof rS){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},rS.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},rS.prototype.min=function(t){return this.le(t)?this:t},rS.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof rS){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,l=null,c=null,h=null;return u=this._hi/n,h=(i=(l=rS.SPLIT*u)-(i=l-u))*(a=(h=rS.SPLIT*n)-(a=h-n))-(c=u*n)+i*(s=n-a)+(o=u-i)*a+o*s,h=u+(l=(this._hi-c-h+this._lo-u*r)/n),this._hi=h,this._lo=u-h+l,this}},rS.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},rS.prototype.divide=function(){if(arguments[0]instanceof rS){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,a=null,s=null,u=null;n=(o=this._hi/t._hi)-(e=(a=rS.SPLIT*o)-(e=a-o)),u=e*(r=(u=rS.SPLIT*t._hi)-(r=u-t._hi))-(s=o*t._hi)+e*(i=t._hi-r)+n*r+n*i;var l=u=o+(a=(this._hi-s-u+this._lo-o*t._lo)/t._hi),c=o-u+a;return new rS(l,c)}if("number"==typeof arguments[0]){var h=arguments[0];return GN.isNaN(h)?rS.createNaN():rS.copy(this).selfDivide(h,0)}},rS.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},rS.prototype.pow=function(t){if(0===t)return rS.valueOf(1);var e=new rS(this),n=rS.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},rS.prototype.ceil=function(){if(this.isNaN())return rS.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new rS(t,e)},rS.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},rS.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},rS.prototype.setValue=function(){if(arguments[0]instanceof rS){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},rS.prototype.max=function(t){return this.ge(t)?this:t},rS.prototype.sqrt=function(){if(this.isZero())return rS.valueOf(0);if(this.isNegative())return rS.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=rS.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},rS.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof rS){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,a=null,s=null;return o=(i=this._hi+e)-(a=i-this._hi),r=(s=(o=e-a+(this._hi-o))+this._lo)+(i-(n=i+s)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],l=arguments[1],c=null,h=null,f=null,p=null,d=null,g=null,y=null;p=this._hi+u,h=this._lo+l,d=p-(g=p-this._hi),f=h-(y=h-this._lo);var _=(c=p+(g=(d=u-g+(this._hi-d))+h))+(g=(f=l-y+(this._lo-f))+(g+(p-c))),v=g+(c-_);return this._hi=_,this._lo=v,this}},rS.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof rS){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,l=null;i=(u=rS.SPLIT*this._hi)-this._hi,l=rS.SPLIT*n,i=u-i,o=this._hi-i,a=l-n;var c=(u=this._hi*n)+(l=i*(a=l-a)-u+i*(s=n-a)+o*a+o*s+(this._hi*r+this._lo*n)),h=l+(i=u-c);return this._hi=c,this._lo=h,this}},rS.prototype.selfSqr=function(){return this.selfMultiply(this)},rS.prototype.floor=function(){if(this.isNaN())return rS.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new rS(t,e)},rS.prototype.negate=function(){return this.isNaN()?this:new rS(-this._hi,-this._lo)},rS.prototype.clone=function(){},rS.prototype.multiply=function(){if(arguments[0]instanceof rS){var t=arguments[0];return t.isNaN()?rS.createNaN():rS.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return GN.isNaN(e)?rS.createNaN():rS.copy(this).selfMultiply(e,0)}},rS.prototype.isNaN=function(){return GN.isNaN(this._hi)},rS.prototype.intValue=function(){return Math.trunc(this._hi)},rS.prototype.toString=function(){var t=rS.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},rS.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+rS.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+rS.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},rS.prototype.reciprocal=function(){var t,e,n,r,i=null,o=null,a=null,s=null;t=(n=1/this._hi)-(i=(a=rS.SPLIT*n)-(i=a-n)),o=(s=rS.SPLIT*this._hi)-this._hi;var u=n+(a=(1-(r=n*this._hi)-(s=i*(o=s-o)-r+i*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new rS(u,n-u+a)},rS.prototype.toSciNotation=function(){if(this.isZero())return rS.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=rS.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},rS.prototype.abs=function(){return this.isNaN()?rS.NaN:this.isNegative()?this.negate():new rS(this)},rS.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},rS.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},rS.prototype.add=function(){if(arguments[0]instanceof rS){var t=arguments[0];return rS.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return rS.copy(this).selfAdd(e)}},rS.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof rS){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},rS.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},rS.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},rS.prototype.trunc=function(){return this.isNaN()?rS.NaN:this.isPositive()?this.floor():this.ceil()},rS.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},rS.prototype.interfaces_=function(){return[VN,jN,BN]},rS.prototype.getClass=function(){return rS},rS.sqr=function(t){return rS.valueOf(t).selfMultiply(t)},rS.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return rS.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new rS(e)}},rS.sqrt=function(t){return rS.valueOf(t).sqrt()},rS.parse=function(t){for(var e=0,n=t.length;nS.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new rS,a=0,s=0,u=0;!(e>=n);){var l=t.charAt(e);if(e++,nS.isDigit(l)){var c=l-"0";o.selfMultiply(rS.TEN),o.selfAdd(c),a++}else{if("."!==l){if("e"===l||"E"===l){var h=t.substring(e);try{u=eS.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+l+"' at position "+e+" in string "+t)}s=a}}var f=o,p=a-s-u;if(0===p)f=o;else if(p>0){var d=rS.TEN.pow(p);f=o.divide(d)}else if(p<0){var g=rS.TEN.pow(-p);f=o.multiply(g)}return r?f.negate():f},rS.createNaN=function(){return new rS(GN.NaN,GN.NaN)},rS.copy=function(t){return new rS(t)},rS.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},rS.stringOfChar=function(t,e){for(var n=new tS,r=0;r<e;r++)n.append(t);return n.toString()},iS.PI.get=function(){return new rS(3.141592653589793,12246467991473532e-32)},iS.TWO_PI.get=function(){return new rS(6.283185307179586,24492935982947064e-32)},iS.PI_2.get=function(){return new rS(1.5707963267948966,6123233995736766e-32)},iS.E.get=function(){return new rS(2.718281828459045,14456468917292502e-32)},iS.NaN.get=function(){return new rS(GN.NaN,GN.NaN)},iS.EPS.get=function(){return 123259516440783e-46},iS.SPLIT.get=function(){return 134217729},iS.MAX_PRINT_DIGITS.get=function(){return 32},iS.TEN.get=function(){return rS.valueOf(10)},iS.ONE.get=function(){return rS.valueOf(1)},iS.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},iS.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(rS,iS);var oS=function(){},aS={DP_SAFE_EPSILON:{configurable:!0}};oS.prototype.interfaces_=function(){return[]},oS.prototype.getClass=function(){return oS},oS.orientationIndex=function(t,e,n){var r=oS.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=rS.valueOf(e.x).selfAdd(-t.x),o=rS.valueOf(e.y).selfAdd(-t.y),a=rS.valueOf(n.x).selfAdd(-e.x),s=rS.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},oS.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},oS.intersection=function(t,e,n,r){var i=rS.valueOf(r.y).selfSubtract(n.y).selfMultiply(rS.valueOf(e.x).selfSubtract(t.x)),o=rS.valueOf(r.x).selfSubtract(n.x).selfMultiply(rS.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=rS.valueOf(r.x).selfSubtract(n.x).selfMultiply(rS.valueOf(t.y).selfSubtract(n.y)),u=rS.valueOf(r.y).selfSubtract(n.y).selfMultiply(rS.valueOf(t.x).selfSubtract(n.x)),l=s.subtract(u).selfDivide(a).doubleValue(),c=rS.valueOf(t.x).selfAdd(rS.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),h=rS.valueOf(e.x).selfSubtract(t.x).selfMultiply(rS.valueOf(t.y).selfSubtract(n.y)),f=rS.valueOf(e.y).selfSubtract(t.y).selfMultiply(rS.valueOf(t.x).selfSubtract(n.x)),p=h.subtract(f).selfDivide(a).doubleValue(),d=rS.valueOf(n.y).selfAdd(rS.valueOf(r.y).selfSubtract(n.y).selfMultiply(p)).doubleValue();return new WN(c,d)},oS.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=i-o;if(i>0){if(o<=0)return oS.signum(a);r=i+o}else{if(!(i<0))return oS.signum(a);if(o>=0)return oS.signum(a);r=-i-o}var s=oS.DP_SAFE_EPSILON*r;return a>=s||-a>=s?oS.signum(a):2},oS.signum=function(t){return t>0?1:t<0?-1:0},aS.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(oS,aS);var sS=function(){},uS={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};uS.X.get=function(){return 0},uS.Y.get=function(){return 1},uS.Z.get=function(){return 2},uS.M.get=function(){return 3},sS.prototype.setOrdinate=function(t,e,n){},sS.prototype.size=function(){},sS.prototype.getOrdinate=function(t,e){},sS.prototype.getCoordinate=function(){},sS.prototype.getCoordinateCopy=function(t){},sS.prototype.getDimension=function(){},sS.prototype.getX=function(t){},sS.prototype.clone=function(){},sS.prototype.expandEnvelope=function(t){},sS.prototype.copy=function(){},sS.prototype.getY=function(t){},sS.prototype.toCoordinateArray=function(){},sS.prototype.interfaces_=function(){return[BN]},sS.prototype.getClass=function(){return sS},Object.defineProperties(sS,uS);var lS=function(){},cS=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(lS),hS=function(){};hS.arraycopy=function(t,e,n,r,i){for(var o=0,a=e;a<e+i;a++)n[r+o]=t[a],o++},hS.getProperty=function(t){return{"line.separator":"\n"}[t]};var fS=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof WN&&arguments[1]instanceof WN){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2];this.x=u,this.y=l,this.w=c}else if(4===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3],g=h.y-f.y,y=f.x-h.x,_=h.x*f.y-f.x*h.y,v=p.y-d.y,m=d.x-p.x,x=p.x*d.y-d.x*p.y;this.x=y*x-m*_,this.y=v*_-g*x,this.w=g*m-v*y}};fS.prototype.getY=function(){var t=this.y/this.w;if(GN.isNaN(t)||GN.isInfinite(t))throw new cS;return t},fS.prototype.getX=function(){var t=this.x/this.w;if(GN.isNaN(t)||GN.isInfinite(t))throw new cS;return t},fS.prototype.getCoordinate=function(){var t=new WN;return t.x=this.getX(),t.y=this.getY(),t},fS.prototype.interfaces_=function(){return[]},fS.prototype.getClass=function(){return fS},fS.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-r.y,u=r.x-n.x,l=n.x*r.y-r.x*n.y,c=i*u-s*o,h=(o*l-u*a)/c,f=(s*a-i*l)/c;if(GN.isNaN(h)||GN.isInfinite(h)||GN.isNaN(f)||GN.isInfinite(f))throw new cS;return new WN(h,f)};var pS=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof WN){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3];this.init(o,a,s,u)}},dS={serialVersionUID:{configurable:!0}};pS.prototype.getArea=function(){return this.getWidth()*this.getHeight()},pS.prototype.equals=function(t){if(!(t instanceof pS))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},pS.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new pS;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new pS(e,r,n,i)},pS.prototype.isNull=function(){return this._maxx<this._minx},pS.prototype.getMaxX=function(){return this._maxx},pS.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof WN){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof pS){var e=arguments[0];return!this.isNull()&&!e.isNull()&&(e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&(n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy)}},pS.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof pS){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof WN){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},pS.prototype.getMinY=function(){return this._miny},pS.prototype.getMinX=function(){return this._minx},pS.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof WN){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof pS){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},pS.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},pS.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},pS.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},pS.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},pS.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},pS.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},pS.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},pS.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},pS.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},pS.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof pS){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof WN){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},pS.prototype.centre=function(){return this.isNull()?null:new WN((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},pS.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof WN){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof pS){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},pS.prototype.getMaxY=function(){return this._maxy},pS.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},pS.prototype.hashCode=function(){var t=17;return t=37*(t=37*(t=37*(t=37*t+WN.hashCode(this._minx))+WN.hashCode(this._maxx))+WN.hashCode(this._miny))+WN.hashCode(this._maxy)},pS.prototype.interfaces_=function(){return[jN,VN]},pS.prototype.getClass=function(){return pS},pS.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),u=Math.max(o.x,a.x),l=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(l>u)&&(!(c<s)&&(s=Math.min(o.y,a.y),u=Math.max(o.y,a.y),l=Math.min(r.y,i.y),c=Math.max(r.y,i.y),!(l>u)&&!(c<s)))}},dS.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(pS,dS);var gS={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},yS=function(t){this.geometryFactory=t||new eC};yS.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=gS.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=gS.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],vS[n]&&(e=vS[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},yS.prototype.write=function(t){return this.extractGeometry(t)},yS.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!_S[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+_S[e].apply(this,[t])+")"};var _S={coordinate:function(t){return t.x+" "+t.y},point:function(t){return _S.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+_S.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(_S.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(_S.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+_S.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+_S.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+_S.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+_S.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},vS={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(gS.spaces);return this.geometryFactory.createPoint(new WN(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPoint();for(var n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(gS.trimParens,"$1"),r.push(vS.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(gS.spaces),r.push(new WN(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(gS.spaces),r.push(new WN(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiLineString();for(var n=t.trim().split(gS.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(gS.trimParens,"$1"),r.push(vS.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){var e,n,r;if(void 0===t)return this.geometryFactory.createPolygon();for(var i,o=t.trim().split(gS.parenComma),a=[],s=0,u=o.length;s<u;++s)e=o[s].replace(gS.trimParens,"$1"),n=vS.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===s?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var n=t.trim().split(gS.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(gS.trimParens,"$1"),r.push(vS.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},mS=function(t){this.parser=new yS(t)};mS.prototype.write=function(t){return this.parser.write(t)},mS.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var xS=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),bS=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(xS),MS=function(){};MS.prototype.interfaces_=function(){return[]},MS.prototype.getClass=function(){return MS},MS.shouldNeverReachHere=function(){if(0===arguments.length)MS.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new bS("Should never reach here"+(null!==t?": "+t:""))}},MS.isTrue=function(){var t;if(1===arguments.length)MS.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new bS:new bS(t)},MS.equals=function(){var t,e,n;if(2===arguments.length)MS.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new bS("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var wS=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new WN,this._intPt[1]=new WN,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},ES={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};wS.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},wS.prototype.getTopologySummary=function(){var t=new tS;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},wS.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},wS.prototype.getIntersectionNum=function(){return this._result},wS.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0],e=this.getEdgeDistance(t,0),n=this.getEdgeDistance(t,1);e>n?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},wS.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},wS.prototype.setPrecisionModel=function(t){this._precisionModel=t},wS.prototype.isInteriorIntersection=function(){var t=this;if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var e=arguments[0],n=0;n<this._result;n++)if(!t._intPt[n].equals2D(t._inputLines[e][0])&&!t._intPt[n].equals2D(t._inputLines[e][1]))return!0;return!1}},wS.prototype.getIntersection=function(t){return this._intPt[t]},wS.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},wS.prototype.hasIntersection=function(){return this._result!==wS.NO_INTERSECTION},wS.prototype.getEdgeDistance=function(t,e){return wS.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},wS.prototype.isCollinear=function(){return this._result===wS.COLLINEAR_INTERSECTION},wS.prototype.toString=function(){return mS.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+mS.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},wS.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},wS.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},wS.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},wS.prototype.interfaces_=function(){return[]},wS.prototype.getClass=function(){return wS},wS.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=r>i?a:s)||t.equals(e)||(o=Math.max(a,s))}return MS.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},wS.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return MS.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},ES.DONT_INTERSECT.get=function(){return 0},ES.DO_INTERSECT.get=function(){return 1},ES.COLLINEAR.get=function(){return 2},ES.NO_INTERSECTION.get=function(){return 0},ES.POINT_INTERSECTION.get=function(){return 1},ES.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(wS,ES);var NS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new pS(this._inputLines[0][0],this._inputLines[0][1]),n=new pS(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,pS.intersects(n,r,e)&&0===CS.orientationIndex(n,r,e)&&0===CS.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=fS.intersection(t,n,r,i)}catch(a){if(!(a instanceof cS))throw a;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new WN(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=oS.intersection(t,e,n,r),a=this.isInSegmentEnvelopes(o);hS.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&hS.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new WN(t),o=new WN(e),a=new WN(n),s=new WN(r),u=new WN;this.normalizeToEnvCentre(i,o,a,s,u);var l=this.safeHCoordinateIntersection(i,o,a,s);return l.x+=u.x,l.y+=u.y,l},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=pS.intersects(e,n,r),a=pS.intersects(e,n,i),s=pS.intersects(r,i,e),u=pS.intersects(r,i,n);return o&&a?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):s&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||a||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,f=n.y>r.y?n.y:r.y,p=((o>l?o:l)+(s<h?s:h))/2,d=((a>c?a:c)+(u<f?u:f))/2;i.x=p,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!pS.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=CS.orientationIndex(e,n,r),a=CS.orientationIndex(e,n,i);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=CS.orientationIndex(r,i,e),u=CS.orientationIndex(r,i,n);return s>0&&u>0||s<0&&u<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===u?this.computeCollinearIntersection(e,n,r,i):(0===o||0===a||0===s||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new WN(r):0===a?this._intPt[0]=new WN(i):0===s?this._intPt[0]=new WN(e):0===u&&(this._intPt[0]=new WN(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=CS.distancePointLine(t,n,r),a=CS.distancePointLine(e,n,r);return a<o&&(o=a,i=e),(a=CS.distancePointLine(n,t,e))<o&&(o=a,i=n),(a=CS.distancePointLine(r,t,e))<o&&(o=a,i=r),i},e}(wS),SS=function(){};SS.prototype.interfaces_=function(){return[]},SS.prototype.getClass=function(){return SS},SS.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,a=n.y-e.y;return SS.signOfDet2x2(r,i,o,a)},SS.signOfDet2x2=function(t,e,n,r){var i=null,o=null,a=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(a=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=a*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(a=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=a*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var IS=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};IS.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,a=e.x-this._p.x,s=e.y-this._p.y,u=SS.signOfDet2x2(i,o,a,s);if(0===u)return this._isPointOnSegment=!0,null;s<o&&(u=-u),u>0&&this._crossingCount++}},IS.prototype.isPointInPolygon=function(){return this.getLocation()!==HN.EXTERIOR},IS.prototype.getLocation=function(){return this._isPointOnSegment?HN.BOUNDARY:this._crossingCount%2==1?HN.INTERIOR:HN.EXTERIOR},IS.prototype.isOnSegment=function(){return this._isPointOnSegment},IS.prototype.interfaces_=function(){return[]},IS.prototype.getClass=function(){return IS},IS.locatePointInRing=function(){if(arguments[0]instanceof WN&&JN(arguments[1],sS)){for(var t=arguments[0],e=arguments[1],n=new IS(t),r=new WN,i=new WN,o=1;o<e.size();o++)if(e.getCoordinate(o,r),e.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof WN&&arguments[1]instanceof Array){for(var a=arguments[0],s=arguments[1],u=new IS(a),l=1;l<s.length;l++){var c=s[l],h=s[l-1];if(u.countSegment(c,h),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var CS=function(){},OS={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};CS.prototype.interfaces_=function(){return[]},CS.prototype.getClass=function(){return CS},CS.orientationIndex=function(t,e,n){return oS.orientationIndex(t,e,n)},CS.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y,a=t[r-1].y;e+=i*(a-o)}return e/2}if(JN(arguments[0],sS)){var s=arguments[0],u=s.size();if(u<3)return 0;var l=new WN,c=new WN,h=new WN;s.getCoordinate(0,c),s.getCoordinate(1,h);var f=c.x;h.x-=f;for(var p=0,d=1;d<u-1;d++)l.y=c.y,c.x=h.x,c.y=h.y,s.getCoordinate(d+1,h),h.x-=f,p+=c.x*(l.y-h.y);return p/2}},CS.distanceLineLine=function(t,e,n,r){if(t.equals(e))return CS.distancePointLine(t,n,r);if(n.equals(r))return CS.distancePointLine(r,t,e);var i=!1;if(pS.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var a=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=a/o;(u<0||u>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?KN.min(CS.distancePointLine(t,n,r),CS.distancePointLine(e,n,r),CS.distancePointLine(n,t,e),CS.distancePointLine(r,t,e)):0},CS.isPointInRing=function(t,e){return CS.locatePointInRing(t,e)!==HN.EXTERIOR},CS.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new WN;t.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<e;a++){t.getCoordinate(a,r);var s=r.x,u=r.y,l=s-i,c=u-o;n+=Math.sqrt(l*l+c*c),i=s,o=u}return n},CS.isCCW=function(t){var e=t.length-1;if(e<3)throw new zN("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var a=r;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==r);var s=r;do{s=(s+1)%e}while(t[s].equals2D(n)&&s!==r);var u=t[a],l=t[s];if(u.equals2D(n)||l.equals2D(n)||u.equals2D(l))return!1;var c=CS.computeOrientation(u,n,l),h=!1;return h=0===c?u.x>l.x:c>0,h},CS.locatePointInRing=function(t,e){return IS.locatePointInRing(t,e)},CS.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},CS.computeOrientation=function(t,e,n){return CS.orientationIndex(t,e,n)},CS.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new zN("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=CS.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var u=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),l=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/u;if(l<=0)return o.distance(a);if(l>=1)return o.distance(s);var c=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/u;return Math.abs(c)*Math.sqrt(u)}},CS.isOnLine=function(t,e){for(var n=new NS,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},OS.CLOCKWISE.get=function(){return-1},OS.RIGHT.get=function(){return CS.CLOCKWISE},OS.COUNTERCLOCKWISE.get=function(){return 1},OS.LEFT.get=function(){return CS.COUNTERCLOCKWISE},OS.COLLINEAR.get=function(){return 0},OS.STRAIGHT.get=function(){return CS.COLLINEAR},Object.defineProperties(CS,OS);var PS=function(){};PS.prototype.filter=function(t){},PS.prototype.interfaces_=function(){return[]},PS.prototype.getClass=function(){return PS};var LS=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},AS={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};LS.prototype.isGeometryCollection=function(){return this.getSortIndex()===LS.SORTINDEX_GEOMETRYCOLLECTION},LS.prototype.getFactory=function(){return this._factory},LS.prototype.getGeometryN=function(t){return this},LS.prototype.getArea=function(){return 0},LS.prototype.isRectangle=function(){return!1},LS.prototype.equals=function(){if(arguments[0]instanceof LS){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof LS))return!1;var n=e;return this.equalsExact(n)}},LS.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},LS.prototype.geometryChanged=function(){this.apply(LS.geometryChangedFilter)},LS.prototype.geometryChangedAction=function(){this._envelope=null},LS.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},LS.prototype.getLength=function(){return 0},LS.prototype.getNumGeometries=function(){return 1},LS.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},LS.prototype.getUserData=function(){return this._userData},LS.prototype.getSRID=function(){return this._SRID},LS.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},LS.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===LS.SORTINDEX_GEOMETRYCOLLECTION)throw new zN("This method does not support GeometryCollection arguments")},LS.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},LS.prototype.norm=function(){var t=this.copy();return t.normalize(),t},LS.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},LS.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new pS(this._envelope)},LS.prototype.setSRID=function(t){this._SRID=t},LS.prototype.setUserData=function(t){this._userData=t},LS.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0},LS.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},LS.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===LS.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===LS.SORTINDEX_MULTIPOINT||this.getSortIndex()===LS.SORTINDEX_MULTILINESTRING||this.getSortIndex()===LS.SORTINDEX_MULTIPOLYGON},LS.prototype.interfaces_=function(){return[BN,jN,VN]},LS.prototype.getClass=function(){return LS},LS.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},LS.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},AS.serialVersionUID.get=function(){return 0x799ea46522854c00},AS.SORTINDEX_POINT.get=function(){return 0},AS.SORTINDEX_MULTIPOINT.get=function(){return 1},AS.SORTINDEX_LINESTRING.get=function(){return 2},AS.SORTINDEX_LINEARRING.get=function(){return 3},AS.SORTINDEX_MULTILINESTRING.get=function(){return 4},AS.SORTINDEX_POLYGON.get=function(){return 5},AS.SORTINDEX_MULTIPOLYGON.get=function(){return 6},AS.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},AS.geometryChangedFilter.get=function(){return TS},Object.defineProperties(LS,AS);var TS=function(){};TS.interfaces_=function(){return[PS]},TS.filter=function(t){t.geometryChangedAction()};var kS=function(){};kS.prototype.filter=function(t){},kS.prototype.interfaces_=function(){return[]},kS.prototype.getClass=function(){return kS};var RS=function(){},DS={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};RS.prototype.isInBoundary=function(t){},RS.prototype.interfaces_=function(){return[]},RS.prototype.getClass=function(){return RS},DS.Mod2BoundaryNodeRule.get=function(){return FS},DS.EndPointBoundaryNodeRule.get=function(){return zS},DS.MultiValentEndPointBoundaryNodeRule.get=function(){return GS},DS.MonoValentEndPointBoundaryNodeRule.get=function(){return qS},DS.MOD2_BOUNDARY_RULE.get=function(){return new FS},DS.ENDPOINT_BOUNDARY_RULE.get=function(){return new zS},DS.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new GS},DS.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new qS},DS.OGC_SFS_BOUNDARY_RULE.get=function(){return RS.MOD2_BOUNDARY_RULE},Object.defineProperties(RS,DS);var FS=function(){};FS.prototype.isInBoundary=function(t){return t%2==1},FS.prototype.interfaces_=function(){return[RS]},FS.prototype.getClass=function(){return FS};var zS=function(){};zS.prototype.isInBoundary=function(t){return t>0},zS.prototype.interfaces_=function(){return[RS]},zS.prototype.getClass=function(){return zS};var GS=function(){};GS.prototype.isInBoundary=function(t){return t>1},GS.prototype.interfaces_=function(){return[RS]},GS.prototype.getClass=function(){return GS};var qS=function(){};qS.prototype.isInBoundary=function(t){return 1===t},qS.prototype.interfaces_=function(){return[RS]},qS.prototype.getClass=function(){return qS};var jS=function(){};function BS(t){this.message=t||""}jS.prototype.add=function(){},jS.prototype.addAll=function(){},jS.prototype.isEmpty=function(){},jS.prototype.iterator=function(){},jS.prototype.size=function(){},jS.prototype.toArray=function(){},jS.prototype.remove=function(){},BS.prototype=new Error,BS.prototype.name="IndexOutOfBoundsException";var US=function(){};US.prototype.hasNext=function(){},US.prototype.next=function(){},US.prototype.remove=function(){};var VS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(jS);function WS(t){this.message=t||""}WS.prototype=new Error,WS.prototype.name="NoSuchElementException";var YS=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof jS&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,jS]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new XS(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new BS;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(VS),XS=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new WS;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(US),$S=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){var e=this;if(2===arguments.length){for(var n=arguments[0],r=arguments[1],i=!1,o=n.iterator();o.hasNext();)e.add(o.next(),r),i=!0;return i}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){var e=this;if(1===arguments.length){var n=arguments[0];t.prototype.add.call(this,n)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var r=arguments[0],i=arguments[1];return this.add(r,i,!0),!0}if(arguments[0]instanceof WN&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];if(!a&&this.size()>=1){var s=this.get(this.size()-1);if(s.equals2D(o))return null}t.prototype.add.call(this,o)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var u=arguments[0],l=arguments[1];return this.add(u,l),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var c=arguments[0],h=arguments[1],f=arguments[2];if(f)for(var p=0;p<c.length;p++)e.add(c[p],h);else for(var d=c.length-1;d>=0;d--)e.add(c[d],h);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof WN){var g=arguments[0],y=arguments[1],_=arguments[2];if(!_){var v=this.size();if(v>0){if(g>0){var m=this.get(g-1);if(m.equals2D(y))return null}if(g<v){var x=this.get(g);if(x.equals2D(y))return null}}}t.prototype.add.call(this,g,y)}}else if(4===arguments.length){var b=arguments[0],M=arguments[1],w=arguments[2],E=arguments[3],N=1;w>E&&(N=-1);for(var S=w;S!==E;S+=N)e.add(b[S],M);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new WN(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(YS),HS=function(){},QS={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};QS.ForwardComparator.get=function(){return JS},QS.BidirectionalComparator.get=function(){return KS},QS.coordArrayType.get=function(){return new Array(0).fill(null)},HS.prototype.interfaces_=function(){return[]},HS.prototype.getClass=function(){return HS},HS.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},HS.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(HS.indexOf(r,e)<0)return r}return null},HS.scroll=function(t,e){var n=HS.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);hS.arraycopy(t,n,r,0,t.length-n),hS.arraycopy(t,0,r,t.length-n,n),hS.arraycopy(r,0,t,0,t.length)},HS.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],i[a]))return!1;return!0}},HS.intersection=function(t,e){for(var n=new $S,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},HS.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},HS.removeRepeatedPoints=function(t){return HS.hasRepeatedPoints(t)?new $S(t,!1).toCoordinateArray():t},HS.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},HS.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},HS.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new WN(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],u=0;u<s;u++)o[a+u]=new WN(r[i+u])},HS.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},HS.envelope=function(t){for(var e=new pS,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},HS.toCoordinateArray=function(t){return t.toArray(HS.coordArrayType)},HS.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},HS.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},HS.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},HS.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},HS.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},HS.extract=function(t,e,n){e=KN.clamp(e,0,t.length);var r=(n=KN.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=e;a<=n;a++)i[o++]=t[a];return i},Object.defineProperties(HS,QS);var JS=function(){};JS.prototype.compare=function(t,e){return HS.compare(t,e)},JS.prototype.interfaces_=function(){return[UN]},JS.prototype.getClass=function(){return JS};var KS=function(){};KS.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=HS.compare(n,r);return HS.isEqualReversed(n,r)?0:i},KS.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=HS.increasingDirection(n),o=HS.increasingDirection(r),a=i>0?0:n.length-1,s=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[a].compareTo(r[s]);if(0!==l)return l;a+=i,s+=o}return 0},KS.prototype.interfaces_=function(){return[UN]},KS.prototype.getClass=function(){return KS};var ZS=function(){};ZS.prototype.get=function(){},ZS.prototype.put=function(){},ZS.prototype.size=function(){},ZS.prototype.values=function(){},ZS.prototype.entrySet=function(){};var tI=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ZS);function eI(t){this.message=t||""}function nI(){}eI.prototype=new Error,eI.prototype.name="OperationNotSupported",nI.prototype=new jS,nI.prototype.contains=function(){};var rI=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof jS&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){if(this.array_[e]===t)return!0}return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new iI(this)},e}(nI),iI=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new WS;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new eI},e}(US);function oI(t){return null===t?0:t.color}function aI(t){return null===t?null:t.parent}function sI(t,e){null!==t&&(t.color=e)}function uI(t){return null===t?null:t.left}function lI(t){return null===t?null:t.right}function cI(){this.root_=null,this.size_=0}cI.prototype=new tI,cI.prototype.get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},cI.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:n,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},cI.prototype.fixAfterInsertion=function(t){var e=this;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(aI(t)===uI(aI(aI(t)))){var n=lI(aI(aI(t)));1===oI(n)?(sI(aI(t),0),sI(n,0),sI(aI(aI(t)),1),t=aI(aI(t))):(t===lI(aI(t))&&(t=aI(t),e.rotateLeft(t)),sI(aI(t),0),sI(aI(aI(t)),1),e.rotateRight(aI(aI(t))))}else{var r=uI(aI(aI(t)));1===oI(r)?(sI(aI(t),0),sI(r,0),sI(aI(aI(t)),1),t=aI(aI(t))):(t===uI(aI(t))&&(t=aI(t),e.rotateRight(t)),sI(aI(t),0),sI(aI(aI(t)),1),e.rotateLeft(aI(aI(t))))}this.root_.color=0},cI.prototype.values=function(){var t=new YS,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=cI.successor(e));)t.add(e.value);return t},cI.prototype.entrySet=function(){var t=new rI,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=cI.successor(e));)t.add(e);return t},cI.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},cI.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},cI.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},cI.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},cI.prototype.size=function(){return this.size_};var hI=function(){};function fI(){}function pI(){this.array_=[],arguments[0]instanceof jS&&this.addAll(arguments[0])}hI.prototype.interfaces_=function(){return[]},hI.prototype.getClass=function(){return hI},fI.prototype=new nI,pI.prototype=new fI,pI.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){if(0===this.array_[e].compareTo(t))return!0}return!1},pI.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++){if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0}return this.array_.push(t),!0},pI.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},pI.prototype.remove=function(t){throw new eI},pI.prototype.size=function(){return this.array_.length},pI.prototype.isEmpty=function(){return 0===this.array_.length},pI.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},pI.prototype.iterator=function(){return new dI(this)};var dI=function(t){this.treeSet_=t,this.position_=0};dI.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new WS;return this.treeSet_.array_[this.position_++]},dI.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},dI.prototype.remove=function(){throw new eI};var gI=function(){};gI.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},gI.asList=function(t){for(var e=new YS,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var yI=function(){},_I={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};_I.P.get=function(){return 0},_I.L.get=function(){return 1},_I.A.get=function(){return 2},_I.FALSE.get=function(){return-1},_I.TRUE.get=function(){return-2},_I.DONTCARE.get=function(){return-3},_I.SYM_FALSE.get=function(){return"F"},_I.SYM_TRUE.get=function(){return"T"},_I.SYM_DONTCARE.get=function(){return"*"},_I.SYM_P.get=function(){return"0"},_I.SYM_L.get=function(){return"1"},_I.SYM_A.get=function(){return"2"},yI.prototype.interfaces_=function(){return[]},yI.prototype.getClass=function(){return yI},yI.toDimensionSymbol=function(t){switch(t){case yI.FALSE:return yI.SYM_FALSE;case yI.TRUE:return yI.SYM_TRUE;case yI.DONTCARE:return yI.SYM_DONTCARE;case yI.P:return yI.SYM_P;case yI.L:return yI.SYM_L;case yI.A:return yI.SYM_A}throw new zN("Unknown dimension value: "+t)},yI.toDimensionValue=function(t){switch(nS.toUpperCase(t)){case yI.SYM_FALSE:return yI.FALSE;case yI.SYM_TRUE:return yI.TRUE;case yI.SYM_DONTCARE:return yI.DONTCARE;case yI.SYM_P:return yI.P;case yI.SYM_L:return yI.L;case yI.SYM_A:return yI.A}throw new zN("Unknown dimension symbol: "+t)},Object.defineProperties(yI,_I);var vI=function(){};vI.prototype.filter=function(t){},vI.prototype.interfaces_=function(){return[]},vI.prototype.getClass=function(){return vI};var mI=function(){};mI.prototype.filter=function(t,e){},mI.prototype.isDone=function(){},mI.prototype.isGeometryChanged=function(){},mI.prototype.interfaces_=function(){return[]},mI.prototype.getClass=function(){return mI};var xI=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new zN("geometries must not contain null elements")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new pS,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n;if(this._geometries.length!==i._geometries.length)return!1;for(var o=0;o<this._geometries.length;o++)if(!e._geometries[o].equalsExact(i._geometries[o],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();gI.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=yI.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=yI.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=new pI(gI.asList(this._geometries)),r=new pI(gI.asList(e._geometries));return this.compare(n,r)}if(2===arguments.length){for(var i=arguments[0],o=arguments[1],a=i,s=this.getNumGeometries(),u=a.getNumGeometries(),l=0;l<s&&l<u;){var c=t.getGeometryN(l),h=a.getGeometryN(l),f=c.compareToSameClass(h,o);if(0!==f)return f;l++}return l<s?1:l<u?-1:0}},e.prototype.apply=function(){var t=this;if(JN(arguments[0],kS))for(var e=arguments[0],n=0;n<this._geometries.length;n++)t._geometries[n].apply(e);else if(JN(arguments[0],mI)){var r=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(t._geometries[i].apply(r),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else if(JN(arguments[0],vI)){var o=arguments[0];o.filter(this);for(var a=0;a<this._geometries.length;a++)t._geometries[a].apply(o)}else if(JN(arguments[0],PS)){var s=arguments[0];s.filter(this);for(var u=0;u<this._geometries.length;u++)t._geometries[u].apply(s)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),MS.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(LS),bI=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return LS.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?yI.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new MI(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[hI]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(xI),MI=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=RS.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};MI.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},MI.prototype.getBoundary=function(){return this._geom instanceof TI?this.boundaryLineString(this._geom):this._geom instanceof bI?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},MI.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},MI.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},MI.prototype.computeBoundaryCoordinates=function(t){var e=this,n=new YS;this._endpointMap=new cI;for(var r=0;r<t.getNumGeometries();r++){var i=t.getGeometryN(r);0!==i.getNumPoints()&&(e.addEndpoint(i.getCoordinateN(0)),e.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var o=this._endpointMap.entrySet().iterator();o.hasNext();){var a=o.next(),s=a.getValue().count;e._bnRule.isInBoundary(s)&&n.add(a.getKey())}return HS.toCoordinateArray(n)},MI.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new wI,this._endpointMap.put(t,e)),e.count++},MI.prototype.interfaces_=function(){return[]},MI.prototype.getClass=function(){return MI},MI.getBoundary=function(){if(1===arguments.length){var t=arguments[0],e=new MI(t);return e.getBoundary()}if(2===arguments.length){var n=arguments[0],r=arguments[1],i=new MI(n,r);return i.getBoundary()}};var wI=function(){this.count=null};function EI(){}function NI(){}wI.prototype.interfaces_=function(){return[]},wI.prototype.getClass=function(){return wI};var SI=function(){};function II(){}function CI(){}function OI(){}var PI=function(){},LI={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};PI.prototype.interfaces_=function(){return[]},PI.prototype.getClass=function(){return PI},PI.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},PI.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new II,n=new EI;return t.printStackTrace(n),e.toString()}if(2===arguments.length){var r=arguments[0],i=arguments[1],o="";new NI(PI.getStackTrace(r));for(var a=new OI,s=0;s<i;s++)try{o+=a.readLine()+PI.NEWLINE}catch(t){if(!(t instanceof CI))throw t;MS.shouldNeverReachHere()}return o}},PI.split=function(t,e){for(var n=e.length,r=new YS,i=""+t,o=i.indexOf(e);o>=0;){var a=i.substring(0,o);r.add(a),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var s=new Array(r.size()).fill(null),u=0;u<s.length;u++)s[u]=r.get(u);return s},PI.toString=function(){if(1===arguments.length){var t=arguments[0];return PI.SIMPLE_ORDINATE_FORMAT.format(t)}},PI.spaces=function(t){return PI.chars(" ",t)},LI.NEWLINE.get=function(){return hS.getProperty("line.separator")},LI.SIMPLE_ORDINATE_FORMAT.get=function(){return new SI},Object.defineProperties(PI,LI);var AI=function(){};AI.prototype.interfaces_=function(){return[]},AI.prototype.getClass=function(){return AI},AI.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},AI.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&(t.getOrdinate(0,sS.X)===t.getOrdinate(e-1,sS.X)&&t.getOrdinate(0,sS.Y)===t.getOrdinate(e-1,sS.Y))},AI.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(t.getOrdinate(i,o)!==e.getOrdinate(i,o)&&(!GN.isNaN(a)||!GN.isNaN(s)))return!1}return!0},AI.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(AI.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)AI.copy(e,i-1,r,o,1);return r},AI.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)AI.swap(t,r,e-r)},AI.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},AI.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)AI.copyCoord(t,e+o,n,r+o)},AI.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new tS;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(PI.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},AI.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?AI.createClosedRing(t,e,4):e.getOrdinate(0,sS.X)===e.getOrdinate(n-1,sS.X)&&e.getOrdinate(0,sS.Y)===e.getOrdinate(n-1,sS.Y)?e:AI.createClosedRing(t,e,n+1)},AI.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();AI.copy(e,0,r,0,i);for(var o=i;o<n;o++)AI.copy(e,0,r,o,1);return r};var TI=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new pS:this._points.expandEnvelope(new pS)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n;if(this._points.size()!==i._points.size())return!1;for(var o=0;o<this._points.size();o++)if(!e.equal(e._points.getCoordinate(o),i._points.getCoordinate(o),r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=this,e=0;e<Math.trunc(this._points.size()/2);e++){var n=t._points.size()-1-e;if(!t._points.getCoordinate(e).equals(t._points.getCoordinate(n)))return t._points.getCoordinate(e).compareTo(t._points.getCoordinate(n))>0&&AI.reverse(t._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?yI.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return CS.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return AI.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=e,r=0,i=0;r<this._points.size()&&i<n._points.size();){var o=t._points.getCoordinate(r).compareTo(n._points.getCoordinate(i));if(0!==o)return o;r++,i++}return r<this._points.size()?1:i<n._points.size()?-1:0}if(2===arguments.length){var a=arguments[0],s=arguments[1],u=a;return s.compare(this._points,u._points)}},e.prototype.apply=function(){var t=this;if(JN(arguments[0],kS))for(var e=arguments[0],n=0;n<this._points.size();n++)e.filter(t._points.getCoordinate(n));else if(JN(arguments[0],mI)){var r=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(r.filter(t._points,i),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else if(JN(arguments[0],vI)){var o=arguments[0];o.filter(this)}else if(JN(arguments[0],PS)){var a=arguments[0];a.filter(this)}},e.prototype.getBoundary=function(){return new MI(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new zN("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[hI]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(LS),kI=function(){};kI.prototype.interfaces_=function(){return[]},kI.prototype.getClass=function(){return kI};var RI=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new pS;var t=new pS;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return yI.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getCoordinate().compareTo(e.getCoordinate())}if(2===arguments.length){var n=arguments[0],r=arguments[1],i=n;return r.compare(this._coordinates,i._coordinates)}},e.prototype.apply=function(){if(JN(arguments[0],kS)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(JN(arguments[0],mI)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(JN(arguments[0],vI)){var n=arguments[0];n.filter(this)}else if(JN(arguments[0],PS)){var r=arguments[0];r.filter(this)}},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),MS.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[kI]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(LS),DI=function(){};DI.prototype.interfaces_=function(){return[]},DI.prototype.getClass=function(){return DI};var FI=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new zN("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new zN("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(CS.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(CS.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var u=t.getX(s),l=t.getY(s);if(u!==o===(l!==a))return!1;o=u,a=l}return!0},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n,o=this._shell,a=i._shell;if(!o.equalsExact(a,r))return!1;if(this._holes.length!==i._holes.length)return!1;for(var s=0;s<this._holes.length;s++)if(!e._holes[s].equalsExact(i._holes[s],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){var t=this;if(0===arguments.length){this.normalize(this._shell,!0);for(var e=0;e<this._holes.length;e++)t.normalize(t._holes[e],!1);gI.sort(this._holes)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];if(n.isEmpty())return null;var i=new Array(n.getCoordinates().length-1).fill(null);hS.arraycopy(n.getCoordinates(),0,i,0,i.length);var o=HS.minCoordinate(n.getCoordinates());HS.scroll(i,o),hS.arraycopy(i,0,n.getCoordinates(),0,i.length),n.getCoordinates()[i.length]=i[0],CS.isCCW(n.getCoordinates())===r&&HS.reverse(n.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=this._shell,r=e._shell;return n.compareToSameClass(r)}if(2===arguments.length){var i=arguments[0],o=arguments[1],a=i,s=this._shell,u=a._shell,l=s.compareToSameClass(u,o);if(0!==l)return l;for(var c=this.getNumInteriorRing(),h=a.getNumInteriorRing(),f=0;f<c&&f<h;){var p=t.getInteriorRingN(f),d=a.getInteriorRingN(f),g=p.compareToSameClass(d,o);if(0!==g)return g;f++}return f<c?1:f<h?-1:0}},e.prototype.apply=function(t){var e=this;if(JN(t,kS)){this._shell.apply(t);for(var n=0;n<this._holes.length;n++)e._holes[n].apply(t)}else if(JN(t,mI)){if(this._shell.apply(t),!t.isDone())for(var r=0;r<this._holes.length&&(e._holes[r].apply(t),!t.isDone());r++);t.isGeometryChanged()&&this.geometryChanged()}else if(JN(t,vI))t.filter(this);else if(JN(t,PS)){t.filter(this),this._shell.apply(t);for(var i=0;i<this._holes.length;i++)e._holes[i].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[DI]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(LS),zI=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return LS.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return yI.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[kI]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(xI),GI=function(t){function e(e,n){e instanceof WN&&n instanceof eC&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return LS.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return yI.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return AI.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new zN("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new zN("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(TI),qI=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return LS.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new YS,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[DI]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(xI),jI=function(t){this._factory=t||null,this._isUserDataCopied=!1},BI={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};jI.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},jI.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},jI.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof xI?this.editGeometryCollection(t,e):t instanceof FI?this.editPolygon(t,e):t instanceof RI||t instanceof TI?e.edit(t,this._factory):(MS.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},jI.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new YS,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===zI?this._factory.createMultiPoint(r.toArray([])):n.getClass()===bI?this._factory.createMultiLineString(r.toArray([])):n.getClass()===qI?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},jI.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new YS,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(r,i.toArray([]))},jI.prototype.interfaces_=function(){return[]},jI.prototype.getClass=function(){return jI},jI.GeometryEditorOperation=function(){},BI.NoOpGeometryOperation.get=function(){return UI},BI.CoordinateOperation.get=function(){return VI},BI.CoordinateSequenceOperation.get=function(){return WI},Object.defineProperties(jI,BI);var UI=function(){};UI.prototype.edit=function(t,e){return t},UI.prototype.interfaces_=function(){return[jI.GeometryEditorOperation]},UI.prototype.getClass=function(){return UI};var VI=function(){};VI.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof GI?e.createLinearRing(n):t instanceof TI?e.createLineString(n):t instanceof RI?n.length>0?e.createPoint(n[0]):e.createPoint():t},VI.prototype.interfaces_=function(){return[jI.GeometryEditorOperation]},VI.prototype.getClass=function(){return VI};var WI=function(){};WI.prototype.edit=function(t,e){return t instanceof GI?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof TI?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof RI?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},WI.prototype.interfaces_=function(){return[jI.GeometryEditorOperation]},WI.prototype.getClass=function(){return WI};var YI=function(){var t=this;if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)t._coordinates[n]=new WN}else if(JN(arguments[0],sS)){var r=arguments[0];if(null===r)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._coordinates=new Array(r.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)t._coordinates[i]=r.getCoordinateCopy(i)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],a=arguments[1];this._coordinates=o,this._dimension=a,null===o&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],u=arguments[1];this._coordinates=new Array(s).fill(null),this._dimension=u;for(var l=0;l<s;l++)t._coordinates[l]=new WN}},XI={serialVersionUID:{configurable:!0}};YI.prototype.setOrdinate=function(t,e,n){switch(e){case sS.X:this._coordinates[t].x=n;break;case sS.Y:this._coordinates[t].y=n;break;case sS.Z:this._coordinates[t].z=n;break;default:throw new zN("invalid ordinateIndex")}},YI.prototype.size=function(){return this._coordinates.length},YI.prototype.getOrdinate=function(t,e){switch(e){case sS.X:return this._coordinates[t].x;case sS.Y:return this._coordinates[t].y;case sS.Z:return this._coordinates[t].z}return GN.NaN},YI.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},YI.prototype.getCoordinateCopy=function(t){return new WN(this._coordinates[t])},YI.prototype.getDimension=function(){return this._dimension},YI.prototype.getX=function(t){return this._coordinates[t].x},YI.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new YI(t,this._dimension)},YI.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},YI.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new YI(t,this._dimension)},YI.prototype.toString=function(){if(this._coordinates.length>0){var t=new tS(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},YI.prototype.getY=function(t){return this._coordinates[t].y},YI.prototype.toCoordinateArray=function(){return this._coordinates},YI.prototype.interfaces_=function(){return[sS,VN]},YI.prototype.getClass=function(){return YI},XI.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(YI,XI);var $I=function(){},HI={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};$I.prototype.readResolve=function(){return $I.instance()},$I.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new YI(t)}if(JN(arguments[0],sS)){var e=arguments[0];return new YI(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return r>3&&(r=3),r<2?new YI(n):new YI(n,r)}},$I.prototype.interfaces_=function(){return[$N,VN]},$I.prototype.getClass=function(){return $I},$I.instance=function(){return $I.instanceObject},HI.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},HI.instanceObject.get=function(){return new $I},Object.defineProperties($I,HI);var QI=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new YS,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new rI;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(ZS),JI=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ZI){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},KI={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};JI.prototype.equals=function(t){if(!(t instanceof JI))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},JI.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new eS(n).compareTo(new eS(r))},JI.prototype.getScale=function(){return this._scale},JI.prototype.isFloating=function(){return this._modelType===JI.FLOATING||this._modelType===JI.FLOATING_SINGLE},JI.prototype.getType=function(){return this._modelType},JI.prototype.toString=function(){var t="UNKNOWN";return this._modelType===JI.FLOATING?t="Floating":this._modelType===JI.FLOATING_SINGLE?t="Floating-Single":this._modelType===JI.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},JI.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];if(GN.isNaN(t))return t;if(this._modelType===JI.FLOATING_SINGLE){return t}return this._modelType===JI.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof WN){var e=arguments[0];if(this._modelType===JI.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},JI.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===JI.FLOATING?t=16:this._modelType===JI.FLOATING_SINGLE?t=6:this._modelType===JI.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},JI.prototype.setScale=function(t){this._scale=Math.abs(t)},JI.prototype.interfaces_=function(){return[VN,jN]},JI.prototype.getClass=function(){return JI},JI.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},KI.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},KI.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(JI,KI);var ZI=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},tC={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};ZI.prototype.readResolve=function(){return ZI.nameToTypeMap.get(this._name)},ZI.prototype.toString=function(){return this._name},ZI.prototype.interfaces_=function(){return[VN]},ZI.prototype.getClass=function(){return ZI},tC.serialVersionUID.get=function(){return-552860263173159e4},tC.nameToTypeMap.get=function(){return new QI},Object.defineProperties(ZI,tC),JI.Type=ZI,JI.FIXED=new ZI("FIXED"),JI.FLOATING=new ZI("FLOATING"),JI.FLOATING_SINGLE=new ZI("FLOATING SINGLE");var eC=function t(){this._precisionModel=new JI,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?JN(arguments[0],$N)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof JI&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},nC={serialVersionUID:{configurable:!0}};eC.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new WN(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new WN(t.getMinX(),t.getMinY()),new WN(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new WN(t.getMinX(),t.getMinY()),new WN(t.getMinX(),t.getMaxY()),new WN(t.getMaxX(),t.getMaxY()),new WN(t.getMaxX(),t.getMinY()),new WN(t.getMinX(),t.getMinY())]),null)},eC.prototype.createLineString=function(t){return t?t instanceof Array?new TI(this.getCoordinateSequenceFactory().create(t),this):JN(t,sS)?new TI(t,this):void 0:new TI(this.getCoordinateSequenceFactory().create([]),this)},eC.prototype.createMultiLineString=function(){if(0===arguments.length)return new bI(null,this);if(1===arguments.length){var t=arguments[0];return new bI(t,this)}},eC.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(eC.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof FI)return this.createMultiPolygon(eC.toPolygonArray(t));if(s instanceof TI)return this.createMultiLineString(eC.toLineStringArray(t));if(s instanceof RI)return this.createMultiPoint(eC.toPointArray(t));MS.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},eC.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},eC.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof WN){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(JN(arguments[0],sS)){var e=arguments[0];return new RI(e,this)}}},eC.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},eC.prototype.createPolygon=function(){if(0===arguments.length)return new FI(null,null,this);if(1===arguments.length){if(JN(arguments[0],sS)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof GI){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];return new FI(r,i,this)}},eC.prototype.getSRID=function(){return this._SRID},eC.prototype.createGeometryCollection=function(){if(0===arguments.length)return new xI(null,this);if(1===arguments.length){var t=arguments[0];return new xI(t,this)}},eC.prototype.createGeometry=function(t){return new jI(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},eC.prototype.getPrecisionModel=function(){return this._precisionModel},eC.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(JN(arguments[0],sS)){var e=arguments[0];return new GI(e,this)}}},eC.prototype.createMultiPolygon=function(){if(0===arguments.length)return new qI(null,this);if(1===arguments.length){var t=arguments[0];return new qI(t,this)}},eC.prototype.createMultiPoint=function(){var t=this;if(0===arguments.length)return new zI(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];return new zI(e,this)}if(arguments[0]instanceof Array){var n=arguments[0];return this.createMultiPoint(null!==n?this.getCoordinateSequenceFactory().create(n):null)}if(JN(arguments[0],sS)){var r=arguments[0];if(null===r)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(r.size()).fill(null),o=0;o<r.size();o++){var a=t.getCoordinateSequenceFactory().create(1,r.getDimension());AI.copy(r,o,a,0,1),i[o]=t.createPoint(a)}return this.createMultiPoint(i)}}},eC.prototype.interfaces_=function(){return[VN]},eC.prototype.getClass=function(){return eC},eC.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},eC.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},eC.getDefaultCoordinateSequenceFactory=function(){return $I.instance()},eC.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},eC.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},eC.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},eC.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},eC.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},eC.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},eC.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},nC.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(eC,nC);var rC=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],iC=function(t){this.geometryFactory=t||new eC};iC.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!oC[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==rC.indexOf(n)?oC[n].apply(this,[e.coordinates]):"GeometryCollection"===n?oC[n].apply(this,[e.geometries]):oC[n].apply(this,[e])},iC.prototype.write=function(t){var e=t.getGeometryType();if(!aC[e])throw new Error("Geometry is not supported");return aC[e].apply(this,[t])};var oC={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!oC[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=oC.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new WN(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new WN(t[0],t[1]),new WN(t[2],t[1]),new WN(t[2],t[3]),new WN(t[0],t[3]),new WN(t[0],t[1])])},Point:function(t){var e=new WN(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(oC.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=oC.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(oC.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=oC.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],a=oC.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(oC.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},aC={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:aC.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=aC.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(aC.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=aC.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=aC.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=aC.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=aC.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(aC[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},sC=function(t){this.geometryFactory=t||new eC,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new iC(this.geometryFactory)};sC.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===JI.FIXED&&this.reducePrecision(e),e},sC.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var uC=function(){this.parser=new iC(this.geometryFactory)};uC.prototype.write=function(t){return this.parser.write(t)};var lC=function(){},cC={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};function hC(t){this.message=t||""}function fC(){this.array_=[]}lC.prototype.interfaces_=function(){return[]},lC.prototype.getClass=function(){return lC},lC.opposite=function(t){return t===lC.LEFT?lC.RIGHT:t===lC.RIGHT?lC.LEFT:t},cC.ON.get=function(){return 0},cC.LEFT.get=function(){return 1},cC.RIGHT.get=function(){return 2},Object.defineProperties(lC,cC),hC.prototype=new Error,hC.prototype.name="EmptyStackException",fC.prototype=new VS,fC.prototype.add=function(t){return this.array_.push(t),!0},fC.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},fC.prototype.push=function(t){return this.array_.push(t),t},fC.prototype.pop=function(t){if(0===this.array_.length)throw new hC;return this.array_.pop()},fC.prototype.peek=function(){if(0===this.array_.length)throw new hC;return this.array_[this.array_.length-1]},fC.prototype.empty=function(){return 0===this.array_.length},fC.prototype.isEmpty=function(){return this.empty()},fC.prototype.search=function(t){return this.array_.indexOf(t)},fC.prototype.size=function(){return this.array_.length},fC.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var pC=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};pC.prototype.getCoordinate=function(){return this._minCoord},pC.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},pC.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();MS.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=CS.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===CS.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===CS.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},pC.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=lC.LEFT;return n[e].y<n[e+1].y&&(r=lC.RIGHT),r},pC.prototype.getEdge=function(){return this._orientedDe},pC.prototype.checkForRightmostCoordinate=function(t){for(var e=this,n=t.getEdge().getCoordinates(),r=0;r<n.length-1;r++)(null===e._minCoord||n[r].x>e._minCoord.x)&&(e._minDe=t,e._minIndex=r,e._minCoord=n[r])},pC.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},pC.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}MS.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===lC.LEFT&&(this._orientedDe=this._minDe.getSym())},pC.prototype.interfaces_=function(){return[]},pC.prototype.getClass=function(){return pC};var dC=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new WN(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(xS),gC=function(){this.array_=[]};gC.prototype.addLast=function(t){this.array_.push(t)},gC.prototype.removeFirst=function(){return this.array_.shift()},gC.prototype.isEmpty=function(){return 0===this.array_.length};var yC=function(){this._finder=null,this._dirEdgeList=new YS,this._nodes=new YS,this._rightMostCoord=null,this._env=null,this._finder=new pC};yC.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){t.next().setVisited(!1)}},yC.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},yC.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new dC("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},yC.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(lC.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},yC.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},yC.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(lC.RIGHT)>=1&&e.getDepth(lC.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},yC.prototype.computeDepths=function(t){var e=new rI,n=new gC,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},yC.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},yC.prototype.getEnvelope=function(){if(null===this._env){for(var t=new pS,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},yC.prototype.addReachable=function(t){var e=new fC;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},yC.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(lC.LEFT,t.getDepth(lC.RIGHT)),e.setDepth(lC.RIGHT,t.getDepth(lC.LEFT))},yC.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},yC.prototype.getNodes=function(){return this._nodes},yC.prototype.getDirectedEdges=function(){return this._dirEdgeList},yC.prototype.interfaces_=function(){return[jN]},yC.prototype.getClass=function(){return yC};var _C=function t(){var e=this;if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var n=arguments[0];this.init(n.length)}else if(Number.isInteger(arguments[0])){var r=arguments[0];this.init(1),this.location[lC.ON]=r}else if(arguments[0]instanceof t){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var o=0;o<this.location.length;o++)e.location[o]=i.location[o]}}else if(3===arguments.length){var a=arguments[0],s=arguments[1],u=arguments[2];this.init(3),this.location[lC.ON]=a,this.location[lC.LEFT]=s,this.location[lC.RIGHT]=u}};_C.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},_C.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==HN.NONE)return!1;return!0},_C.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===HN.NONE&&(this.location[e]=t)},_C.prototype.isLine=function(){return 1===this.location.length},_C.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[lC.ON]=this.location[lC.ON],e[lC.LEFT]=HN.NONE,e[lC.RIGHT]=HN.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===HN.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},_C.prototype.getLocations=function(){return this.location},_C.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[lC.LEFT];this.location[lC.LEFT]=this.location[lC.RIGHT],this.location[lC.RIGHT]=t},_C.prototype.toString=function(){var t=new tS;return this.location.length>1&&t.append(HN.toLocationSymbol(this.location[lC.LEFT])),t.append(HN.toLocationSymbol(this.location[lC.ON])),this.location.length>1&&t.append(HN.toLocationSymbol(this.location[lC.RIGHT])),t.toString()},_C.prototype.setLocations=function(t,e,n){this.location[lC.ON]=t,this.location[lC.LEFT]=e,this.location[lC.RIGHT]=n},_C.prototype.get=function(t){return t<this.location.length?this.location[t]:HN.NONE},_C.prototype.isArea=function(){return this.location.length>1},_C.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===HN.NONE)return!0;return!1},_C.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(lC.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},_C.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(HN.NONE)},_C.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},_C.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},_C.prototype.interfaces_=function(){return[]},_C.prototype.getClass=function(){return _C};var vC=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new _C(e),this.elt[1]=new _C(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new _C(n.elt[0]),this.elt[1]=new _C(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new _C(HN.NONE),this.elt[1]=new _C(HN.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new _C(o,a,s),this.elt[1]=new _C(o,a,s)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new _C(HN.NONE,HN.NONE,HN.NONE),this.elt[1]=new _C(HN.NONE,HN.NONE,HN.NONE),this.elt[u].setLocations(l,c,h)}};vC.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},vC.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},vC.prototype.isNull=function(t){return this.elt[t].isNull()},vC.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},vC.prototype.isLine=function(t){return this.elt[t].isLine()},vC.prototype.merge=function(t){for(var e=this,n=0;n<2;n++)null===e.elt[n]&&null!==t.elt[n]?e.elt[n]=new _C(t.elt[n]):e.elt[n].merge(t.elt[n])},vC.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},vC.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(lC.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},vC.prototype.toString=function(){var t=new tS;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},vC.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},vC.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},vC.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(lC.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},vC.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},vC.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},vC.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new _C(this.elt[t].location[0]))},vC.prototype.interfaces_=function(){return[]},vC.prototype.getClass=function(){return vC},vC.toLineLabel=function(t){for(var e=new vC(HN.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var mC=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new YS,this._pts=new YS,this._label=new vC(HN.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new YS,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};mC.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=CS.isCCW(this._ring.getCoordinates())},mC.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},mC.prototype.computePoints=function(t){var e=this;this._startDe=t;var n=t,r=!0;do{if(null===n)throw new dC("Found null DirectedEdge");if(n.getEdgeRing()===e)throw new dC("Directed Edge visited twice during ring-building at "+n.getCoordinate());e._edges.add(n);var i=n.getLabel();MS.isTrue(i.isArea()),e.mergeLabel(i),e.addPoints(n.getEdge(),n.isForward(),r),r=!1,e.setEdgeRing(n,e),n=e.getNext(n)}while(n!==this._startDe)},mC.prototype.getLinearRing=function(){return this._ring},mC.prototype.getCoordinate=function(t){return this._pts.get(t)},mC.prototype.computeMaxNodeDegree=function(){var t=this;this._maxNodeDegree=0;var e=this._startDe;do{var n=e.getNode().getEdges().getOutgoingDegree(t);n>t._maxNodeDegree&&(t._maxNodeDegree=n),e=t.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2},mC.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;n&&(a=r.length-1);for(var s=a;s>=0;s--)this._pts.add(r[s])}},mC.prototype.isHole=function(){return this._isHole},mC.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},mC.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!CS.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();){if(n.next().containsPoint(t))return!1}return!0},mC.prototype.addHole=function(t){this._holes.add(t)},mC.prototype.isShell=function(){return null===this._shell},mC.prototype.getLabel=function(){return this._label},mC.prototype.getEdges=function(){return this._edges},mC.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},mC.prototype.getShell=function(){return this._shell},mC.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=e.getLocation(n,lC.RIGHT);if(r===HN.NONE)return null;if(this._label.getLocation(n)===HN.NONE)return this._label.setLocation(n,r),null}},mC.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},mC.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},mC.prototype.interfaces_=function(){return[]},mC.prototype.getClass=function(){return mC};var xC=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(mC),bC=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new YS,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new xC(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(mC),MC=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};MC.prototype.setVisited=function(t){this._isVisited=t},MC.prototype.setInResult=function(t){this._isInResult=t},MC.prototype.isCovered=function(){return this._isCovered},MC.prototype.isCoveredSet=function(){return this._isCoveredSet},MC.prototype.setLabel=function(t){this._label=t},MC.prototype.getLabel=function(){return this._label},MC.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},MC.prototype.updateIM=function(t){MS.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},MC.prototype.isInResult=function(){return this._isInResult},MC.prototype.isVisited=function(){return this._isVisited},MC.prototype.interfaces_=function(){return[]},MC.prototype.getClass=function(){return MC};var wC=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new vC(0,HN.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){if(t.next().getEdge().isInResult())return!0}return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=HN.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==HN.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new vC(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){var t=this;if(arguments[0]instanceof e){var n=arguments[0];this.mergeLabel(n._label)}else if(arguments[0]instanceof vC)for(var r=arguments[0],i=0;i<2;i++){var o=t.computeMergedLocation(r,i),a=t._label.getLocation(i);a===HN.NONE&&t._label.setLocation(i,o)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=HN.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;if(e===HN.BOUNDARY)n=HN.INTERIOR;else n=HN.BOUNDARY;this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(MC),EC=function(){this.nodeMap=new cI,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};EC.prototype.find=function(t){return this.nodeMap.get(t)},EC.prototype.addNode=function(){if(arguments[0]instanceof WN){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof wC){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},EC.prototype.print=function(t){for(var e=this.iterator();e.hasNext();){e.next().print(t)}},EC.prototype.iterator=function(){return this.nodeMap.values().iterator()},EC.prototype.values=function(){return this.nodeMap.values()},EC.prototype.getBoundaryNodes=function(t){for(var e=new YS,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===HN.BOUNDARY&&e.add(r)}return e},EC.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},EC.prototype.interfaces_=function(){return[]},EC.prototype.getClass=function(){return EC};var NC=function(){},SC={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};NC.prototype.interfaces_=function(){return[]},NC.prototype.getClass=function(){return NC},NC.isNorthern=function(t){return t===NC.NE||t===NC.NW},NC.isOpposite=function(t,e){return t!==e&&2===(t-e+4)%4},NC.commonHalfPlane=function(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},NC.isInHalfPlane=function(t,e){return e===NC.SE?t===NC.SE||t===NC.SW:t===e||t===e+1},NC.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new zN("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?NC.NE:NC.SE:e>=0?NC.NW:NC.SW}if(arguments[0]instanceof WN&&arguments[1]instanceof WN){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new zN("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?NC.NE:NC.SE:r.y>=n.y?NC.NW:NC.SW}},SC.NE.get=function(){return 0},SC.NW.get=function(){return 1},SC.SW.get=function(){return 2},SC.SE.get=function(){return 3},Object.defineProperties(NC,SC);var IC=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=null;this._edge=e,this.init(n,r),this._label=i}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3];this._edge=o,this.init(a,s),this._label=u}};IC.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:CS.computeOrientation(t._p0,t._p1,this._p1)},IC.prototype.getDy=function(){return this._dy},IC.prototype.getCoordinate=function(){return this._p0},IC.prototype.setNode=function(t){this._node=t},IC.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},IC.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},IC.prototype.getDirectedCoordinate=function(){return this._p1},IC.prototype.getDx=function(){return this._dx},IC.prototype.getLabel=function(){return this._label},IC.prototype.getEdge=function(){return this._edge},IC.prototype.getQuadrant=function(){return this._quadrant},IC.prototype.getNode=function(){return this._node},IC.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},IC.prototype.computeLabel=function(t){},IC.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=NC.quadrant(this._dx,this._dy),MS.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},IC.prototype.interfaces_=function(){return[jN]},IC.prototype.getClass=function(){return IC};var CC=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new vC(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new dC("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=this,e=!0,n=0;n<2;n++)t._label.isArea(n)&&t._label.getLocation(n,lC.LEFT)===HN.INTERIOR&&t._label.getLocation(n,lC.RIGHT)===HN.INTERIOR||(e=!1);return e},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[lC.LEFT]+"/"+this._depth[lC.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,HN.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,HN.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===lC.LEFT&&(r=-1);var i=lC.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===HN.EXTERIOR&&e===HN.INTERIOR?1:t===HN.INTERIOR&&e===HN.EXTERIOR?-1:0},e}(IC),OC=function(){};OC.prototype.createNode=function(t){return new wC(t,null)},OC.prototype.interfaces_=function(){return[]},OC.prototype.getClass=function(){return OC};var PC=function(){if(this._edges=new YS,this._nodes=null,this._edgeEndList=new YS,0===arguments.length)this._nodes=new EC(new OC);else if(1===arguments.length){var t=arguments[0];this._nodes=new EC(t)}};PC.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},PC.prototype.find=function(t){return this._nodes.find(t)},PC.prototype.addNode=function(){if(arguments[0]instanceof wC){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof WN){var e=arguments[0];return this._nodes.addNode(e)}},PC.prototype.getNodeIterator=function(){return this._nodes.iterator()},PC.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkResultDirectedEdges()}},PC.prototype.debugPrintln=function(t){hS.out.println(t)},PC.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===HN.BOUNDARY},PC.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkAllDirectedEdges()}},PC.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&(CS.computeOrientation(t,e,r)===CS.COLLINEAR&&NC.quadrant(t,e)===NC.quadrant(n,r))},PC.prototype.getEdgeEnds=function(){return this._edgeEndList},PC.prototype.debugPrint=function(t){hS.out.print(t)},PC.prototype.getEdgeIterator=function(){return this._edges.iterator()},PC.prototype.findEdgeInSameDirection=function(t,e){for(var n=this,r=0;r<this._edges.size();r++){var i=n._edges.get(r),o=i.getCoordinates();if(n.matchInSameDirection(t,e,o[0],o[1]))return i;if(n.matchInSameDirection(t,e,o[o.length-1],o[o.length-2]))return i}return null},PC.prototype.insertEdge=function(t){this._edges.add(t)},PC.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},PC.prototype.addEdges=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next();e._edges.add(r);var i=new CC(r,!0),o=new CC(r,!1);i.setSym(o),o.setSym(i),e.add(i),e.add(o)}},PC.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},PC.prototype.getNodes=function(){return this._nodes.values()},PC.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},PC.prototype.interfaces_=function(){return[]},PC.prototype.getClass=function(){return PC},PC.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();){e.next().getEdges().linkResultDirectedEdges()}};var LC=function(){this._geometryFactory=null,this._shellList=new YS;var t=arguments[0];this._geometryFactory=t};LC.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},LC.prototype.computePolygons=function(t){for(var e=new YS,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},LC.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new dC("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},LC.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new YS,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else r.add(o)}return r},LC.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();){if(e.next().containsPoint(t))return!0}return!1},LC.prototype.buildMaximalEdgeRings=function(t){for(var e=new YS,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new bC(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},LC.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},LC.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},LC.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var u=s.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(r)&&CS.isPointInRing(i,l.getCoordinates())&&(h=!0),h&&(null===o||a.contains(c))&&(o=u)}return o},LC.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return MS.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},LC.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];PC.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new YS,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},LC.prototype.interfaces_=function(){return[]},LC.prototype.getClass=function(){return LC};var AC=function(){};AC.prototype.getBounds=function(){},AC.prototype.interfaces_=function(){return[]},AC.prototype.getClass=function(){return AC};var TC=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};TC.prototype.getItem=function(){return this._item},TC.prototype.getBounds=function(){return this._bounds},TC.prototype.interfaces_=function(){return[AC,VN]},TC.prototype.getClass=function(){return TC};var kC=function(){this._size=null,this._items=null,this._size=0,this._items=new YS,this._items.add(null)};kC.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},kC.prototype.size=function(){return this._size},kC.prototype.reorder=function(t){for(var e=this,n=null,r=this._items.get(t);2*t<=this._size&&((n=2*t)!==e._size&&e._items.get(n+1).compareTo(e._items.get(n))<0&&n++,e._items.get(n).compareTo(r)<0);t=n)e._items.set(t,e._items.get(n));this._items.set(t,r)},kC.prototype.clear=function(){this._size=0,this._items.clear()},kC.prototype.isEmpty=function(){return 0===this._size},kC.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},kC.prototype.interfaces_=function(){return[]},kC.prototype.getClass=function(){return kC};var RC=function(){};RC.prototype.visitItem=function(t){},RC.prototype.interfaces_=function(){return[]},RC.prototype.getClass=function(){return RC};var DC=function(){};DC.prototype.insert=function(t,e){},DC.prototype.remove=function(t,e){},DC.prototype.query=function(){},DC.prototype.interfaces_=function(){return[]},DC.prototype.getClass=function(){return DC};var FC=function(){if(this._childBoundables=new YS,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},zC={serialVersionUID:{configurable:!0}};FC.prototype.getLevel=function(){return this._level},FC.prototype.size=function(){return this._childBoundables.size()},FC.prototype.getChildBoundables=function(){return this._childBoundables},FC.prototype.addChildBoundable=function(t){MS.isTrue(null===this._bounds),this._childBoundables.add(t)},FC.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},FC.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},FC.prototype.interfaces_=function(){return[AC,VN]},FC.prototype.getClass=function(){return FC},zC.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(FC,zC);var GC=function(){};GC.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},GC.min=function(t){return GC.sort(t),t.get(0)},GC.sort=function(t,e){var n=t.toArray();e?gI.sort(n,e):gI.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},GC.singletonList=function(t){var e=new YS;return e.add(t),e};var qC=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};qC.prototype.expandToQueue=function(t,e){var n=qC.isComposite(this._boundable1),r=qC.isComposite(this._boundable2);if(n&&r)return qC.area(this._boundable1)>qC.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new zN("neither boundable is composite")},qC.prototype.isLeaves=function(){return!(qC.isComposite(this._boundable1)||qC.isComposite(this._boundable2))},qC.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},qC.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new qC(o,e,this._itemDistance);a.getDistance()<r&&n.add(a)}},qC.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},qC.prototype.getDistance=function(){return this._distance},qC.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},qC.prototype.interfaces_=function(){return[jN]},qC.prototype.getClass=function(){return qC},qC.area=function(t){return t.getBounds().getArea()},qC.isComposite=function(t){return t instanceof FC};var jC=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new YS,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];MS.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},BC={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};jC.prototype.getNodeCapacity=function(){return this._nodeCapacity},jC.prototype.lastNode=function(t){return t.get(t.size()-1)},jC.prototype.size=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var e=arguments[0],n=0,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof FC?n+=t.size(i):i instanceof TC&&(n+=1)}return n}},jC.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof TC&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},jC.prototype.itemsTree=function(){var t=this;if(0===arguments.length){this.build();var e=this.itemsTree(this._root);return null===e?new YS:e}if(1===arguments.length){for(var n=arguments[0],r=new YS,i=n.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof FC){var a=t.itemsTree(o);null!==a&&r.add(a)}else o instanceof TC?r.add(o.getItem()):MS.shouldNeverReachHere()}return r.size()<=0?null:r}},jC.prototype.insert=function(t,e){MS.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new TC(t,e))},jC.prototype.boundablesAtLevel=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=new YS;return this.boundablesAtLevel(e,this._root,n),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(MS.isTrue(r>-2),i.getLevel()===r)return o.add(i),null;for(var a=i.getChildBoundables().iterator();a.hasNext();){var s=a.next();s instanceof FC?t.boundablesAtLevel(r,s,o):(MS.isTrue(s instanceof TC),-1===r&&o.add(s))}return null}},jC.prototype.query=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.build();var n=new YS;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.query(e,this._root,n),n}if(2===arguments.length){var r=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,i)}else if(3===arguments.length)if(JN(arguments[2],RC)&&arguments[0]instanceof Object&&arguments[1]instanceof FC)for(var o=arguments[0],a=arguments[1],s=arguments[2],u=a.getChildBoundables(),l=0;l<u.size();l++){var c=u.get(l);t.getIntersectsOp().intersects(c.getBounds(),o)&&(c instanceof FC?t.query(o,c,s):c instanceof TC?s.visitItem(c.getItem()):MS.shouldNeverReachHere())}else if(JN(arguments[2],VS)&&arguments[0]instanceof Object&&arguments[1]instanceof FC)for(var h=arguments[0],f=arguments[1],p=arguments[2],d=f.getChildBoundables(),g=0;g<d.size();g++){var y=d.get(g);t.getIntersectsOp().intersects(y.getBounds(),h)&&(y instanceof FC?t.query(h,y,p):y instanceof TC?p.add(y.getItem()):MS.shouldNeverReachHere())}},jC.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},jC.prototype.getRoot=function(){return this.build(),this._root},jC.prototype.remove=function(){var t=this;if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.remove(e,this._root,n)}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=this.removeItem(i,o);if(a)return!0;for(var s=null,u=i.getChildBoundables().iterator();u.hasNext();){var l=u.next();if(t.getIntersectsOp().intersects(l.getBounds(),r)&&(l instanceof FC&&(a=t.remove(r,l,o)))){s=l;break}}return null!==s&&s.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(s),a}},jC.prototype.createHigherLevels=function(t,e){MS.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},jC.prototype.depth=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var e=arguments[0],n=0,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof FC){var o=t.depth(i);o>n&&(n=o)}}return n+1}},jC.prototype.createParentBoundables=function(t,e){var n=this;MS.isTrue(!t.isEmpty());var r=new YS;r.add(this.createNode(e));var i=new YS(t);GC.sort(i,this.getComparator());for(var o=i.iterator();o.hasNext();){var a=o.next();n.lastNode(r).getChildBoundables().size()===n.getNodeCapacity()&&r.add(n.createNode(e)),n.lastNode(r).addChildBoundable(a)}return r},jC.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},jC.prototype.interfaces_=function(){return[VN]},jC.prototype.getClass=function(){return jC},jC.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},BC.IntersectsOp.get=function(){return UC},BC.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},BC.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(jC,BC);var UC=function(){},VC=function(){};VC.prototype.distance=function(t,e){},VC.prototype.interfaces_=function(){return[]},VC.prototype.getClass=function(){return VC};var WC=function(t){function e(n){n=n||e.DEFAULT_NODE_CAPACITY,t.call(this,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){MS.isTrue(t.length>0);for(var n=new YS,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},e.prototype.createNode=function(t){return new YC(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new YS;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(JN(arguments[2],RC)&&arguments[0]instanceof Object&&arguments[1]instanceof FC){var i=arguments[0],o=arguments[1],a=arguments[2];t.prototype.query.call(this,i,o,a)}else if(JN(arguments[2],VS)&&arguments[0]instanceof Object&&arguments[1]instanceof FC){var s=arguments[0],u=arguments[1],l=arguments[2];t.prototype.query.call(this,s,u,l)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){MS.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new YS(t);GC.sort(i,e.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(JN(arguments[0],VC)){var t=arguments[0],n=new qC(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof qC){var r=arguments[0];return this.nearestNeighbour(r,GN.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&JN(arguments[1],VC)){var i=arguments[0],o=arguments[1],a=new qC(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof qC&&"number"==typeof arguments[1]){var s=arguments[0],u=arguments[1],l=u,c=null,h=new kC;for(h.add(s);!h.isEmpty()&&l>0;){var f=h.poll(),p=f.getDistance();if(p>=l)break;f.isLeaves()?(l=p,c=f):f.expandToQueue(h,l)}return[c.getBoundable(0).getItem(),c.getBoundable(1).getItem()]}}else if(3===arguments.length){var d=arguments[0],g=arguments[1],y=arguments[2],_=new TC(d,g),v=new qC(this.getRoot(),_,y);return this.nearestNeighbour(v)[0]}},e.prototype.interfaces_=function(){return[DC,VN]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return YC},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[UN]},compare:function(n,r){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(r.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[UN]},compare:function(n,r){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(r.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(jC),YC=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new pS(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(FC),XC=function(){};XC.prototype.interfaces_=function(){return[]},XC.prototype.getClass=function(){return XC},XC.relativeSign=function(t,e){return t<e?-1:t>e?1:0},XC.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=XC.relativeSign(e.x,n.x),i=XC.relativeSign(e.y,n.y);switch(t){case 0:return XC.compareValue(r,i);case 1:return XC.compareValue(i,r);case 2:return XC.compareValue(i,-r);case 3:return XC.compareValue(-r,i);case 4:return XC.compareValue(-r,-i);case 5:return XC.compareValue(-i,-r);case 6:return XC.compareValue(-i,r);case 7:return XC.compareValue(r,-i)}return MS.shouldNeverReachHere("invalid octant value"),0},XC.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var $C=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new WN(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};$C.prototype.getCoordinate=function(){return this.coord},$C.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},$C.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:XC.compare(this._segmentOctant,this.coord,e.coord)},$C.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},$C.prototype.isInterior=function(){return this._isInterior},$C.prototype.interfaces_=function(){return[jN]},$C.prototype.getClass=function(){return $C};var HC=function(){this._nodeMap=new cI,this._edge=null;var t=arguments[0];this._edge=t};HC.prototype.getSplitCoordinates=function(){var t=new $S;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},HC.prototype.addCollapsedNodes=function(){var t=new YS;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},HC.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){e.next().print(t)}},HC.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new eS(e+1))}},HC.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new WN(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new WN(e.coord))},HC.prototype.iterator=function(){return this._nodeMap.values().iterator()},HC.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},HC.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},HC.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new eS(e[0])),r=i}},HC.prototype.getEdge=function(){return this._edge},HC.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},HC.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new WN(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new WN(e.coord)),new ZC(o,this._edge.getData())},HC.prototype.add=function(t,e){var n=new $C(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(MS.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},HC.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new xS("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new xS("bad split edge end point at "+i)},HC.prototype.interfaces_=function(){return[]},HC.prototype.getClass=function(){return HC};var QC=function(){};QC.prototype.interfaces_=function(){return[]},QC.prototype.getClass=function(){return QC},QC.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new zN("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof WN&&arguments[1]instanceof WN){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new zN("Cannot compute the octant for two identical points "+i);return QC.octant(a,s)}};var JC=function(){};JC.prototype.getCoordinates=function(){},JC.prototype.size=function(){},JC.prototype.getCoordinate=function(t){},JC.prototype.isClosed=function(){},JC.prototype.setData=function(t){},JC.prototype.getData=function(){},JC.prototype.interfaces_=function(){return[]},JC.prototype.getClass=function(){return JC};var KC=function(){};KC.prototype.addIntersection=function(t,e){},KC.prototype.interfaces_=function(){return[JC]},KC.prototype.getClass=function(){return KC};var ZC=function(){this._nodeList=new HC(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};ZC.prototype.getCoordinates=function(){return this._pts},ZC.prototype.size=function(){return this._pts.length},ZC.prototype.getCoordinate=function(t){return this._pts[t]},ZC.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},ZC.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},ZC.prototype.setData=function(t){this._data=t},ZC.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:QC.octant(t,e)},ZC.prototype.getData=function(){return this._data},ZC.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[3],o=new WN(n.getIntersection(i));this.addIntersection(o,r)}},ZC.prototype.toString=function(){return mS.toLineString(new YI(this._pts))},ZC.prototype.getNodeList=function(){return this._nodeList},ZC.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},ZC.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},ZC.prototype.interfaces_=function(){return[KC]},ZC.prototype.getClass=function(){return ZC},ZC.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new YS;return ZC.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();o.getNodeList().addSplitEdges(r)}};var tO=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new WN,this.p1=new WN;else if(1===arguments.length){var t=arguments[0];this.p0=new WN(t.p0),this.p1=new WN(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new WN(e,n),this.p1=new WN(r,i)}},eO={serialVersionUID:{configurable:!0}};tO.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},tO.prototype.orientationIndex=function(){if(arguments[0]instanceof tO){var t=arguments[0],e=CS.orientationIndex(this.p0,this.p1,t.p0),n=CS.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof WN){var r=arguments[0];return CS.orientationIndex(this.p0,this.p1,r)}},tO.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},tO.prototype.isVertical=function(){return this.p0.x===this.p1.x},tO.prototype.equals=function(t){if(!(t instanceof tO))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},tO.prototype.intersection=function(t){var e=new NS;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},tO.prototype.project=function(){if(arguments[0]instanceof WN){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new WN(t);var e=this.projectionFactor(t),n=new WN;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof tO){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var a=this.project(r.p0);i<0&&(a=this.p0),i>1&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new tO(a,s)}},tO.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},tO.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},tO.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},tO.prototype.distancePerpendicular=function(t){return CS.distancePointLinePerpendicular(t,this.p0,this.p1)},tO.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},tO.prototype.midPoint=function(){return tO.midPoint(this.p0,this.p1)},tO.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?GN.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},tO.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=GN.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(i=a.distance(t.p1))<r&&(r=i,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},tO.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},tO.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},tO.prototype.getLength=function(){return this.p0.distance(this.p1)},tO.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},tO.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},tO.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},tO.prototype.lineIntersection=function(t){try{return fS.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof cS))throw t}return null},tO.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},tO.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,u=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*i/a,u=e*o/a}return new WN(n-u,r+s)},tO.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},tO.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||GN.isNaN(e))&&(e=1),e},tO.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},tO.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},tO.prototype.distance=function(){if(arguments[0]instanceof tO){var t=arguments[0];return CS.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof WN){var e=arguments[0];return CS.distancePointLine(e,this.p0,this.p1)}},tO.prototype.pointAlong=function(t){var e=new WN;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},tO.prototype.hashCode=function(){var t=GN.doubleToLongBits(this.p0.x);t^=31*GN.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=GN.doubleToLongBits(this.p1.x);return n^=31*GN.doubleToLongBits(this.p1.y),e^(Math.trunc(n)^Math.trunc(n>>32))},tO.prototype.interfaces_=function(){return[jN,VN]},tO.prototype.getClass=function(){return tO},tO.midPoint=function(t,e){return new WN((t.x+e.x)/2,(t.y+e.y)/2)},eO.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(tO,eO);var nO=function(){this.tempEnv1=new pS,this.tempEnv2=new pS,this._overlapSeg1=new tO,this._overlapSeg2=new tO};nO.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},nO.prototype.interfaces_=function(){return[]},nO.prototype.getClass=function(){return nO};var rO=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};rO.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},rO.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,r),a<n&&this.computeSelect(t,a,n,r)},rO.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},rO.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},rO.prototype.setId=function(t){this._id=t},rO.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},rO.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new pS(t,e)}return this._env},rO.prototype.getEndIndex=function(){return this._end},rO.prototype.getStartIndex=function(){return this._start},rO.prototype.getContext=function(){return this._context},rO.prototype.getId=function(){return this._id},rO.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var a=this._pts[t],s=this._pts[e],u=n._pts[r],l=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((r+i)/2);t<c&&(r<h&&this.computeOverlapsInternal(t,c,n,r,h,o),h<i&&this.computeOverlapsInternal(t,c,n,h,i,o)),c<e&&(r<h&&this.computeOverlapsInternal(c,e,n,r,h,o),h<i&&this.computeOverlapsInternal(c,e,n,h,i,o))},rO.prototype.interfaces_=function(){return[]},rO.prototype.getClass=function(){return rO};var iO=function(){};iO.prototype.interfaces_=function(){return[]},iO.prototype.getClass=function(){return iO},iO.getChainStartIndices=function(t){var e=0,n=new YS;n.add(new eS(e));do{var r=iO.findChainEnd(t,e);n.add(new eS(r)),e=r}while(e<t.length-1);return iO.toIntArray(n)},iO.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=NC.quadrant(t[n],t[n+1]),i=e+1;i<t.length;){if(!t[i-1].equals2D(t[i]))if(NC.quadrant(t[i-1],t[i])!==r)break;i++}return i-1},iO.getChains=function(){if(1===arguments.length){var t=arguments[0];return iO.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new YS,i=iO.getChainStartIndices(e),o=0;o<i.length-1;o++){var a=new rO(e,i[o],i[o+1],n);r.add(a)}return r}},iO.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var oO=function(){};oO.prototype.computeNodes=function(t){},oO.prototype.getNodedSubstrings=function(){},oO.prototype.interfaces_=function(){return[]},oO.prototype.getClass=function(){return oO};var aO=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};aO.prototype.setSegmentIntersector=function(t){this._segInt=t},aO.prototype.interfaces_=function(){return[oO]},aO.prototype.getClass=function(){return aO};var sO=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new YS,this._index=new WC,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return ZC.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=this,n=iO.getChains(t.getCoordinates(),t).iterator();n.hasNext();){var r=n.next();r.setId(e._idCounter++),e._index.insert(r.getEnvelope(),r),e._monoChains.add(r)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=this,e=new uO(this._segInt),n=this._monoChains.iterator();n.hasNext();)for(var r=n.next(),i=t._index.query(r.getEnvelope()).iterator();i.hasNext();){var o=i.next();if(o.getId()>r.getId()&&(r.computeOverlaps(o,e),t._nOverlaps++),t._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return uO},Object.defineProperties(e,n),e}(aO),uO=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3],o=e.getContext(),a=r.getContext();this._si.processIntersections(o,n,a,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(nO),lO=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},cO={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};lO.prototype.getEndCapStyle=function(){return this._endCapStyle},lO.prototype.isSingleSided=function(){return this._isSingleSided},lO.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=lO.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=lO.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==lO.JOIN_ROUND&&(this._quadrantSegments=lO.DEFAULT_QUADRANT_SEGMENTS)},lO.prototype.getJoinStyle=function(){return this._joinStyle},lO.prototype.setJoinStyle=function(t){this._joinStyle=t},lO.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},lO.prototype.getSimplifyFactor=function(){return this._simplifyFactor},lO.prototype.getQuadrantSegments=function(){return this._quadrantSegments},lO.prototype.setEndCapStyle=function(t){this._endCapStyle=t},lO.prototype.getMitreLimit=function(){return this._mitreLimit},lO.prototype.setMitreLimit=function(t){this._mitreLimit=t},lO.prototype.setSingleSided=function(t){this._isSingleSided=t},lO.prototype.interfaces_=function(){return[]},lO.prototype.getClass=function(){return lO},lO.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},cO.CAP_ROUND.get=function(){return 1},cO.CAP_FLAT.get=function(){return 2},cO.CAP_SQUARE.get=function(){return 3},cO.JOIN_ROUND.get=function(){return 1},cO.JOIN_MITRE.get=function(){return 2},cO.JOIN_BEVEL.get=function(){return 3},cO.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},cO.DEFAULT_MITRE_LIMIT.get=function(){return 5},cO.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(lO,cO);var hO=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=CS.COUNTERCLOCKWISE,this._inputLine=t||null},fO={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};hO.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(i,o,a)&&(!!this.isShallow(i,o,a,r)&&this.isShallowSampled(i,o,t,n,r))},hO.prototype.deleteShallowConcavities=function(){for(var t=this,e=1,n=this.findNextNonDeletedIndex(e),r=this.findNextNonDeletedIndex(n),i=!1;r<this._inputLine.length;){var o=!1;t.isDeletable(e,n,r,t._distanceTol)&&(t._isDeleted[n]=hO.DELETE,o=!0,i=!0),e=o?r:n,n=t.findNextNonDeletedIndex(e),r=t.findNextNonDeletedIndex(n)}return i},hO.prototype.isShallowConcavity=function(t,e,n,r){return CS.computeOrientation(t,e,n)===this._angleOrientation&&CS.distancePointLine(e,t,n)<r},hO.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/hO.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(t,e,this._inputLine[a],i))return!1;return!0},hO.prototype.isConcave=function(t,e,n){var r=CS.computeOrientation(t,e,n)===this._angleOrientation;return r},hO.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=CS.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},hO.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===hO.DELETE;)e++;return e},hO.prototype.isShallow=function(t,e,n,r){return CS.distancePointLine(e,t,n)<r},hO.prototype.collapseLine=function(){for(var t=new $S,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==hO.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},hO.prototype.interfaces_=function(){return[]},hO.prototype.getClass=function(){return hO},hO.simplify=function(t,e){return new hO(t).simplify(e)},fO.INIT.get=function(){return 0},fO.DELETE.get=function(){return 1},fO.KEEP.get=function(){return 1},fO.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(hO,fO);var pO=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new YS},dO={COORDINATE_ARRAY_TYPE:{configurable:!0}};pO.prototype.getCoordinates=function(){return this._ptList.toArray(pO.COORDINATE_ARRAY_TYPE)},pO.prototype.setPrecisionModel=function(t){this._precisionModel=t},pO.prototype.addPt=function(t){var e=new WN(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},pO.prototype.revere=function(){},pO.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},pO.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},pO.prototype.toString=function(){return(new eC).createLineString(this.getCoordinates()).toString()},pO.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new WN(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},pO.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},pO.prototype.interfaces_=function(){return[]},pO.prototype.getClass=function(){return pO},dO.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(pO,dO);var gO=function(){},yO={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};gO.prototype.interfaces_=function(){return[]},gO.prototype.getClass=function(){return gO},gO.toDegrees=function(t){return 180*t/Math.PI},gO.normalize=function(t){for(;t>Math.PI;)t-=gO.PI_TIMES_2;for(;t<=-Math.PI;)t+=gO.PI_TIMES_2;return t},gO.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},gO.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},gO.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},gO.interiorAngle=function(t,e,n){var r=gO.angle(e,t),i=gO.angle(e,n);return Math.abs(i-r)},gO.normalizePositive=function(t){if(t<0){for(;t<0;)t+=gO.PI_TIMES_2;t>=gO.PI_TIMES_2&&(t=0)}else{for(;t>=gO.PI_TIMES_2;)t-=gO.PI_TIMES_2;t<0&&(t=0)}return t},gO.angleBetween=function(t,e,n){var r=gO.angle(e,t),i=gO.angle(e,n);return gO.diff(r,i)},gO.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},gO.toRadians=function(t){return t*Math.PI/180},gO.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?gO.COUNTERCLOCKWISE:n<0?gO.CLOCKWISE:gO.NONE},gO.angleBetweenOriented=function(t,e,n){var r=gO.angle(e,t),i=gO.angle(e,n)-r;return i<=-Math.PI?i+gO.PI_TIMES_2:i>Math.PI?i-gO.PI_TIMES_2:i},yO.PI_TIMES_2.get=function(){return 2*Math.PI},yO.PI_OVER_2.get=function(){return Math.PI/2},yO.PI_OVER_4.get=function(){return Math.PI/4},yO.COUNTERCLOCKWISE.get=function(){return CS.COUNTERCLOCKWISE},yO.CLOCKWISE.get=function(){return CS.CLOCKWISE},yO.NONE.get=function(){return CS.COLLINEAR},Object.defineProperties(gO,yO);var _O=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new tO,this._seg1=new tO,this._offset0=new tO,this._offset1=new tO,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new NS,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===lO.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},vO={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};_O.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=CS.computeOrientation(this._s0,this._s1,this._s2),r=n===CS.CLOCKWISE&&this._side===lC.LEFT||n===CS.COUNTERCLOCKWISE&&this._side===lC.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},_O.prototype.addLineEndCap=function(t,e){var n=new tO(t,e),r=new tO;this.computeOffsetSegment(n,lC.LEFT,this._distance,r);var i=new tO;this.computeOffsetSegment(n,lC.RIGHT,this._distance,i);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case lO.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,CS.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case lO.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case lO.CAP_SQUARE:var u=new WN;u.x=Math.abs(this._distance)*Math.cos(s),u.y=Math.abs(this._distance)*Math.sin(s);var l=new WN(r.p1.x+u.x,r.p1.y+u.y),c=new WN(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(c)}},_O.prototype.getCoordinates=function(){return this._segList.getCoordinates()},_O.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=fS.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof cS))throw t;o=new WN(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},_O.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),u=n.x-t.x,l=n.y-t.y,c=Math.atan2(l,u);r===CS.CLOCKWISE?s<=c&&(s+=2*Math.PI):s>=c&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,c,r,i),this._segList.addPt(n)},_O.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*_O.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===lO.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===lO.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},_O.prototype.createSquare=function(t){this._segList.addPt(new WN(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new WN(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new WN(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new WN(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},_O.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},_O.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},_O.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},_O.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},_O.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=gO.angle(i,this._seg0.p0),a=gO.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=gO.normalize(o+a),u=gO.normalize(s+Math.PI),l=r*n,c=n-l*Math.abs(Math.sin(a)),h=i.x+l*Math.cos(u),f=i.y+l*Math.sin(u),p=new WN(h,f),d=new tO(i,p),g=d.pointAlongOffset(1,c),y=d.pointAlongOffset(1,-c);this._side===lC.LEFT?(this._segList.addPt(g),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(g))},_O.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===lC.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),u=i*n*o/s,l=i*n*a/s;r.p0.x=t.p0.x-l,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-l,r.p1.y=t.p1.y+u},_O.prototype.addFilletArc=function(t,e,n,r,i){var o=r===CS.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var u=a/s,l=0,c=new WN;l<a;){var h=e+o*l;c.x=t.x+i*Math.cos(h),c.y=t.y+i*Math.sin(h),this._segList.addPt(c),l+=u}},_O.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*_O.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new WN((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new WN((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},_O.prototype.createCircle=function(t){var e=new WN(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},_O.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},_O.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new pO,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*_O.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},_O.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===lO.JOIN_BEVEL||this._bufParams.getJoinStyle()===lO.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,CS.CLOCKWISE,this._distance))},_O.prototype.closeRing=function(){this._segList.closeRing()},_O.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},_O.prototype.interfaces_=function(){return[]},_O.prototype.getClass=function(){return _O},vO.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},vO.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},vO.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},vO.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(_O,vO);var mO=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};mO.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&HS.reverse(o),o},mO.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=hO.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],lC.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(t,!1);var s=hO.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],lC.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(s[l],!0)}n.addLastSegment(),n.closeRing()},mO.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===lC.RIGHT&&(r=-r);var i=hO.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()},mO.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=hO.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],lC.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var a=hO.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],lC.LEFT);for(var u=s-2;u>=0;u--)e.addNextSegment(a[u],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},mO.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case lO.CAP_ROUND:e.createCircle(t);break;case lO.CAP_SQUARE:e.createSquare(t)}},mO.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},mO.prototype.getBufferParameters=function(){return this._bufParams},mO.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},mO.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return mO.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},mO.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=hO.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],lC.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{var s=hO.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],lC.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(s[l],!0)}n.addLastSegment()},mO.prototype.getSegGen=function(t){return new _O(this._precisionModel,this._bufParams,t)},mO.prototype.interfaces_=function(){return[]},mO.prototype.getClass=function(){return mO},mO.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new WN(t[n]);return e};var xO=function(){this._subgraphs=null,this._seg=new tO,this._cga=new CS;var t=arguments[0];this._subgraphs=t},bO={DepthSegment:{configurable:!0}};xO.prototype.findStabbedSegments=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=new YS,r=this._subgraphs.iterator();r.hasNext();){var i=r.next(),o=i.getEnvelope();e.y<o.getMinY()||e.y>o.getMaxY()||t.findStabbedSegments(e,i.getDirectedEdges(),n)}return n}if(3===arguments.length)if(JN(arguments[2],VS)&&arguments[0]instanceof WN&&arguments[1]instanceof CC)for(var a=arguments[0],s=arguments[1],u=arguments[2],l=s.getEdge().getCoordinates(),c=0;c<l.length-1;c++){t._seg.p0=l[c],t._seg.p1=l[c+1],t._seg.p0.y>t._seg.p1.y&&t._seg.reverse();var h=Math.max(t._seg.p0.x,t._seg.p1.x);if(!(h<a.x)&&!(t._seg.isHorizontal()||a.y<t._seg.p0.y||a.y>t._seg.p1.y||CS.computeOrientation(t._seg.p0,t._seg.p1,a)===CS.RIGHT)){var f=s.getDepth(lC.LEFT);t._seg.p0.equals(l[c])||(f=s.getDepth(lC.RIGHT));var p=new MO(t._seg,f);u.add(p)}}else if(JN(arguments[2],VS)&&arguments[0]instanceof WN&&JN(arguments[1],VS))for(var d=arguments[0],g=arguments[1],y=arguments[2],_=g.iterator();_.hasNext();){var v=_.next();v.isForward()&&t.findStabbedSegments(d,v,y)}},xO.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:GC.min(e)._leftDepth},xO.prototype.interfaces_=function(){return[]},xO.prototype.getClass=function(){return xO},bO.DepthSegment.get=function(){return MO},Object.defineProperties(xO,bO);var MO=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new tO(t),this._leftDepth=e};MO.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!==(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},MO.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},MO.prototype.toString=function(){return this._upwardSeg.toString()},MO.prototype.interfaces_=function(){return[jN]},MO.prototype.getClass=function(){return MO};var wO=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};wO.prototype.area=function(){return wO.area(this.p0,this.p1,this.p2)},wO.prototype.signedArea=function(){return wO.signedArea(this.p0,this.p1,this.p2)},wO.prototype.interpolateZ=function(t){if(null===t)throw new zN("Supplied point is null.");return wO.interpolateZ(t,this.p0,this.p1,this.p2)},wO.prototype.longestSideLength=function(){return wO.longestSideLength(this.p0,this.p1,this.p2)},wO.prototype.isAcute=function(){return wO.isAcute(this.p0,this.p1,this.p2)},wO.prototype.circumcentre=function(){return wO.circumcentre(this.p0,this.p1,this.p2)},wO.prototype.area3D=function(){return wO.area3D(this.p0,this.p1,this.p2)},wO.prototype.centroid=function(){return wO.centroid(this.p0,this.p1,this.p2)},wO.prototype.inCentre=function(){return wO.inCentre(this.p0,this.p1,this.p2)},wO.prototype.interfaces_=function(){return[]},wO.prototype.getClass=function(){return wO},wO.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},wO.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},wO.det=function(t,e,n,r){return t*r-e*n},wO.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,a=n.x-i,s=r.x-i,u=n.y-o,l=r.y-o,c=a*l-s*u,h=t.x-i,f=t.y-o,p=(l*h-s*f)/c,d=(-u*h+a*f)/c;return e.z+p*(n.z-e.z)+d*(r.z-e.z)},wO.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),a=r;return i>a&&(a=i),o>a&&(a=o),a},wO.isAcute=function(t,e,n){return!!gO.isAcute(t,e,n)&&(!!gO.isAcute(e,n,t)&&!!gO.isAcute(n,t,e))},wO.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,a=t.y-i,s=e.x-r,u=e.y-i,l=2*wO.det(o,a,s,u),c=wO.det(a,o*o+a*a,u,s*s+u*u),h=wO.det(o,o*o+a*a,s,s*s+u*u);return new WN(r-c/l,i+h/l)},wO.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new fS(t.x+n/2,t.y+r/2,1),o=new fS(t.x-r+n/2,t.y+n+r/2,1);return new fS(i,o)},wO.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,a=n.y-t.y;return new WN(t.x+i*o,t.y+i*a)},wO.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,u=n.z-t.z,l=i*u-o*s,c=o*a-r*u,h=r*s-i*a,f=l*l+c*c+h*h,p=Math.sqrt(f)/2;return p},wO.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new WN(r,i)},wO.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),a=r+i+o,s=(r*t.x+i*e.x+o*n.x)/a,u=(r*t.y+i*e.y+o*n.y)/a;return new WN(s,u)};var EO=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new YS;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};EO.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,HN.EXTERIOR,HN.INTERIOR)},EO.prototype.addPolygon=function(t){var e=this,n=this._distance,r=lC.LEFT;this._distance<0&&(n=-this._distance,r=lC.RIGHT);var i=t.getExteriorRing(),o=HS.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&o.length<3)return null;this.addPolygonRing(o,n,r,HN.EXTERIOR,HN.INTERIOR);for(var a=0;a<t.getNumInteriorRing();a++){var s=t.getInteriorRingN(a),u=HS.removeRepeatedPoints(s.getCoordinates());e._distance>0&&e.isErodedCompletely(s,-e._distance)||e.addPolygonRing(u,n,lC.opposite(r),HN.INTERIOR,HN.EXTERIOR)}},EO.prototype.isTriangleErodedCompletely=function(t,e){var n=new wO(t[0],t[1],t[2]),r=n.inCentre();return CS.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},EO.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=HS.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,HN.EXTERIOR,HN.INTERIOR)},EO.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new ZC(t,new vC(0,HN.BOUNDARY,e,n));this._curveList.add(r)},EO.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},EO.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<GI.MINIMUM_VALID_SIZE)return null;var o=r,a=i;t.length>=GI.MINIMUM_VALID_SIZE&&CS.isCCW(t)&&(o=i,a=r,n=lC.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},EO.prototype.add=function(t){if(t.isEmpty())return null;t instanceof FI?this.addPolygon(t):t instanceof TI?this.addLineString(t):t instanceof RI?this.addPoint(t):(t instanceof zI||t instanceof bI||t instanceof qI||t instanceof xI)&&this.addCollection(t)},EO.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},EO.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},EO.prototype.interfaces_=function(){return[]},EO.prototype.getClass=function(){return EO};var NO=function(){};NO.prototype.locate=function(t){},NO.prototype.interfaces_=function(){return[]},NO.prototype.getClass=function(){return NO};var SO=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};SO.prototype.next=function(){if(this._atStart)return this._atStart=!1,SO.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new WS;var t=this._parent.getGeometryN(this._index++);return t instanceof xI?(this._subcollectionIterator=new SO(t),this._subcollectionIterator.next()):t},SO.prototype.remove=function(){throw new Error(this.getClass().getName())},SO.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},SO.prototype.interfaces_=function(){return[US]},SO.prototype.getClass=function(){return SO},SO.isAtomic=function(t){return!(t instanceof xI)};var IO=function(){this._geom=null;var t=arguments[0];this._geom=t};IO.prototype.locate=function(t){return IO.locate(t,this._geom)},IO.prototype.interfaces_=function(){return[NO]},IO.prototype.getClass=function(){return IO},IO.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&CS.isPointInRing(t,e.getCoordinates())},IO.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!IO.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(IO.isPointInRing(t,i))return!1}return!0},IO.containsPoint=function(t,e){if(e instanceof FI)return IO.containsPointInPolygon(t,e);if(e instanceof xI)for(var n=new SO(e);n.hasNext();){var r=n.next();if(r!==e&&IO.containsPoint(t,r))return!0}return!1},IO.locate=function(t,e){return e.isEmpty()?HN.EXTERIOR:IO.containsPoint(t,e)?HN.INTERIOR:HN.EXTERIOR};var CO=function(){this._edgeMap=new cI,this._edgeList=null,this._ptInAreaLocation=[HN.NONE,HN.NONE]};CO.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},CO.prototype.propagateSideLabels=function(t){for(var e=HN.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,lC.LEFT)!==HN.NONE&&(e=r.getLocation(t,lC.LEFT))}if(e===HN.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,lC.ON)===HN.NONE&&s.setLocation(t,lC.ON,i),s.isArea(t)){var u=s.getLocation(t,lC.LEFT),l=s.getLocation(t,lC.RIGHT);if(l!==HN.NONE){if(l!==i)throw new dC("side location conflict",a.getCoordinate());u===HN.NONE&&MS.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=u}else MS.isTrue(s.getLocation(t,lC.LEFT)===HN.NONE,"found single null side"),s.setLocation(t,lC.RIGHT,i),s.setLocation(t,lC.LEFT,i)}}},CO.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},CO.prototype.print=function(t){hS.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){e.next().print(t)}},CO.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},CO.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,lC.LEFT);MS.isTrue(r!==HN.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();MS.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,lC.LEFT),u=a.getLocation(t,lC.RIGHT);if(s===u)return!1;if(u!==i)return!1;i=s}return!0},CO.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++){if(this._edgeList.get(e)===t)return e}return-1},CO.prototype.iterator=function(){return this.getEdges().iterator()},CO.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new YS(this._edgeMap.values())),this._edgeList},CO.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===HN.NONE&&(this._ptInAreaLocation[t]=IO.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},CO.prototype.toString=function(){var t=new tS;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},CO.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();){e.next().computeLabel(t)}},CO.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===HN.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),u=0;u<2;u++)if(s.isAnyNull(u)){var l=HN.NONE;if(e[u])l=HN.EXTERIOR;else{var c=a.getCoordinate();l=this.getLocation(u,c,t)}s.setAllLocationsIfNull(u,l)}},CO.prototype.getDegree=function(){return this._edgeMap.size()},CO.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},CO.prototype.interfaces_=function(){return[]},CO.prototype.getClass=function(){return CO};var OO=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){var t=this;this.getResultAreaEdges();for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var o=t._resultAreaEdgeList.get(i),a=o.getSym();if(o.getLabel().isArea())switch(null===e&&o.isInResult()&&(e=o),r){case t._SCANNING_FOR_INCOMING:if(!a.isInResult())continue;n=a,r=t._LINKING_TO_OUTGOING;break;case t._LINKING_TO_OUTGOING:if(!o.isInResult())continue;n.setNext(o),r=t._SCANNING_FOR_INCOMING}}if(r===this._LINKING_TO_OUTGOING){if(null===e)throw new dC("no outgoing dirEdge found",this.getCoordinate());MS.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),n.setNext(e)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return NC.isNorthern(i)&&NC.isNorthern(o)?n:NC.isNorthern(i)||NC.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(MS.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){hS.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new YS;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=this.findIndex(e),r=e.getDepth(lC.LEFT),i=e.getDepth(lC.RIGHT),o=this.computeDepths(n+1,this._edgeList.size(),r),a=this.computeDepths(0,n,o);if(a!==i)throw new dC("depth mismatch at "+e.getCoordinate())}else if(3===arguments.length){for(var s=arguments[0],u=arguments[1],l=arguments[2],c=l,h=s;h<u;h++){var f=t._edgeList.get(h);f.setEdgeDepths(lC.RIGHT,c),c=f.getDepth(lC.LEFT)}return c}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=this,n=null,r=null,i=this._SCANNING_FOR_INCOMING,o=this._resultAreaEdgeList.size()-1;o>=0;o--){var a=e._resultAreaEdgeList.get(o),s=a.getSym();switch(null===n&&a.getEdgeRing()===t&&(n=a),i){case e._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;r=s,i=e._LINKING_TO_OUTGOING;break;case e._LINKING_TO_OUTGOING:if(a.getEdgeRing()!==t)continue;r.setNextMin(a),i=e._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(MS.isTrue(null!==n,"found null for first outgoing dirEdge"),MS.isTrue(n.getEdgeRing()===t,"unable to link last incoming dirEdge"),r.setNextMin(n))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();){var n=e.next();n.isInResult()&&t++}return t}if(1===arguments.length){for(var r=arguments[0],i=0,o=this.iterator();o.hasNext();){var a=o.next();a.getEdgeRing()===r&&i++}return i}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=HN.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=HN.INTERIOR;break}if(r.isInResult()){t=HN.EXTERIOR;break}}}if(t===HN.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===HN.INTERIOR):(a.isInResult()&&(i=HN.EXTERIOR),s.isInResult()&&(i=HN.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new vC(HN.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==HN.INTERIOR&&o!==HN.BOUNDARY||this._label.setLocation(i,HN.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(CO),PO=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new wC(t,new OO)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(OC),LO=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};LO.prototype.compareTo=function(t){var e=t;return LO.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},LO.prototype.interfaces_=function(){return[jN]},LO.prototype.getClass=function(){return LO},LO.orientation=function(t){return 1===HS.increasingDirection(t)},LO.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,a=e?t.length:-1,s=r?n.length:-1,u=e?0:t.length-1,l=r?0:n.length-1;;){var c=t[u].compareTo(n[l]);if(0!==c)return c;var h=(u+=i)===a,f=(l+=o)===s;if(h&&!f)return-1;if(!h&&f)return 1;if(h&&f)return 0}};var AO=function(){this._edges=new YS,this._ocaMap=new cI};AO.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},AO.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},AO.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},AO.prototype.iterator=function(){return this._edges.iterator()},AO.prototype.getEdges=function(){return this._edges},AO.prototype.get=function(t){return this._edges.get(t)},AO.prototype.findEqualEdge=function(t){var e=new LO(t.getCoordinates());return this._ocaMap.get(e)},AO.prototype.add=function(t){this._edges.add(t);var e=new LO(t.getCoordinates());this._ocaMap.put(e,t)},AO.prototype.interfaces_=function(){return[]},AO.prototype.getClass=function(){return AO};var TO=function(){};TO.prototype.processIntersections=function(t,e,n,r){},TO.prototype.isDone=function(){},TO.prototype.interfaces_=function(){return[]},TO.prototype.getClass=function(){return TO};var kO=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};kO.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(kO.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},kO.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},kO.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},kO.prototype.getLineIntersector=function(){return this._li},kO.prototype.hasProperIntersection=function(){return this._hasProper},kO.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},kO.prototype.hasIntersection=function(){return this._hasIntersection},kO.prototype.isDone=function(){return!1},kO.prototype.hasInteriorIntersection=function(){return this._hasInterior},kO.prototype.interfaces_=function(){return[TO]},kO.prototype.getClass=function(){return kO},kO.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var RO=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new WN(t),this.segmentIndex=e,this.dist=n};RO.prototype.getSegmentIndex=function(){return this.segmentIndex},RO.prototype.getCoordinate=function(){return this.coord},RO.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},RO.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},RO.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},RO.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},RO.prototype.getDistance=function(){return this.dist},RO.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},RO.prototype.interfaces_=function(){return[jN]},RO.prototype.getClass=function(){return RO};var DO=function(){this._nodeMap=new cI,this.edge=null;var t=arguments[0];this.edge=t};DO.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){e.next().print(t)}},DO.prototype.iterator=function(){return this._nodeMap.values().iterator()},DO.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},DO.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},DO.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new WN(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new jO(o,new vC(this.edge._label))},DO.prototype.add=function(t,e,n){var r=new RO(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},DO.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();){if(e.next().coord.equals(t))return!0}return!1},DO.prototype.interfaces_=function(){return[]},DO.prototype.getClass=function(){return DO};var FO=function(){};FO.prototype.getChainStartIndices=function(t){var e=0,n=new YS;n.add(new eS(e));do{var r=this.findChainEnd(t,e);n.add(new eS(r)),e=r}while(e<t.length-1);return FO.toIntArray(n)},FO.prototype.findChainEnd=function(t,e){for(var n=NC.quadrant(t[e],t[e+1]),r=e+1;r<t.length;){if(NC.quadrant(t[r-1],t[r])!==n)break;r++}return r-1},FO.prototype.interfaces_=function(){return[]},FO.prototype.getClass=function(){return FO},FO.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var zO=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new pS,this.env2=new pS;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new FO;this.startIndex=e.getChainStartIndices(this.pts)};zO.prototype.getCoordinates=function(){return this.pts},zO.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},zO.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},zO.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[i],h=this.pts[o],f=a.pts[s],p=a.pts[u];if(o-i==1&&u-s==1)return l.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(c,h),this.env2.init(f,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),g=Math.trunc((s+u)/2);i<d&&(s<g&&this.computeIntersectsForChain(i,d,a,s,g,l),g<u&&this.computeIntersectsForChain(i,d,a,g,u,l)),d<o&&(s<g&&this.computeIntersectsForChain(d,o,a,s,g,l),g<u&&this.computeIntersectsForChain(d,o,a,g,u,l))}},zO.prototype.getStartIndexes=function(){return this.startIndex},zO.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},zO.prototype.interfaces_=function(){return[]},zO.prototype.getClass=function(){return zO};var GO=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},qO={NULL_VALUE:{configurable:!0}};GO.prototype.getDepth=function(t,e){return this._depth[t][e]},GO.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},GO.prototype.isNull=function(){var t=this;if(0===arguments.length){for(var e=0;e<2;e++)for(var n=0;n<3;n++)if(t._depth[e][n]!==GO.NULL_VALUE)return!1;return!0}if(1===arguments.length){var r=arguments[0];return this._depth[r][1]===GO.NULL_VALUE}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._depth[i][o]===GO.NULL_VALUE}},GO.prototype.normalize=function(){for(var t=this,e=0;e<2;e++)if(!t.isNull(e)){var n=t._depth[e][1];t._depth[e][2]<n&&(n=t._depth[e][2]),n<0&&(n=0);for(var r=1;r<3;r++){var i=0;t._depth[e][r]>n&&(i=1),t._depth[e][r]=i}}},GO.prototype.getDelta=function(t){return this._depth[t][lC.RIGHT]-this._depth[t][lC.LEFT]},GO.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?HN.EXTERIOR:HN.INTERIOR},GO.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},GO.prototype.add=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],n=0;n<2;n++)for(var r=1;r<3;r++){var i=e.getLocation(n,r);i!==HN.EXTERIOR&&i!==HN.INTERIOR||(t.isNull(n,r)?t._depth[n][r]=GO.depthAtLocation(i):t._depth[n][r]+=GO.depthAtLocation(i))}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];s===HN.INTERIOR&&this._depth[o][a]++}},GO.prototype.interfaces_=function(){return[]},GO.prototype.getClass=function(){return GO},GO.depthAtLocation=function(t){return t===HN.EXTERIOR?0:t===HN.INTERIOR?1:GO.NULL_VALUE},qO.NULL_VALUE.get=function(){return-1},Object.defineProperties(GO,qO);var jO=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new DO(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new GO,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,vC.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(r=!1),this.pts[a].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&(3===this.pts.length&&!!this.pts[0].equals(this.pts[2]))},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new zO(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new pS;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new WN(t.getIntersection(r)),o=e,a=t.getEdgeDistance(n,r),s=o+1;if(s<this.pts.length){var u=this.pts[s];i.equals2D(u)&&(o=s,a=0)}this.eiList.add(i,o,a)},e.prototype.toString=function(){var t=new tS;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,lC.ON),e.getLocation(1,lC.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,lC.LEFT),e.getLocation(1,lC.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,lC.RIGHT),e.getLocation(1,lC.RIGHT),2))},e}(MC),BO=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new AO,this._bufParams=t||null};BO.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},BO.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new vC(t.getLabel())).flip(),n.merge(r);var i=BO.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(BO.depthDelta(t.getLabel()))},BO.prototype.buildSubgraphs=function(t,e){for(var n=new YS,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new xO(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},BO.prototype.createSubgraphs=function(t){for(var e=new YS,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new yC;i.create(r),e.add(i)}}return GC.sort(e,GC.reverseOrder()),e},BO.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},BO.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new sO,n=new NS;return n.setPrecisionModel(t),e.setSegmentIntersector(new kO(n)),e},BO.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new mO(n,this._bufParams),i=new EO(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new PC(new PO),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new LC(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},BO.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new jO(i.getCoordinates(),new vC(a));this.insertUniqueEdge(s)}}},BO.prototype.setNoder=function(t){this._workingNoder=t},BO.prototype.interfaces_=function(){return[]},BO.prototype.getClass=function(){return BO},BO.depthDelta=function(t){var e=t.getLocation(0,lC.LEFT),n=t.getLocation(0,lC.RIGHT);return e===HN.INTERIOR&&n===HN.EXTERIOR?1:e===HN.EXTERIOR&&n===HN.INTERIOR?-1:0},BO.convertSegStrings=function(t){for(var e=new eC,n=new YS;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var UO=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};UO.prototype.rescale=function(){var t=this;if(JN(arguments[0],jS))for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();t.rescale(r.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],o=0;o<i.length;o++)i[o].x=i[o].x/t._scaleFactor+t._offsetX,i[o].y=i[o].y/t._scaleFactor+t._offsetY;2===i.length&&i[0].equals2D(i[1])&&hS.out.println(i)}},UO.prototype.scale=function(){var t=this;if(JN(arguments[0],jS)){for(var e=arguments[0],n=new YS,r=e.iterator();r.hasNext();){var i=r.next();n.add(new ZC(t.scale(i.getCoordinates()),i.getData()))}return n}if(arguments[0]instanceof Array){for(var o=arguments[0],a=new Array(o.length).fill(null),s=0;s<o.length;s++)a[s]=new WN(Math.round((o[s].x-t._offsetX)*t._scaleFactor),Math.round((o[s].y-t._offsetY)*t._scaleFactor),o[s].z);var u=HS.removeRepeatedPoints(a);return u}},UO.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},UO.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},UO.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},UO.prototype.interfaces_=function(){return[oO]},UO.prototype.getClass=function(){return UO};var VO=function(){this._li=new NS,this._segStrings=null;var t=arguments[0];this._segStrings=t},WO={fact:{configurable:!0}};VO.prototype.checkEndPtVertexIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next(),r=n.getCoordinates();t.checkEndPtVertexIntersections(r[0],t._segStrings),t.checkEndPtVertexIntersections(r[r.length-1],t._segStrings)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=o.iterator();a.hasNext();)for(var s=a.next(),u=s.getCoordinates(),l=1;l<u.length-1;l++)if(u[l].equals(i))throw new xS("found endpt/interior pt intersection at index "+l+" :pt "+i)},VO.prototype.checkInteriorIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();)for(var n=e.next(),r=this._segStrings.iterator();r.hasNext();){var i=r.next();t.checkInteriorIntersections(n,i)}else if(2===arguments.length)for(var o=arguments[0],a=arguments[1],s=o.getCoordinates(),u=a.getCoordinates(),l=0;l<s.length-1;l++)for(var c=0;c<u.length-1;c++)t.checkInteriorIntersections(o,l,a,c);else if(4===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3];if(h===p&&f===d)return null;var g=h.getCoordinates()[f],y=h.getCoordinates()[f+1],_=p.getCoordinates()[d],v=p.getCoordinates()[d+1];if(this._li.computeIntersection(g,y,_,v),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,g,y)||this.hasInteriorIntersection(this._li,_,v)))throw new xS("found non-noded intersection at "+g+"-"+y+" and "+_+"-"+v)}},VO.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},VO.prototype.checkCollapses=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next();t.checkCollapses(n)}else if(1===arguments.length)for(var r=arguments[0],i=r.getCoordinates(),o=0;o<i.length-2;o++)t.checkCollapse(i[o],i[o+1],i[o+2])},VO.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},VO.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new xS("found non-noded collapse at "+VO.fact.createLineString([t,e,n]))},VO.prototype.interfaces_=function(){return[]},VO.prototype.getClass=function(){return VO},WO.fact.get=function(){return new eC},Object.defineProperties(VO,WO);var YO=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new zN("Scale factor must be non-zero");1!==e&&(this._pt=new WN(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new WN,this._p1Scaled=new WN),this.initCorners(this._pt)},XO={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};YO.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return MS.isTrue(!(a&&s),"Found bad envelope test"),s},YO.prototype.initCorners=function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new WN(this._maxx,this._maxy),this._corner[1]=new WN(this._minx,this._maxy),this._corner[2]=new WN(this._minx,this._miny),this._corner[3]=new WN(this._maxx,this._miny)},YO.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},YO.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},YO.prototype.getCoordinate=function(){return this._originalPt},YO.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},YO.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=YO.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new pS(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},YO.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},YO.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||(!(!n||!r)||(!!t.equals(this._pt)||!!e.equals(this._pt))))))},YO.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},YO.prototype.interfaces_=function(){return[]},YO.prototype.getClass=function(){return YO},XO.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(YO,XO);var $O=function(){this.tempEnv1=new pS,this.selectedSegment=new tO};$O.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},$O.prototype.interfaces_=function(){return[]},$O.prototype.getClass=function(){return $O};var HO=function(){this._index=null;var t=arguments[0];this._index=t},QO={HotPixelSnapAction:{configurable:!0}};HO.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new JO(e,n,r);return this._index.query(i,{interfaces_:function(){return[RC]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},HO.prototype.interfaces_=function(){return[]},HO.prototype.getClass=function(){return HO},QO.HotPixelSnapAction.get=function(){return JO},Object.defineProperties(HO,QO);var JO=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],n=arguments[1],r=e.getContext();if(null!==this._parentEdge&&r===this._parentEdge&&n===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(r,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}($O),KO=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new YS};KO.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},KO.prototype.isDone=function(){return!1},KO.prototype.getInteriorIntersections=function(){return this._interiorIntersections},KO.prototype.interfaces_=function(){return[TO]},KO.prototype.getClass=function(){return KO};var ZO=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new NS,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};ZO.prototype.checkCorrectness=function(t){var e=ZC.getNodedSubstrings(t),n=new VO(e);try{n.checkValid()}catch(t){if(!(t instanceof lS))throw t;t.printStackTrace()}},ZO.prototype.getNodedSubstrings=function(){return ZC.getNodedSubstrings(this._nodedSegStrings)},ZO.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},ZO.prototype.findInteriorIntersections=function(t,e){var n=new KO(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},ZO.prototype.computeVertexSnaps=function(){var t=this;if(JN(arguments[0],jS))for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();t.computeVertexSnaps(r)}else if(arguments[0]instanceof ZC)for(var i=arguments[0],o=i.getCoordinates(),a=0;a<o.length;a++){var s=new YO(o[a],t._scaleFactor,t._li),u=t._pointSnapper.snap(s,i,a);u&&i.addIntersection(o[a],a)}},ZO.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new sO,this._pointSnapper=new HO(this._noder.getIndex()),this.snapRound(t,this._li)},ZO.prototype.computeIntersectionSnaps=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next(),i=new YO(r,e._scaleFactor,e._li);e._pointSnapper.snap(i)}},ZO.prototype.interfaces_=function(){return[oO]},ZO.prototype.getClass=function(){return ZO};var tP=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new lO,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},eP={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};tP.prototype.bufferFixedPrecision=function(t){var e=new UO(new ZO(new JI(1)),t.getScale()),n=new BO(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},tP.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=tP.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof dC))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=tP.precisionScaleFactor(this._argGeom,this._distance,n),i=new JI(r);this.bufferFixedPrecision(i)}},tP.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===JI.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},tP.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},tP.prototype.bufferOriginalPrecision=function(){try{var t=new BO(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof xS))throw t;this._saveException=t}},tP.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},tP.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},tP.prototype.interfaces_=function(){return[]},tP.prototype.getClass=function(){return tP},tP.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new tP(t),r=n.getResultGeometry(e);return r}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof LS&&"number"==typeof arguments[1]){var i=arguments[0],o=arguments[1],a=arguments[2],s=new tP(i);s.setQuadrantSegments(a);var u=s.getResultGeometry(o);return u}if(arguments[2]instanceof lO&&arguments[0]instanceof LS&&"number"==typeof arguments[1]){var l=arguments[0],c=arguments[1],h=arguments[2],f=new tP(l,h),p=f.getResultGeometry(c);return p}}else if(4===arguments.length){var d=arguments[0],g=arguments[1],y=arguments[2],_=arguments[3],v=new tP(d);v.setQuadrantSegments(y),v.setEndCapStyle(_);var m=v.getResultGeometry(g);return m}},tP.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=KN.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},eP.CAP_ROUND.get=function(){return lO.CAP_ROUND},eP.CAP_BUTT.get=function(){return lO.CAP_FLAT},eP.CAP_FLAT.get=function(){return lO.CAP_FLAT},eP.CAP_SQUARE.get=function(){return lO.CAP_SQUARE},eP.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(tP,eP);var nP=function(){this._pt=[new WN,new WN],this._distance=GN.NaN,this._isNull=!0};nP.prototype.getCoordinates=function(){return this._pt},nP.prototype.getCoordinate=function(t){return this._pt[t]},nP.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},nP.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},nP.prototype.getDistance=function(){return this._distance},nP.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},nP.prototype.interfaces_=function(){return[]},nP.prototype.getClass=function(){return nP};var rP=function(){};rP.prototype.interfaces_=function(){return[]},rP.prototype.getClass=function(){return rP},rP.computeDistance=function(){if(arguments[2]instanceof nP&&arguments[0]instanceof TI&&arguments[1]instanceof WN)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=t.getCoordinates(),i=new tO,o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var a=i.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof nP&&arguments[0]instanceof FI&&arguments[1]instanceof WN){var s=arguments[0],u=arguments[1],l=arguments[2];rP.computeDistance(s.getExteriorRing(),u,l);for(var c=0;c<s.getNumInteriorRing();c++)rP.computeDistance(s.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof nP&&arguments[0]instanceof LS&&arguments[1]instanceof WN){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof TI)rP.computeDistance(h,f,p);else if(h instanceof FI)rP.computeDistance(h,f,p);else if(h instanceof xI)for(var d=h,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);rP.computeDistance(y,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof nP&&arguments[0]instanceof tO&&arguments[1]instanceof WN){var _=arguments[0],v=arguments[1],m=arguments[2],x=_.closestPoint(v);m.setMinimum(x,v)}};var iP=function(t){this._maxPtDist=new nP,this._inputGeom=t||null},oP={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};iP.prototype.computeMaxMidpointDistance=function(t){var e=new sP(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},iP.prototype.computeMaxVertexDistance=function(t){var e=new aP(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},iP.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},iP.prototype.getDistancePoints=function(){return this._maxPtDist},iP.prototype.interfaces_=function(){return[]},iP.prototype.getClass=function(){return iP},oP.MaxPointDistanceFilter.get=function(){return aP},oP.MaxMidpointDistanceFilter.get=function(){return sP},Object.defineProperties(iP,oP);var aP=function(t){this._maxPtDist=new nP,this._minPtDist=new nP,this._geom=t||null};aP.prototype.filter=function(t){this._minPtDist.initialize(),rP.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},aP.prototype.getMaxPointDistance=function(){return this._maxPtDist},aP.prototype.interfaces_=function(){return[kS]},aP.prototype.getClass=function(){return aP};var sP=function(t){this._maxPtDist=new nP,this._minPtDist=new nP,this._geom=t||null};sP.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new WN((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),rP.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},sP.prototype.isDone=function(){return!1},sP.prototype.isGeometryChanged=function(){return!1},sP.prototype.getMaxPointDistance=function(){return this._maxPtDist},sP.prototype.interfaces_=function(){return[mI]},sP.prototype.getClass=function(){return sP};var uP=function(t){this._comps=t||null};uP.prototype.filter=function(t){t instanceof FI&&this._comps.add(t)},uP.prototype.interfaces_=function(){return[vI]},uP.prototype.getClass=function(){return uP},uP.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return uP.getPolygons(t,new YS)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof FI?n.add(e):e instanceof xI&&e.apply(new uP(n)),n}};var lP=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};lP.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof GI){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof TI&&this._lines.add(t)},lP.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},lP.prototype.interfaces_=function(){return[PS]},lP.prototype.getClass=function(){return lP},lP.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(lP.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(lP.getLines(e,n))}},lP.getLines=function(){if(1===arguments.length){var t=arguments[0];return lP.getLines(t,!1)}if(2===arguments.length){if(JN(arguments[0],jS)&&JN(arguments[1],jS)){for(var e=arguments[0],n=arguments[1],r=e.iterator();r.hasNext();){var i=r.next();lP.getLines(i,n)}return n}if(arguments[0]instanceof LS&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1],s=new YS;return o.apply(new lP(s,a)),s}if(arguments[0]instanceof LS&&JN(arguments[1],jS)){var u=arguments[0],l=arguments[1];return u instanceof TI?l.add(u):u.apply(new lP(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&JN(arguments[0],jS)&&JN(arguments[1],jS)){for(var c=arguments[0],h=arguments[1],f=arguments[2],p=c.iterator();p.hasNext();){var d=p.next();lP.getLines(d,h,f)}return h}if("boolean"==typeof arguments[2]&&arguments[0]instanceof LS&&JN(arguments[1],jS)){var g=arguments[0],y=arguments[1],_=arguments[2];return g.apply(new lP(y,_)),y}}};var cP=function(){if(this._boundaryRule=RS.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new zN("Rule must be non-null");this._boundaryRule=t}};cP.prototype.locateInternal=function(){var t=this;if(arguments[0]instanceof WN&&arguments[1]instanceof FI){var e=arguments[0],n=arguments[1];if(n.isEmpty())return HN.EXTERIOR;var r=n.getExteriorRing(),i=this.locateInPolygonRing(e,r);if(i===HN.EXTERIOR)return HN.EXTERIOR;if(i===HN.BOUNDARY)return HN.BOUNDARY;for(var o=0;o<n.getNumInteriorRing();o++){var a=n.getInteriorRingN(o),s=t.locateInPolygonRing(e,a);if(s===HN.INTERIOR)return HN.EXTERIOR;if(s===HN.BOUNDARY)return HN.BOUNDARY}return HN.INTERIOR}if(arguments[0]instanceof WN&&arguments[1]instanceof TI){var u=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(u))return HN.EXTERIOR;var c=l.getCoordinates();return l.isClosed()||!u.equals(c[0])&&!u.equals(c[c.length-1])?CS.isOnLine(u,c)?HN.INTERIOR:HN.EXTERIOR:HN.BOUNDARY}if(arguments[0]instanceof WN&&arguments[1]instanceof RI){var h=arguments[0],f=arguments[1],p=f.getCoordinate();return p.equals2D(h)?HN.INTERIOR:HN.EXTERIOR}},cP.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?CS.locatePointInRing(t,e.getCoordinates()):HN.EXTERIOR},cP.prototype.intersects=function(t,e){return this.locate(t,e)!==HN.EXTERIOR},cP.prototype.updateLocationInfo=function(t){t===HN.INTERIOR&&(this._isIn=!0),t===HN.BOUNDARY&&this._numBoundaries++},cP.prototype.computeLocation=function(t,e){var n=this;if(e instanceof RI&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof TI)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof FI)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof bI)for(var r=e,i=0;i<r.getNumGeometries();i++){var o=r.getGeometryN(i);n.updateLocationInfo(n.locateInternal(t,o))}else if(e instanceof qI)for(var a=e,s=0;s<a.getNumGeometries();s++){var u=a.getGeometryN(s);n.updateLocationInfo(n.locateInternal(t,u))}else if(e instanceof xI)for(var l=new SO(e);l.hasNext();){var c=l.next();c!==e&&n.computeLocation(t,c)}},cP.prototype.locate=function(t,e){return e.isEmpty()?HN.EXTERIOR:e instanceof TI||e instanceof FI?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?HN.BOUNDARY:this._numBoundaries>0||this._isIn?HN.INTERIOR:HN.EXTERIOR)},cP.prototype.interfaces_=function(){return[]},cP.prototype.getClass=function(){return cP};var hP=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],n=arguments[1];t.call(this,e,t.INSIDE_AREA,n)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._component=r,this._segIndex=i,this._pt=o}},fP={INSIDE_AREA:{configurable:!0}};hP.prototype.isInsideArea=function(){return this._segIndex===hP.INSIDE_AREA},hP.prototype.getCoordinate=function(){return this._pt},hP.prototype.getGeometryComponent=function(){return this._component},hP.prototype.getSegmentIndex=function(){return this._segIndex},hP.prototype.interfaces_=function(){return[]},hP.prototype.getClass=function(){return hP},fP.INSIDE_AREA.get=function(){return-1},Object.defineProperties(hP,fP);var pP=function(t){this._pts=t||null};pP.prototype.filter=function(t){t instanceof RI&&this._pts.add(t)},pP.prototype.interfaces_=function(){return[vI]},pP.prototype.getClass=function(){return pP},pP.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof RI?GC.singletonList(t):pP.getPoints(t,new YS)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof RI?n.add(e):e instanceof xI&&e.apply(new pP(n)),n}};var dP=function(){this._locations=null;var t=arguments[0];this._locations=t};dP.prototype.filter=function(t){(t instanceof RI||t instanceof TI||t instanceof FI)&&this._locations.add(new hP(t,0,t.getCoordinate()))},dP.prototype.interfaces_=function(){return[vI]},dP.prototype.getClass=function(){return dP},dP.getLocations=function(t){var e=new YS;return t.apply(new dP(e)),e};var gP=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new cP,this._minDistanceLocation=null,this._minDistance=GN.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};gP.prototype.computeContainmentDistance=function(){var t=this;if(0===arguments.length){var e=new Array(2).fill(null);if(this.computeContainmentDistance(0,e),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=1-n,o=uP.getPolygons(this._geom[n]);if(o.size()>0){var a=dP.getLocations(this._geom[i]);if(this.computeContainmentDistance(a,o,r),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=r[0],this._minDistanceLocation[n]=r[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&JN(arguments[0],VS)&&JN(arguments[1],VS)){for(var s=arguments[0],u=arguments[1],l=arguments[2],c=0;c<s.size();c++)for(var h=s.get(c),f=0;f<u.size();f++)if(t.computeContainmentDistance(h,u.get(f),l),t._minDistance<=t._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof hP&&arguments[1]instanceof FI){var p=arguments[0],d=arguments[1],g=arguments[2],y=p.getCoordinate();if(HN.EXTERIOR!==this._ptLocator.locate(y,d))return this._minDistance=0,g[0]=p,g[1]=new hP(d,y),null}},gP.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),a=0;a<e.size();a++){var s=e.get(a);if(r.computeMinDistance(o,s,n),r._minDistance<=r._terminateDistance)return null}},gP.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=lP.getLines(this._geom[0]),n=lP.getLines(this._geom[1]),r=pP.getPoints(this._geom[0]),i=pP.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},gP.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},gP.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},gP.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},gP.prototype.computeMinDistance=function(){var t=this;if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof TI&&arguments[1]instanceof RI){var e=arguments[0],n=arguments[1],r=arguments[2];if(e.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var i=e.getCoordinates(),o=n.getCoordinate(),a=0;a<i.length-1;a++){var s=CS.distancePointLine(o,i[a],i[a+1]);if(s<t._minDistance){t._minDistance=s;var u=new tO(i[a],i[a+1]),l=u.closestPoint(o);r[0]=new hP(e,a,l),r[1]=new hP(n,0,o)}if(t._minDistance<=t._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof TI&&arguments[1]instanceof TI){var c=arguments[0],h=arguments[1],f=arguments[2];if(c.getEnvelopeInternal().distance(h.getEnvelopeInternal())>this._minDistance)return null;for(var p=c.getCoordinates(),d=h.getCoordinates(),g=0;g<p.length-1;g++)for(var y=0;y<d.length-1;y++){var _=CS.distanceLineLine(p[g],p[g+1],d[y],d[y+1]);if(_<t._minDistance){t._minDistance=_;var v=new tO(p[g],p[g+1]),m=new tO(d[y],d[y+1]),x=v.closestPoints(m);f[0]=new hP(c,g,x[0]),f[1]=new hP(h,y,x[1])}if(t._minDistance<=t._terminateDistance)return null}}},gP.prototype.computeMinDistancePoints=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),a=0;a<e.size();a++){var s=e.get(a),u=o.getCoordinate().distance(s.getCoordinate());if(u<r._minDistance&&(r._minDistance=u,n[0]=new hP(o,0,o.getCoordinate()),n[1]=new hP(s,0,s.getCoordinate())),r._minDistance<=r._terminateDistance)return null}},gP.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new zN("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},gP.prototype.computeMinDistanceLines=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),a=0;a<e.size();a++){var s=e.get(a);if(r.computeMinDistance(o,s,n),r._minDistance<=r._terminateDistance)return null}},gP.prototype.interfaces_=function(){return[]},gP.prototype.getClass=function(){return gP},gP.distance=function(t,e){return new gP(t,e).distance()},gP.isWithinDistance=function(t,e,n){return new gP(t,e,n).distance()<=n},gP.nearestPoints=function(t,e){return new gP(t,e).nearestPoints()};var yP=function(){this._pt=[new WN,new WN],this._distance=GN.NaN,this._isNull=!0};yP.prototype.getCoordinates=function(){return this._pt},yP.prototype.getCoordinate=function(t){return this._pt[t]},yP.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},yP.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},yP.prototype.toString=function(){return mS.toLineString(this._pt[0],this._pt[1])},yP.prototype.getDistance=function(){return this._distance},yP.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},yP.prototype.interfaces_=function(){return[]},yP.prototype.getClass=function(){return yP};var _P=function(){};_P.prototype.interfaces_=function(){return[]},_P.prototype.getClass=function(){return _P},_P.computeDistance=function(){if(arguments[2]instanceof yP&&arguments[0]instanceof TI&&arguments[1]instanceof WN)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new tO,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof yP&&arguments[0]instanceof FI&&arguments[1]instanceof WN){var s=arguments[0],u=arguments[1],l=arguments[2];_P.computeDistance(s.getExteriorRing(),u,l);for(var c=0;c<s.getNumInteriorRing();c++)_P.computeDistance(s.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof yP&&arguments[0]instanceof LS&&arguments[1]instanceof WN){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof TI)_P.computeDistance(h,f,p);else if(h instanceof FI)_P.computeDistance(h,f,p);else if(h instanceof xI)for(var d=h,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);_P.computeDistance(y,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof yP&&arguments[0]instanceof tO&&arguments[1]instanceof WN){var _=arguments[0],v=arguments[1],m=arguments[2],x=_.closestPoint(v);m.setMinimum(x,v)}};var vP=function(){this._g0=null,this._g1=null,this._ptDist=new yP,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},mP={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};vP.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},vP.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new zN("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},vP.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},vP.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},vP.prototype.computeOrientedDistance=function(t,e,n){var r=new xP(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new bP(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},vP.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},vP.prototype.interfaces_=function(){return[]},vP.prototype.getClass=function(){return vP},vP.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new vP(t,e);return n.distance()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new vP(r,i);return a.setDensifyFraction(o),a.distance()}},mP.MaxPointDistanceFilter.get=function(){return xP},mP.MaxDensifiedByFractionDistanceFilter.get=function(){return bP},Object.defineProperties(vP,mP);var xP=function(){this._maxPtDist=new yP,this._minPtDist=new yP,this._euclideanDist=new _P,this._geom=null;var t=arguments[0];this._geom=t};xP.prototype.filter=function(t){this._minPtDist.initialize(),_P.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},xP.prototype.getMaxPointDistance=function(){return this._maxPtDist},xP.prototype.interfaces_=function(){return[kS]},xP.prototype.getClass=function(){return xP};var bP=function(){this._maxPtDist=new yP,this._minPtDist=new yP,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};bP.prototype.filter=function(t,e){var n=this;if(0===e)return null;for(var r=t.getCoordinate(e-1),i=t.getCoordinate(e),o=(i.x-r.x)/this._numSubSegs,a=(i.y-r.y)/this._numSubSegs,s=0;s<this._numSubSegs;s++){var u=r.x+s*o,l=r.y+s*a,c=new WN(u,l);n._minPtDist.initialize(),_P.computeDistance(n._geom,c,n._minPtDist),n._maxPtDist.setMaximum(n._minPtDist)}},bP.prototype.isDone=function(){return!1},bP.prototype.isGeometryChanged=function(){return!1},bP.prototype.getMaxPointDistance=function(){return this._maxPtDist},bP.prototype.interfaces_=function(){return[mI]},bP.prototype.getClass=function(){return bP};var MP=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},wP={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};MP.prototype.checkMaximumDistance=function(t,e,n){var r=new vP(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+mS.toLineString(i[0],i[1])+")"}},MP.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=MP.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),MP.VERBOSE&&hS.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},MP.prototype.checkNegativeValid=function(){if(!(this._input instanceof FI||this._input instanceof qI||this._input instanceof xI))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},MP.prototype.getErrorIndicator=function(){return this._errorIndicator},MP.prototype.checkMinimumDistance=function(t,e,n){var r=new gP(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+mS.toLineString(i[0],i[1])+" )"}},MP.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},MP.prototype.getErrorLocation=function(){return this._errorLocation},MP.prototype.getPolygonLines=function(t){for(var e=new YS,n=new lP(e),r=uP.getPolygons(t).iterator();r.hasNext();){r.next().apply(n)}return t.getFactory().buildGeometry(e)},MP.prototype.getErrorMessage=function(){return this._errMsg},MP.prototype.interfaces_=function(){return[]},MP.prototype.getClass=function(){return MP},wP.VERBOSE.get=function(){return!1},wP.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(MP,wP);var EP=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},NP={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};EP.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},EP.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*EP.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new pS(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new pS(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},EP.prototype.checkDistance=function(){var t=new MP(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},EP.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},EP.prototype.checkPolygonal=function(){this._result instanceof FI||this._result instanceof qI||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},EP.prototype.getErrorIndicator=function(){return this._errorIndicator},EP.prototype.getErrorLocation=function(){return this._errorLocation},EP.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},EP.prototype.report=function(t){if(!EP.VERBOSE)return null;hS.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},EP.prototype.getErrorMessage=function(){return this._errorMsg},EP.prototype.interfaces_=function(){return[]},EP.prototype.getClass=function(){return EP},EP.isValidMsg=function(t,e,n){var r=new EP(t,e,n);return r.isValid()?null:r.getErrorMessage()},EP.isValid=function(t,e,n){return!!new EP(t,e,n).isValid()},NP.VERBOSE.get=function(){return!1},NP.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(EP,NP);var SP=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};SP.prototype.getCoordinates=function(){return this._pts},SP.prototype.size=function(){return this._pts.length},SP.prototype.getCoordinate=function(t){return this._pts[t]},SP.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},SP.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:QC.octant(this.getCoordinate(t),this.getCoordinate(t+1))},SP.prototype.setData=function(t){this._data=t},SP.prototype.getData=function(){return this._data},SP.prototype.toString=function(){return mS.toLineString(new YI(this._pts))},SP.prototype.interfaces_=function(){return[JC]},SP.prototype.getClass=function(){return SP};var IP=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new YS,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};IP.prototype.getInteriorIntersection=function(){return this._interiorIntersection},IP.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},IP.prototype.getIntersectionSegments=function(){return this._intSegments},IP.prototype.count=function(){return this._intersectionCount},IP.prototype.getIntersections=function(){return this._intersections},IP.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},IP.prototype.setKeepIntersections=function(t){this._keepIntersections=t},IP.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!(this.isEndSegment(t,e)||this.isEndSegment(n,r)))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},IP.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},IP.prototype.hasIntersection=function(){return null!==this._interiorIntersection},IP.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},IP.prototype.interfaces_=function(){return[TO]},IP.prototype.getClass=function(){return IP},IP.createAllIntersectionsFinder=function(t){var e=new IP(t);return e.setFindAllIntersections(!0),e},IP.createAnyIntersectionFinder=function(t){return new IP(t)},IP.createIntersectionCounter=function(t){var e=new IP(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var CP=function(){this._li=new NS,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};CP.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},CP.prototype.getIntersections=function(){return this._segInt.getIntersections()},CP.prototype.isValid=function(){return this.execute(),this._isValid},CP.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},CP.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new IP(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new sO;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},CP.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new dC(this.getErrorMessage(),this._segInt.getInteriorIntersection())},CP.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+mS.toLineString(t[0],t[1])+" and "+mS.toLineString(t[2],t[3])},CP.prototype.interfaces_=function(){return[]},CP.prototype.getClass=function(){return CP},CP.computeIntersections=function(t){var e=new CP(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var OP=function t(){this._nv=null;var e=arguments[0];this._nv=new CP(t.toSegmentStrings(e))};OP.prototype.checkValid=function(){this._nv.checkValid()},OP.prototype.interfaces_=function(){return[]},OP.prototype.getClass=function(){return OP},OP.toSegmentStrings=function(t){for(var e=new YS,n=t.iterator();n.hasNext();){var r=n.next();e.add(new SP(r.getCoordinates(),r))}return e},OP.checkValid=function(t){new OP(t).checkValid()};var PP=function(t){this._mapOp=t};PP.prototype.map=function(t){for(var e=new YS,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(eC.toGeometryArray(e))},PP.prototype.interfaces_=function(){return[]},PP.prototype.getClass=function(){return PP},PP.map=function(t,e){return new PP(e).map(t)};var LP=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new YS,this._resultLineList=new YS;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};LP.prototype.collectLines=function(t){for(var e=this,n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next();e.collectLineEdge(r,t,e._lineEdgesList),e.collectBoundaryTouchEdge(r,t,e._lineEdgesList)}},LP.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},LP.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},LP.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!hL.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},LP.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();){t.next().getEdges().findCoveredLineEdges()}for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},LP.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},LP.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},LP.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(MS.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(hL.isResultOfOp(r,e)&&e===hL.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},LP.prototype.interfaces_=function(){return[]},LP.prototype.getClass=function(){return LP};var AP=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new YS;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};AP.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},AP.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!n.isInResult()&&(!n.isIncidentEdgeInResult()&&(0===n.getEdges().getDegree()||t===hL.INTERSECTION))){var r=n.getLabel();hL.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},AP.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},AP.prototype.interfaces_=function(){return[]},AP.prototype.getClass=function(){return AP};var TP=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};TP.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},TP.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof GI&&!r.isEmpty()||(n=!1);for(var i=new YS,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof GI||(n=!1),i.add(a))}if(n)return this._factory.createPolygon(r,i.toArray([]));var s=new YS;return null!==r&&s.add(r),s.addAll(i),this._factory.buildGeometry(s)},TP.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},TP.prototype.getInputGeometry=function(){return this._inputGeom},TP.prototype.transformMultiLineString=function(t,e){for(var n=new YS,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},TP.prototype.transformCoordinates=function(t,e){return this.copy(t)},TP.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},TP.prototype.transformMultiPoint=function(t,e){for(var n=new YS,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},TP.prototype.transformMultiPolygon=function(t,e){for(var n=new YS,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},TP.prototype.copy=function(t){return t.copy()},TP.prototype.transformGeometryCollection=function(t,e){for(var n=new YS,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(eC.toGeometryArray(n)):this._factory.buildGeometry(n)},TP.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof RI)return this.transformPoint(t,null);if(t instanceof zI)return this.transformMultiPoint(t,null);if(t instanceof GI)return this.transformLinearRing(t,null);if(t instanceof TI)return this.transformLineString(t,null);if(t instanceof bI)return this.transformMultiLineString(t,null);if(t instanceof FI)return this.transformPolygon(t,null);if(t instanceof qI)return this.transformMultiPolygon(t,null);if(t instanceof xI)return this.transformGeometryCollection(t,null);throw new zN("Unknown Geometry subtype: "+t.getClass().getName())},TP.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},TP.prototype.interfaces_=function(){return[]},TP.prototype.getClass=function(){return TP};var kP=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new tO,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof TI&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];t.call(this,e.getCoordinates(),n)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=t.isClosed(r),this._snapTolerance=i}};kP.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new WN(o)),0===r&&this._isClosed&&t.set(t.size()-1,new WN(o)))}},kP.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},kP.prototype.snapTo=function(t){var e=new $S(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},kP.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new WN(i),!1)}},kP.prototype.findSegmentIndexToSnap=function(t,e){for(var n=this,r=GN.MAX_VALUE,i=-1,o=0;o<e.size()-1;o++){if(n._seg.p0=e.get(o),n._seg.p1=e.get(o+1),n._seg.p0.equals2D(t)||n._seg.p1.equals2D(t)){if(n._allowSnappingToSourceVertices)continue;return-1}var a=n._seg.distance(t);a<n._snapTolerance&&a<r&&(r=a,i=o)}return i},kP.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},kP.prototype.interfaces_=function(){return[]},kP.prototype.getClass=function(){return kP},kP.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var RP=function(t){this._srcGeom=t||null},DP={SNAP_PRECISION_FACTOR:{configurable:!0}};RP.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new FP(e,n).transform(this._srcGeom)},RP.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new FP(t,n,!0).transform(this._srcGeom),i=r;return e&&JN(i,DI)&&(i=r.buffer(0)),i},RP.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},RP.prototype.extractTargetCoordinates=function(t){for(var e=new pI,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},RP.prototype.computeMinimumSegmentLength=function(t){for(var e=GN.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},RP.prototype.interfaces_=function(){return[]},RP.prototype.getClass=function(){return RP},RP.snap=function(t,e,n){var r=new Array(2).fill(null),i=new RP(t);r[0]=i.snapTo(e,n);var o=new RP(e);return r[1]=o.snapTo(r[0],n),r},RP.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=RP.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===JI.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(RP.computeOverlaySnapTolerance(i),RP.computeOverlaySnapTolerance(o))}},RP.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*RP.SNAP_PRECISION_FACTOR},RP.snapToSelf=function(t,e,n){return new RP(t).snapToSelf(e,n)},DP.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(RP,DP);var FP=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new kP(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(TP),zP=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};zP.prototype.getCommon=function(){return GN.longBitsToDouble(this._commonBits)},zP.prototype.add=function(t){var e=GN.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=zP.signExpBits(this._commonBits),this._isFirst=!1,null):zP.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=zP.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=zP.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},zP.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=GN.longBitsToDouble(t),n=GN.toBinaryString(t),r="0000000000000000000000000000000000000000000000000000000000000000"+n,i=r.substring(r.length-64),o=i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]";return o}},zP.prototype.interfaces_=function(){return[]},zP.prototype.getClass=function(){return zP},zP.getBit=function(t,e){return 0!=(t&1<<e)?1:0},zP.signExpBits=function(t){return t>>52},zP.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},zP.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(zP.getBit(t,r)!==zP.getBit(e,r))return n;n++}return 52};var GP=function(){this._commonCoord=null,this._ccFilter=new jP},qP={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};GP.prototype.addCommonBits=function(t){var e=new BP(this._commonCoord);t.apply(e),t.geometryChanged()},GP.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new WN(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new BP(e);return t.apply(n),t.geometryChanged(),t},GP.prototype.getCommonCoordinate=function(){return this._commonCoord},GP.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},GP.prototype.interfaces_=function(){return[]},GP.prototype.getClass=function(){return GP},qP.CommonCoordinateFilter.get=function(){return jP},qP.Translater.get=function(){return BP},Object.defineProperties(GP,qP);var jP=function(){this._commonBitsX=new zP,this._commonBitsY=new zP};jP.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},jP.prototype.getCommonCoordinate=function(){return new WN(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},jP.prototype.interfaces_=function(){return[kS]},jP.prototype.getClass=function(){return jP};var BP=function(){this.trans=null;var t=arguments[0];this.trans=t};BP.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},BP.prototype.isDone=function(){return!1},BP.prototype.isGeometryChanged=function(){return!0},BP.prototype.interfaces_=function(){return[mI]},BP.prototype.getClass=function(){return BP};var UP=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};UP.prototype.selfSnap=function(t){return new RP(t).snapTo(t,this._snapTolerance)},UP.prototype.removeCommonBits=function(t){this._cbr=new GP,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},UP.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},UP.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=hL.overlayOp(e[0],e[1],t);return this.prepareResult(n)},UP.prototype.checkValid=function(t){t.isValid()||hS.out.println("Snapped geometry is invalid")},UP.prototype.computeSnapTolerance=function(){this._snapTolerance=RP.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},UP.prototype.snap=function(t){var e=this.removeCommonBits(t);return RP.snap(e[0],e[1],this._snapTolerance)},UP.prototype.interfaces_=function(){return[]},UP.prototype.getClass=function(){return UP},UP.overlayOp=function(t,e,n){return new UP(t,e).getResultGeometry(n)},UP.union=function(t,e){return UP.overlayOp(t,e,hL.UNION)},UP.intersection=function(t,e){return UP.overlayOp(t,e,hL.INTERSECTION)},UP.symDifference=function(t,e){return UP.overlayOp(t,e,hL.SYMDIFFERENCE)},UP.difference=function(t,e){return UP.overlayOp(t,e,hL.DIFFERENCE)};var VP=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};VP.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=hL.overlayOp(this._geom[0],this._geom[1],t);n=!0}catch(t){if(!(t instanceof xS))throw t;r=t}if(!n)try{e=UP.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof xS?r:t}return e},VP.prototype.interfaces_=function(){return[]},VP.prototype.getClass=function(){return VP},VP.overlayOp=function(t,e,n){return new VP(t,e).getResultGeometry(n)},VP.union=function(t,e){return VP.overlayOp(t,e,hL.UNION)},VP.intersection=function(t,e){return VP.overlayOp(t,e,hL.INTERSECTION)},VP.symDifference=function(t,e){return VP.overlayOp(t,e,hL.SYMDIFFERENCE)},VP.difference=function(t,e){return VP.overlayOp(t,e,hL.DIFFERENCE)};var WP=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};WP.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},WP.prototype.interfaces_=function(){return[]},WP.prototype.getClass=function(){return WP};var YP=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},XP={INSERT:{configurable:!0},DELETE:{configurable:!0}};YP.prototype.isDelete=function(){return this._eventType===YP.DELETE},YP.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},YP.prototype.getObject=function(){return this._obj},YP.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},YP.prototype.getInsertEvent=function(){return this._insertEvent},YP.prototype.isInsert=function(){return this._eventType===YP.INSERT},YP.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},YP.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},YP.prototype.interfaces_=function(){return[jN]},YP.prototype.getClass=function(){return YP},XP.INSERT.get=function(){return 1},XP.DELETE.get=function(){return 2},Object.defineProperties(YP,XP);var $P=function(){};$P.prototype.interfaces_=function(){return[]},$P.prototype.getClass=function(){return $P};var HP=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};HP.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(HP.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},HP.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},HP.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},HP.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},HP.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},HP.prototype.hasProperIntersection=function(){return this._hasProper},HP.prototype.hasIntersection=function(){return this._hasIntersection},HP.prototype.isDone=function(){return this._isDone},HP.prototype.isBoundaryPoint=function(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},HP.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},HP.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},HP.prototype.interfaces_=function(){return[]},HP.prototype.getClass=function(){return HP},HP.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var QP=function(t){function e(){t.call(this),this.events=new YS,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){GC.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var n=0;n<this.events.size();n++){var r=t.events.get(n);if(r.isInsert()&&t.processOverlaps(n,r.getDeleteEventIndex(),r,e),e.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof HP&&JN(arguments[0],VS)&&JN(arguments[1],VS)){var i=arguments[0],o=arguments[1],a=arguments[2];this.addEdges(i,i),this.addEdges(o,o),this.computeIntersections(a)}else if("boolean"==typeof arguments[2]&&JN(arguments[0],VS)&&arguments[1]instanceof HP){var s=arguments[0],u=arguments[1],l=arguments[2];l?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(u)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new WP(n,i),a=new YP(e,n.getMinX(i),o);this.events.add(a),this.events.add(new YP(n.getMaxX(i),a))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(i.computeIntersections(s,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();t.addEdge(r,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.iterator();a.hasNext();){var s=a.next();t.addEdge(s,o)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}($P),JP=function(){this._min=GN.POSITIVE_INFINITY,this._max=GN.NEGATIVE_INFINITY},KP={NodeComparator:{configurable:!0}};JP.prototype.getMin=function(){return this._min},JP.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},JP.prototype.getMax=function(){return this._max},JP.prototype.toString=function(){return mS.toLineString(new WN(this._min,0),new WN(this._max,0))},JP.prototype.interfaces_=function(){return[]},JP.prototype.getClass=function(){return JP},KP.NodeComparator.get=function(){return ZP},Object.defineProperties(JP,KP);var ZP=function(){};ZP.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},ZP.prototype.interfaces_=function(){return[UN]},ZP.prototype.getClass=function(){return ZP};var tL=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(JP),eL=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(JP),nL=function(){this._leaves=new YS,this._root=null,this._level=0};nL.prototype.buildTree=function(){GC.sort(this._leaves,new JP.NodeComparator);for(var t=this._leaves,e=null,n=new YS;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},nL.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new tL(t,e,n))},nL.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},nL.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},nL.prototype.printNode=function(t){hS.out.println(mS.toLineString(new WN(t._min,this._level),new WN(t._max,this._level)))},nL.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},nL.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new eL(t.get(n),t.get(n+1));e.add(i)}}},nL.prototype.interfaces_=function(){return[]},nL.prototype.getClass=function(){return nL};var rL=function(){this._items=new YS};rL.prototype.visitItem=function(t){this._items.add(t)},rL.prototype.getItems=function(){return this._items},rL.prototype.interfaces_=function(){return[RC]},rL.prototype.getClass=function(){return rL};var iL=function(){this._index=null;var t=arguments[0];if(!JN(t,DI))throw new zN("Argument must be Polygonal");this._index=new sL(t)},oL={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};iL.prototype.locate=function(t){var e=new IS(t),n=new aL(e);return this._index.query(t.y,t.y,n),e.getLocation()},iL.prototype.interfaces_=function(){return[NO]},iL.prototype.getClass=function(){return iL},oL.SegmentVisitor.get=function(){return aL},oL.IntervalIndexedGeometry.get=function(){return sL},Object.defineProperties(iL,oL);var aL=function(){this._counter=null;var t=arguments[0];this._counter=t};aL.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},aL.prototype.interfaces_=function(){return[RC]},aL.prototype.getClass=function(){return aL};var sL=function(){this._index=new nL;var t=arguments[0];this.init(t)};sL.prototype.init=function(t){for(var e=lP.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},sL.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new tO(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},sL.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new rL;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},sL.prototype.interfaces_=function(){return[]},sL.prototype.getClass=function(){return sL};var uL=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new QI,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new cP,2===arguments.length){var e=arguments[0],n=arguments[1],r=RS.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;r.getLocation(t,lC.ON)===HN.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new HP(n,!0,!1);o.setIsDoneIfProperInt(i);var a=this.createEdgeSetIntersector(),s=this._parentGeom instanceof GI||this._parentGeom instanceof FI||this._parentGeom instanceof qI,u=r||!s;return a.computeIntersections(this._edges,o,u),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();){e.next().eiList.addSplitEdges(t)}},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new HP(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof RI){var t=arguments[0],e=t.getCoordinate();this.insertPoint(this._argIndex,e,HN.INTERIOR)}else if(arguments[0]instanceof WN){var n=arguments[0];this.insertPoint(this._argIndex,n,HN.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),HN.EXTERIOR,HN.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,HN.INTERIOR,HN.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],HN.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],HN.BOUNDARY)},e.prototype.addLineString=function(t){var e=HS.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new jO(e,new vC(this._argIndex,HN.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),MS.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===HN.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=HS.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;CS.isCCW(r)&&(i=n,o=e);var a=new jO(r,new vC(this._argIndex,HN.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],HN.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new vC(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new QP},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof qI&&(this._useBoundaryDeterminationRule=!1),e instanceof FI)this.addPolygon(e);else if(e instanceof TI)this.addLineString(e);else if(e instanceof RI)this.addPoint(e);else if(e instanceof zI)this.addCollection(e);else if(e instanceof bI)this.addCollection(e);else if(e instanceof qI)this.addCollection(e);else{if(!(e instanceof xI))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return JN(this._parentGeom,DI)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new iL(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?HN.BOUNDARY:HN.INTERIOR},e}(PC),lL=function(){if(this._li=new NS,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new uL(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=RS.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new uL(0,e,r),this._arg[1]=new uL(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new uL(0,i,a),this._arg[1]=new uL(1,o,a)}};lL.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},lL.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},lL.prototype.interfaces_=function(){return[]},lL.prototype.getClass=function(){return lL};var cL=function(){};cL.prototype.interfaces_=function(){return[]},cL.prototype.getClass=function(){return cL},cL.map=function(){if(arguments[0]instanceof LS&&JN(arguments[1],cL.MapOp)){for(var t=arguments[0],e=arguments[1],n=new YS,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(JN(arguments[0],jS)&&JN(arguments[1],cL.MapOp)){for(var o=arguments[0],a=arguments[1],s=new YS,u=o.iterator();u.hasNext();){var l=u.next(),c=a.map(l);null!==c&&s.add(c)}return s}},cL.MapOp=function(){};var hL=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new cP,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new AO,this._resultPolyList=new YS,this._resultLineList=new YS,this._resultPointList=new YS,this._graph=new PC(new PO),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new vC(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new YS;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){t.next().getEdges().mergeSymLabels()}},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==HN.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new YS,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new YS;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),OP.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new LC(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new LP(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new AP(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,lC.RIGHT),i.getLocation(1,lC.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(MS.isTrue(!r.isNull(i,lC.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,lC.LEFT,r.getLocation(i,lC.LEFT)),MS.isTrue(!r.isNull(i,lC.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,lC.RIGHT,r.getLocation(i,lC.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){t.next().getEdges().computeLabelling(this._arg)}this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(lL);hL.overlayOp=function(t,e,n){return new hL(t,e).getResultGeometry(n)},hL.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return hL.createEmptyResult(hL.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return PP.map(t,{interfaces_:function(){return[cL.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),VP.overlayOp(t,e,hL.INTERSECTION)},hL.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return hL.createEmptyResult(hL.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),VP.overlayOp(t,e,hL.SYMDIFFERENCE)},hL.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case hL.INTERSECTION:o=Math.min(r,i);break;case hL.UNION:o=Math.max(r,i);break;case hL.DIFFERENCE:o=r;break;case hL.SYMDIFFERENCE:o=Math.max(r,i)}return o},hL.createEmptyResult=function(t,e,n,r){var i=null;switch(hL.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},hL.difference=function(t,e){return t.isEmpty()?hL.createEmptyResult(hL.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),VP.overlayOp(t,e,hL.DIFFERENCE))},hL.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return hL.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];switch(i===HN.BOUNDARY&&(i=HN.INTERIOR),o===HN.BOUNDARY&&(o=HN.INTERIOR),a){case hL.INTERSECTION:return i===HN.INTERIOR&&o===HN.INTERIOR;case hL.UNION:return i===HN.INTERIOR||o===HN.INTERIOR;case hL.DIFFERENCE:return i===HN.INTERIOR&&o!==HN.INTERIOR;case hL.SYMDIFFERENCE:return i===HN.INTERIOR&&o!==HN.INTERIOR||i!==HN.INTERIOR&&o===HN.INTERIOR}return!1}},hL.INTERSECTION=1,hL.UNION=2,hL.DIFFERENCE=3,hL.SYMDIFFERENCE=4;var fL=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new cP,this._seg=new tO;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};fL.prototype.isWithinToleranceOfBoundary=function(t){for(var e=this,n=0;n<this._linework.getNumGeometries();n++)for(var r=e._linework.getGeometryN(n).getCoordinateSequence(),i=0;i<r.size()-1;i++){if(r.getCoordinate(i,e._seg.p0),r.getCoordinate(i+1,e._seg.p1),e._seg.distance(t)<=e._boundaryDistanceTolerance)return!0}return!1},fL.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?HN.BOUNDARY:this._ptLocator.locate(t,this._g)},fL.prototype.extractLinework=function(t){var e=new pL;t.apply(e);var n=e.getLinework(),r=eC.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},fL.prototype.interfaces_=function(){return[]},fL.prototype.getClass=function(){return fL};var pL=function(){this._linework=null,this._linework=new YS};pL.prototype.getLinework=function(){return this._linework},pL.prototype.filter=function(t){if(t instanceof FI){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},pL.prototype.interfaces_=function(){return[vI]},pL.prototype.getClass=function(){return pL};var dL=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};dL.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},dL.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},dL.prototype.getPoints=function(t){for(var e=new YS,n=lP.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},dL.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=Math.sqrt(i*i+o*o),s=n*i/a,u=n*o/a,l=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var h=new WN(l-u,c+s);r.add(h)}if(this._doRight){var f=new WN(l+u,c-s);r.add(f)}},dL.prototype.interfaces_=function(){return[]},dL.prototype.getClass=function(){return dL};var gL=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new YS;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new fL(this._geom[0],this._boundaryDistanceTolerance),new fL(this._geom[1],this._boundaryDistanceTolerance),new fL(this._geom[2],this._boundaryDistanceTolerance)]},yL={TOLERANCE:{configurable:!0}};gL.prototype.reportResult=function(t,e,n){hS.out.println("Overlay result invalid - A:"+HN.toLocationSymbol(e[0])+" B:"+HN.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+HN.toLocationSymbol(e[2]))},gL.prototype.isValid=function(t){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var e=this.checkValid(t);return e},gL.prototype.checkValid=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=0;n<this._testCoords.size();n++){var r=t._testCoords.get(n);if(!t.checkValid(e,r))return t._invalidLocation=r,!1}return!0}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._location[0]=this._locFinder[0].getLocation(o),this._location[1]=this._locFinder[1].getLocation(o),this._location[2]=this._locFinder[2].getLocation(o),!!gL.hasLocation(this._location,HN.BOUNDARY)||this.isValidResult(i,this._location)}},gL.prototype.addTestPts=function(t){var e=new dL(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},gL.prototype.isValidResult=function(t,e){var n=hL.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===HN.INTERIOR);return r||this.reportResult(t,e,n),r},gL.prototype.getInvalidLocation=function(){return this._invalidLocation},gL.prototype.interfaces_=function(){return[]},gL.prototype.getClass=function(){return gL},gL.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},gL.computeBoundaryDistanceTolerance=function(t,e){return Math.min(RP.computeSizeBasedSnapTolerance(t),RP.computeSizeBasedSnapTolerance(e))},gL.isValid=function(t,e,n,r){return new gL(t,e,r).isValid(n)},yL.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(gL,yL);var _L=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};_L.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},_L.prototype.combine=function(){for(var t=new YS,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},_L.prototype.interfaces_=function(){return[]},_L.prototype.getClass=function(){return _L},_L.combine=function(){if(1===arguments.length){var t=arguments[0],e=new _L(t);return e.combine()}if(2===arguments.length){var n=arguments[0],r=arguments[1],i=new _L(_L.createList(n,r));return i.combine()}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],u=new _L(_L.createList(o,a,s));return u.combine()}},_L.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},_L.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new YS;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new YS;return a.add(r),a.add(i),a.add(o),a}};var vL=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new YS)},mL={STRTREE_NODE_CAPACITY:{configurable:!0}};vL.prototype.reduceToGeometries=function(t){for(var e=new YS,n=t.iterator();n.hasNext();){var r=n.next(),i=null;JN(r,VS)?i=this.unionTree(r):r instanceof LS&&(i=r),e.add(i)}return e},vL.prototype.extractByEnvelope=function(t,e,n){for(var r=new YS,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},vL.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return _L.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},vL.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new WC(vL.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},vL.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=vL.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(vL.getGeometry(e,n),vL.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),a=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,r);return this.unionSafe(a,s)}},vL.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},vL.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},vL.prototype.unionActual=function(t,e){return vL.restrictToPolygons(t.union(e))},vL.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},vL.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new YS,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),a=this.unionActual(i,o);return r.add(a),_L.combine(r)},vL.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0],e=t.get(0).getFactory(),n=e.buildGeometry(t),r=n.buffer(0);return r}if(2===arguments.length){var i=arguments[0],o=arguments[1],a=i.getFactory(),s=a.createGeometryCollection([i,o]),u=s.buffer(0);return u}},vL.prototype.interfaces_=function(){return[]},vL.prototype.getClass=function(){return vL},vL.restrictToPolygons=function(t){if(JN(t,DI))return t;var e=uP.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(eC.toPolygonArray(e))},vL.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},vL.union=function(t){return new vL(t).union()},mL.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(vL,mL);var xL=function(){};function bL(){return new ML}function ML(){this.reset()}xL.prototype.interfaces_=function(){return[]},xL.prototype.getClass=function(){return xL},xL.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return hL.createEmptyResult(hL.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),VP.overlayOp(t,e,hL.UNION)},ML.prototype={constructor:ML,reset:function(){this.s=this.t=0},add:function(t){EL(wL,t,this.t),EL(this,wL.s,this.s),this.s?this.t+=wL.t:this.s=wL.t},valueOf:function(){return this.s}};var wL=new ML;function EL(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var NL=1e-6,SL=Math.PI,IL=SL/2,CL=SL/4,OL=2*SL,PL=180/SL,LL=SL/180,AL=Math.abs,TL=Math.atan,kL=Math.atan2,RL=Math.cos,DL=Math.sin,FL=Math.sqrt;function zL(t){return t>1?0:t<-1?SL:Math.acos(t)}function GL(t){return t>1?IL:t<-1?-IL:Math.asin(t)}function qL(){}function jL(t,e){t&&WL.hasOwnProperty(t.type)&&WL[t.type](t,e)}var BL,UL,VL={Feature:function(t,e){jL(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)jL(n[r].geometry,e)}},WL={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){YL(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)YL(n[r],e,0)},Polygon:function(t,e){XL(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)XL(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)jL(n[r],e)}};function YL(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function XL(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)YL(t[n],e,1);e.polygonEnd()}function $L(t){return[kL(t[1],t[0]),GL(t[2])]}function HL(t){var e=t[0],n=t[1],r=RL(n);return[r*RL(e),r*DL(e),DL(n)]}function QL(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function JL(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function KL(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ZL(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function tA(t){var e=FL(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function eA(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function nA(t,e){return[t>SL?t-OL:t<-SL?t+OL:t,e]}function rA(t){return function(e,n){return[(e+=t)>SL?e-OL:e<-SL?e+OL:e,n]}}function iA(t){var e=rA(t);return e.invert=rA(-t),e}function oA(t,e){var n=RL(t),r=DL(t),i=RL(e),o=DL(e);function a(t,e){var a=RL(e),s=RL(t)*a,u=DL(t)*a,l=DL(e),c=l*n+s*r;return[kL(u*i-c*o,s*n-l*r),GL(c*i+u*o)]}return a.invert=function(t,e){var a=RL(e),s=RL(t)*a,u=DL(t)*a,l=DL(e),c=l*i-u*o;return[kL(u*i+l*o,s*n+c*r),GL(c*n-s*r)]},a}function aA(t,e){(e=HL(e))[0]-=t,tA(e);var n=zL(-e[1]);return((-e[2]<0?-n:n)+OL-NL)%OL}function sA(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:qL,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function uA(t,e){return AL(t[0]-e[0])<NL&&AL(t[1]-e[1])<NL}function lA(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function cA(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(uA(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else s.push(n=new lA(r,t,null,!0)),u.push(n.o=new lA(r,null,n,!1)),s.push(n=new lA(a,t,null,!1)),u.push(n.o=new lA(a,null,n,!0))}})),s.length){for(u.sort(e),hA(s),hA(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var l,c,h=s[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;l=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,a=l.length;o<a;++o)i.point((c=l[o])[0],c[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(p)for(l=f.p.z,o=l.length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else r(f.x,f.p.x,-1,i);f=f.p}l=(f=f.o).z,p=!p}while(!f.v);i.lineEnd()}}}function hA(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function fA(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function pA(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n}bL(),bL(),bL(),nA.invert=nA,1===(BL=fA).length&&(UL=BL,BL=function(t,e){return fA(UL(t),e)});var dA=1e9,gA=-dA;function yA(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,l){var c=0,h=0;if(null==i||(c=a(i,s))!==(h=a(o,s))||u(i,o)<0^s>0)do{l.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+s+4)%4)!==h);else l.point(o[0],o[1])}function a(r,i){return AL(r[0]-t)<NL?i>0?0:3:AL(r[0]-n)<NL?i>0?2:1:AL(r[1]-e)<NL?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var u,l,c,h,f,p,d,g,y,_,v,m=a,x=sA(),b={point:M,lineStart:function(){b.point=w,l&&l.push(c=[]);_=!0,y=!1,d=g=NaN},lineEnd:function(){u&&(w(h,f),p&&y&&x.rejoin(),u.push(x.result()));b.point=M,y&&m.lineEnd()},polygonStart:function(){m=x,u=[],l=[],v=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=l.length;n<i;++n)for(var o,a,s=l[n],u=1,c=s.length,h=s[0],f=h[0],p=h[1];u<c;++u)o=f,a=p,f=(h=s[u])[0],p=h[1],a<=r?p>r&&(f-o)*(r-a)>(p-a)*(t-o)&&++e:p<=r&&(f-o)*(r-a)<(p-a)*(t-o)&&--e;return e}(),n=v&&e,i=(u=pA(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&cA(u,s,e,o,a),a.polygonEnd());m=a,u=l=c=null}};function M(t,e){i(t,e)&&m.point(t,e)}function w(o,a){var s=i(o,a);if(l&&c.push([o,a]),_)h=o,f=a,p=s,_=!1,s&&(m.lineStart(),m.point(o,a));else if(s&&y)m.point(o,a);else{var u=[d=Math.max(gA,Math.min(dA,d)),g=Math.max(gA,Math.min(dA,g))],x=[o=Math.max(gA,Math.min(dA,o)),a=Math.max(gA,Math.min(dA,a))];!function(t,e,n,r,i,o){var a,s=t[0],u=t[1],l=0,c=1,h=e[0]-s,f=e[1]-u;if(a=n-s,h||!(a>0)){if(a/=h,h<0){if(a<l)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>l&&(l=a)}if(a=i-s,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>l&&(l=a)}else if(h>0){if(a<l)return;a<c&&(c=a)}if(a=r-u,f||!(a>0)){if(a/=f,f<0){if(a<l)return;a<c&&(c=a)}else if(f>0){if(a>c)return;a>l&&(l=a)}if(a=o-u,f||!(a<0)){if(a/=f,f<0){if(a>c)return;a>l&&(l=a)}else if(f>0){if(a<l)return;a<c&&(c=a)}return l>0&&(t[0]=s+l*h,t[1]=u+l*f),c<1&&(e[0]=s+c*h,e[1]=u+c*f),!0}}}}}(u,x,t,e,n,r)?s&&(m.lineStart(),m.point(o,a),v=!1):(y||(m.lineStart(),m.point(u[0],u[1])),m.point(x[0],x[1]),s||m.lineEnd(),v=!1)}d=o,g=a,y=s}return b}}var _A=bL();function vA(t){return t}bL(),bL(),bL();var mA=1/0,xA=mA,bA=-mA,MA=bA,wA={point:function(t,e){t<mA&&(mA=t);t>bA&&(bA=t);e<xA&&(xA=e);e>MA&&(MA=e)},lineStart:qL,lineEnd:qL,polygonStart:qL,polygonEnd:qL,result:function(){var t=[[mA,xA],[bA,MA]];return bA=MA=-(xA=mA=1/0),t}};function EA(t,e,n,r){return function(i,o){var a,s,u,l=e(o),c=i.invert(r[0],r[1]),h=sA(),f=e(h),p=!1,d={point:g,lineStart:_,lineEnd:v,polygonStart:function(){d.point=m,d.lineStart=x,d.lineEnd=b,s=[],a=[]},polygonEnd:function(){d.point=g,d.lineStart=_,d.lineEnd=v,s=pA(s);var t=function(t,e){var n=e[0],r=e[1],i=[DL(n),-RL(n),0],o=0,a=0;_A.reset();for(var s=0,u=t.length;s<u;++s)if(c=(l=t[s]).length)for(var l,c,h=l[c-1],f=h[0],p=h[1]/2+CL,d=DL(p),g=RL(p),y=0;y<c;++y,f=v,d=x,g=b,h=_){var _=l[y],v=_[0],m=_[1]/2+CL,x=DL(m),b=RL(m),M=v-f,w=M>=0?1:-1,E=w*M,N=E>SL,S=d*x;if(_A.add(kL(S*w*DL(E),g*b+S*RL(E))),o+=N?M+w*OL:M,N^f>=n^v>=n){var I=JL(HL(h),HL(_));tA(I);var C=JL(i,I);tA(C);var O=(N^M>=0?-1:1)*GL(C[2]);(r>O||r===O&&(I[0]||I[1]))&&(a+=N^M>=0?1:-1)}}return(o<-NL||o<NL&&_A<-NL)^1&a}(a,c);s.length?(p||(o.polygonStart(),p=!0),cA(s,SA,t,n,o)):t&&(p||(o.polygonStart(),p=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),p&&(o.polygonEnd(),p=!1),s=a=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function g(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function y(t,e){var n=i(t,e);l.point(n[0],n[1])}function _(){d.point=y,l.lineStart()}function v(){d.point=g,l.lineEnd()}function m(t,e){u.push([t,e]);var n=i(t,e);f.point(n[0],n[1])}function x(){f.lineStart(),u=[]}function b(){m(u[0][0],u[0][1]),f.lineEnd();var t,e,n,r,i=f.clean(),l=h.result(),c=l.length;if(u.pop(),a.push(u),u=null,c)if(1&i){if((e=(n=l[0]).length-1)>0){for(p||(o.polygonStart(),p=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else c>1&&2&i&&l.push(l.pop().concat(l.shift())),s.push(l.filter(NA))}return d}}function NA(t){return t.length>1}function SA(t,e){return((t=t.x)[0]<0?t[1]-IL-NL:IL-t[1])-((e=e.x)[0]<0?e[1]-IL-NL:IL-e[1])}bL();var IA=EA((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?SL:-SL,u=AL(o-n);AL(u-SL)<NL?(t.point(n,r=(r+a)/2>0?IL:-IL),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=SL&&(AL(n-i)<NL&&(n-=i*NL),AL(o-s)<NL&&(o-=s*NL),r=function(t,e,n,r){var i,o,a=DL(t-n);return AL(a)>NL?TL((DL(e)*(o=RL(r))*DL(n)-DL(r)*(i=RL(e))*DL(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*IL,r.point(-SL,i),r.point(0,i),r.point(SL,i),r.point(SL,0),r.point(SL,-i),r.point(0,-i),r.point(-SL,-i),r.point(-SL,0),r.point(-SL,i);else if(AL(t[0]-e[0])>NL){var o=t[0]<e[0]?SL:-SL;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-SL,-IL]);function CA(t,e){var n=RL(t),r=n>0,i=AL(n)>NL;function o(t,e){return RL(t)*RL(e)>n}function a(t,e,r){var i=[1,0,0],o=JL(HL(t),HL(e)),a=QL(o,o),s=o[0],u=a-s*s;if(!u)return!r&&t;var l=n*a/u,c=-n*s/u,h=JL(i,o),f=ZL(i,l);KL(f,ZL(o,c));var p=h,d=QL(f,p),g=QL(p,p),y=d*d-g*(QL(f,f)-1);if(!(y<0)){var _=FL(y),v=ZL(p,(-d-_)/g);if(KL(v,f),v=$L(v),!r)return v;var m,x=t[0],b=e[0],M=t[1],w=e[1];b<x&&(m=x,x=b,b=m);var E=b-x,N=AL(E-SL)<NL;if(!N&&w<M&&(m=M,M=w,w=m),N||E<NL?N?M+w>0^v[1]<(AL(v[0]-x)<NL?M:w):M<=v[1]&&v[1]<=w:E>SL^(x<=v[0]&&v[0]<=b)){var S=ZL(p,(-d+_)/g);return KL(S,f),[v,$L(S)]}}}function s(e,n){var i=r?t:SL-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return EA(o,(function(t){var e,n,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(h,f){var p,d=[h,f],g=o(h,f),y=r?g?0:s(h,f):g?s(h+(h<0?SL:-SL),f):0;if(!e&&(l=u=g)&&t.lineStart(),g!==u&&(!(p=a(e,d))||uA(e,p)||uA(d,p))&&(d[0]+=NL,d[1]+=NL,g=o(d[0],d[1])),g!==u)c=0,g?(t.lineStart(),p=a(d,e),t.point(p[0],p[1])):(p=a(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(i&&e&&r^g){var _;y&n||!(_=a(d,e,!0))||(c=0,r?(t.lineStart(),t.point(_[0][0],_[0][1]),t.point(_[1][0],_[1][1]),t.lineEnd()):(t.point(_[1][0],_[1][1]),t.lineEnd(),t.lineStart(),t.point(_[0][0],_[0][1])))}!g||e&&uA(e,d)||t.point(d[0],d[1]),e=d,u=g,n=y},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(l&&u)<<1}}}),(function(n,r,i,o){!function(t,e,n,r,i,o){if(n){var a=RL(e),s=DL(e),u=r*n;null==i?(i=e+r*OL,o=e-u/2):(i=aA(a,i),o=aA(a,o),(r>0?i<o:i>o)&&(i+=r*OL));for(var l,c=i;r>0?c>o:c<o;c-=u)l=$L([a,-s*RL(c),-s*DL(c)]),t.point(l[0],l[1])}}(o,t,e,i,n,r)}),r?[0,-t]:[-SL,t-SL])}function OA(t){return function(e){var n=new PA;for(var r in t)n[r]=t[r];return n.stream=e,n}}function PA(){}function LA(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),function(t,e){t&&VL.hasOwnProperty(t.type)?VL[t.type](t,e):jL(t,e)}(n,t.stream(wA));var a=wA.result(),s=Math.min(r/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),u=+e[0][0]+(r-s*(a[1][0]+a[0][0]))/2,l=+e[0][1]+(i-s*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([u,l])}PA.prototype={constructor:PA,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var AA=RL(30*LL);function TA(t,e){return+e?function(t,e){function n(r,i,o,a,s,u,l,c,h,f,p,d,g,y){var _=l-r,v=c-i,m=_*_+v*v;if(m>4*e&&g--){var x=a+f,b=s+p,M=u+d,w=FL(x*x+b*b+M*M),E=GL(M/=w),N=AL(AL(M)-1)<NL||AL(o-h)<NL?(o+h)/2:kL(b,x),S=t(N,E),I=S[0],C=S[1],O=I-r,P=C-i,L=v*O-_*P;(L*L/m>e||AL((_*O+v*P)/m-.5)>.3||a*f+s*p+u*d<AA)&&(n(r,i,o,a,s,u,I,C,N,x/=w,b/=w,M,g,y),y.point(I,C),n(I,C,N,x,b,M,l,c,h,f,p,d,g,y))}}return function(e){var r,i,o,a,s,u,l,c,h,f,p,d,g={point:y,lineStart:_,lineEnd:m,polygonStart:function(){e.polygonStart(),g.lineStart=x},polygonEnd:function(){e.polygonEnd(),g.lineStart=_}};function y(n,r){n=t(n,r),e.point(n[0],n[1])}function _(){c=NaN,g.point=v,e.lineStart()}function v(r,i){var o=HL([r,i]),a=t(r,i);n(c,h,l,f,p,d,c=a[0],h=a[1],l=r,f=o[0],p=o[1],d=o[2],16,e),e.point(c,h)}function m(){g.point=y,e.lineEnd()}function x(){_(),g.point=b,g.lineEnd=M}function b(t,e){v(r=t,e),i=c,o=h,a=f,s=p,u=d,g.point=v}function M(){n(c,h,l,f,p,d,i,o,r,a,s,u,16,e),g.lineEnd=m,m()}return g}}(t,e):function(t){return OA({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var kA=OA({point:function(t,e){this.stream.point(t*LL,e*LL)}});function RA(t){return function(t){var e,n,r,i,o,a,s,u,l,c,h=150,f=480,p=250,d=0,g=0,y=0,_=0,v=0,m=null,x=IA,b=null,M=vA,w=.5,E=TA(I,w);function N(t){return[(t=o(t[0]*LL,t[1]*LL))[0]*h+n,r-t[1]*h]}function S(t){return(t=o.invert((t[0]-n)/h,(r-t[1])/h))&&[t[0]*PL,t[1]*PL]}function I(t,i){return[(t=e(t,i))[0]*h+n,r-t[1]*h]}function C(){o=eA(i=function(t,e,n){return(t%=OL)?e||n?eA(iA(t),oA(e,n)):iA(t):e||n?oA(e,n):nA}(y,_,v),e);var t=e(d,g);return n=f-t[0]*h,r=p+t[1]*h,O()}function O(){return l=c=null,N}return N.stream=function(t){return l&&c===t?l:l=kA(x(i,E(M(c=t))))},N.clipAngle=function(t){return arguments.length?(x=+t?CA(m=t*LL,6*LL):(m=null,IA),O()):m*PL},N.clipExtent=function(t){return arguments.length?(M=null==t?(b=a=s=u=null,vA):yA(b=+t[0][0],a=+t[0][1],s=+t[1][0],u=+t[1][1]),O()):null==b?null:[[b,a],[s,u]]},N.scale=function(t){return arguments.length?(h=+t,C()):h},N.translate=function(t){return arguments.length?(f=+t[0],p=+t[1],C()):[f,p]},N.center=function(t){return arguments.length?(d=t[0]%360*LL,g=t[1]%360*LL,C()):[d*PL,g*PL]},N.rotate=function(t){return arguments.length?(y=t[0]%360*LL,_=t[1]%360*LL,v=t.length>2?t[2]%360*LL:0,C()):[y*PL,_*PL,v*PL]},N.precision=function(t){return arguments.length?(E=TA(I,w=t*t),O()):FL(w)},N.fitExtent=function(t,e){return LA(N,t,e)},N.fitSize=function(t,e){return function(t,e,n){return LA(t,[[0,0],e],n)}(N,t,e)},function(){return e=t.apply(this,arguments),N.invert=e.invert&&S,C()}}((function(){return t}))()}function DA(t){return function(e,n){var r=RL(e),i=RL(n),o=t(r*i);return[o*i*DL(e),o*DL(n)]}}function FA(t){return function(e,n){var r=FL(e*e+n*n),i=t(r),o=DL(i),a=RL(i);return[kL(e*o,r*a),GL(r&&n*o/r)]}}DA((function(t){return FL(2/(1+t))})).invert=FA((function(t){return 2*GL(t/2)}));var zA=DA((function(t){return(t=zL(t))&&t/DL(t)}));function GA(){return RA(zA).scale(79.4188).clipAngle(179.999)}function qA(t,e){return[t,e]}function jA(t,e,n){var r=(n=n||{}).units||"kilometers",i=n.steps||8;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(t.type){case"GeometryCollection":return kN(t,(function(t){var n=BA(t,e,r,i);n&&o.push(n)})),mN(o);case"FeatureCollection":return TN(t,(function(t){var n=BA(t,e,r,i);n&&TN(n,(function(t){t&&o.push(t)}))})),mN(o)}return BA(t,e,r,i)}function BA(t,e,n,r){var i=t.properties||{},o="Feature"===t.type?t.geometry:t;if("GeometryCollection"===o.type){var a=[];return kN(t,(function(t){var i=BA(t,e,n,r);i&&a.push(i)})),mN(a)}var s=function(t){var e=DN(t).geometry.coordinates,n=[-e[0],-e[1]];return GA().rotate(n).scale(yN)}(o),u={type:o.type,coordinates:VA(o.coordinates,s)},l=(new sC).read(u),c=function(t,e){void 0===e&&(e="kilometers");var n=_N[e];if(!n)throw new Error(e+" units is invalid");return t*n}(function(t,e){void 0===e&&(e="kilometers");var n=_N[e];if(!n)throw new Error(e+" units is invalid");return t/n}(e,n),"meters"),h=tP.bufferOp(l,c,r);if(!UA((h=(new uC).write(h)).coordinates))return vN({type:h.type,coordinates:WA(h.coordinates,s)},i)}function UA(t){return Array.isArray(t[0])?UA(t[0]):isNaN(t[0])}function VA(t,e){return"object"!=typeof t[0]?e(t):t.map((function(t){return VA(t,e)}))}function WA(t,e){return"object"!=typeof t[0]?e.invert(t):t.map((function(t){return WA(t,e)}))}zA.invert=FA((function(t){return t})),qA.invert=qA;const YA=Object.assign({},bt,Na,Zw),XA=Object.assign({},jc,Zc);function $A(){this.reset()}$A.prototype={constructor:$A,reset:function(){this.s=this.t=0},add:function(t){QA(HA,t,this.t),QA(this,HA.s,this.s),this.s?this.t+=HA.t:this.s=HA.t},valueOf:function(){return this.s}};const HA=new $A;function QA(t,e,n){const r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}function JA(t,e){t&&ZA.hasOwnProperty(t.type)&&ZA[t.type](t,e)}const KA={Feature:function(t,e){JA(t.geometry,e)},FeatureCollection:function(t,e){let n=t.features,r=-1,i=n.length;for(;++r<i;)JA(n[r].geometry,e)}},ZA={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){let n=t.coordinates,r=-1,i=n.length;for(;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){tT(t.coordinates,e,0)},MultiLineString:function(t,e){let n=t.coordinates,r=-1,i=n.length;for(;++r<i;)tT(n[r],e,0)},Polygon:function(t,e){eT(t.coordinates,e)},MultiPolygon:function(t,e){let n=t.coordinates,r=-1,i=n.length;for(;++r<i;)eT(n[r],e)},GeometryCollection:function(t,e){let n=t.geometries,r=-1,i=n.length;for(;++r<i;)JA(n[r],e)}};function tT(t,e,n){let r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function eT(t,e){let n=-1,r=t.length;for(e.polygonStart();++n<r;)tT(t[n],e,1);e.polygonEnd()}let nT,rT,iT,oT=new $A;const aT={sphere:t=>{},point:t=>{},lineStart:function(){aT.point=uT,aT.lineEnd=sT},lineEnd:t=>{},polygonStart:t=>{},polygonEnd:t=>{}};function sT(){aT.point=aT.lineEnd=t=>{}}function uT(t,e){t*=Math.PI/180,e*=Math.PI/180,nT=t,rT=Math.sin(e),iT=Math.cos(e),aT.point=lT}function lT(t,e){t*=Math.PI/180,e*=Math.PI/180;const n=Math.sin(e),r=Math.cos(e),i=Math.abs(t-nT),o=Math.cos(i),a=r*Math.sin(i),s=iT*n-rT*r*o,u=rT*n+iT*r*o;oT.add(Math.atan2(Math.sqrt(a*a+s*s),u)),nT=t,rT=n,iT=r}function cT(t){return oT.reset(),function(t,e){t&&KA.hasOwnProperty(t.type)?KA[t.type](t,e):JA(t,e)}(t,aT),+oT}const hT=[null,null],fT={type:"LineString",coordinates:hT};function pT(t,e){return hT[0]=t,hT[1]=e,cT(fT)}function dT(){return 1}var gT={units:"kilometers",radius:6371.0088};var yT=Object.freeze({__proto__:null,geoScaleBar:function(){let t,e,n,r,i,o=null,a=0,s=0,u=1,l=gT.radius,c=gT.units,h=t=>+t.toFixed(2),f=2,p=4,d="start",g=1,y=!0;function _(_){i=null===i?null:i||c.charAt(0).toUpperCase()+c.slice(1);let v=o[1][0]-o[0][0],m=o[1][1]-o[0][1],x=o[0][0]+v*a,b=o[0][1]+m*s,M=t.invert([x,b]),w=0,E=0;if(e)w=e,E=w/(pT(M,t.invert([x+1,b]))*l);else{let e=.01,r=80/(y?1:g),i=0,o=100,a=[1,2,4,5];for(;E<r&&i<o;){for(let n=0,i=a.length;n<i&&(w=e*a[n],E=w/(pT(M,t.invert([x+1,b]))*l),!(E>=r));n++);e*=10,i++}n=w}let N=w/(y?g:1),S=null===r?[]:r||[0,N/4,N/2,N],I=t=>t*E/(w/g),C=_.selection?_.selection():_,O=C.selectAll(".label").data([i]),P=C.selectAll(".domain").data([null]),L=C.selectAll(".tick").data(S,I).order(),A=L.exit(),T=L.enter().append("g").attr("class","tick"),k=L.select("line"),R=L.select("text"),D=L.select("rect");C.attr("font-family","sans-serif").attr("transform",`translate(${[x,b]})`),P=P.merge(P.enter().insert("path",".tick").attr("class","domain").attr("fill","none").attr("stroke","currentColor")),L=L.merge(T),k=k.merge(T.append("line").attr("stroke","currentColor").attr("y2",p*u)),R=R.merge(T.append("text").attr("fill","currentColor").attr("y",p*u+f*u).attr("font-size",10).attr("text-anchor","middle").attr("dy",(1===u?.71:0)+"em")),D=D.merge(T.append("rect").attr("fill",((t,e)=>e%2==0?"currentColor":"#fff")).attr("stroke","currentColor").attr("stroke-width",.5).attr("width",((t,e,n)=>e===n.length-1?0:I(S[e+1]-t))).attr("y",1===u?0:-p).attr("height",p)),_!==C&&(L=L.transition(_),P=P.transition(_),D=D.transition(_),A=A.transition(_).attr("opacity",1e-6).attr("transform",(t=>`translate(${I(t)})`)),T.attr("opacity",1e-6).attr("transform",(t=>`translate(${I(t)})`))),A.remove(),P.attr("d",`M${I(0)},${p*u} L${I(0)},0 L${I(N)},0 L${I(N)},${p*u}`),L.attr("transform",(t=>`translate(${I(t)})`)).attr("opacity",1),k.attr("y2",p*u),R.attr("y",p*u+f*u).text(h),D.attr("fill",((t,e)=>e%2==0?"currentColor":"#fff")).attr("width",((t,e,n)=>e===n.length-1?0:I(S[e+1]-t))).attr("y",1===u?0:-p).attr("height",p),null===O?O.remove():(_!==C?O.transition(_).attr("x","start"===d?0:I("middle"===d?N/2:N)).attr("y",1===u?0:"1.3em").attr("text-anchor",d).text((t=>t)):O.attr("x","start"===d?0:I("middle"===d?N/2:N)).attr("y",1===u?0:"1.3em").attr("text-anchor",d).text((t=>t)),O.enter().append("text").attr("class","label").attr("fill","currentColor").attr("font-size",12).attr("dy","-0.32em").attr("x","start"===d?0:I("middle"===d?N/2:N)).attr("y",1===u?0:"1.3em").attr("text-anchor",d).text((t=>t)))}return _.distance=function(t){return arguments.length?(e=+t,_):e||n},_.extent=function(t){return arguments.length?(o=t,_):o},_.label=function(t){return arguments.length?(i=t,_):i},_.labelAnchor=function(t){return arguments.length?(d=t,_):d},_.left=function(t){return arguments.length?(a=+t>1?1:+t<0?0:+t,_):a},_.orient=function(t){return arguments.length?(u=t(),_):1===u?"bottom":"top"},_.projection=function(e){return arguments.length?(t=e,_):t},_.radius=function(t){return arguments.length?(l=+t,_):l},_.size=function(t){return arguments.length?(o=[[0,0],t],_):o[1]},_.top=function(t){return arguments.length?(s=+t>1?1:+t<0?0:+t,_):s},_.tickFormat=function(t){return arguments.length?(h=t,_):h},_.tickPadding=function(t){return arguments.length?(f=+t,_):f},_.tickSize=function(t){return arguments.length?(p=+t,_):p},_.tickValues=function(t){return arguments.length?(r=t,_):r},_.units=function(t){return arguments.length?(({units:c,radius:l}=t),_):c},_.zoomClamp=function(t){return arguments.length?(y=!!t,_):y},_.zoomFactor=function(t){return arguments.length?(g=+t,_):g},_},geoScaleBottom:dT,geoScaleTop:function(){return-1},geoScaleFeet:{units:"feet",radius:20902259.664},geoScaleKilometers:gT,geoScaleMeters:{units:"meters",radius:6371008.8},geoScaleMiles:{units:"miles",radius:3958.7613}});const _T=Object.assign({},bt,yT);function vT(t,e,n,r={}){let i,o,a,s,u,l,c=r.position?r.position:"topright",h=r.text?r.text:"Your text here!",f=r.fontSize?r.fontSize:15,p=r.fontFamily?r.fontFamily:"Robotto",d=r.margin?r.margin:0,g=r.textDecoration?r.textDecoration:"none",y=r.fontWeight?r.fontWeight:"normal",_=r.fontStyle?r.fontStyle:"normal",v=r.anchor?r.anchor:"start",m=r.baseline?r.baseline:"baseline",x=r.fill?r.fill:"#474342",b=r.stroke?r.stroke:"none",M=r.frame_fill?r.frame_fill:"none",w=r.frame_stroke?r.frame_stroke:"none",E=r.strokeWidth?r.strokeWidth:1,N=r.frame_opacity?r.frame_opacity:1;switch(c){case"topleft":v="start",m="hanging",i=5,o=5;break;case"topright":v="end",m="hanging",i=e-5,o=5;break;case"top":v="middle",m="hanging",i=e/2,o=5;break;case"left":v="start",m="middle",i=5,o=n/2;break;case"middle":v="middle",m="middle",i=e/2,o=n/2;break;case"right":v="end",m="middle",i=e-5,o=n/2;break;case"bottomleft":v="start",m="baseline",i=5,o=n-5;break;case"bottom":v="middle",m="baseline",i=e/2,o=n-5;break;case"bottomright":v="end",m="baseline",i=e-5,o=n-5;break;default:i=c[0],o=c[1]}let S=h.split("\n"),I=[];S.forEach((t=>I.push(t.length)));let C=I.indexOf(Math.max(...I)),O=t.append("text").attr("font-size",`${f}px`).attr("font-family",p).attr("font-style",_).attr("text-decoration",g).attr("font-weight",y).text(S[C]);t.node().appendChild(O.node()),document.body.appendChild(t.node());const P=O.node().getBBox().width;document.body.removeChild(t.node()),O.remove();let L=f*I.length;"hanging"==m&&(u=0,s=d),"middle"==m&&(u=f*S.length/2,s=0),"baseline"==m&&(u=f*S.length,s=-d),"start"==v&&(l=0,a=d),"middle"==v&&(l=P/2,a=0),"end"==v&&(l=P,a=-d);let A=t.append("g").attr(":inkscape:groupmode","layer").attr("id","note").attr(":inkscape:label","note");A.append("rect").attr("x",i-d-l+a).attr("y",o-d-u+s).attr("height",L+2*d).attr("width",P+2*d).attr("fill",M).attr("stroke-width",E).attr("fill-opacity",N).attr("stroke",w),A.selectAll("text").data(S).join("text").attr("x",i+a).attr("y",o-+u+s).attr("font-size",`${f}px`).attr("font-style",_).attr("text-decoration",g).attr("font-weight",y).attr("font-family",p).attr("dy",((t,e)=>e*f)).attr("text-anchor",v).attr("dominant-baseline","hanging").attr("fill",x).attr("stroke",b).text((t=>t))}function mT(t,e,n={},r){let i=eh(n.geojson),o=n.values,a=n.fill?n.fill:"#474342",s=n.fontSize?n.fontSize:10,u=n.fontFamily?n.fontFamily:"Robotto",l=n.textDecoration?n.textDecoration:"none",c=n.fontWeight?n.fontWeight:"normal",h=n.fontStyle?n.fontStyle:"normal",f=n.opacity??1,p=n.halo??!1,d=n.halo_style??["white",4,.5];const g=cN(i);t.append("g").selectAll("text").data(g.filter((t=>null!=t.geometry.coordinates)).filter((t=>null!=t.properties[o]))).join("text").attr("x",(t=>e(t.geometry.coordinates)[0])).attr("y",(t=>e(t.geometry.coordinates)[1])).attr("fill",a).attr("opacity",f).attr("font-size",s).attr("font-family",u).attr("font-style",h).attr("text-decoration",l).attr("font-weight",c).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("paint-order","stroke").attr("stroke",p?d[0]:"none").attr("stroke-width",p?d[1]:0).attr("stroke-opacity",p?d[2]:0).attr("stroke-linejoin","round").attr("stroke-linecap","round").text((t=>t.properties[o]))}Object.assign({},bt),Object.assign({},bt);const xT=Object.assign({},bt,Ue,Zw,Na,Ec);function bT(t,e,n={},r,i,o){let a=eh(n.geojson),s=n.values,u=void 0!==n.k?n.k:50,l=void 0!==n.w?n.w:10,c=n.fill?n.fill:"#ffa3e3",h=n.stroke?n.stroke:"#a31d88",f=n.strokeWidth?n.strokeWidth:1,p=n.fillOpacity?n.fillOpacity:1,d=n.strokeLinecap??"round",g=n.strokeLinejoin??"round",y=n.strokeDasharray??"none",_=n.strokeOpacity??1,v=!!n.tooltip&&n.tooltip;Array.isArray(v)&&(v={fields:v}),"string"==typeof v&&(v={fields:[v]});let m=n.leg_x?n.leg_x:null,x=n.leg_y?n.leg_y:null;!n.leg_w||n.leg_w,!n.leg_h||n.leg_h;let b=n.leg_title?n.leg_title:null,M=n.leg_fontSize?n.leg_fontSize:14,w=n.leg_fontSize2?n.leg_fontSize2:10;!n.leg_stroke||n.leg_stroke,!n.fillOpacity||n.fillOpacity,!n.leg_strokeWidth||n.leg_strokeWidth;let E,N=n.leg_txtcol?n.leg_txtcol:"#363636",S=void 0!==n.leg_round?n.leg_round:void 0;E="p"==rh(a)?a.features:cN(a);const I=xT.scaleLinear().domain([0,xT.max(E.map((t=>+t.properties[s])))]).range([0,u]);t.append("g").selectAll("path").data(E.filter((t=>null!=t.geometry.coordinates)).filter((t=>null!=t.properties[s])).sort(((t,e)=>xT.descending(+t.properties[s],+e.properties[s])))).join("path").attr("fill",(t=>rN(E,c).getcol(t.properties[c.values]||void 0))).attr("stroke",(t=>rN(E,h).getcol(t.properties[h.values]||void 0))).attr("stroke-width",(t=>oN(E,f).getthickness(t.properties[f.values]||void 0))).attr("fill-opacity",p).attr("stroke-opacity",_).attr("stroke-linecap",d).attr("stroke-linejoin",g).attr("stroke-dasharray",y).attr("d",(t=>`M ${e(t.geometry.coordinates)[0]-l/2}, ${e(t.geometry.coordinates)[1]} ${e(t.geometry.coordinates)[0]}, ${e(t.geometry.coordinates)[1]-I(t.properties[s])} ${e(t.geometry.coordinates)[0]+l/2}, ${e(t.geometry.coordinates)[1]}`)).on("touchmove mousemove",(function(e,n){v&&t.select("#info").call(uN,{fields:function(){const t=Array.isArray(v.fields)?v.fields:[v.fields];let e=[];return t.forEach((t=>{e.push("$"==t[0]?`${n.properties[t.substr(1,t.length)]}`:t)})),e}(),fontWeight:v.fontWeight,fontSize:v.fontSize,fontStyle:v.fontStyle,fill:v.fill,stroke:v.stroke,strokeWidth:v.strokeWidth,fillOpacity:v.fillOpacity,strokeOpacity:v.strokeOpacity,col:v.col,type:sN(xT.pointer(e,this),i,o)}),v&&(t.select("#info").attr("transform",`translate(${xT.pointer(e,this)})`),xT.select(this).attr("stroke-opacity",_-.3).attr("fill-opacity",p-.3).raise())})).on("touchend mouseleave",(function(){t.select("#info").call(uN,null),xT.select(this).attr("stroke-opacity",_).attr("fill-opacity",p).lower()}));const C=E.filter((t=>""!=t.properties[s])).map((t=>+t.properties[s])),O=[xT.min(C),I.invert(u/3),I.invert(u/1.5),xT.max(C)];if(null!=m&&null!=x){let e=t.append("g").attr("class","bertinlegend");null!=b&&(b.split("\n").length,e.append("g").selectAll("text").data(b.split("\n")).join("text").attr("x",m).attr("y",x).attr("font-size",`${M}px`).attr("dy",((t,e)=>e*M)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",N).text((t=>t))),e.append("g").selectAll("path").data(O.sort(xT.descending)).join("path").attr("d",(t=>`M ${-l/2},0 0,${-I(t)} ${l/2},0`)).attr("fill","object"==typeof c?"white":c).attr("stroke","object"==typeof h?"black":h).attr("stroke-width",1).attr("transform",((t,e)=>`translate(${m+l/2+(l+5)*e},${x+u+(b.split("\n").length+1)*M})`)),e.append("g").selectAll("text").data(O.sort(xT.descending)).join("text").attr("text-anchor","start").attr("dominant-baseline","middle").attr("transform",((t,e)=>`translate(${m+l/2+(l+5)*e},${x+u+(b.split("\n").length+1)*M+w/2}) rotate(90)`)).attr("font-size",`${w}px`).attr("fill",N).text((t=>$E(t,S)))}aN(a,t,c,h,f)}const MT=Object.assign({},bt,Ue,Na,jE);function wT(t,e,n={},r,i,o){let a=["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],s=eh(n.geojson),u=n.values,l=n.radius??4,c=n.nbmax??200,h=n.onedot??Math.round(MT.sum(s.features.map((t=>+t.properties[u])))/c),f=n.span??.5,p=n.fill??a[Math.floor(Math.random()*a.length)],d=n.stroke??"none",g=n.strokeWidth??0,y=n.fillOpacity??1,_=n.strokeDasharray??"none",v=n.strokeOpacity??1,m=!!n.tooltip&&n.tooltip;Array.isArray(m)&&(m={fields:m}),"string"==typeof m&&(m={fields:[m]});let x,b=n.iteration??200;x="p"==rh(s)?s.features:cN(s);let M=[];for(let t=0;t<=x.length-1;t++){let e=Math.round(+x[t].properties[u]/h);for(let n=1;n<=e;n++)M.push({...x[t]})}const w=MT.forceSimulation(M).force("x",MT.forceX((t=>e(t.geometry.coordinates)[0]))).force("y",MT.forceY((t=>e(t.geometry.coordinates)[1]))).force("collide",MT.forceCollide(l+f+g/2));for(let t=0;t<b;t++)w.tick();t.append("g").selectAll("circle").data(M.filter((t=>null!=t.geometry.coordinates))).join("circle").attr("fill",(t=>rN(M,p).getcol(t.properties[p.values]||void 0))).attr("stroke",(t=>rN(M,d).getcol(t.properties[d.values]||void 0))).attr("stroke-width",(t=>oN(M,g).getthickness(t.properties[g.values]||void 0))).attr("fill-opacity",y).attr("stroke-dasharray",_).attr("stroke-opacity",v).attr("cx",(t=>t.x)).attr("cy",(t=>t.y)).attr("r",l).on("touchmove mousemove",(function(e,n){m&&t.select("#info").call(uN,{fields:function(){const t=Array.isArray(m.fields)?m.fields:[m.fields];let e=[];return t.forEach((t=>{e.push("$"==t[0]?`${n.properties[t.substr(1,t.length)]}`:t)})),e}(),fontWeight:m.fontWeight,fontSize:m.fontSize,fontStyle:m.fontStyle,fill:m.fill,stroke:m.stroke,strokeWidth:m.strokeWidth,fillOpacity:m.fillOpacity,strokeOpacity:m.strokeOpacity,col:m.col,type:sN(MT.pointer(e,this),i,o)}),m&&(t.select("#info").attr("transform",`translate(${MT.pointer(e,this)})`),MT.select(this).attr("stroke-opacity",v-.3).attr("fill-opacity",y-.3))})).on("touchend mouseleave",(function(){t.select("#info").call(uN,null),MT.select(this).attr("stroke-opacity",v).attr("fill-opacity",y)}));const E=n.leg_x??null,N=n.leg_y??null,S=n.leg_title??"leg_title",I=n.leg_fontSize??14,C=n.leg_fontSize2??10,O=n.leg_txtcol??"#363636",P=n.leg_stroke??d,L=n.leg_strokeWidth??g,A="string"==typeof p?p:n.leg_fill,T=n.leg_txt??h;if(null!=E&&null!=N){let e=t.append("g").attr("class","bertinlegend");null!=S&&(S.split("\n").length,e.append("g").selectAll("text").data(S.split("\n")).join("text").attr("x",E).attr("y",N).attr("font-size",`${I}px`).attr("dy",((t,e)=>e*I)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",O).text((t=>t))),e.append("circle").attr("r",l).attr("fill",A).attr("stroke",P).attr("stroke-width",L).attr("cx",E+l).attr("cy",N+2*l+S.split("\n").length*I),e.append("text").attr("fill",O).attr("font-size",`${C}px`).attr("dominant-baseline","middle").attr("x",E+2*l+C).attr("y",N+2*l+S.split("\n").length*I).text(T)}aN({type:"FeatureCollection",features:M},t,p,d,g)}function ET(t){let e=[];t.features.forEach((t=>{e.push(function(t){let e=[];t.geometry.type.includes("Multi")?t.geometry.coordinates.forEach((n=>{e.push({type:"Feature",properties:t.properties,geometry:{type:t.geometry.type.replace("Multi",""),coordinates:n}})})):e.push({...t});const n=Wn(t);return e.forEach((t=>t.__share=Wn(t)/n)),JSON.parse(JSON.stringify(e))}(t))}));const n=Object.keys(t).filter((t=>"features"!=t)),r={};return n.forEach((e=>{r[e]=t[e]})),r.features=e.flat(),r}function NT(t){return Array.isArray(t)?IT(t):t&&t.bbox?IT(t.bbox):[360*ST(),180*ST()]}function ST(){return Math.random()-.5}function IT(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}function CT(t,e,n){let r=[];t.features.forEach((t=>{r.push(function(t,e,n){let r=[],i=0,o=0;const a=Math.round(+t.properties[e]/n),s=RN(t);for(;i<a&&o<10*a;){const e=NT(s),n={type:"Feature",properties:t.properties,geometry:{type:"Point",coordinates:e}};bN(n,t)&&(r.push(n),i++),o++}return JSON.parse(JSON.stringify(r))}(t,e,n))}));const i=Object.keys(t).filter((t=>"features"!=t)),o={};return i.forEach((e=>{o[e]=t[e]})),o.features=r.flat(),o}Object.assign({},bt,Na,Ec);const OT=Object.assign({},Ue);function PT(t){return t.k}function LT(t){return[t.x,t.y]}function AT(t){return function(){return t}}var TT=Object.freeze({__proto__:null,tile:function(){let t=0,e=0,n=960,r=500,i=!0,o=!0,a=256,s=PT,u=LT,l=0;function c(){const c=+s.apply(this,arguments),h=u.apply(this,arguments),f=Math.log2(c/a),p=Math.round(Math.max(f+l,0)),d=Math.pow(2,f-p)*a,g=+h[0]-c/2,y=+h[1]-c/2,_=Math.max(i?0:-1/0,Math.floor((t-g)/d)),v=Math.min(i?1<<p:1/0,Math.ceil((n-g)/d)),m=Math.max(o?0:-1/0,Math.floor((e-y)/d)),x=Math.min(o?1<<p:1/0,Math.ceil((r-y)/d)),b=[];for(let t=m;t<x;++t)for(let e=_;e<v;++e)b.push([e,t,p]);return b.translate=[g/d,y/d],b.scale=d,b}return c.size=function(i){return arguments.length?(t=e=0,n=+i[0],r=+i[1],c):[n-t,r-e]},c.extent=function(i){return arguments.length?(t=+i[0][0],e=+i[0][1],n=+i[1][0],r=+i[1][1],c):[[t,e],[n,r]]},c.scale=function(t){return arguments.length?(s="function"==typeof t?t:AT(+t),c):s},c.translate=function(t){return arguments.length?(u="function"==typeof t?t:AT([+t[0],+t[1]]),c):u},c.zoomDelta=function(t){return arguments.length?(l=+t,c):l},c.tileSize=function(t){return arguments.length?(a=+t,c):a},c.clamp=function(t){return arguments.length?(i=o=!!t,c):i&&o},c.clampX=function(t){return arguments.length?(i=!!t,c):i},c.clampY=function(t){return arguments.length?(o=!!t,c):o},c},tileWrap:function([t,e,n]){const r=1<<n;return[t-Math.floor(t/r)*r,e-Math.floor(e/r)*r,n]}});const kT=Object.assign({},TT,Na);function RT(t,e,n,r={}){let i=r.url??"https://github.com/neocarto/bertin/raw/main/img/logo.png",o=r.position??"left";const a=new Image;a.src=i,a.onload=()=>{let s,u,l=r.size??100,c=a.height*l/a.width;switch(o){case"left":s=10,u=n-10-c;break;case"middle":s=e/2-l/2,u=n-10-c;break;case"right":s=e-10-l,u=n-10-c;break;default:s=o[0],u=o[1]}t.append("g").append("image").attr("xlink:href",i).attr("width",l).attr("height",c).attr("x",s).attr("y",u)}}function DT(t,e,n,r,i={}){let o=i.nb??16,a=i.position??[n/4,e-e/4],s=i.stroke??"#394a70",u=i.strokeWidth??1,l=i.strokeOpacity??.3,c=i.strokeDasharray??[3,2],h=[];for(let t=0;t<o;t++)h[t]=360/o*t*(Math.PI/180);t.append("g").attr("clip-path",null==r?"none":`url(#clip_${r}`).selectAll("polyline").data(h).enter().append("polyline").attr("fill","none").attr("stroke",s).attr("stroke-opacity",l).attr("stroke-width",u).attr("stroke-dasharray",c).attr("points",(function(t,n){let r=a[0]+Math.cos(t)*e,i=a[1]+Math.sin(t)*e;return a[0]+","+a[1]+" "+r+","+i}))}Object.assign({},bt);const FT=Object.assign({},bt,Na,Ec);function zT({params:t={},layers:e={}}={}){let n=t.projection;const r=e.map((t=>t.type));n=r.includes("tiles")?FT.geoMercator():Fd(n);let i=t.width?t.width:1e3,o=t.extent?t.extent:null;o=Array.isArray(o)&&Array.isArray(o[0])&&Array.isArray(o[1])?oh(o):o;let a=t.margin?t.margin:1,s=t.background,u=t.clip??!1,l=function(t,e,n,r,i){let o;const a=t.map((t=>t.geojson)).filter((t=>void 0!==t)).length,s=t.map((t=>t.type));if(e&&(o=e),!e&&s.includes("outline")&&(o={type:"Sphere"}),!e&&a>0&&!s.includes("outline")){let e=t.map((t=>t.geojson)).filter((t=>void 0!==t)),n=[];e.forEach((t=>n.push(eh(t).features))),o={type:"FeatureCollection",features:n.flat()}}!e&&0==a&&s.includes("tiles")&&(o={type:"Sphere"});const[[u,l],[c,h]]=nh.geoPath(r.fitWidth(i-2*n,o)).bounds(o);let f=r.translate();return r.translate([f[0]+n,f[1]+n]),Math.ceil(h-l)+2*n}(e,o,a,n,i),c=0,h=e.find((t=>"header"==t.type));h&&(h.text&&(c=25*h.text.split("\n").length+10),h.fontSize&&(c=h.fontSize*h.text.split("\n").length+10));let f=0,p=e.find((t=>"footer"==t.type));p&&(p.text&&(f=10*p.text.split("\n").length+10),p.fontSize&&(f=p.fontSize*p.text.split("\n").length+10));const d=FT.create("svg").attr("width",i).attr("height",l+c+f).attr("viewBox",[0,-c,i,l+c+f]).attr("style","max-width: 100%; height: auto; height: intrinsic; background-color: white;");let g=d.append("defs");g.append("style").attr("type","text/css").text("@import url('https://fonts.googleapis.com/css2?family=Pacifico&family=Roboto&family=Rubik&family=Ubuntu&display=swap');");let y=null;u&&(y=Date.now().toString(36)+Math.random().toString(36).substring(2),d.append("clipPath").attr("id",`clip_${y}`).append("path").datum({type:"Sphere"}).attr("d",FT.geoPath(n))),s&&d.append("rect").attr("x",0).attr("y",0).attr("width",i).attr("height",l).attr("fill",s);let _=e.find((t=>"outline"==t.type));_&&jd(d,n,{fill:_.fill,fillOpacity:_.fillOpacity,stroke:"none",strokeWidth:"none"}),[...e].reverse().forEach((t=>{"graticule"==t.type&&Gd(d,n,{stroke:t.stroke,strokeWidth:t.strokeWidth,strokeOpacity:t.strokeOpacity,strokeDasharray:t.strokeDasharray,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin,step:t.step},y),"tiles"==t.type&&function(t,e,n,r,i={}){let o=i.opacity??1,a=i.tileSize??512;i.zoomDelta;let s=i.clip??void 0,u=i.style??"opentopomap",l=i.zoomDelta??1,c=i.increasetilesize??1,h=i.source??"bottomright";const f=[{name:"openstreetmap",provider:"OpenStreetMap contributors",url:(t,e,n)=>`https://tile.openstreetmap.org/${n}/${t}/${e}.png`},{name:"opentopomap",provider:"OpenStreetMap contributors",url:(t,e,n)=>`https://tile.opentopomap.org/${n}/${t}/${e}.png`},{name:"worldterrain",provider:"USGS, Esri, TANA, DeLorme, and NPS",url:(t,e,n)=>`https://server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/${n}/${e}/${t}.png`},{name:"worldimagery",provider:"Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",url:(t,e,n)=>`https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/${n}/${e}/${t}.png`},{name:"worldStreet",provider:"Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012",url:(t,e,n)=>`https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/${n}/${e}/${t}.png`},{name:"worldphysical",provider:"Esri, US National Park Service",url:(t,e,n)=>`https://server.arcgisonline.com/ArcGIS/rest/services/World_Physical_Map/MapServer/tile/${n}/${e}/${t}`},{name:"shadedrelief",provider:"ESRI",url:(t,e,n)=>`https://server.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/${n}/${e}/${t}.png`},{name:"oceanbasemap",provider:"GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri",url:(t,e,n)=>`https://server.arcgisonline.com/ArcGIS/rest/services/Ocean_Basemap/MapServer/tile/${n}/${e}/${t}.png`}];let p=f.find((t=>t.name==u)).url,d=kT.tile().size([e,n]).scale(2*r.scale()*Math.PI).translate(r([0,0])).tileSize(a).zoomDelta(l);const g=Date.now().toString(36)+Math.random().toString(36).substring(2);s&&t.append("clipPath").attr("id",`tileclip_${g}`).append("path").datum(s).attr("d",kT.geoPath(r)),t.append("g").attr("clip-path",`url(#tileclip_${g}`).selectAll("image").data(d()).join("image").attr("xlink:href",(t=>p(t[0],t[1],t[2]))).attr("x",(t=>Math.round((t[0]+d().translate[0])*d().scale))).attr("y",(t=>Math.round((t[1]+d().translate[1])*d().scale))).attr("width",d().scale+c+"px").attr("height",d().scale+c+"px").attr("opacity",o),vT(t,e,n,i={text:`Source: ${f.find((t=>t.name==u)).provider}`,position:h,fontSize:12,fill:"white",frame_fill:"black",frame_opacity:.3,fontFamily:"Roboto",margin:6})}(d,i,l,n,{opacity:t.opacity,tileSize:t.tileSize,zoomDelta:t.zoomDelta,style:t.style,clip:t.clip,increasetilesize:t.increasetilesize,source:t.source}),"layer"!=t.type&&"simple"!=t.type&&null!=t.type||fN(d,n,{geojson:t.geojson,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin,fillOpacity:t.fillOpacity,strokeOpacity:t.strokeOpacity,strokeDasharray:t.strokeDasharray,symbol:t.symbol,symbol_size:t.symbol_size,symbol_iteration:t.symbol_iteration,symbol_shift:t.symbol_shift,tooltip:t.tooltip,leg_x:t.leg_x,leg_y:t.leg_y,leg_w:t.leg_w,leg_h:t.leg_h,leg_title:t.leg_title,leg_text:t.leg_text,leg_type:t.leg_type,leg_fontSize:t.leg_fontSize,leg_fontSize2:t.leg_fontSize2,leg_stroke:t.leg_stroke,leg_fillOpacity:t.leg_fillOpacity,leg_fill:t.leg_fill,leg_strokeWidth:t.leg_strokeWidth,leg_txtcol:t.leg_txtcol},y,i,l),"dotdensity"==t.type&&function(t,e,n={},r,i,o){let a=n.nbdots??OT.sum(n.geojson.features.map((t=>+t.properties[n.values])))/1e3;n.dotvalue=n.dotvalue??a,n.symbol_size=n.symbol_size??8,n.fill=n.fill??"#cc190c",n.leg_text=n.leg_text??`= ${n.dotvalue}`,n.leg_type=n.symbol?n.symbol:"circle";let s=ET(n.geojson);s.features.forEach(((t,e)=>{t.properties.__value=+t.properties[n.values]*t.__share,t.__test=+t.properties[n.values]*t.__share}));const u=CT(s,"__value",n.dotvalue);n.geojson=JSON.parse(JSON.stringify(u)),fN(t,e,n,r,i,o)}(d,n,{geojson:t.geojson,values:t.values,dotvalue:t.dotvalue,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin,fillOpacity:t.fillOpacity,strokeOpacity:t.strokeOpacity,strokeDasharray:t.strokeDasharray,symbol:t.symbol,symbol_size:t.symbol_size,symbol_iteration:t.symbol_iteration,symbol_shift:t.symbol_shift,tooltip:t.tooltip,leg_type:t.leg_type,leg_x:t.leg_x,leg_y:t.leg_y,leg_w:t.leg_w,leg_h:t.leg_h,leg_title:t.leg_title,leg_text:t.leg_text,leg_fontSize:t.leg_fontSize,leg_fontSize2:t.leg_fontSize2,leg_stroke:t.leg_stroke,leg_fillOpacity:t.leg_fillOpacity,leg_fill:t.leg_fill,leg_strokeWidth:t.leg_strokeWidth,leg_txtcol:t.leg_txtcol},y,i,l),"spikes"==t.type&&bT(d,n,{geojson:t.geojson,values:t.values,k:t.k,w:t.w,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,fillOpacity:t.fillOpacity,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin,strokeDasharray:t.strokeDasharray,strokeOpacity:t.strokeOpacity,tooltip:t.tooltip,leg_x:t.leg_x,leg_y:t.leg_y,leg_w:t.leg_w,leg_h:t.leg_h,leg_title:t.leg_title,leg_fontSize:t.leg_fontSize,leg_fontSize2:t.leg_fontSize2,leg_stroke:t.leg_stroke,leg_fillOpacity:t.leg_fillOpacity,leg_strokeWidth:t.leg_strokeWidth,leg_txtcol:t.leg_txtcol,leg_round:t.leg_round},0,i,l),"mushroom"==t.type&&IN(d,n,{geojson:t.geojson,top_values:t.top_values,bottom_values:t.bottom_values,top_fill:t.top_fill,bottom_fill:t.bottom_fill,k:t.k,stroke:t.stroke,strokeWidth:t.strokeWidth,fillOpacity:t.fillOpacity,top_tooltip:t.top_tooltip,bottom_tooltip:t.bottom_tooltip,leg_x:t.leg_x,leg_y:t.leg_y,leg_fontSize:t.leg_fontSize,leg_fontSize2:t.leg_fontSize2,leg_round:t.leg_round,leg_txtcol:t.leg_txtcol,leg_title:t.leg_title,leg_top_txt:t.leg_top_txt,leg_bottom_txt:t.leg_bottom_txt,leg_top_fill:t.leg_top_fill,leg_bottom_fill:t.leg_bottom_fill,leg_stroke:t.leg_stroke,leg_strokeWidth:t.leg_strokeWidth},y,i,l),"label"==t.type&&mT(d,n,{geojson:t.geojson,values:t.values,fill:t.fill,fontSize:t.fontSize,fontFamily:t.fontFamily,textDecoration:t.textDecoration,fontWeight:t.fontWeight,fontStyle:t.fontStyle,opacity:t.opacity,halo:t.halo,halo_style:t.halo_style}),"text"==t.type&&vT(d,i,l,{position:t.position,text:t.text,fill:t.fill,stroke:t.stroke,fontSize:t.fontSize,fontFamily:t.fontFamily,textDecoration:t.textDecoration,fontWeight:t.fontWeight,fontStyle:t.fontStyle,margin:t.margin,anchor:t.anchor,baseline:t.baseline,frame_fill:t.frame_fill,frame_stroke:t.frame_stroke,frame_opacity:t.frame_opacity,frame_strokeWidth:t.frame_strokeWidth}),"logo"==t.type&&RT(d,i,l,{url:t.url,size:t.size,position:t.position}),"missing"==t.type&&ON(d,n,{geojson:t.geojson,values:t.values,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,fillOpacity:t.fillOpacity,leg_x:t.leg_x,leg_y:t.leg_y,leg_w:t.leg_w,leg_h:t.leg_h,leg_text:t.leg_text,leg_fontSize:t.leg_fontSize,leg_stroke:t.leg_stroke,leg_fillOpacity:t.fillOpacity,leg_fill:t.fill,leg_strokeWidth:t.leg_strokeWidth,leg_txtcol:t.leg_txtcol},y),"shadow"==t.type&&function(t,e,n,r,i,o={}){let a=o.col?o.col:"#35383d",s=o.dx?o.dx:3,u=o.dy?o.dy:3,l=o.stdDeviation?o.stdDeviation:1.5,c=o.opacity?o.opacity:.7,h=a,f=LN.topology({foo:eh(n)}),p=LN.merge(f,f.objects.foo.geometries);i.append("filter").attr("id","blur").append("feGaussianBlur").attr("stdDeviation",l);const d=PN.geoPath(e);t.append("g").attr("clip-path",null==r?"none":`url(#clip_${r}`).append("path").datum(p).attr("d",d).attr("fill",h).attr("opacity",c).attr("stroke","none").attr("filter","url(#blur)").attr("transform",`translate(${s} ${u})`)}(d,n,t.geojson,y,g,{col:t.col,dx:t.dx,dy:t.dy,opacity:t.opacity,stdDeviation:t.stdDeviation}),"waterlines"==t.type&&function(t,e,n,r,i={}){let o=i.dist??200,a=i.unit??"kilometers",s=i.nb??5,u=i.steps??8,l=i.stroke??"#5d81ba",c=i.strokeOpacity??[1,.1],h=i.strokeWidth??[1.2,.2],f=i.strokeDasharray??"none",p=i.strokeLinecap??"round",d=i.strokeLinejoin??"round",g=XA.topology({foo:eh(n)}),y=XA.merge(g,g.objects.foo.geometries),_=[];for(let t=1;t<=s;t++)_.push(jA(y,o*t,{units:a,steps:u}));t.append("g").attr("clip-path",null==r?"none":`url(#clip_${r}`).selectAll("path").data(_).join("path").attr("d",YA.geoPath(e)).attr("fill","none").attr("stroke-opacity",((t,e)=>Array.isArray(c)?YA.scaleLinear().domain([1,s]).range(c)(e):c)).attr("stroke-width",((t,e)=>Array.isArray(h)?YA.scaleLinear().domain([1,s]).range(h)(e):h)).attr("stroke",((t,e)=>Array.isArray(l)?YA.scaleLinear().domain([1,s]).range(l)(e):l)).attr("stroke-dasharray",f).attr("stroke-linecap",p).attr("stroke-linejoin",d)}(d,n,t.geojson,y,{stroke:t.stroke,dist:t.dist,unit:t.unit,nb:t.nb,steps:t.steps,strokeOpacity:t.strokeOpacity,strokeWidth:t.strokeWidth,stroke:t.stroke,strokeDasharray:t.strokeDasharray,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),"rhumbs"==t.type&&DT(d,i,l,y,{nb:t.nb,position:t.position,stroke:t.stroke,strokeWidth:t.strokeWidth,strokeOpacity:t.strokeOpacity,strokeDasharray:t.strokeDasharray}),"dotcartogram"==t.type&&wT(d,n,{geojson:t.geojson,values:t.values,radius:t.radius,nbmax:t.nbmax,onedot:t.onedot,span:t.span,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,fillOpacity:t.fillOpacity,strokeDasharray:t.strokeDasharray,strokeOpacity:t.strokeOpacity,iteration:t.iteration,tooltip:t.tooltip,leg_x:t.leg_x,leg_y:t.leg_y,leg_title:t.leg_title,leg_fontSize:t.leg_fontSize,leg_fontSize2:t.leg_fontSize2,leg_txtcol:t.leg_txtcol,leg_stroke:t.leg_stroke,leg_strokeWidth:t.leg_strokeWidth,leg_fill:t.leg_fill,leg_txt:t.leg_txt},0,i,l),"bubble"==t.type&&gN(d,n,{geojson:t.geojson,values:t.values,planar:t.planar,k:t.k,fixmax:t.fixmax,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,fillOpacity:t.fillOpacity,strokeDasharray:t.strokeDasharray,strokeOpacity:t.strokeOpacity,dorling:t.dorling,iteration:t.iteration,tooltip:t.tooltip,leg_x:t.leg_x,leg_y:t.leg_y,leg_stroke:t.leg_stroke,leg_fill:t.leg_fill,leg_strokeWidth:t.leg_strokeWidth,leg_txtcol:t.leg_txtcol,leg_title:t.leg_title,leg_fontSize:t.leg_fontSize,leg_fontSize2:t.leg_fontSize2,leg_round:t.leg_round},0,i,l),"regularbubble"==t.type&&NN(d,n,{geojson:t.geojson,values:t.values,step:t.step,planar:t.planar,k:t.k,fixmax:t.fixmax,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,fillOpacity:t.fillOpacity,strokeDasharray:t.strokeDasharray,strokeOpacity:t.strokeOpacity,dorling:t.dorling,iteration:t.iteration,tooltip:t.tooltip,leg_x:t.leg_x,leg_y:t.leg_y,leg_stroke:t.leg_stroke,leg_fill:t.leg_fill,leg_strokeWidth:t.leg_strokeWidth,leg_txtcol:t.leg_txtcol,leg_title:t.leg_title,leg_fontSize:t.leg_fontSize,leg_fontSize2:t.leg_fontSize2,leg_round:t.leg_round},0,i,l),"header"==t.type&&function(t,e,n={}){let r;n.text&&(r=25),n.fontSize&&(r=n.fontSize);let i=n.text?n.text:"",o=n.fill?n.fill:"#9e9696",a=n.background?n.background:"white",s=n.backgroundOpacity?n.backgroundOpacity:1,u=n.anchor?n.anchor:"middle";const l=r*i.split("\n").length;let c;"start"==u&&(c=5),"middle"==u&&(c=e/2),"end"==u&&(c=e-5);let h=t.append("g");h.append("rect").attr("x",0).attr("y",0-l-10).attr("width",e).attr("height",l+10).attr("fill",a).attr("fill-opacity",s),h.selectAll("text").data(n.text.split("\n")).join("text").attr("x",c).attr("y",-l-5).attr("font-size",`${r}px`).attr("dy",((t,e)=>e*r+r/2)).attr("text-anchor",u).attr("dominant-baseline","central").attr("fill",o).attr("font-family","sans-serif").attr("font-weight","bold").attr("fill-opacity",1).text((t=>t))}(d,i,{fontSize:t.fontSize,text:t.text,fill:t.fill,background:t.background,backgroundOpacity:t.backgroundOpacity,anchor:t.anchor}),"footer"==t.type&&function(t,e,n,r={}){let i;r.text&&(i=10),r.fontSize&&(i=r.fontSize);let o=r.text?r.text:"",a=r.fill?r.fill:"#9e9696",s=r.background?r.background:"white",u=r.backgroundOpacity?r.backgroundOpacity:1,l=r.anchor?r.anchor:"end";const c=i*o.split("\n").length;let h;"start"==l&&(h=5),"middle"==l&&(h=e/2),"end"==l&&(h=e-5);let f=t.append("g");f.append("rect").attr("x",0).attr("y",n).attr("width",e).attr("height",c+10).attr("fill",s).attr("fill-opacity",u),f.selectAll("text").data(r.text.split("\n")).join("text").attr("x",h).attr("y",n+5).attr("font-size",`${i}px`).attr("dy",((t,e)=>e*i)).attr("text-anchor",l).attr("dominant-baseline","hanging").attr("fill",a).attr("font-family","sans-serif").attr("fill-opacity",1).text((t=>t))}(d,i,l,{fontSize:t.fontSize,text:t.text,fill:t.fill,background:t.background,backgroundOpacity:t.backgroundOpacity,anchor:t.anchor}),"hatch"!=t.type&&"hatching"!=t.type||function(t,e={},n,r){let i=t.append("defs");const o=e.stroke??"#786d6c",a=e.strokeWidth??2,s=e.strokeOpacity??.1,u=e.angle??45,l=e.spacing??8,c=e.strokeDasharray??"none";i.append("pattern").attr("id","hatch").attr("patternUnits","userSpaceOnUse").attr("width",l).attr("height",l).attr("patternTransform",`rotate(${u})`).append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y1",l).attr("stroke",o).attr("stroke-linejoin","butt").attr("stroke-width",a).attr("stroke-dasharray",c).attr("stroke-opacity",s),t.append("rect").attr("x",0).attr("y",0).attr("width",n).attr("height",r).attr("fill","url('#hatch')")}(d,{stroke:t.stroke,strokeWidth:t.strokeWidth,strokeOpacity:t.strokeOpacity,angle:t.angle,spacing:t.spacing,strokeDasharray:t.strokeDasharray},i,l)}));let v=e.find((t=>"scalebar"==t.type));return v&&function(t,e,n,r,i={}){let o=i.x?i.x:20,a=i.y?i.y:r-30,s=i.units?i.units:"kilometers";o/=n,a/=r;const u=_T.geoScaleBar().projection(e).size([n,r]).left(o).top(a).label("miles"==s?"Miles":"Km").units("miles"==s?_T.geoScaleMiles:_T.geoScaleKilometers).orient(_T.geoScaleBottom).tickPadding(5).tickSize(0);t.append("g").attr("transform",`translate(${o}, ${a})`).append("g").call(u)}(d,n,i,l,{x:v.x,y:v.y,units:v.units}),_&&jd(d,n,{fill:"none",stroke:_.stroke,strokeWidth:_.strokeWidth}),d.append("g").attr("id","info").attr("class","info"),d.selectAll(".bertinlegend").raise(),Object.assign(d.node(),{})}const GT=Object.assign({},bt,Zw);const qT=Object.assign({},Ue);const jT=Object.assign({},Zc,jc),BT=Object.assign({},Ue);const UT=Object.assign({},jc,Zc);function VT(t){return new Function(`return (${t})`)()}function WT({x:t,field:e}){let n=[...t.features.map((t=>({...t.properties})))];n.forEach((t=>{Array.isArray(e)?e.forEach((e=>delete t[e])):delete t[e]}));let r=JSON.parse(JSON.stringify(t));return r.features.map(((t,e)=>t.properties={...n[e]})),r}let YT={table:function(t){return JSON.parse(JSON.stringify(t.features.map((t=>t.properties))))},remove:function({geojson:t,field:e}){return WT({x:t,field:e})},keep:function({geojson:t,field:e}){return function({x:t,field:e}){let n=[];t.features.map((t=>t.properties)).forEach((t=>{n.push(Object.keys(t))})),n=Array.from(new Set(n.flat()));let r=n.filter((t=>!e.includes(t)));return WT({x:t,field:r})}({x:t,field:e})},add:function({geojson:t,field:e,expression:n}){return function({x:t,field:e,expression:n}){let r=[...t.features.map((t=>({...t.properties})))],i=[];t.features.map((t=>t.properties)).forEach((t=>{i.push(Object.keys(t))})),i=Array.from(new Set(i.flat())),i.forEach((t=>{n=n.replace(t,`d.${t}`)})),n="d=> "+n;let o=r.map(VT(n));r.forEach(((t,n)=>{t=Object.assign(t,{[e]:o[n]})}));let a=JSON.parse(JSON.stringify(t));return a.features.map(((t,e)=>t.properties={...r[e]})),a}({x:t,field:e,expression:n})},filter:function({geojson:t,expression:e}){return function({x:t,expression:e}){let n=[...t.features],r=[];t.features.map((t=>t.properties)).forEach((t=>{r.push(Object.keys(t))})),r=Array.from(new Set(r.flat())),r.forEach((t=>{e=e.replace(t,`d.properties.${t}`)})),e="d => "+e;let i=JSON.parse(JSON.stringify(t));return i.features=n.filter(VT(e)),i}({x:t,expression:e})},subset:function({geojson:t,field:e,selection:n,inverse:r}){return function({x:t,field:e,selection:n,inverse:r=!1}){let i=[...t.features];n=Array.isArray(n)?n:[n],r&&(n=Array.from(new Set(i.map((t=>t.properties[e])))).filter((t=>!n.includes(t))));let o=[];n.forEach((t=>{o.push(i.filter((n=>n.properties[e]==t)))}));let a=JSON.parse(JSON.stringify(t));return a.features=o.flat(),a}({x:t,field:e,selection:n,inverse:r})},head:function({geojson:t,field:e,nb:n}){return function({x:t,field:e,nb:n=10}){let r=[...t.features];r=r.filter((t=>""!=t.properties[e])).filter((t=>null!=t.properties[e])).filter((t=>null!=t.properties[e])).filter((t=>t.properties[e]!=1/0)).filter((t=>t.properties[e]!=-1/0)).filter((t=>NaN!=t.properties[e])),r.sort(((t,n)=>+n.properties[e]-+t.properties[e])),r=r.slice(0,n);let i=JSON.parse(JSON.stringify(t));return i.features=r,i}({x:t,field:e,nb:n})},tail:function({geojson:t,field:e,nb:n}){return function({x:t,field:e,nb:n=10}){let r=[...t.features];r=r.filter((t=>""!=t.properties[e])).filter((t=>null!=t.properties[e])).filter((t=>null!=t.properties[e])).filter((t=>t.properties[e]!=1/0)).filter((t=>t.properties[e]!=-1/0)).filter((t=>NaN!=t.properties[e])),r.sort(((t,n)=>+t.properties[e]-+n.properties[e])),r=r.slice(0,n);let i=JSON.parse(JSON.stringify(t));return i.features=r,i}({x:t,field:e,nb:n})}};t.bbox=oh,t.borders=function(t={geojson:geojson,id:id,values:values,type:"rel",share:null}){if(null==t.geojson&&null==t.values&&null==t.id){let e=eh(t);const n=jT.topology({d:e});return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:jT.mesh(n,Object.entries(n.objects)[0][1],((t,e)=>t!==e))}]}}{let e=eh(t.geojson);const n=t.id,r=t.values,i=t.type,o=t.share,a=jT.topology({d:e}),s=e.features.map((t=>t.properties[n])),u=jT.neighbors(a.objects.d.geometries),l=new Map(e.features.map((t=>[t.properties[n],t.properties[r]])));let c=[];s.forEach((t=>{u[s.indexOf(t)].map((e=>({properties:{i:t,j:s[e],var_i:+l.get(t),var_j:+l.get(s[e]),disc:"rel"==i?0!=BT.min([+l.get(t),+l.get(s[e])])?BT.max([+l.get(t),+l.get(s[e])])/BT.min([+l.get(t),+l.get(s[e])]):null:BT.max([+l.get(t),+l.get(s[e])])-BT.min([+l.get(t),+l.get(s[e])])}}))).forEach((t=>{let e=jT.mesh(a,a.objects.d,((e,r)=>e.properties[n]==t.properties.i&r.properties[n]==t.properties.j)),r=Object.assign({type:"Feature"},t);c.push(Object.assign(r,{geometry:e}))}))})),c.sort(((t,e)=>BT.descending(t.properties.disc,e.properties.disc)));const h=c.length;return c.map((t=>t.properties)).forEach(((t,e)=>{Object.assign(t,{share:(e+1)/h})})),null!=o&&(c=c.filter((t=>t.properties.share<o))),{type:"FeatureCollection",features:c}}},t.bubble=gN,t.dotcartogram=wT,t.draw=zT,t.graticule=Gd,t.label=mT,t.links=function(t={}){let e,n=eh(t.geojson),r=t.geojson_id,i=t.data,o=t.data_i??"i",a=t.data_j??"j";e="p"==rh(n)?n.features:cN(n);const s=new Map(e.map((t=>[t.properties[r],t.geometry.coordinates])));let u=[];return i.forEach((t=>{null!=s.get(t[o])&&null!=s.get(t[a])&&u.push({type:"Feature",properties:t,geometry:{type:"LineString",coordinates:[s.get(t[o]),s.get(t[a])]}})})),{type:"FeatureCollection",features:u}},t.logo=RT,t.match=function(t,e,n,r){let i=(t=eh(t)).features.map((t=>t.properties[e])),o=n.map((t=>t[r])),a=Array.from(new Set(i.concat(o))),s=i.filter((t=>o.includes(t))),u=i.filter((t=>!o.includes(t))),l=o.filter((t=>!i.includes(t))),c=s.filter((t=>o.includes(t))),h=s.filter((t=>i.includes(t))),f=1e3,p=100,d=30,g=GT.scaleLinear().domain([0,a.length]).range([0,f]);const y=GT.create("svg").attr("width",f).attr("height",p).attr("viewBox",[0,0,f,p]).attr("style","max-width: 100%; height: auto; height: intrinsic; background-color: white;");return y.append("defs").append("pattern").attr("id","hatch").attr("patternUnits","userSpaceOnUse").attr("width",5).attr("height",5).append("line").attr("x1",0).attr("y1",0).attr("x2",5).attr("y1",5).attr("stroke","#ffcc36").attr("stroke-width",1).attr("stroke-opacity",1),y.append("rect").attr("x",0).attr("y",25).attr("height",10).attr("width",g(u.length+s.length)).attr("stroke","none").attr("fill","#CCC").attr("fill-opacity",.35),y.append("rect").attr("x",f-g(l.length+s.length)).attr("y",65).attr("height",10).attr("width",g(l.length+s.length)).attr("stroke","none").attr("fill","#CCC").attr("fill-opacity",.35),y.append("rect").attr("x",g(u.length)).attr("y",d).attr("height",40).attr("width",g(s.length)).attr("fill","#ffe599"),y.append("rect").attr("x",g(u.length)).attr("y",d).attr("height",40).attr("width",g(s.length)).attr("fill","url('#hatch')"),y.append("text").attr("x",f-g(o.length)+g(s.length)/2).attr("y",53).attr("text-anchor","middle").attr("dominant-baseline","middle").text(`${Math.round(s.length/a.length*100)}%`).attr("font-size",40).attr("fill","black"),y.append("text").attr("x",f-g(o.length)+5).attr("y",37).attr("text-anchor","start").attr("dominant-baseline","hanging").text("Matched geom").attr("font-size",12).attr("fill","black"),y.append("text").attr("x",f-g(o.length)+5).attr("y",62).attr("text-anchor","start").attr("dominant-baseline","baseline").text(`${s.length}/${i.length}`).attr("font-size",14).attr("fill","black"),y.append("text").attr("x",f-g(l.length)-5).attr("y",37).attr("text-anchor","end").attr("dominant-baseline","hanging").text("Matched data").attr("font-size",12).attr("fill","black"),y.append("text").attr("x",f-g(l.length)-5).attr("y",62).attr("text-anchor","end").attr("dominant-baseline","baseline").text(`${s.length}/${o.length}`).attr("font-size",14).attr("fill","black"),y.append("line").attr("x1",0).attr("y1",d).attr("x2",g(i.length)).attr("y2",d).attr("stroke","black").attr("stroke-width",.5),y.append("line").attr("x1",.5).attr("y1",25).attr("x2",.5).attr("y2",35).attr("stroke","black").attr("stroke-width",.5),y.append("line").attr("x1",g(i.length)-.5).attr("y1",25).attr("x2",g(i.length)-.5).attr("y2",35).attr("stroke","black").attr("stroke-width",.5),y.append("line").attr("x1",f-g(o.length)).attr("y1",70).attr("x2",f).attr("y2",70).attr("stroke","black").attr("stroke-width",.5),y.append("line").attr("x1",999.5).attr("y1",65).attr("x2",999.5).attr("y2",75).attr("stroke","black").attr("stroke-width",.5),y.append("line").attr("x1",f-g(o.length)+.5).attr("y1",65).attr("x2",f-g(o.length)+.5).attr("y2",75).attr("stroke","black").attr("stroke-width",.5),y.append("text").attr("x",f-g(o.length/2)).attr("y",95).attr("text-anchor","middle").text("DATA").attr("font-size",28).attr("font-weight","bold").attr("fill","#CCC").attr("opacity",.45),y.append("text").attr("x",g(i.length/2)).attr("y",22).attr("text-anchor","middle").text("GEOMETRIES").attr("font-size",28).attr("font-weight","bold").attr("fill","#CCC").attr("opacity",.45),Object.assign(y.node(),{matched:s,unmatched_geom:u,unmatched_data:l,matched_data:c,matched_geom:h})},t.merge=function(t,e,n,r,i=!0){let o=JSON.parse(JSON.stringify(eh(t))),a=JSON.parse(JSON.stringify(n)),s=o.features.map((t=>t.properties[e])),u=n.map((t=>t[r]));s.filter((t=>u.includes(t)));let l=Object.keys(o.features[0].properties);if(Object.keys(a[0]).includes(r)){let t=qT.index(a,(t=>t[r]));o.features.forEach((n=>{const r=t.get(n.properties[e]);null!=r&&Object.keys(r).forEach((t=>{void 0!==l.find((e=>e==t))&&(r[`_${t}`]=r[t],delete r[t])})),n.properties=Object.assign(n.properties,r)})),!1===i&&(o.features=o.features.filter((t=>u.includes(t.properties[e]))))}return o},t.missing=ON,t.mushroom=IN,t.outline=jd,t.properties=YT,t.quickdraw=function(t,e=1e3,n=5){if(Array.isArray(t)){let r=[];return t.forEach((t=>r.push({type:"layer",geojson:t}))),zT({params:{margin:n,width:e},layers:r})}return zT({params:{margin:n,width:e},layers:[{type:"layer",geojson:t}]})},t.regularbubble=NN,t.rhumbs=DT,t.simple=fN,t.spikes=bT,t.subgeo=function(t={}){const e=t.geojson.type,n=eh(t.geojson),r=t.field,i=t.operator??"==",o=Array.isArray(t.array)?t.array:[t.array];let a=[];"=="==i&&o.forEach((t=>{a.push(n.features.filter((e=>e.properties[r]==t)))})),"!="==i&&o.forEach((t=>{a.push(n.features.filter((e=>e.properties[r]!=t)))}));const s={type:"FeatureCollection",features:a.flat()};return"FeatureCollection"==e?s:"Topology"==e?UT.topology({foo:s}):void 0},t.table2geo=function(t,e,n){return{type:"FeatureCollection",features:t.map((t=>({type:"Feature",properties:t,geometry:{type:"Point",coordinates:[+t[n],+t[e]]}})))}},Object.defineProperty(t,"__esModule",{value:!0})}));
